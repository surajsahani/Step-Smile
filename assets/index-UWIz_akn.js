var tO=Object.defineProperty;var nO=(t,e,n)=>e in t?tO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>nO(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function _g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rh={exports:{}},Do={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function aO(){if(Sb)return Do;Sb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:a,key:u,ref:s!==void 0?s:null,props:o}}return Do.Fragment=e,Do.jsx=n,Do.jsxs=n,Do}var Tb;function iO(){return Tb||(Tb=1,Rh.exports=aO()),Rh.exports}var E=iO(),kh={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function sO(){if(Ab)return je;Ab=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function _(I){return I===null||typeof I!="object"?null:(I=v&&I[v]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function T(I,H,ie){this.props=I,this.context=H,this.refs=A,this.updater=ie||x}T.prototype.isReactComponent={},T.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},T.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function k(){}k.prototype=T.prototype;function R(I,H,ie){this.props=I,this.context=H,this.refs=A,this.updater=ie||x}var z=R.prototype=new k;z.constructor=R,w(z,T.prototype),z.isPureReactComponent=!0;var P=Array.isArray;function Y(){}var W={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function ge(I,H,ie){var le=ie.ref;return{$$typeof:t,type:I,key:H,ref:le!==void 0?le:null,props:ie}}function Ce(I,H){return ge(I.type,H,I.props)}function ve(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function De(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ie){return H[ie]})}var We=/\/+/g;function oe(I,H){return typeof I=="object"&&I!==null&&I.key!=null?De(""+I.key):H.toString(36)}function re(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(Y,Y):(I.status="pending",I.then(function(H){I.status==="pending"&&(I.status="fulfilled",I.value=H)},function(H){I.status==="pending"&&(I.status="rejected",I.reason=H)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function j(I,H,ie,le,pe){var N=typeof I;(N==="undefined"||N==="boolean")&&(I=null);var S=!1;if(I===null)S=!0;else switch(N){case"bigint":case"string":case"number":S=!0;break;case"object":switch(I.$$typeof){case t:case e:S=!0;break;case m:return S=I._init,j(S(I._payload),H,ie,le,pe)}}if(S)return pe=pe(I),S=le===""?"."+oe(I,0):le,P(pe)?(ie="",S!=null&&(ie=S.replace(We,"$&/")+"/"),j(pe,H,ie,"",function(me){return me})):pe!=null&&(ve(pe)&&(pe=Ce(pe,ie+(pe.key==null||I&&I.key===pe.key?"":(""+pe.key).replace(We,"$&/")+"/")+S)),H.push(pe)),1;S=0;var V=le===""?".":le+":";if(P(I))for(var $=0;$<I.length;$++)le=I[$],N=V+oe(le,$),S+=j(le,H,ie,N,pe);else if($=_(I),typeof $=="function")for(I=$.call(I),$=0;!(le=I.next()).done;)le=le.value,N=V+oe(le,$++),S+=j(le,H,ie,N,pe);else if(N==="object"){if(typeof I.then=="function")return j(re(I),H,ie,le,pe);throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return S}function U(I,H,ie){if(I==null)return I;var le=[],pe=0;return j(I,le,"","",function(N){return H.call(ie,N,pe++)}),le}function Q(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(ie){(I._status===0||I._status===-1)&&(I._status=1,I._result=ie)},function(ie){(I._status===0||I._status===-1)&&(I._status=2,I._result=ie)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var X=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ae={map:U,forEach:function(I,H,ie){U(I,function(){H.apply(this,arguments)},ie)},count:function(I){var H=0;return U(I,function(){H++}),H},toArray:function(I){return U(I,function(H){return H})||[]},only:function(I){if(!ve(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return je.Activity=y,je.Children=ae,je.Component=T,je.Fragment=n,je.Profiler=s,je.PureComponent=R,je.StrictMode=a,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,je.__COMPILER_RUNTIME={__proto__:null,c:function(I){return W.H.useMemoCache(I)}},je.cache=function(I){return function(){return I.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(I,H,ie){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=w({},I.props),pe=I.key;if(H!=null)for(N in H.key!==void 0&&(pe=""+H.key),H)!O.call(H,N)||N==="key"||N==="__self"||N==="__source"||N==="ref"&&H.ref===void 0||(le[N]=H[N]);var N=arguments.length-2;if(N===1)le.children=ie;else if(1<N){for(var S=Array(N),V=0;V<N;V++)S[V]=arguments[V+2];le.children=S}return ge(I.type,pe,le)},je.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},je.createElement=function(I,H,ie){var le,pe={},N=null;if(H!=null)for(le in H.key!==void 0&&(N=""+H.key),H)O.call(H,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(pe[le]=H[le]);var S=arguments.length-2;if(S===1)pe.children=ie;else if(1<S){for(var V=Array(S),$=0;$<S;$++)V[$]=arguments[$+2];pe.children=V}if(I&&I.defaultProps)for(le in S=I.defaultProps,S)pe[le]===void 0&&(pe[le]=S[le]);return ge(I,N,pe)},je.createRef=function(){return{current:null}},je.forwardRef=function(I){return{$$typeof:c,render:I}},je.isValidElement=ve,je.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:Q}},je.memo=function(I,H){return{$$typeof:h,type:I,compare:H===void 0?null:H}},je.startTransition=function(I){var H=W.T,ie={};W.T=ie;try{var le=I(),pe=W.S;pe!==null&&pe(ie,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Y,X)}catch(N){X(N)}finally{H!==null&&ie.types!==null&&(H.types=ie.types),W.T=H}},je.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},je.use=function(I){return W.H.use(I)},je.useActionState=function(I,H,ie){return W.H.useActionState(I,H,ie)},je.useCallback=function(I,H){return W.H.useCallback(I,H)},je.useContext=function(I){return W.H.useContext(I)},je.useDebugValue=function(){},je.useDeferredValue=function(I,H){return W.H.useDeferredValue(I,H)},je.useEffect=function(I,H){return W.H.useEffect(I,H)},je.useEffectEvent=function(I){return W.H.useEffectEvent(I)},je.useId=function(){return W.H.useId()},je.useImperativeHandle=function(I,H,ie){return W.H.useImperativeHandle(I,H,ie)},je.useInsertionEffect=function(I,H){return W.H.useInsertionEffect(I,H)},je.useLayoutEffect=function(I,H){return W.H.useLayoutEffect(I,H)},je.useMemo=function(I,H){return W.H.useMemo(I,H)},je.useOptimistic=function(I,H){return W.H.useOptimistic(I,H)},je.useReducer=function(I,H,ie){return W.H.useReducer(I,H,ie)},je.useRef=function(I){return W.H.useRef(I)},je.useState=function(I){return W.H.useState(I)},je.useSyncExternalStore=function(I,H,ie){return W.H.useSyncExternalStore(I,H,ie)},je.useTransition=function(){return W.H.useTransition()},je.version="19.2.4",je}var Cb;function bg(){return Cb||(Cb=1,kh.exports=sO()),kh.exports}var ne=bg(),Ih={exports:{}},Po={},jh={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function rO(){return Nb||(Nb=1,(function(t){function e(j,U){var Q=j.length;j.push(U);e:for(;0<Q;){var X=Q-1>>>1,ae=j[X];if(0<s(ae,U))j[X]=U,j[Q]=ae,Q=X;else break e}}function n(j){return j.length===0?null:j[0]}function a(j){if(j.length===0)return null;var U=j[0],Q=j.pop();if(Q!==U){j[0]=Q;e:for(var X=0,ae=j.length,I=ae>>>1;X<I;){var H=2*(X+1)-1,ie=j[H],le=H+1,pe=j[le];if(0>s(ie,Q))le<ae&&0>s(pe,ie)?(j[X]=pe,j[le]=Q,X=le):(j[X]=ie,j[H]=Q,X=H);else if(le<ae&&0>s(pe,Q))j[X]=pe,j[le]=Q,X=le;else break e}}return U}function s(j,U){var Q=j.sortIndex-U.sortIndex;return Q!==0?Q:j.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],h=[],m=1,y=null,v=3,_=!1,x=!1,w=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function z(j){for(var U=n(h);U!==null;){if(U.callback===null)a(h);else if(U.startTime<=j)a(h),U.sortIndex=U.expirationTime,e(f,U);else break;U=n(h)}}function P(j){if(w=!1,z(j),!x)if(n(f)!==null)x=!0,Y||(Y=!0,De());else{var U=n(h);U!==null&&re(P,U.startTime-j)}}var Y=!1,W=-1,O=5,ge=-1;function Ce(){return A?!0:!(t.unstable_now()-ge<O)}function ve(){if(A=!1,Y){var j=t.unstable_now();ge=j;var U=!0;try{e:{x=!1,w&&(w=!1,k(W),W=-1),_=!0;var Q=v;try{t:{for(z(j),y=n(f);y!==null&&!(y.expirationTime>j&&Ce());){var X=y.callback;if(typeof X=="function"){y.callback=null,v=y.priorityLevel;var ae=X(y.expirationTime<=j);if(j=t.unstable_now(),typeof ae=="function"){y.callback=ae,z(j),U=!0;break t}y===n(f)&&a(f),z(j)}else a(f);y=n(f)}if(y!==null)U=!0;else{var I=n(h);I!==null&&re(P,I.startTime-j),U=!1}}break e}finally{y=null,v=Q,_=!1}U=void 0}}finally{U?De():Y=!1}}}var De;if(typeof R=="function")De=function(){R(ve)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,oe=We.port2;We.port1.onmessage=ve,De=function(){oe.postMessage(null)}}else De=function(){T(ve,0)};function re(j,U){W=T(function(){j(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(j){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var Q=v;v=U;try{return j()}finally{v=Q}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=v;v=j;try{return U()}finally{v=Q}},t.unstable_scheduleCallback=function(j,U,Q){var X=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?X+Q:X):Q=X,j){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,j={id:m++,callback:U,priorityLevel:j,startTime:Q,expirationTime:ae,sortIndex:-1},Q>X?(j.sortIndex=Q,e(h,j),n(f)===null&&j===n(h)&&(w?(k(W),W=-1):w=!0,re(P,Q-X))):(j.sortIndex=ae,e(f,j),x||_||(x=!0,Y||(Y=!0,De()))),j},t.unstable_shouldYield=Ce,t.unstable_wrapCallback=function(j){var U=v;return function(){var Q=v;v=U;try{return j.apply(this,arguments)}finally{v=Q}}}})(Mh)),Mh}var Ob;function oO(){return Ob||(Ob=1,jh.exports=rO()),jh.exports}var Lh={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function lO(){if(Rb)return Kt;Rb=1;var t=bg();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:f,containerInfo:h,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Kt.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,m)},Kt.flushSync=function(f){var h=u.T,m=a.p;try{if(u.T=null,a.p=2,f)return f()}finally{u.T=h,a.p=m,a.d.f()}},Kt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(f,h))},Kt.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},Kt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,y=c(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?a.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&a.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Kt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);a.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(f)},Kt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=c(m,h.crossOrigin);a.d.L(f,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Kt.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=c(h.as,h.crossOrigin);a.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(f)},Kt.requestFormReset=function(f){a.d.r(f)},Kt.unstable_batchedUpdates=function(f,h){return f(h)},Kt.useFormState=function(f,h,m){return u.H.useFormState(f,h,m)},Kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Kt.version="19.2.4",Kt}var kb;function uO(){if(kb)return Lh.exports;kb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lh.exports=lO(),Lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function cO(){if(Ib)return Po;Ib=1;var t=oO(),e=bg(),n=uO();function a(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(a(188))}function h(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(a(188));return r!==i?null:i}for(var l=i,d=r;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return f(p),i;if(g===d)return f(p),r;g=g.sibling}throw Error(a(188))}if(l.return!==d.return)l=p,d=g;else{for(var b=!1,C=p.child;C;){if(C===l){b=!0,l=p,d=g;break}if(C===d){b=!0,d=p,l=g;break}C=C.sibling}if(!b){for(C=g.child;C;){if(C===l){b=!0,l=g,d=p;break}if(C===d){b=!0,d=g,l=p;break}C=C.sibling}if(!b)throw Error(a(189))}}if(l.alternate!==d)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),Ce=Symbol.for("react.memo_cache_sentinel"),ve=Symbol.iterator;function De(i){return i===null||typeof i!="object"?null:(i=ve&&i[ve]||i["@@iterator"],typeof i=="function"?i:null)}var We=Symbol.for("react.client.reference");function oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===We?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case T:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case Y:return"SuspenseList";case ge:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case R:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case z:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case W:return r=i.displayName||null,r!==null?r:oe(i.type)||"Memo";case O:r=i._payload,i=i._init;try{return oe(i(r))}catch{}}return null}var re=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},X=[],ae=-1;function I(i){return{current:i}}function H(i){0>ae||(i.current=X[ae],X[ae]=null,ae--)}function ie(i,r){ae++,X[ae]=i.current,i.current=r}var le=I(null),pe=I(null),N=I(null),S=I(null);function V(i,r){switch(ie(N,r),ie(pe,i),ie(le,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Y_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Y_(r),i=Z_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(le),ie(le,i)}function $(){H(le),H(pe),H(N)}function me(i){i.memoizedState!==null&&ie(S,i);var r=le.current,l=Z_(r,i.type);r!==l&&(ie(pe,i),ie(le,l))}function Ie(i){pe.current===i&&(H(le),H(pe)),S.current===i&&(H(S),Io._currentValue=Q)}var Qe,ct;function yt(i){if(Qe===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Qe=r&&r[1]||"",ct=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+i+ct}var _n=!1;function J(i,r){if(!i||_n)return"";_n=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Z){var F=Z}Reflect.construct(i,[],te)}else{try{te.call()}catch(Z){F=Z}i.call(te.prototype)}}else{try{throw Error()}catch(Z){F=Z}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Z){if(Z&&F&&typeof Z.stack=="string")return[Z.stack,F.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=d.DetermineComponentFrameRoot(),b=g[0],C=g[1];if(b&&C){var M=b.split(`
`),q=C.split(`
`);for(p=d=0;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;for(;p<q.length&&!q[p].includes("DetermineComponentFrameRoot");)p++;if(d===M.length||p===q.length)for(d=M.length-1,p=q.length-1;1<=d&&0<=p&&M[d]!==q[p];)p--;for(;1<=d&&0<=p;d--,p--)if(M[d]!==q[p]){if(d!==1||p!==1)do if(d--,p--,0>p||M[d]!==q[p]){var K=`
`+M[d].replace(" at new "," at ");return i.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",i.displayName)),K}while(1<=d&&0<=p);break}}}finally{_n=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?yt(l):""}function ue(i,r){switch(i.tag){case 26:case 27:case 5:return yt(i.type);case 16:return yt("Lazy");case 13:return i.child!==r&&r!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return J(i.type,!1);case 11:return J(i.type.render,!1);case 1:return J(i.type,!0);case 31:return yt("Activity");default:return""}}function ke(i){try{var r="",l=null;do r+=ue(i,l),l=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var tt=Object.prototype.hasOwnProperty,Ct=t.unstable_scheduleCallback,As=t.unstable_cancelCallback,j2=t.unstable_shouldYield,M2=t.unstable_requestPaint,bn=t.unstable_now,L2=t.unstable_getCurrentPriorityLevel,Ty=t.unstable_ImmediatePriority,Ay=t.unstable_UserBlockingPriority,Ol=t.unstable_NormalPriority,D2=t.unstable_LowPriority,Cy=t.unstable_IdlePriority,P2=t.log,$2=t.unstable_setDisableYieldValue,Hr=null,wn=null;function Qa(i){if(typeof P2=="function"&&$2(i),wn&&typeof wn.setStrictMode=="function")try{wn.setStrictMode(Hr,i)}catch{}}var xn=Math.clz32?Math.clz32:B2,U2=Math.log,z2=Math.LN2;function B2(i){return i>>>=0,i===0?32:31-(U2(i)/z2|0)|0}var Rl=256,kl=262144,Il=4194304;function qi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jl(i,r,l){var d=i.pendingLanes;if(d===0)return 0;var p=0,g=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var C=d&134217727;return C!==0?(d=C&~g,d!==0?p=qi(d):(b&=C,b!==0?p=qi(b):l||(l=C&~i,l!==0&&(p=qi(l))))):(C=d&~g,C!==0?p=qi(C):b!==0?p=qi(b):l||(l=d&~i,l!==0&&(p=qi(l)))),p===0?0:r!==0&&r!==p&&(r&g)===0&&(g=p&-p,l=r&-r,g>=l||g===32&&(l&4194048)!==0)?r:p}function Gr(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function V2(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ny(){var i=Il;return Il<<=1,(Il&62914560)===0&&(Il=4194304),i}function yd(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function qr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function H2(i,r,l,d,p,g){var b=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var C=i.entanglements,M=i.expirationTimes,q=i.hiddenUpdates;for(l=b&~l;0<l;){var K=31-xn(l),te=1<<K;C[K]=0,M[K]=-1;var F=q[K];if(F!==null)for(q[K]=null,K=0;K<F.length;K++){var Z=F[K];Z!==null&&(Z.lane&=-536870913)}l&=~te}d!==0&&Oy(i,d,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~r))}function Oy(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-xn(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function Ry(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var d=31-xn(l),p=1<<d;p&r|i[d]&r&&(i[d]|=r),l&=~p}}function ky(i,r){var l=r&-r;return l=(l&42)!==0?1:vd(l),(l&(i.suspendedLanes|r))!==0?0:l}function vd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function _d(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Iy(){var i=U.p;return i!==0?i:(i=window.event,i===void 0?32:yb(i.type))}function jy(i,r){var l=U.p;try{return U.p=i,r()}finally{U.p=l}}var Ja=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ja,cn="__reactProps$"+Ja,Cs="__reactContainer$"+Ja,bd="__reactEvents$"+Ja,G2="__reactListeners$"+Ja,q2="__reactHandles$"+Ja,My="__reactResources$"+Ja,Fr="__reactMarker$"+Ja;function wd(i){delete i[Bt],delete i[cn],delete i[bd],delete i[G2],delete i[q2]}function Ns(i){var r=i[Bt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Cs]||l[Bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=tb(i);i!==null;){if(l=i[Bt])return l;i=tb(i)}return r}i=l,l=i.parentNode}return null}function Os(i){if(i=i[Bt]||i[Cs]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Yr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(a(33))}function Rs(i){var r=i[My];return r||(r=i[My]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(i){i[Fr]=!0}var Ly=new Set,Dy={};function Fi(i,r){ks(i,r),ks(i+"Capture",r)}function ks(i,r){for(Dy[i]=r,i=0;i<r.length;i++)Ly.add(r[i])}var F2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Py={},$y={};function Y2(i){return tt.call($y,i)?!0:tt.call(Py,i)?!1:F2.test(i)?$y[i]=!0:(Py[i]=!0,!1)}function Ml(i,r,l){if(Y2(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Ll(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function Ca(i,r,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+d)}}function Mn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Uy(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Z2(i,r,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,g=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return p.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function xd(i){if(!i._valueTracker){var r=Uy(i)?"checked":"value";i._valueTracker=Z2(i,r,""+i[r])}}function zy(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return i&&(d=Uy(i)?i.checked?"true":"false":i.value),i=d,i!==l?(r.setValue(i),!0):!1}function Dl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var X2=/[\n"\\]/g;function Ln(i){return i.replace(X2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ed(i,r,l,d,p,g,b,C){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Mn(r)):i.value!==""+Mn(r)&&(i.value=""+Mn(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?Sd(i,b,Mn(r)):l!=null?Sd(i,b,Mn(l)):d!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Mn(C):i.removeAttribute("name")}function By(i,r,l,d,p,g,b,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),r!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){xd(i);return}l=l!=null?""+Mn(l):"",r=r!=null?""+Mn(r):l,C||r===i.value||(i.value=r),i.defaultValue=r}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=C?i.checked:!!d,i.defaultChecked=!!d,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),xd(i)}function Sd(i,r,l){r==="number"&&Dl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Is(i,r,l,d){if(i=i.options,r){r={};for(var p=0;p<l.length;p++)r["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=r.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Mn(l),r=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}r!==null||i[p].disabled||(r=i[p])}r!==null&&(r.selected=!0)}}function Vy(i,r,l){if(r!=null&&(r=""+Mn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+Mn(l):""}function Hy(i,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(a(92));if(re(d)){if(1<d.length)throw Error(a(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=Mn(r),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),xd(i)}function js(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var K2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gy(i,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,l):typeof l!="number"||l===0||K2.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function qy(i,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var p in r)d=r[p],r.hasOwnProperty(p)&&l[p]!==d&&Gy(i,p,d)}else for(var g in r)r.hasOwnProperty(g)&&Gy(i,g,r[g])}function Td(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),J2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(i){return J2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Na(){}var Ad=null;function Cd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ms=null,Ls=null;function Fy(i){var r=Os(i);if(r&&(i=r.stateNode)){var l=i[cn]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ed(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ln(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==i&&d.form===i.form){var p=d[cn]||null;if(!p)throw Error(a(90));Ed(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===i.form&&zy(d)}break e;case"textarea":Vy(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Is(i,!!l.multiple,r,!1)}}}var Nd=!1;function Yy(i,r,l){if(Nd)return i(r,l);Nd=!0;try{var d=i(r);return d}finally{if(Nd=!1,(Ms!==null||Ls!==null)&&(Su(),Ms&&(r=Ms,i=Ls,Ls=Ms=null,Fy(r),i)))for(r=0;r<i.length;r++)Fy(i[r])}}function Zr(i,r){var l=i.stateNode;if(l===null)return null;var d=l[cn]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(Oa)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Od=!1}var Wa=null,Rd=null,$l=null;function Zy(){if($l)return $l;var i,r=Rd,l=r.length,d,p="value"in Wa?Wa.value:Wa.textContent,g=p.length;for(i=0;i<l&&r[i]===p[i];i++);var b=l-i;for(d=1;d<=b&&r[l-d]===p[g-d];d++);return $l=p.slice(i,1<d?1-d:void 0)}function Ul(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function zl(){return!0}function Xy(){return!1}function dn(i){function r(l,d,p,g,b){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?zl:Xy,this.isPropagationStopped=Xy,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=dn(Yi),Kr=y({},Yi,{view:0,detail:0}),W2=dn(Kr),kd,Id,Qr,Vl=y({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Md,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qr&&(Qr&&i.type==="mousemove"?(kd=i.screenX-Qr.screenX,Id=i.screenY-Qr.screenY):Id=kd=0,Qr=i),kd)},movementY:function(i){return"movementY"in i?i.movementY:Id}}),Ky=dn(Vl),eC=y({},Vl,{dataTransfer:0}),tC=dn(eC),nC=y({},Kr,{relatedTarget:0}),jd=dn(nC),aC=y({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),iC=dn(aC),sC=y({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rC=dn(sC),oC=y({},Yi,{data:0}),Qy=dn(oC),lC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dC(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=cC[i])?!!r[i]:!1}function Md(){return dC}var fC=y({},Kr,{key:function(i){if(i.key){var r=lC[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ul(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?uC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Md,charCode:function(i){return i.type==="keypress"?Ul(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ul(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hC=dn(fC),mC=y({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=dn(mC),pC=y({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Md}),gC=dn(pC),yC=y({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vC=dn(yC),_C=y({},Vl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),bC=dn(_C),wC=y({},Yi,{newState:0,oldState:0}),xC=dn(wC),EC=[9,13,27,32],Ld=Oa&&"CompositionEvent"in window,Jr=null;Oa&&"documentMode"in document&&(Jr=document.documentMode);var SC=Oa&&"TextEvent"in window&&!Jr,Wy=Oa&&(!Ld||Jr&&8<Jr&&11>=Jr),e0=" ",t0=!1;function n0(i,r){switch(i){case"keyup":return EC.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ds=!1;function TC(i,r){switch(i){case"compositionend":return a0(r);case"keypress":return r.which!==32?null:(t0=!0,e0);case"textInput":return i=r.data,i===e0&&t0?null:i;default:return null}}function AC(i,r){if(Ds)return i==="compositionend"||!Ld&&n0(i,r)?(i=Zy(),$l=Rd=Wa=null,Ds=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wy&&r.locale!=="ko"?null:r.data;default:return null}}var CC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!CC[i.type]:r==="textarea"}function s0(i,r,l,d){Ms?Ls?Ls.push(d):Ls=[d]:Ms=d,r=ku(r,"onChange"),0<r.length&&(l=new Bl("onChange","change",null,l,d),i.push({event:l,listeners:r}))}var Wr=null,eo=null;function NC(i){B_(i,0)}function Hl(i){var r=Yr(i);if(zy(r))return i}function r0(i,r){if(i==="change")return r}var o0=!1;if(Oa){var Dd;if(Oa){var Pd="oninput"in document;if(!Pd){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Pd=typeof l0.oninput=="function"}Dd=Pd}else Dd=!1;o0=Dd&&(!document.documentMode||9<document.documentMode)}function u0(){Wr&&(Wr.detachEvent("onpropertychange",c0),eo=Wr=null)}function c0(i){if(i.propertyName==="value"&&Hl(eo)){var r=[];s0(r,eo,i,Cd(i)),Yy(NC,r)}}function OC(i,r,l){i==="focusin"?(u0(),Wr=r,eo=l,Wr.attachEvent("onpropertychange",c0)):i==="focusout"&&u0()}function RC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hl(eo)}function kC(i,r){if(i==="click")return Hl(r)}function IC(i,r){if(i==="input"||i==="change")return Hl(r)}function jC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var En=typeof Object.is=="function"?Object.is:jC;function to(i,r){if(En(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!tt.call(r,p)||!En(i[p],r[p]))return!1}return!0}function d0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function f0(i,r){var l=d0(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=r&&d>=r)return{node:l,offset:r-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=d0(l)}}function h0(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?h0(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function m0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Dl(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Dl(i.document)}return r}function $d(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var MC=Oa&&"documentMode"in document&&11>=document.documentMode,Ps=null,Ud=null,no=null,zd=!1;function p0(i,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zd||Ps==null||Ps!==Dl(d)||(d=Ps,"selectionStart"in d&&$d(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),no&&to(no,d)||(no=d,d=ku(Ud,"onSelect"),0<d.length&&(r=new Bl("onSelect","select",null,r,l),i.push({event:r,listeners:d}),r.target=Ps)))}function Zi(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var $s={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Bd={},g0={};Oa&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Xi(i){if(Bd[i])return Bd[i];if(!$s[i])return i;var r=$s[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in g0)return Bd[i]=r[l];return i}var y0=Xi("animationend"),v0=Xi("animationiteration"),_0=Xi("animationstart"),LC=Xi("transitionrun"),DC=Xi("transitionstart"),PC=Xi("transitioncancel"),b0=Xi("transitionend"),w0=new Map,Vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vd.push("scrollEnd");function Kn(i,r){w0.set(i,r),Fi(r,[i])}var Gl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Dn=[],Us=0,Hd=0;function ql(){for(var i=Us,r=Hd=Us=0;r<i;){var l=Dn[r];Dn[r++]=null;var d=Dn[r];Dn[r++]=null;var p=Dn[r];Dn[r++]=null;var g=Dn[r];if(Dn[r++]=null,d!==null&&p!==null){var b=d.pending;b===null?p.next=p:(p.next=b.next,b.next=p),d.pending=p}g!==0&&x0(l,p,g)}}function Fl(i,r,l,d){Dn[Us++]=i,Dn[Us++]=r,Dn[Us++]=l,Dn[Us++]=d,Hd|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Gd(i,r,l,d){return Fl(i,r,l,d),Yl(i)}function Ki(i,r){return Fl(i,null,null,r),Yl(i)}function x0(i,r,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var p=!1,g=i.return;g!==null;)g.childLanes|=l,d=g.alternate,d!==null&&(d.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,p&&r!==null&&(p=31-xn(l),i=g.hiddenUpdates,d=i[p],d===null?i[p]=[r]:d.push(r),r.lane=l|536870912),g):null}function Yl(i){if(50<To)throw To=0,eh=null,Error(a(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var zs={};function $C(i,r,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(i,r,l,d){return new $C(i,r,l,d)}function qd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ra(i,r){var l=i.alternate;return l===null?(l=Sn(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function E0(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Zl(i,r,l,d,p,g){var b=0;if(d=i,typeof i=="function")qd(i)&&(b=1);else if(typeof i=="string")b=HN(i,l,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ge:return i=Sn(31,l,r,p),i.elementType=ge,i.lanes=g,i;case w:return Qi(l.children,p,g,r);case A:b=8,p|=24;break;case T:return i=Sn(12,l,r,p|2),i.elementType=T,i.lanes=g,i;case P:return i=Sn(13,l,r,p),i.elementType=P,i.lanes=g,i;case Y:return i=Sn(19,l,r,p),i.elementType=Y,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:b=10;break e;case k:b=9;break e;case z:b=11;break e;case W:b=14;break e;case O:b=16,d=null;break e}b=29,l=Error(a(130,i===null?"null":typeof i,"")),d=null}return r=Sn(b,l,r,p),r.elementType=i,r.type=d,r.lanes=g,r}function Qi(i,r,l,d){return i=Sn(7,i,d,r),i.lanes=l,i}function Fd(i,r,l){return i=Sn(6,i,null,r),i.lanes=l,i}function S0(i){var r=Sn(18,null,null,0);return r.stateNode=i,r}function Yd(i,r,l){return r=Sn(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var T0=new WeakMap;function Pn(i,r){if(typeof i=="object"&&i!==null){var l=T0.get(i);return l!==void 0?l:(r={value:i,source:r,stack:ke(r)},T0.set(i,r),r)}return{value:i,source:r,stack:ke(r)}}var Bs=[],Vs=0,Xl=null,ao=0,$n=[],Un=0,ei=null,ma=1,pa="";function ka(i,r){Bs[Vs++]=ao,Bs[Vs++]=Xl,Xl=i,ao=r}function A0(i,r,l){$n[Un++]=ma,$n[Un++]=pa,$n[Un++]=ei,ei=i;var d=ma;i=pa;var p=32-xn(d)-1;d&=~(1<<p),l+=1;var g=32-xn(r)+p;if(30<g){var b=p-p%5;g=(d&(1<<b)-1).toString(32),d>>=b,p-=b,ma=1<<32-xn(r)+p|l<<p|d,pa=g+i}else ma=1<<g|l<<p|d,pa=i}function Zd(i){i.return!==null&&(ka(i,1),A0(i,1,0))}function Xd(i){for(;i===Xl;)Xl=Bs[--Vs],Bs[Vs]=null,ao=Bs[--Vs],Bs[Vs]=null;for(;i===ei;)ei=$n[--Un],$n[Un]=null,pa=$n[--Un],$n[Un]=null,ma=$n[--Un],$n[Un]=null}function C0(i,r){$n[Un++]=ma,$n[Un++]=pa,$n[Un++]=ei,ma=r.id,pa=r.overflow,ei=i}var Vt=null,ht=null,Fe=!1,ti=null,zn=!1,Kd=Error(a(519));function ni(i){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw io(Pn(r,i)),Kd}function N0(i){var r=i.stateNode,l=i.type,d=i.memoizedProps;switch(r[Bt]=i,r[cn]=d,l){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(l=0;l<Co.length;l++)Ve(Co[l],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),By(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),Hy(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||q_(r.textContent,l)?(d.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),d.onScroll!=null&&Ve("scroll",r),d.onScrollEnd!=null&&Ve("scrollend",r),d.onClick!=null&&(r.onclick=Na),r=!0):r=!1,r||ni(i,!0)}function O0(i){for(Vt=i.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Vt=Vt.return}}function Hs(i){if(i!==Vt)return!1;if(!Fe)return O0(i),Fe=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||ph(i.type,i.memoizedProps)),l=!l),l&&ht&&ni(i),O0(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));ht=eb(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));ht=eb(i)}else r===27?(r=ht,gi(i.type)?(i=bh,bh=null,ht=i):ht=r):ht=Vt?Vn(i.stateNode.nextSibling):null;return!0}function Ji(){ht=Vt=null,Fe=!1}function Qd(){var i=ti;return i!==null&&(pn===null?pn=i:pn.push.apply(pn,i),ti=null),i}function io(i){ti===null?ti=[i]:ti.push(i)}var Jd=I(null),Wi=null,Ia=null;function ai(i,r,l){ie(Jd,r._currentValue),r._currentValue=l}function ja(i){i._currentValue=Jd.current,H(Jd)}function Wd(i,r,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===l)break;i=i.return}}function ef(i,r,l,d){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var b=p.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=p;for(var M=0;M<r.length;M++)if(C.context===r[M]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),Wd(g.return,l,i),d||(b=null);break e}g=C.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(a(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),Wd(b,l,i),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===i){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function Gs(i,r,l,d){i=null;for(var p=r,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var C=p.type;En(p.pendingProps.value,b.value)||(i!==null?i.push(C):i=[C])}}else if(p===S.current){if(b=p.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Io):i=[Io])}p=p.return}i!==null&&ef(r,i,l,d),r.flags|=262144}function Kl(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function es(i){Wi=i,Ia=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ht(i){return R0(Wi,i)}function Ql(i,r){return Wi===null&&es(i),R0(i,r)}function R0(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Ia===null){if(i===null)throw Error(a(308));Ia=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Ia=Ia.next=r;return l}var UC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},zC=t.unstable_scheduleCallback,BC=t.unstable_NormalPriority,Nt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tf(){return{controller:new UC,data:new Map,refCount:0}}function so(i){i.refCount--,i.refCount===0&&zC(BC,function(){i.controller.abort()})}var ro=null,nf=0,qs=0,Fs=null;function VC(i,r){if(ro===null){var l=ro=[];nf=0,qs=rh(),Fs={status:"pending",value:void 0,then:function(d){l.push(d)}}}return nf++,r.then(k0,k0),r}function k0(){if(--nf===0&&ro!==null){Fs!==null&&(Fs.status="fulfilled");var i=ro;ro=null,qs=0,Fs=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function HC(i,r){var l=[],d={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var p=0;p<l.length;p++)(0,l[p])(r)},function(p){for(d.status="rejected",d.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),d}var I0=j.S;j.S=function(i,r){p_=bn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&VC(i,r),I0!==null&&I0(i,r)};var ts=I(null);function af(){var i=ts.current;return i!==null?i:ut.pooledCache}function Jl(i,r){r===null?ie(ts,ts.current):ie(ts,r.pool)}function j0(){var i=af();return i===null?null:{parent:Nt._currentValue,pool:i}}var Ys=Error(a(460)),sf=Error(a(474)),Wl=Error(a(542)),eu={then:function(){}};function M0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function L0(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(Na,Na),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,P0(i),i;default:if(typeof r.status=="string")r.then(Na,Na);else{if(i=ut,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=d}},function(d){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,P0(i),i}throw as=r,Ys}}function ns(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(as=l,Ys):l}}var as=null;function D0(){if(as===null)throw Error(a(459));var i=as;return as=null,i}function P0(i){if(i===Ys||i===Wl)throw Error(a(483))}var Zs=null,oo=0;function tu(i){var r=oo;return oo+=1,Zs===null&&(Zs=[]),L0(Zs,i,r)}function lo(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function nu(i,r){throw r.$$typeof===v?Error(a(525)):(i=Object.prototype.toString.call(r),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function $0(i){function r(B,D){if(i){var G=B.deletions;G===null?(B.deletions=[D],B.flags|=16):G.push(D)}}function l(B,D){if(!i)return null;for(;D!==null;)r(B,D),D=D.sibling;return null}function d(B){for(var D=new Map;B!==null;)B.key!==null?D.set(B.key,B):D.set(B.index,B),B=B.sibling;return D}function p(B,D){return B=Ra(B,D),B.index=0,B.sibling=null,B}function g(B,D,G){return B.index=G,i?(G=B.alternate,G!==null?(G=G.index,G<D?(B.flags|=67108866,D):G):(B.flags|=67108866,D)):(B.flags|=1048576,D)}function b(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function C(B,D,G,ee){return D===null||D.tag!==6?(D=Fd(G,B.mode,ee),D.return=B,D):(D=p(D,G),D.return=B,D)}function M(B,D,G,ee){var Ne=G.type;return Ne===w?K(B,D,G.props.children,ee,G.key):D!==null&&(D.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===O&&ns(Ne)===D.type)?(D=p(D,G.props),lo(D,G),D.return=B,D):(D=Zl(G.type,G.key,G.props,null,B.mode,ee),lo(D,G),D.return=B,D)}function q(B,D,G,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==G.containerInfo||D.stateNode.implementation!==G.implementation?(D=Yd(G,B.mode,ee),D.return=B,D):(D=p(D,G.children||[]),D.return=B,D)}function K(B,D,G,ee,Ne){return D===null||D.tag!==7?(D=Qi(G,B.mode,ee,Ne),D.return=B,D):(D=p(D,G),D.return=B,D)}function te(B,D,G){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Fd(""+D,B.mode,G),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case _:return G=Zl(D.type,D.key,D.props,null,B.mode,G),lo(G,D),G.return=B,G;case x:return D=Yd(D,B.mode,G),D.return=B,D;case O:return D=ns(D),te(B,D,G)}if(re(D)||De(D))return D=Qi(D,B.mode,G,null),D.return=B,D;if(typeof D.then=="function")return te(B,tu(D),G);if(D.$$typeof===R)return te(B,Ql(B,D),G);nu(B,D)}return null}function F(B,D,G,ee){var Ne=D!==null?D.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ne!==null?null:C(B,D,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return G.key===Ne?M(B,D,G,ee):null;case x:return G.key===Ne?q(B,D,G,ee):null;case O:return G=ns(G),F(B,D,G,ee)}if(re(G)||De(G))return Ne!==null?null:K(B,D,G,ee,null);if(typeof G.then=="function")return F(B,D,tu(G),ee);if(G.$$typeof===R)return F(B,D,Ql(B,G),ee);nu(B,G)}return null}function Z(B,D,G,ee,Ne){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(G)||null,C(D,B,""+ee,Ne);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return B=B.get(ee.key===null?G:ee.key)||null,M(D,B,ee,Ne);case x:return B=B.get(ee.key===null?G:ee.key)||null,q(D,B,ee,Ne);case O:return ee=ns(ee),Z(B,D,G,ee,Ne)}if(re(ee)||De(ee))return B=B.get(G)||null,K(D,B,ee,Ne,null);if(typeof ee.then=="function")return Z(B,D,G,tu(ee),Ne);if(ee.$$typeof===R)return Z(B,D,G,Ql(D,ee),Ne);nu(D,ee)}return null}function _e(B,D,G,ee){for(var Ne=null,Ze=null,Se=D,$e=D=0,Ge=null;Se!==null&&$e<G.length;$e++){Se.index>$e?(Ge=Se,Se=null):Ge=Se.sibling;var Xe=F(B,Se,G[$e],ee);if(Xe===null){Se===null&&(Se=Ge);break}i&&Se&&Xe.alternate===null&&r(B,Se),D=g(Xe,D,$e),Ze===null?Ne=Xe:Ze.sibling=Xe,Ze=Xe,Se=Ge}if($e===G.length)return l(B,Se),Fe&&ka(B,$e),Ne;if(Se===null){for(;$e<G.length;$e++)Se=te(B,G[$e],ee),Se!==null&&(D=g(Se,D,$e),Ze===null?Ne=Se:Ze.sibling=Se,Ze=Se);return Fe&&ka(B,$e),Ne}for(Se=d(Se);$e<G.length;$e++)Ge=Z(Se,B,$e,G[$e],ee),Ge!==null&&(i&&Ge.alternate!==null&&Se.delete(Ge.key===null?$e:Ge.key),D=g(Ge,D,$e),Ze===null?Ne=Ge:Ze.sibling=Ge,Ze=Ge);return i&&Se.forEach(function(wi){return r(B,wi)}),Fe&&ka(B,$e),Ne}function Re(B,D,G,ee){if(G==null)throw Error(a(151));for(var Ne=null,Ze=null,Se=D,$e=D=0,Ge=null,Xe=G.next();Se!==null&&!Xe.done;$e++,Xe=G.next()){Se.index>$e?(Ge=Se,Se=null):Ge=Se.sibling;var wi=F(B,Se,Xe.value,ee);if(wi===null){Se===null&&(Se=Ge);break}i&&Se&&wi.alternate===null&&r(B,Se),D=g(wi,D,$e),Ze===null?Ne=wi:Ze.sibling=wi,Ze=wi,Se=Ge}if(Xe.done)return l(B,Se),Fe&&ka(B,$e),Ne;if(Se===null){for(;!Xe.done;$e++,Xe=G.next())Xe=te(B,Xe.value,ee),Xe!==null&&(D=g(Xe,D,$e),Ze===null?Ne=Xe:Ze.sibling=Xe,Ze=Xe);return Fe&&ka(B,$e),Ne}for(Se=d(Se);!Xe.done;$e++,Xe=G.next())Xe=Z(Se,B,$e,Xe.value,ee),Xe!==null&&(i&&Xe.alternate!==null&&Se.delete(Xe.key===null?$e:Xe.key),D=g(Xe,D,$e),Ze===null?Ne=Xe:Ze.sibling=Xe,Ze=Xe);return i&&Se.forEach(function(eO){return r(B,eO)}),Fe&&ka(B,$e),Ne}function lt(B,D,G,ee){if(typeof G=="object"&&G!==null&&G.type===w&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case _:e:{for(var Ne=G.key;D!==null;){if(D.key===Ne){if(Ne=G.type,Ne===w){if(D.tag===7){l(B,D.sibling),ee=p(D,G.props.children),ee.return=B,B=ee;break e}}else if(D.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===O&&ns(Ne)===D.type){l(B,D.sibling),ee=p(D,G.props),lo(ee,G),ee.return=B,B=ee;break e}l(B,D);break}else r(B,D);D=D.sibling}G.type===w?(ee=Qi(G.props.children,B.mode,ee,G.key),ee.return=B,B=ee):(ee=Zl(G.type,G.key,G.props,null,B.mode,ee),lo(ee,G),ee.return=B,B=ee)}return b(B);case x:e:{for(Ne=G.key;D!==null;){if(D.key===Ne)if(D.tag===4&&D.stateNode.containerInfo===G.containerInfo&&D.stateNode.implementation===G.implementation){l(B,D.sibling),ee=p(D,G.children||[]),ee.return=B,B=ee;break e}else{l(B,D);break}else r(B,D);D=D.sibling}ee=Yd(G,B.mode,ee),ee.return=B,B=ee}return b(B);case O:return G=ns(G),lt(B,D,G,ee)}if(re(G))return _e(B,D,G,ee);if(De(G)){if(Ne=De(G),typeof Ne!="function")throw Error(a(150));return G=Ne.call(G),Re(B,D,G,ee)}if(typeof G.then=="function")return lt(B,D,tu(G),ee);if(G.$$typeof===R)return lt(B,D,Ql(B,G),ee);nu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,D!==null&&D.tag===6?(l(B,D.sibling),ee=p(D,G),ee.return=B,B=ee):(l(B,D),ee=Fd(G,B.mode,ee),ee.return=B,B=ee),b(B)):l(B,D)}return function(B,D,G,ee){try{oo=0;var Ne=lt(B,D,G,ee);return Zs=null,Ne}catch(Se){if(Se===Ys||Se===Wl)throw Se;var Ze=Sn(29,Se,null,B.mode);return Ze.lanes=ee,Ze.return=B,Ze}finally{}}}var is=$0(!0),U0=$0(!1),ii=!1;function rf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function of(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function si(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ri(i,r,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var p=d.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),d.pending=r,r=Yl(i),x0(i,null,l),r}return Fl(i,d,r,l),Yl(i)}function uo(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,Ry(i,l)}}function lf(i,r){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?p=g=r:g=g.next=r}else p=g=r;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var uf=!1;function co(){if(uf){var i=Fs;if(i!==null)throw i}}function fo(i,r,l,d){uf=!1;var p=i.updateQueue;ii=!1;var g=p.firstBaseUpdate,b=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var M=C,q=M.next;M.next=null,b===null?g=q:b.next=q,b=M;var K=i.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==b&&(C===null?K.firstBaseUpdate=q:C.next=q,K.lastBaseUpdate=M))}if(g!==null){var te=p.baseState;b=0,K=q=M=null,C=g;do{var F=C.lane&-536870913,Z=F!==C.lane;if(Z?(He&F)===F:(d&F)===F){F!==0&&F===qs&&(uf=!0),K!==null&&(K=K.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var _e=i,Re=C;F=r;var lt=l;switch(Re.tag){case 1:if(_e=Re.payload,typeof _e=="function"){te=_e.call(lt,te,F);break e}te=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Re.payload,F=typeof _e=="function"?_e.call(lt,te,F):_e,F==null)break e;te=y({},te,F);break e;case 2:ii=!0}}F=C.callback,F!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=p.callbacks,Z===null?p.callbacks=[F]:Z.push(F))}else Z={lane:F,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?(q=K=Z,M=te):K=K.next=Z,b|=F;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);K===null&&(M=te),p.baseState=M,p.firstBaseUpdate=q,p.lastBaseUpdate=K,g===null&&(p.shared.lanes=0),di|=b,i.lanes=b,i.memoizedState=te}}function z0(i,r){if(typeof i!="function")throw Error(a(191,i));i.call(r)}function B0(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)z0(l[i],r)}var Xs=I(null),au=I(0);function V0(i,r){i=Va,ie(au,i),ie(Xs,r),Va=i|r.baseLanes}function cf(){ie(au,Va),ie(Xs,Xs.current)}function df(){Va=au.current,H(Xs),H(au)}var Tn=I(null),Bn=null;function oi(i){var r=i.alternate;ie(Tt,Tt.current&1),ie(Tn,i),Bn===null&&(r===null||Xs.current!==null||r.memoizedState!==null)&&(Bn=i)}function ff(i){ie(Tt,Tt.current),ie(Tn,i),Bn===null&&(Bn=i)}function H0(i){i.tag===22?(ie(Tt,Tt.current),ie(Tn,i),Bn===null&&(Bn=i)):li()}function li(){ie(Tt,Tt.current),ie(Tn,Tn.current)}function An(i){H(Tn),Bn===i&&(Bn=null),H(Tt)}var Tt=I(0);function iu(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||vh(l)||_h(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ma=0,Pe=null,rt=null,Ot=null,su=!1,Ks=!1,ss=!1,ru=0,ho=0,Qs=null,GC=0;function wt(){throw Error(a(321))}function hf(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!En(i[l],r[l]))return!1;return!0}function mf(i,r,l,d,p,g){return Ma=g,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=i===null||i.memoizedState===null?Av:Of,ss=!1,g=l(d,p),ss=!1,Ks&&(g=q0(r,l,d,p)),G0(i),g}function G0(i){j.H=go;var r=rt!==null&&rt.next!==null;if(Ma=0,Ot=rt=Pe=null,su=!1,ho=0,Qs=null,r)throw Error(a(300));i===null||Rt||(i=i.dependencies,i!==null&&Kl(i)&&(Rt=!0))}function q0(i,r,l,d){Pe=i;var p=0;do{if(Ks&&(Qs=null),ho=0,Ks=!1,25<=p)throw Error(a(301));if(p+=1,Ot=rt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=Cv,g=r(l,d)}while(Ks);return g}function qC(){var i=j.H,r=i.useState()[0];return r=typeof r.then=="function"?mo(r):r,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(Pe.flags|=1024),r}function pf(){var i=ru!==0;return ru=0,i}function gf(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function yf(i){if(su){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}su=!1}Ma=0,Ot=rt=Pe=null,Ks=!1,ho=ru=0,Qs=null}function Wt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Pe.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function At(){if(rt===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var r=Ot===null?Pe.memoizedState:Ot.next;if(r!==null)Ot=r,rt=i;else{if(i===null)throw Pe.alternate===null?Error(a(467)):Error(a(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ot===null?Pe.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mo(i){var r=ho;return ho+=1,Qs===null&&(Qs=[]),i=L0(Qs,i,r),r=Pe,(Ot===null?r.memoizedState:Ot.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?Av:Of),i}function lu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return mo(i);if(i.$$typeof===R)return Ht(i)}throw Error(a(438,String(i)))}function vf(i){var r=null,l=Pe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=Pe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=ou(),Pe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),d=0;d<i;d++)l[d]=Ce;return r.index++,l}function La(i,r){return typeof r=="function"?r(i):r}function uu(i){var r=At();return _f(r,rt,i)}function _f(i,r,l){var d=i.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=l;var p=i.baseQueue,g=d.pending;if(g!==null){if(p!==null){var b=p.next;p.next=g.next,g.next=b}r.baseQueue=p=g,d.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{r=p.next;var C=b=null,M=null,q=r,K=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(He&te)===te:(Ma&te)===te){var F=q.revertLane;if(F===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===qs&&(K=!0);else if((Ma&F)===F){q=q.next,F===qs&&(K=!0);continue}else te={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},M===null?(C=M=te,b=g):M=M.next=te,Pe.lanes|=F,di|=F;te=q.action,ss&&l(g,te),g=q.hasEagerState?q.eagerState:l(g,te)}else F={lane:te,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},M===null?(C=M=F,b=g):M=M.next=F,Pe.lanes|=te,di|=te;q=q.next}while(q!==null&&q!==r);if(M===null?b=g:M.next=C,!En(g,i.memoizedState)&&(Rt=!0,K&&(l=Fs,l!==null)))throw l;i.memoizedState=g,i.baseState=b,i.baseQueue=M,d.lastRenderedState=g}return p===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function bf(i){var r=At(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,g=r.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do g=i(g,b.action),b=b.next;while(b!==p);En(g,r.memoizedState)||(Rt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),l.lastRenderedState=g}return[g,d]}function F0(i,r,l){var d=Pe,p=At(),g=Fe;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=r();var b=!En((rt||p).memoizedState,l);if(b&&(p.memoizedState=l,Rt=!0),p=p.queue,Ef(X0.bind(null,d,p,i),[i]),p.getSnapshot!==r||b||Ot!==null&&Ot.memoizedState.tag&1){if(d.flags|=2048,Js(9,{destroy:void 0},Z0.bind(null,d,p,l,r),null),ut===null)throw Error(a(349));g||(Ma&127)!==0||Y0(d,r,l)}return l}function Y0(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Pe.updateQueue,r===null?(r=ou(),Pe.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Z0(i,r,l,d){r.value=l,r.getSnapshot=d,K0(r)&&Q0(i)}function X0(i,r,l){return l(function(){K0(r)&&Q0(i)})}function K0(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!En(i,l)}catch{return!0}}function Q0(i){var r=Ki(i,2);r!==null&&gn(r,i,2)}function wf(i){var r=Wt();if(typeof i=="function"){var l=i;if(i=l(),ss){Qa(!0);try{l()}finally{Qa(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:i},r}function J0(i,r,l,d){return i.baseState=l,_f(i,rt,typeof d=="function"?d:La)}function FC(i,r,l,d,p){if(fu(i))throw Error(a(485));if(i=r.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};j.T!==null?l(!0):g.isTransition=!1,d(g),l=r.pending,l===null?(g.next=r.pending=g,W0(r,g)):(g.next=l.next,r.pending=l.next=g)}}function W0(i,r){var l=r.action,d=r.payload,p=i.state;if(r.isTransition){var g=j.T,b={};j.T=b;try{var C=l(p,d),M=j.S;M!==null&&M(b,C),ev(i,r,C)}catch(q){xf(i,r,q)}finally{g!==null&&b.types!==null&&(g.types=b.types),j.T=g}}else try{g=l(p,d),ev(i,r,g)}catch(q){xf(i,r,q)}}function ev(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){tv(i,r,d)},function(d){return xf(i,r,d)}):tv(i,r,l)}function tv(i,r,l){r.status="fulfilled",r.value=l,nv(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,W0(i,l)))}function xf(i,r,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,nv(r),r=r.next;while(r!==d)}i.action=null}function nv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function av(i,r){return r}function iv(i,r){if(Fe){var l=ut.formState;if(l!==null){e:{var d=Pe;if(Fe){if(ht){t:{for(var p=ht,g=zn;p.nodeType!==8;){if(!g){p=null;break t}if(p=Vn(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){ht=Vn(p.nextSibling),d=p.data==="F!";break e}}ni(d)}d=!1}d&&(r=l[0])}}return l=Wt(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:av,lastRenderedState:r},l.queue=d,l=Ev.bind(null,Pe,d),d.dispatch=l,d=wf(!1),g=Nf.bind(null,Pe,!1,d.queue),d=Wt(),p={state:r,dispatch:null,action:i,pending:null},d.queue=p,l=FC.bind(null,Pe,p,g,l),p.dispatch=l,d.memoizedState=i,[r,l,!1]}function sv(i){var r=At();return rv(r,rt,i)}function rv(i,r,l){if(r=_f(i,r,av)[0],i=uu(La)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=mo(r)}catch(b){throw b===Ys?Wl:b}else d=r;r=At();var p=r.queue,g=p.dispatch;return l!==r.memoizedState&&(Pe.flags|=2048,Js(9,{destroy:void 0},YC.bind(null,p,l),null)),[d,g,i]}function YC(i,r){i.action=r}function ov(i){var r=At(),l=rt;if(l!==null)return rv(r,l,i);At(),r=r.memoizedState,l=At();var d=l.queue.dispatch;return l.memoizedState=i,[r,d,!1]}function Js(i,r,l,d){return i={tag:i,create:l,deps:d,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=ou(),Pe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,r.lastEffect=i),i}function lv(){return At().memoizedState}function cu(i,r,l,d){var p=Wt();Pe.flags|=i,p.memoizedState=Js(1|r,{destroy:void 0},l,d===void 0?null:d)}function du(i,r,l,d){var p=At();d=d===void 0?null:d;var g=p.memoizedState.inst;rt!==null&&d!==null&&hf(d,rt.memoizedState.deps)?p.memoizedState=Js(r,g,l,d):(Pe.flags|=i,p.memoizedState=Js(1|r,g,l,d))}function uv(i,r){cu(8390656,8,i,r)}function Ef(i,r){du(2048,8,i,r)}function ZC(i){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=ou(),Pe.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function cv(i){var r=At().memoizedState;return ZC({ref:r,nextImpl:i}),function(){if((Je&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function dv(i,r){return du(4,2,i,r)}function fv(i,r){return du(4,4,i,r)}function hv(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function mv(i,r,l){l=l!=null?l.concat([i]):null,du(4,4,hv.bind(null,r,i),l)}function Sf(){}function pv(i,r){var l=At();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&hf(r,d[1])?d[0]:(l.memoizedState=[i,r],i)}function gv(i,r){var l=At();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&hf(r,d[1]))return d[0];if(d=i(),ss){Qa(!0);try{i()}finally{Qa(!1)}}return l.memoizedState=[d,r],d}function Tf(i,r,l){return l===void 0||(Ma&1073741824)!==0&&(He&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=y_(),Pe.lanes|=i,di|=i,l)}function yv(i,r,l,d){return En(l,r)?l:Xs.current!==null?(i=Tf(i,l,d),En(i,r)||(Rt=!0),i):(Ma&42)===0||(Ma&1073741824)!==0&&(He&261930)===0?(Rt=!0,i.memoizedState=l):(i=y_(),Pe.lanes|=i,di|=i,r)}function vv(i,r,l,d,p){var g=U.p;U.p=g!==0&&8>g?g:8;var b=j.T,C={};j.T=C,Nf(i,!1,r,l);try{var M=p(),q=j.S;if(q!==null&&q(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=HC(M,d);po(i,r,K,On(i))}else po(i,r,d,On(i))}catch(te){po(i,r,{then:function(){},status:"rejected",reason:te},On())}finally{U.p=g,b!==null&&C.types!==null&&(b.types=C.types),j.T=b}}function XC(){}function Af(i,r,l,d){if(i.tag!==5)throw Error(a(476));var p=_v(i).queue;vv(i,p,r,Q,l===null?XC:function(){return bv(i),l(d)})}function _v(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:Q},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function bv(i){var r=_v(i);r.next===null&&(r=i.alternate.memoizedState),po(i,r.next.queue,{},On())}function Cf(){return Ht(Io)}function wv(){return At().memoizedState}function xv(){return At().memoizedState}function KC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=On();i=si(l);var d=ri(r,i,l);d!==null&&(gn(d,r,l),uo(d,r,l)),r={cache:tf()},i.payload=r;return}r=r.return}}function QC(i,r,l){var d=On();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fu(i)?Sv(r,l):(l=Gd(i,r,l,d),l!==null&&(gn(l,i,d),Tv(l,r,d)))}function Ev(i,r,l){var d=On();po(i,r,l,d)}function po(i,r,l,d){var p={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(fu(i))Sv(r,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,C=g(b,l);if(p.hasEagerState=!0,p.eagerState=C,En(C,b))return Fl(i,r,p,0),ut===null&&ql(),!1}catch{}finally{}if(l=Gd(i,r,p,d),l!==null)return gn(l,i,d),Tv(l,r,d),!0}return!1}function Nf(i,r,l,d){if(d={lane:2,revertLane:rh(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},fu(i)){if(r)throw Error(a(479))}else r=Gd(i,l,d,2),r!==null&&gn(r,i,2)}function fu(i){var r=i.alternate;return i===Pe||r!==null&&r===Pe}function Sv(i,r){Ks=su=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function Tv(i,r,l){if((l&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,Ry(i,l)}}var go={readContext:Ht,use:lu,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};go.useEffectEvent=wt;var Av={readContext:Ht,use:lu,useCallback:function(i,r){return Wt().memoizedState=[i,r===void 0?null:r],i},useContext:Ht,useEffect:uv,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,cu(4194308,4,hv.bind(null,r,i),l)},useLayoutEffect:function(i,r){return cu(4194308,4,i,r)},useInsertionEffect:function(i,r){cu(4,2,i,r)},useMemo:function(i,r){var l=Wt();r=r===void 0?null:r;var d=i();if(ss){Qa(!0);try{i()}finally{Qa(!1)}}return l.memoizedState=[d,r],d},useReducer:function(i,r,l){var d=Wt();if(l!==void 0){var p=l(r);if(ss){Qa(!0);try{l(r)}finally{Qa(!1)}}}else p=r;return d.memoizedState=d.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},d.queue=i,i=i.dispatch=QC.bind(null,Pe,i),[d.memoizedState,i]},useRef:function(i){var r=Wt();return i={current:i},r.memoizedState=i},useState:function(i){i=wf(i);var r=i.queue,l=Ev.bind(null,Pe,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Sf,useDeferredValue:function(i,r){var l=Wt();return Tf(l,i,r)},useTransition:function(){var i=wf(!1);return i=vv.bind(null,Pe,i.queue,!0,!1),Wt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var d=Pe,p=Wt();if(Fe){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),ut===null)throw Error(a(349));(He&127)!==0||Y0(d,r,l)}p.memoizedState=l;var g={value:l,getSnapshot:r};return p.queue=g,uv(X0.bind(null,d,g,i),[i]),d.flags|=2048,Js(9,{destroy:void 0},Z0.bind(null,d,g,l,r),null),l},useId:function(){var i=Wt(),r=ut.identifierPrefix;if(Fe){var l=pa,d=ma;l=(d&~(1<<32-xn(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=ru++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=GC++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Cf,useFormState:iv,useActionState:iv,useOptimistic:function(i){var r=Wt();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Nf.bind(null,Pe,!0,l),l.dispatch=r,[i,r]},useMemoCache:vf,useCacheRefresh:function(){return Wt().memoizedState=KC.bind(null,Pe)},useEffectEvent:function(i){var r=Wt(),l={impl:i};return r.memoizedState=l,function(){if((Je&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Of={readContext:Ht,use:lu,useCallback:pv,useContext:Ht,useEffect:Ef,useImperativeHandle:mv,useInsertionEffect:dv,useLayoutEffect:fv,useMemo:gv,useReducer:uu,useRef:lv,useState:function(){return uu(La)},useDebugValue:Sf,useDeferredValue:function(i,r){var l=At();return yv(l,rt.memoizedState,i,r)},useTransition:function(){var i=uu(La)[0],r=At().memoizedState;return[typeof i=="boolean"?i:mo(i),r]},useSyncExternalStore:F0,useId:wv,useHostTransitionStatus:Cf,useFormState:sv,useActionState:sv,useOptimistic:function(i,r){var l=At();return J0(l,rt,i,r)},useMemoCache:vf,useCacheRefresh:xv};Of.useEffectEvent=cv;var Cv={readContext:Ht,use:lu,useCallback:pv,useContext:Ht,useEffect:Ef,useImperativeHandle:mv,useInsertionEffect:dv,useLayoutEffect:fv,useMemo:gv,useReducer:bf,useRef:lv,useState:function(){return bf(La)},useDebugValue:Sf,useDeferredValue:function(i,r){var l=At();return rt===null?Tf(l,i,r):yv(l,rt.memoizedState,i,r)},useTransition:function(){var i=bf(La)[0],r=At().memoizedState;return[typeof i=="boolean"?i:mo(i),r]},useSyncExternalStore:F0,useId:wv,useHostTransitionStatus:Cf,useFormState:ov,useActionState:ov,useOptimistic:function(i,r){var l=At();return rt!==null?J0(l,rt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:vf,useCacheRefresh:xv};Cv.useEffectEvent=cv;function Rf(i,r,l,d){r=i.memoizedState,l=l(d,r),l=l==null?r:y({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var kf={enqueueSetState:function(i,r,l){i=i._reactInternals;var d=On(),p=si(d);p.payload=r,l!=null&&(p.callback=l),r=ri(i,p,d),r!==null&&(gn(r,i,d),uo(r,i,d))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var d=On(),p=si(d);p.tag=1,p.payload=r,l!=null&&(p.callback=l),r=ri(i,p,d),r!==null&&(gn(r,i,d),uo(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=On(),d=si(l);d.tag=2,r!=null&&(d.callback=r),r=ri(i,d,l),r!==null&&(gn(r,i,l),uo(r,i,l))}};function Nv(i,r,l,d,p,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,b):r.prototype&&r.prototype.isPureReactComponent?!to(l,d)||!to(p,g):!0}function Ov(i,r,l,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==i&&kf.enqueueReplaceState(r,r.state,null)}function rs(i,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(i=i.defaultProps){l===r&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Rv(i){Gl(i)}function kv(i){console.error(i)}function Iv(i){Gl(i)}function hu(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function jv(i,r,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function If(i,r,l){return l=si(l),l.tag=3,l.payload={element:null},l.callback=function(){hu(i,r)},l}function Mv(i){return i=si(i),i.tag=3,i}function Lv(i,r,l,d){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=d.value;i.payload=function(){return p(g)},i.callback=function(){jv(r,l,d)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){jv(r,l,d),typeof p!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function JC(i,r,l,d,p){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&Gs(r,l,p,!0),l=Tn.current,l!==null){switch(l.tag){case 31:case 13:return Bn===null?Tu():l.alternate===null&&xt===0&&(xt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,d===eu?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),ah(i,d,p)),!1;case 22:return l.flags|=65536,d===eu?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),ah(i,d,p)),!1}throw Error(a(435,l.tag))}return ah(i,d,p),Tu(),!1}if(Fe)return r=Tn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,d!==Kd&&(i=Error(a(422),{cause:d}),io(Pn(i,l)))):(d!==Kd&&(r=Error(a(423),{cause:d}),io(Pn(r,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,d=Pn(d,l),p=If(i.stateNode,d,p),lf(i,p),xt!==4&&(xt=2)),!1;var g=Error(a(520),{cause:d});if(g=Pn(g,l),So===null?So=[g]:So.push(g),xt!==4&&(xt=2),r===null)return!0;d=Pn(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=If(l.stateNode,d,i),lf(l,i),!1;case 1:if(r=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(fi===null||!fi.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Mv(p),Lv(p,i,l,d),lf(l,p),!1}l=l.return}while(l!==null);return!1}var jf=Error(a(461)),Rt=!1;function Gt(i,r,l,d){r.child=i===null?U0(r,null,l,d):is(r,i.child,l,d)}function Dv(i,r,l,d,p){l=l.render;var g=r.ref;if("ref"in d){var b={};for(var C in d)C!=="ref"&&(b[C]=d[C])}else b=d;return es(r),d=mf(i,r,l,b,g,p),C=pf(),i!==null&&!Rt?(gf(i,r,p),Da(i,r,p)):(Fe&&C&&Zd(r),r.flags|=1,Gt(i,r,d,p),r.child)}function Pv(i,r,l,d,p){if(i===null){var g=l.type;return typeof g=="function"&&!qd(g)&&g.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=g,$v(i,r,g,d,p)):(i=Zl(l.type,null,d,r,r.mode,p),i.ref=r.ref,i.return=r,r.child=i)}if(g=i.child,!Bf(i,p)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:to,l(b,d)&&i.ref===r.ref)return Da(i,r,p)}return r.flags|=1,i=Ra(g,d),i.ref=r.ref,i.return=r,r.child=i}function $v(i,r,l,d,p){if(i!==null){var g=i.memoizedProps;if(to(g,d)&&i.ref===r.ref)if(Rt=!1,r.pendingProps=d=g,Bf(i,p))(i.flags&131072)!==0&&(Rt=!0);else return r.lanes=i.lanes,Da(i,r,p)}return Mf(i,r,l,d,p)}function Uv(i,r,l,d){var p=d.children,g=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,i!==null){for(d=r.child=i.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~g}else d=0,r.child=null;return zv(i,r,g,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jl(r,g!==null?g.cachePool:null),g!==null?V0(r,g):cf(),H0(r);else return d=r.lanes=536870912,zv(i,r,g!==null?g.baseLanes|l:l,l,d)}else g!==null?(Jl(r,g.cachePool),V0(r,g),li(),r.memoizedState=null):(i!==null&&Jl(r,null),cf(),li());return Gt(i,r,p,l),r.child}function yo(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function zv(i,r,l,d,p){var g=af();return g=g===null?null:{parent:Nt._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},i!==null&&Jl(r,null),cf(),H0(r),i!==null&&Gs(i,r,d,!0),r.childLanes=p,null}function mu(i,r){return r=gu({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Bv(i,r,l){return is(r,i.child,null,l),i=mu(r,r.pendingProps),i.flags|=2,An(r),r.memoizedState=null,i}function WC(i,r,l){var d=r.pendingProps,p=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Fe){if(d.mode==="hidden")return i=mu(r,d),r.lanes=536870912,yo(null,i);if(ff(r),(i=ht)?(i=W_(i,zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ei!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=S0(i),l.return=r,r.child=l,Vt=r,ht=null)):i=null,i===null)throw ni(r);return r.lanes=536870912,null}return mu(r,d)}var g=i.memoizedState;if(g!==null){var b=g.dehydrated;if(ff(r),p)if(r.flags&256)r.flags&=-257,r=Bv(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(a(558));else if(Rt||Gs(i,r,l,!1),p=(l&i.childLanes)!==0,Rt||p){if(d=ut,d!==null&&(b=ky(d,l),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ki(i,b),gn(d,i,b),jf;Tu(),r=Bv(i,r,l)}else i=g.treeContext,ht=Vn(b.nextSibling),Vt=r,Fe=!0,ti=null,zn=!1,i!==null&&C0(r,i),r=mu(r,d),r.flags|=4096;return r}return i=Ra(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function pu(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function Mf(i,r,l,d,p){return es(r),l=mf(i,r,l,d,void 0,p),d=pf(),i!==null&&!Rt?(gf(i,r,p),Da(i,r,p)):(Fe&&d&&Zd(r),r.flags|=1,Gt(i,r,l,p),r.child)}function Vv(i,r,l,d,p,g){return es(r),r.updateQueue=null,l=q0(r,d,l,p),G0(i),d=pf(),i!==null&&!Rt?(gf(i,r,g),Da(i,r,g)):(Fe&&d&&Zd(r),r.flags|=1,Gt(i,r,l,g),r.child)}function Hv(i,r,l,d,p){if(es(r),r.stateNode===null){var g=zs,b=l.contextType;typeof b=="object"&&b!==null&&(g=Ht(b)),g=new l(d,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=kf,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=d,g.state=r.memoizedState,g.refs={},rf(r),b=l.contextType,g.context=typeof b=="object"&&b!==null?Ht(b):zs,g.state=r.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Rf(r,l,b,d),g.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&kf.enqueueReplaceState(g,g.state,null),fo(r,d,g,p),co(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){g=r.stateNode;var C=r.memoizedProps,M=rs(l,C);g.props=M;var q=g.context,K=l.contextType;b=zs,typeof K=="object"&&K!==null&&(b=Ht(K));var te=l.getDerivedStateFromProps;K=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,K||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||q!==b)&&Ov(r,g,d,b),ii=!1;var F=r.memoizedState;g.state=F,fo(r,d,g,p),co(),q=r.memoizedState,C||F!==q||ii?(typeof te=="function"&&(Rf(r,l,te,d),q=r.memoizedState),(M=ii||Nv(r,l,M,d,F,q,b))?(K||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=q),g.props=d,g.state=q,g.context=b,d=M):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{g=r.stateNode,of(i,r),b=r.memoizedProps,K=rs(l,b),g.props=K,te=r.pendingProps,F=g.context,q=l.contextType,M=zs,typeof q=="object"&&q!==null&&(M=Ht(q)),C=l.getDerivedStateFromProps,(q=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==te||F!==M)&&Ov(r,g,d,M),ii=!1,F=r.memoizedState,g.state=F,fo(r,d,g,p),co();var Z=r.memoizedState;b!==te||F!==Z||ii||i!==null&&i.dependencies!==null&&Kl(i.dependencies)?(typeof C=="function"&&(Rf(r,l,C,d),Z=r.memoizedState),(K=ii||Nv(r,l,K,d,F,Z,M)||i!==null&&i.dependencies!==null&&Kl(i.dependencies))?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,Z,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,Z,M)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Z),g.props=d,g.state=Z,g.context=M,d=K):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=1024),d=!1)}return g=d,pu(i,r),d=(r.flags&128)!==0,g||d?(g=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,i!==null&&d?(r.child=is(r,i.child,null,p),r.child=is(r,null,l,p)):Gt(i,r,l,p),r.memoizedState=g.state,i=r.child):i=Da(i,r,p),i}function Gv(i,r,l,d){return Ji(),r.flags|=256,Gt(i,r,l,d),r.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(i){return{baseLanes:i,cachePool:j0()}}function Pf(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=Nn),i}function qv(i,r,l){var d=r.pendingProps,p=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),b&&(p=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(Fe){if(p?oi(r):li(),(i=ht)?(i=W_(i,zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ei!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=S0(i),l.return=r,r.child=l,Vt=r,ht=null)):i=null,i===null)throw ni(r);return _h(i)?r.lanes=32:r.lanes=536870912,null}var C=d.children;return d=d.fallback,p?(li(),p=r.mode,C=gu({mode:"hidden",children:C},p),d=Qi(d,p,l,null),C.return=r,d.return=r,C.sibling=d,r.child=C,d=r.child,d.memoizedState=Df(l),d.childLanes=Pf(i,b,l),r.memoizedState=Lf,yo(null,d)):(oi(r),$f(r,C))}var M=i.memoizedState;if(M!==null&&(C=M.dehydrated,C!==null)){if(g)r.flags&256?(oi(r),r.flags&=-257,r=Uf(i,r,l)):r.memoizedState!==null?(li(),r.child=i.child,r.flags|=128,r=null):(li(),C=d.fallback,p=r.mode,d=gu({mode:"visible",children:d.children},p),C=Qi(C,p,l,null),C.flags|=2,d.return=r,C.return=r,d.sibling=C,r.child=d,is(r,i.child,null,l),d=r.child,d.memoizedState=Df(l),d.childLanes=Pf(i,b,l),r.memoizedState=Lf,r=yo(null,d));else if(oi(r),_h(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var q=b.dgst;b=q,d=Error(a(419)),d.stack="",d.digest=b,io({value:d,source:null,stack:null}),r=Uf(i,r,l)}else if(Rt||Gs(i,r,l,!1),b=(l&i.childLanes)!==0,Rt||b){if(b=ut,b!==null&&(d=ky(b,l),d!==0&&d!==M.retryLane))throw M.retryLane=d,Ki(i,d),gn(b,i,d),jf;vh(C)||Tu(),r=Uf(i,r,l)}else vh(C)?(r.flags|=192,r.child=i.child,r=null):(i=M.treeContext,ht=Vn(C.nextSibling),Vt=r,Fe=!0,ti=null,zn=!1,i!==null&&C0(r,i),r=$f(r,d.children),r.flags|=4096);return r}return p?(li(),C=d.fallback,p=r.mode,M=i.child,q=M.sibling,d=Ra(M,{mode:"hidden",children:d.children}),d.subtreeFlags=M.subtreeFlags&65011712,q!==null?C=Ra(q,C):(C=Qi(C,p,l,null),C.flags|=2),C.return=r,d.return=r,d.sibling=C,r.child=d,yo(null,d),d=r.child,C=i.child.memoizedState,C===null?C=Df(l):(p=C.cachePool,p!==null?(M=Nt._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=j0(),C={baseLanes:C.baseLanes|l,cachePool:p}),d.memoizedState=C,d.childLanes=Pf(i,b,l),r.memoizedState=Lf,yo(i.child,d)):(oi(r),l=i.child,i=l.sibling,l=Ra(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=l,r.memoizedState=null,l)}function $f(i,r){return r=gu({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function gu(i,r){return i=Sn(22,i,null,r),i.lanes=0,i}function Uf(i,r,l){return is(r,i.child,null,l),i=$f(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Fv(i,r,l){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),Wd(i.return,r,l)}function zf(i,r,l,d,p,g){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p,treeForkCount:g}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=l,b.tailMode=p,b.treeForkCount=g)}function Yv(i,r,l){var d=r.pendingProps,p=d.revealOrder,g=d.tail;d=d.children;var b=Tt.current,C=(b&2)!==0;if(C?(b=b&1|2,r.flags|=128):b&=1,ie(Tt,b),Gt(i,r,d,l),d=Fe?ao:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fv(i,l,r);else if(i.tag===19)Fv(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=r.child,p=null;l!==null;)i=l.alternate,i!==null&&iu(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=r.child,r.child=null):(p=l.sibling,l.sibling=null),zf(r,!1,p,l,g,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=r.child,r.child=null;p!==null;){if(i=p.alternate,i!==null&&iu(i)===null){r.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}zf(r,!0,l,null,g,d);break;case"together":zf(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Da(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),di|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Gs(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(a(153));if(r.child!==null){for(i=r.child,l=Ra(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Ra(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function Bf(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Kl(i)))}function eN(i,r,l){switch(r.tag){case 3:V(r,r.stateNode.containerInfo),ai(r,Nt,i.memoizedState.cache),Ji();break;case 27:case 5:me(r);break;case 4:V(r,r.stateNode.containerInfo);break;case 10:ai(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ff(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(oi(r),r.flags|=128,null):(l&r.child.childLanes)!==0?qv(i,r,l):(oi(r),i=Da(i,r,l),i!==null?i.sibling:null);oi(r);break;case 19:var p=(i.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(Gs(i,r,l,!1),d=(l&r.childLanes)!==0),p){if(d)return Yv(i,r,l);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(Tt,Tt.current),d)break;return null;case 22:return r.lanes=0,Uv(i,r,l,r.pendingProps);case 24:ai(r,Nt,i.memoizedState.cache)}return Da(i,r,l)}function Zv(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Rt=!0;else{if(!Bf(i,l)&&(r.flags&128)===0)return Rt=!1,eN(i,r,l);Rt=(i.flags&131072)!==0}else Rt=!1,Fe&&(r.flags&1048576)!==0&&A0(r,ao,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=ns(r.elementType),r.type=i,typeof i=="function")qd(i)?(d=rs(i,d),r.tag=1,r=Hv(null,r,i,d,l)):(r.tag=0,r=Mf(null,r,i,d,l));else{if(i!=null){var p=i.$$typeof;if(p===z){r.tag=11,r=Dv(null,r,i,d,l);break e}else if(p===W){r.tag=14,r=Pv(null,r,i,d,l);break e}}throw r=oe(i)||i,Error(a(306,r,""))}}return r;case 0:return Mf(i,r,r.type,r.pendingProps,l);case 1:return d=r.type,p=rs(d,r.pendingProps),Hv(i,r,d,p,l);case 3:e:{if(V(r,r.stateNode.containerInfo),i===null)throw Error(a(387));d=r.pendingProps;var g=r.memoizedState;p=g.element,of(i,r),fo(r,d,null,l);var b=r.memoizedState;if(d=b.cache,ai(r,Nt,d),d!==g.cache&&ef(r,[Nt],l,!0),co(),d=b.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Gv(i,r,d,l);break e}else if(d!==p){p=Pn(Error(a(424)),r),io(p),r=Gv(i,r,d,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ht=Vn(i.firstChild),Vt=r,Fe=!0,ti=null,zn=!0,l=U0(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ji(),d===p){r=Da(i,r,l);break e}Gt(i,r,d,l)}r=r.child}return r;case 26:return pu(i,r),i===null?(l=sb(r.type,null,r.pendingProps,null))?r.memoizedState=l:Fe||(l=r.type,i=r.pendingProps,d=Iu(N.current).createElement(l),d[Bt]=r,d[cn]=i,qt(d,l,i),Pt(d),r.stateNode=d):r.memoizedState=sb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return me(r),i===null&&Fe&&(d=r.stateNode=nb(r.type,r.pendingProps,N.current),Vt=r,zn=!0,p=ht,gi(r.type)?(bh=p,ht=Vn(d.firstChild)):ht=p),Gt(i,r,r.pendingProps.children,l),pu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Fe&&((p=d=ht)&&(d=RN(d,r.type,r.pendingProps,zn),d!==null?(r.stateNode=d,Vt=r,ht=Vn(d.firstChild),zn=!1,p=!0):p=!1),p||ni(r)),me(r),p=r.type,g=r.pendingProps,b=i!==null?i.memoizedProps:null,d=g.children,ph(p,g)?d=null:b!==null&&ph(p,b)&&(r.flags|=32),r.memoizedState!==null&&(p=mf(i,r,qC,null,null,l),Io._currentValue=p),pu(i,r),Gt(i,r,d,l),r.child;case 6:return i===null&&Fe&&((i=l=ht)&&(l=kN(l,r.pendingProps,zn),l!==null?(r.stateNode=l,Vt=r,ht=null,i=!0):i=!1),i||ni(r)),null;case 13:return qv(i,r,l);case 4:return V(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=is(r,null,d,l):Gt(i,r,d,l),r.child;case 11:return Dv(i,r,r.type,r.pendingProps,l);case 7:return Gt(i,r,r.pendingProps,l),r.child;case 8:return Gt(i,r,r.pendingProps.children,l),r.child;case 12:return Gt(i,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,ai(r,r.type,d.value),Gt(i,r,d.children,l),r.child;case 9:return p=r.type._context,d=r.pendingProps.children,es(r),p=Ht(p),d=d(p),r.flags|=1,Gt(i,r,d,l),r.child;case 14:return Pv(i,r,r.type,r.pendingProps,l);case 15:return $v(i,r,r.type,r.pendingProps,l);case 19:return Yv(i,r,l);case 31:return WC(i,r,l);case 22:return Uv(i,r,l,r.pendingProps);case 24:return es(r),d=Ht(Nt),i===null?(p=af(),p===null&&(p=ut,g=tf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),r.memoizedState={parent:d,cache:p},rf(r),ai(r,Nt,p)):((i.lanes&l)!==0&&(of(i,r),fo(r,null,null,l),co()),p=i.memoizedState,g=r.memoizedState,p.parent!==d?(p={parent:d,cache:d},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),ai(r,Nt,d)):(d=g.cache,ai(r,Nt,d),d!==p.cache&&ef(r,[Nt],l,!0))),Gt(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Pa(i){i.flags|=4}function Vf(i,r,l,d,p){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(w_())i.flags|=8192;else throw as=eu,sf}else i.flags&=-16777217}function Xv(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!cb(r))if(w_())i.flags|=8192;else throw as=eu,sf}function yu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ny():536870912,i.lanes|=r,nr|=r)}function vo(i,r){if(!Fe)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function mt(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(r)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,r}function tN(i,r,l){var d=r.pendingProps;switch(Xd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return l=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ja(Nt),$(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Hs(r)?Pa(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qd())),mt(r),null;case 26:var p=r.type,g=r.memoizedState;return i===null?(Pa(r),g!==null?(mt(r),Xv(r,g)):(mt(r),Vf(r,p,null,d,l))):g?g!==i.memoizedState?(Pa(r),mt(r),Xv(r,g)):(mt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&Pa(r),mt(r),Vf(r,p,i,d,l)),null;case 27:if(Ie(r),l=N.current,p=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Pa(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return mt(r),null}i=le.current,Hs(r)?N0(r):(i=nb(p,d,l),r.stateNode=i,Pa(r))}return mt(r),null;case 5:if(Ie(r),p=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Pa(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return mt(r),null}if(g=le.current,Hs(r))N0(r);else{var b=Iu(N.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof d.is=="string"?b.createElement("select",{is:d.is}):b.createElement("select"),d.multiple?g.multiple=!0:d.size&&(g.size=d.size);break;default:g=typeof d.is=="string"?b.createElement(p,{is:d.is}):b.createElement(p)}}g[Bt]=r,g[cn]=d;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=g;e:switch(qt(g,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Pa(r)}}return mt(r),Vf(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&Pa(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(a(166));if(i=N.current,Hs(r)){if(i=r.stateNode,l=r.memoizedProps,d=null,p=Vt,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}i[Bt]=r,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||q_(i.nodeValue,l)),i||ni(r,!0)}else i=Iu(i).createTextNode(d),i[Bt]=r,r.stateNode=i}return mt(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(d=Hs(r),l!==null){if(i===null){if(!d)throw Error(a(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[Bt]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),i=!1}else l=Qd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(An(r),r):(An(r),null);if((r.flags&128)!==0)throw Error(a(558))}return mt(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Hs(r),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(a(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));p[Bt]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),p=!1}else p=Qd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return r.flags&256?(An(r),r):(An(r),null)}return An(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=r.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==p&&(d.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),yu(r,r.updateQueue),mt(r),null);case 4:return $(),i===null&&ch(r.stateNode.containerInfo),mt(r),null;case 10:return ja(r.type),mt(r),null;case 19:if(H(Tt),d=r.memoizedState,d===null)return mt(r),null;if(p=(r.flags&128)!==0,g=d.rendering,g===null)if(p)vo(d,!1);else{if(xt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(g=iu(i),g!==null){for(r.flags|=128,vo(d,!1),i=g.updateQueue,r.updateQueue=i,yu(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)E0(l,i),l=l.sibling;return ie(Tt,Tt.current&1|2),Fe&&ka(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&bn()>xu&&(r.flags|=128,p=!0,vo(d,!1),r.lanes=4194304)}else{if(!p)if(i=iu(g),i!==null){if(r.flags|=128,p=!0,i=i.updateQueue,r.updateQueue=i,yu(r,i),vo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Fe)return mt(r),null}else 2*bn()-d.renderingStartTime>xu&&l!==536870912&&(r.flags|=128,p=!0,vo(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(i=d.last,i!==null?i.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=bn(),i.sibling=null,l=Tt.current,ie(Tt,p?l&1|2:l&1),Fe&&ka(r,d.treeForkCount),i):(mt(r),null);case 22:case 23:return An(r),df(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),l=r.updateQueue,l!==null&&yu(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),i!==null&&H(ts),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ja(Nt),mt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function nN(i,r){switch(Xd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ja(Nt),$(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ie(r),null;case 31:if(r.memoizedState!==null){if(An(r),r.alternate===null)throw Error(a(340));Ji()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(An(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ji()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return H(Tt),null;case 4:return $(),null;case 10:return ja(r.type),null;case 22:case 23:return An(r),df(),i!==null&&H(ts),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ja(Nt),null;case 25:return null;default:return null}}function Kv(i,r){switch(Xd(r),r.tag){case 3:ja(Nt),$();break;case 26:case 27:case 5:Ie(r);break;case 4:$();break;case 31:r.memoizedState!==null&&An(r);break;case 13:An(r);break;case 19:H(Tt);break;case 10:ja(r.type);break;case 22:case 23:An(r),df(),i!==null&&H(ts);break;case 24:ja(Nt)}}function _o(i,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&i)===i){d=void 0;var g=l.create,b=l.inst;d=g(),b.destroy=d}l=l.next}while(l!==p)}}catch(C){at(r,r.return,C)}}function ui(i,r,l){try{var d=r.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var g=p.next;d=g;do{if((d.tag&i)===i){var b=d.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,p=r;var M=l,q=C;try{q()}catch(K){at(p,M,K)}}}d=d.next}while(d!==g)}}catch(K){at(r,r.return,K)}}function Qv(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{B0(r,l)}catch(d){at(i,i.return,d)}}}function Jv(i,r,l){l.props=rs(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){at(i,r,d)}}function bo(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(p){at(i,r,p)}}function ga(i,r){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(p){at(i,r,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){at(i,r,p)}else l.current=null}function Wv(i){var r=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(p){at(i,i.return,p)}}function Hf(i,r,l){try{var d=i.stateNode;SN(d,i.type,l,r),d[cn]=r}catch(p){at(i,i.return,p)}}function e_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&gi(i.type)||i.tag===4}function Gf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||e_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&gi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qf(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Na));else if(d!==4&&(d===27&&gi(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(qf(i,r,l),i=i.sibling;i!==null;)qf(i,r,l),i=i.sibling}function vu(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(d!==4&&(d===27&&gi(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(vu(i,r,l),i=i.sibling;i!==null;)vu(i,r,l),i=i.sibling}function t_(i){var r=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,p=r.attributes;p.length;)r.removeAttributeNode(p[0]);qt(r,d,l),r[Bt]=i,r[cn]=l}catch(g){at(i,i.return,g)}}var $a=!1,kt=!1,Ff=!1,n_=typeof WeakSet=="function"?WeakSet:Set,$t=null;function aN(i,r){if(i=i.containerInfo,hh=Uu,i=m0(i),$d(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,C=-1,M=-1,q=0,K=0,te=i,F=null;t:for(;;){for(var Z;te!==l||p!==0&&te.nodeType!==3||(C=b+p),te!==g||d!==0&&te.nodeType!==3||(M=b+d),te.nodeType===3&&(b+=te.nodeValue.length),(Z=te.firstChild)!==null;)F=te,te=Z;for(;;){if(te===i)break t;if(F===l&&++q===p&&(C=b),F===g&&++K===d&&(M=b),(Z=te.nextSibling)!==null)break;te=F,F=te.parentNode}te=Z}l=C===-1||M===-1?null:{start:C,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(mh={focusedElem:i,selectionRange:l},Uu=!1,$t=r;$t!==null;)if(r=$t,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,$t=i;else for(;$t!==null;){switch(r=$t,g=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=r,p=g.memoizedProps,g=g.memoizedState,d=l.stateNode;try{var _e=rs(l.type,p);i=d.getSnapshotBeforeUpdate(_e,g),d.__reactInternalSnapshotBeforeUpdate=i}catch(Re){at(l,l.return,Re)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)yh(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=r.sibling,i!==null){i.return=r.return,$t=i;break}$t=r.return}}function a_(i,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:za(i,l),d&4&&_o(5,l);break;case 1:if(za(i,l),d&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(b){at(l,l.return,b)}else{var p=rs(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(p,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){at(l,l.return,b)}}d&64&&Qv(l),d&512&&bo(l,l.return);break;case 3:if(za(i,l),d&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{B0(i,r)}catch(b){at(l,l.return,b)}}break;case 27:r===null&&d&4&&t_(l);case 26:case 5:za(i,l),r===null&&d&4&&Wv(l),d&512&&bo(l,l.return);break;case 12:za(i,l);break;case 31:za(i,l),d&4&&r_(i,l);break;case 13:za(i,l),d&4&&o_(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=fN.bind(null,l),IN(i,l))));break;case 22:if(d=l.memoizedState!==null||$a,!d){r=r!==null&&r.memoizedState!==null||kt,p=$a;var g=kt;$a=d,(kt=r)&&!g?Ba(i,l,(l.subtreeFlags&8772)!==0):za(i,l),$a=p,kt=g}break;case 30:break;default:za(i,l)}}function i_(i){var r=i.alternate;r!==null&&(i.alternate=null,i_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&wd(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,fn=!1;function Ua(i,r,l){for(l=l.child;l!==null;)s_(i,r,l),l=l.sibling}function s_(i,r,l){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Hr,l)}catch{}switch(l.tag){case 26:kt||ga(l,r),Ua(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||ga(l,r);var d=vt,p=fn;gi(l.type)&&(vt=l.stateNode,fn=!1),Ua(i,r,l),Oo(l.stateNode),vt=d,fn=p;break;case 5:kt||ga(l,r);case 6:if(d=vt,p=fn,vt=null,Ua(i,r,l),vt=d,fn=p,vt!==null)if(fn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(l.stateNode)}catch(g){at(l,r,g)}else try{vt.removeChild(l.stateNode)}catch(g){at(l,r,g)}break;case 18:vt!==null&&(fn?(i=vt,Q_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),cr(i)):Q_(vt,l.stateNode));break;case 4:d=vt,p=fn,vt=l.stateNode.containerInfo,fn=!0,Ua(i,r,l),vt=d,fn=p;break;case 0:case 11:case 14:case 15:ui(2,l,r),kt||ui(4,l,r),Ua(i,r,l);break;case 1:kt||(ga(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Jv(l,r,d)),Ua(i,r,l);break;case 21:Ua(i,r,l);break;case 22:kt=(d=kt)||l.memoizedState!==null,Ua(i,r,l),kt=d;break;default:Ua(i,r,l)}}function r_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{cr(i)}catch(l){at(r,r.return,l)}}}function o_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{cr(i)}catch(l){at(r,r.return,l)}}function iN(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new n_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new n_),r;default:throw Error(a(435,i.tag))}}function _u(i,r){var l=iN(i);r.forEach(function(d){if(!l.has(d)){l.add(d);var p=hN.bind(null,i,d);d.then(p,p)}})}function hn(i,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d],g=i,b=r,C=b;e:for(;C!==null;){switch(C.tag){case 27:if(gi(C.type)){vt=C.stateNode,fn=!1;break e}break;case 5:vt=C.stateNode,fn=!1;break e;case 3:case 4:vt=C.stateNode.containerInfo,fn=!0;break e}C=C.return}if(vt===null)throw Error(a(160));s_(g,b,p),vt=null,fn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)l_(r,i),r=r.sibling}var Qn=null;function l_(i,r){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hn(r,i),mn(i),d&4&&(ui(3,i,i.return),_o(3,i),ui(5,i,i.return));break;case 1:hn(r,i),mn(i),d&512&&(kt||l===null||ga(l,l.return)),d&64&&$a&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var p=Qn;if(hn(r,i),mn(i),d&512&&(kt||l===null||ga(l,l.return)),d&4){var g=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Fr]||g[Bt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(d),p.head.insertBefore(g,p.querySelector("head > title"))),qt(g,d,l),g[Bt]=i,Pt(g),d=g;break e;case"link":var b=lb("link","href",p).get(d+(l.href||""));if(b){for(var C=0;C<b.length;C++)if(g=b[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(C,1);break t}}g=p.createElement(d),qt(g,d,l),p.head.appendChild(g);break;case"meta":if(b=lb("meta","content",p).get(d+(l.content||""))){for(C=0;C<b.length;C++)if(g=b[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(C,1);break t}}g=p.createElement(d),qt(g,d,l),p.head.appendChild(g);break;default:throw Error(a(468,d))}g[Bt]=i,Pt(g),d=g}i.stateNode=d}else ub(p,i.type,i.stateNode);else i.stateNode=ob(p,d,i.memoizedProps);else g!==d?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,d===null?ub(p,i.type,i.stateNode):ob(p,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Hf(i,i.memoizedProps,l.memoizedProps)}break;case 27:hn(r,i),mn(i),d&512&&(kt||l===null||ga(l,l.return)),l!==null&&d&4&&Hf(i,i.memoizedProps,l.memoizedProps);break;case 5:if(hn(r,i),mn(i),d&512&&(kt||l===null||ga(l,l.return)),i.flags&32){p=i.stateNode;try{js(p,"")}catch(_e){at(i,i.return,_e)}}d&4&&i.stateNode!=null&&(p=i.memoizedProps,Hf(i,p,l!==null?l.memoizedProps:p)),d&1024&&(Ff=!0);break;case 6:if(hn(r,i),mn(i),d&4){if(i.stateNode===null)throw Error(a(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(_e){at(i,i.return,_e)}}break;case 3:if(Lu=null,p=Qn,Qn=ju(r.containerInfo),hn(r,i),Qn=p,mn(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{cr(r.containerInfo)}catch(_e){at(i,i.return,_e)}Ff&&(Ff=!1,u_(i));break;case 4:d=Qn,Qn=ju(i.stateNode.containerInfo),hn(r,i),mn(i),Qn=d;break;case 12:hn(r,i),mn(i);break;case 31:hn(r,i),mn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 13:hn(r,i),mn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(wu=bn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 22:p=i.memoizedState!==null;var M=l!==null&&l.memoizedState!==null,q=$a,K=kt;if($a=q||p,kt=K||M,hn(r,i),kt=K,$a=q,mn(i),d&8192)e:for(r=i.stateNode,r._visibility=p?r._visibility&-2:r._visibility|1,p&&(l===null||M||$a||kt||os(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){M=l=r;try{if(g=M.stateNode,p)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=M.stateNode;var te=M.memoizedProps.style,F=te!=null&&te.hasOwnProperty("display")?te.display:null;C.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(_e){at(M,M.return,_e)}}}else if(r.tag===6){if(l===null){M=r;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(_e){at(M,M.return,_e)}}}else if(r.tag===18){if(l===null){M=r;try{var Z=M.stateNode;p?J_(Z,!0):J_(M.stateNode,!1)}catch(_e){at(M,M.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,_u(i,l))));break;case 19:hn(r,i),mn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 30:break;case 21:break;default:hn(r,i),mn(i)}}function mn(i){var r=i.flags;if(r&2){try{for(var l,d=i.return;d!==null;){if(e_(d)){l=d;break}d=d.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var p=l.stateNode,g=Gf(i);vu(i,g,p);break;case 5:var b=l.stateNode;l.flags&32&&(js(b,""),l.flags&=-33);var C=Gf(i);vu(i,C,b);break;case 3:case 4:var M=l.stateNode.containerInfo,q=Gf(i);qf(i,q,M);break;default:throw Error(a(161))}}catch(K){at(i,i.return,K)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function u_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;u_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function za(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)a_(i,r.alternate,r),r=r.sibling}function os(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ui(4,r,r.return),os(r);break;case 1:ga(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Jv(r,r.return,l),os(r);break;case 27:Oo(r.stateNode);case 26:case 5:ga(r,r.return),os(r);break;case 22:r.memoizedState===null&&os(r);break;case 30:os(r);break;default:os(r)}i=i.sibling}}function Ba(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,p=i,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:Ba(p,g,l),_o(4,g);break;case 1:if(Ba(p,g,l),d=g,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(q){at(d,d.return,q)}if(d=g,p=d.updateQueue,p!==null){var C=d.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)z0(M[p],C)}catch(q){at(d,d.return,q)}}l&&b&64&&Qv(g),bo(g,g.return);break;case 27:t_(g);case 26:case 5:Ba(p,g,l),l&&d===null&&b&4&&Wv(g),bo(g,g.return);break;case 12:Ba(p,g,l);break;case 31:Ba(p,g,l),l&&b&4&&r_(p,g);break;case 13:Ba(p,g,l),l&&b&4&&o_(p,g);break;case 22:g.memoizedState===null&&Ba(p,g,l),bo(g,g.return);break;case 30:break;default:Ba(p,g,l)}r=r.sibling}}function Yf(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&so(l))}function Zf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&so(i))}function Jn(i,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)c_(i,r,l,d),r=r.sibling}function c_(i,r,l,d){var p=r.flags;switch(r.tag){case 0:case 11:case 15:Jn(i,r,l,d),p&2048&&_o(9,r);break;case 1:Jn(i,r,l,d);break;case 3:Jn(i,r,l,d),p&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&so(i)));break;case 12:if(p&2048){Jn(i,r,l,d),i=r.stateNode;try{var g=r.memoizedProps,b=g.id,C=g.onPostCommit;typeof C=="function"&&C(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){at(r,r.return,M)}}else Jn(i,r,l,d);break;case 31:Jn(i,r,l,d);break;case 13:Jn(i,r,l,d);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?Jn(i,r,l,d):wo(i,r):g._visibility&2?Jn(i,r,l,d):(g._visibility|=2,Ws(i,r,l,d,(r.subtreeFlags&10256)!==0||!1)),p&2048&&Yf(b,r);break;case 24:Jn(i,r,l,d),p&2048&&Zf(r.alternate,r);break;default:Jn(i,r,l,d)}}function Ws(i,r,l,d,p){for(p=p&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=i,b=r,C=l,M=d,q=b.flags;switch(b.tag){case 0:case 11:case 15:Ws(g,b,C,M,p),_o(8,b);break;case 23:break;case 22:var K=b.stateNode;b.memoizedState!==null?K._visibility&2?Ws(g,b,C,M,p):wo(g,b):(K._visibility|=2,Ws(g,b,C,M,p)),p&&q&2048&&Yf(b.alternate,b);break;case 24:Ws(g,b,C,M,p),p&&q&2048&&Zf(b.alternate,b);break;default:Ws(g,b,C,M,p)}r=r.sibling}}function wo(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,d=r,p=d.flags;switch(d.tag){case 22:wo(l,d),p&2048&&Yf(d.alternate,d);break;case 24:wo(l,d),p&2048&&Zf(d.alternate,d);break;default:wo(l,d)}r=r.sibling}}var xo=8192;function er(i,r,l){if(i.subtreeFlags&xo)for(i=i.child;i!==null;)d_(i,r,l),i=i.sibling}function d_(i,r,l){switch(i.tag){case 26:er(i,r,l),i.flags&xo&&i.memoizedState!==null&&GN(l,Qn,i.memoizedState,i.memoizedProps);break;case 5:er(i,r,l);break;case 3:case 4:var d=Qn;Qn=ju(i.stateNode.containerInfo),er(i,r,l),Qn=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=xo,xo=16777216,er(i,r,l),xo=d):er(i,r,l));break;default:er(i,r,l)}}function f_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Eo(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];$t=d,m_(d,i)}f_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)h_(i),i=i.sibling}function h_(i){switch(i.tag){case 0:case 11:case 15:Eo(i),i.flags&2048&&ui(9,i,i.return);break;case 3:Eo(i);break;case 12:Eo(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,bu(i)):Eo(i);break;default:Eo(i)}}function bu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];$t=d,m_(d,i)}f_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ui(8,r,r.return),bu(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,bu(r));break;default:bu(r)}i=i.sibling}}function m_(i,r){for(;$t!==null;){var l=$t;switch(l.tag){case 0:case 11:case 15:ui(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:so(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,$t=d;else e:for(l=i;$t!==null;){d=$t;var p=d.sibling,g=d.return;if(i_(d),d===l){$t=null;break e}if(p!==null){p.return=g,$t=p;break e}$t=g}}}var sN={getCacheForType:function(i){var r=Ht(Nt),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return Ht(Nt).controller.signal}},rN=typeof WeakMap=="function"?WeakMap:Map,Je=0,ut=null,Be=null,He=0,nt=0,Cn=null,ci=!1,tr=!1,Xf=!1,Va=0,xt=0,di=0,ls=0,Kf=0,Nn=0,nr=0,So=null,pn=null,Qf=!1,wu=0,p_=0,xu=1/0,Eu=null,fi=null,Mt=0,hi=null,ar=null,Ha=0,Jf=0,Wf=null,g_=null,To=0,eh=null;function On(){return(Je&2)!==0&&He!==0?He&-He:j.T!==null?rh():Iy()}function y_(){if(Nn===0)if((He&536870912)===0||Fe){var i=kl;kl<<=1,(kl&3932160)===0&&(kl=262144),Nn=i}else Nn=536870912;return i=Tn.current,i!==null&&(i.flags|=32),Nn}function gn(i,r,l){(i===ut&&(nt===2||nt===9)||i.cancelPendingCommit!==null)&&(ir(i,0),mi(i,He,Nn,!1)),qr(i,l),((Je&2)===0||i!==ut)&&(i===ut&&((Je&2)===0&&(ls|=l),xt===4&&mi(i,He,Nn,!1)),ya(i))}function v_(i,r,l){if((Je&6)!==0)throw Error(a(327));var d=!l&&(r&127)===0&&(r&i.expiredLanes)===0||Gr(i,r),p=d?uN(i,r):nh(i,r,!0),g=d;do{if(p===0){tr&&!d&&mi(i,r,0,!1);break}else{if(l=i.current.alternate,g&&!oN(l)){p=nh(i,r,!1),g=!1;continue}if(p===2){if(g=r,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var C=i;p=So;var M=C.current.memoizedState.isDehydrated;if(M&&(ir(C,b).flags|=256),b=nh(C,b,!1),b!==2){if(Xf&&!M){C.errorRecoveryDisabledLanes|=g,ls|=g,p=4;break e}g=pn,pn=p,g!==null&&(pn===null?pn=g:pn.push.apply(pn,g))}p=b}if(g=!1,p!==2)continue}}if(p===1){ir(i,0),mi(i,r,0,!0);break}e:{switch(d=i,g=p,g){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:mi(d,r,Nn,!ci);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(p=wu+300-bn(),10<p)){if(mi(d,r,Nn,!ci),jl(d,0,!0)!==0)break e;Ha=r,d.timeoutHandle=X_(__.bind(null,d,l,pn,Eu,Qf,r,Nn,ls,nr,ci,g,"Throttled",-0,0),p);break e}__(d,l,pn,Eu,Qf,r,Nn,ls,nr,ci,g,null,-0,0)}}break}while(!0);ya(i)}function __(i,r,l,d,p,g,b,C,M,q,K,te,F,Z){if(i.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},d_(r,g,te);var _e=(g&62914560)===g?wu-bn():(g&4194048)===g?p_-bn():0;if(_e=qN(te,_e),_e!==null){Ha=g,i.cancelPendingCommit=_e(C_.bind(null,i,r,g,l,d,p,b,C,M,K,te,null,F,Z)),mi(i,g,b,!q);return}}C_(i,r,g,l,d,p,b,C,M)}function oN(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var p=l[d],g=p.getSnapshot;p=p.value;try{if(!En(g(),p))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mi(i,r,l,d){r&=~Kf,r&=~ls,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var p=r;0<p;){var g=31-xn(p),b=1<<g;d[g]=-1,p&=~b}l!==0&&Oy(i,l,r)}function Su(){return(Je&6)===0?(Ao(0),!1):!0}function th(){if(Be!==null){if(nt===0)var i=Be.return;else i=Be,Ia=Wi=null,yf(i),Zs=null,oo=0,i=Be;for(;i!==null;)Kv(i.alternate,i),i=i.return;Be=null}}function ir(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,CN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ha=0,th(),ut=i,Be=l=Ra(i.current,null),He=r,nt=0,Cn=null,ci=!1,tr=Gr(i,r),Xf=!1,nr=Nn=Kf=ls=di=xt=0,pn=So=null,Qf=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var p=31-xn(d),g=1<<p;r|=i[p],d&=~g}return Va=r,ql(),l}function b_(i,r){Pe=null,j.H=go,r===Ys||r===Wl?(r=D0(),nt=3):r===sf?(r=D0(),nt=4):nt=r===jf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Cn=r,Be===null&&(xt=1,hu(i,Pn(r,i.current)))}function w_(){var i=Tn.current;return i===null?!0:(He&4194048)===He?Bn===null:(He&62914560)===He||(He&536870912)!==0?i===Bn:!1}function x_(){var i=j.H;return j.H=go,i===null?go:i}function E_(){var i=j.A;return j.A=sN,i}function Tu(){xt=4,ci||(He&4194048)!==He&&Tn.current!==null||(tr=!0),(di&134217727)===0&&(ls&134217727)===0||ut===null||mi(ut,He,Nn,!1)}function nh(i,r,l){var d=Je;Je|=2;var p=x_(),g=E_();(ut!==i||He!==r)&&(Eu=null,ir(i,r)),r=!1;var b=xt;e:do try{if(nt!==0&&Be!==null){var C=Be,M=Cn;switch(nt){case 8:th(),b=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(r=!0);var q=nt;if(nt=0,Cn=null,sr(i,C,M,q),l&&tr){b=0;break e}break;default:q=nt,nt=0,Cn=null,sr(i,C,M,q)}}lN(),b=xt;break}catch(K){b_(i,K)}while(!0);return r&&i.shellSuspendCounter++,Ia=Wi=null,Je=d,j.H=p,j.A=g,Be===null&&(ut=null,He=0,ql()),b}function lN(){for(;Be!==null;)S_(Be)}function uN(i,r){var l=Je;Je|=2;var d=x_(),p=E_();ut!==i||He!==r?(Eu=null,xu=bn()+500,ir(i,r)):tr=Gr(i,r);e:do try{if(nt!==0&&Be!==null){r=Be;var g=Cn;t:switch(nt){case 1:nt=0,Cn=null,sr(i,r,g,1);break;case 2:case 9:if(M0(g)){nt=0,Cn=null,T_(r);break}r=function(){nt!==2&&nt!==9||ut!==i||(nt=7),ya(i)},g.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:M0(g)?(nt=0,Cn=null,T_(r)):(nt=0,Cn=null,sr(i,r,g,7));break;case 5:var b=null;switch(Be.tag){case 26:b=Be.memoizedState;case 5:case 27:var C=Be;if(b?cb(b):C.stateNode.complete){nt=0,Cn=null;var M=C.sibling;if(M!==null)Be=M;else{var q=C.return;q!==null?(Be=q,Au(q)):Be=null}break t}}nt=0,Cn=null,sr(i,r,g,5);break;case 6:nt=0,Cn=null,sr(i,r,g,6);break;case 8:th(),xt=6;break e;default:throw Error(a(462))}}cN();break}catch(K){b_(i,K)}while(!0);return Ia=Wi=null,j.H=d,j.A=p,Je=l,Be!==null?0:(ut=null,He=0,ql(),xt)}function cN(){for(;Be!==null&&!j2();)S_(Be)}function S_(i){var r=Zv(i.alternate,i,Va);i.memoizedProps=i.pendingProps,r===null?Au(i):Be=r}function T_(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=Vv(l,r,r.pendingProps,r.type,void 0,He);break;case 11:r=Vv(l,r,r.pendingProps,r.type.render,r.ref,He);break;case 5:yf(r);default:Kv(l,r),r=Be=E0(r,Va),r=Zv(l,r,Va)}i.memoizedProps=i.pendingProps,r===null?Au(i):Be=r}function sr(i,r,l,d){Ia=Wi=null,yf(r),Zs=null,oo=0;var p=r.return;try{if(JC(i,p,r,l,He)){xt=1,hu(i,Pn(l,i.current)),Be=null;return}}catch(g){if(p!==null)throw Be=p,g;xt=1,hu(i,Pn(l,i.current)),Be=null;return}r.flags&32768?(Fe||d===1?i=!0:tr||(He&536870912)!==0?i=!1:(ci=i=!0,(d===2||d===9||d===3||d===6)&&(d=Tn.current,d!==null&&d.tag===13&&(d.flags|=16384))),A_(r,i)):Au(r)}function Au(i){var r=i;do{if((r.flags&32768)!==0){A_(r,ci);return}i=r.return;var l=tN(r.alternate,r,Va);if(l!==null){Be=l;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=i}while(r!==null);xt===0&&(xt=5)}function A_(i,r){do{var l=nN(i.alternate,i);if(l!==null){l.flags&=32767,Be=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){Be=i;return}Be=i=l}while(i!==null);xt=6,Be=null}function C_(i,r,l,d,p,g,b,C,M){i.cancelPendingCommit=null;do Cu();while(Mt!==0);if((Je&6)!==0)throw Error(a(327));if(r!==null){if(r===i.current)throw Error(a(177));if(g=r.lanes|r.childLanes,g|=Hd,H2(i,l,g,b,C,M),i===ut&&(Be=ut=null,He=0),ar=r,hi=i,Ha=l,Jf=g,Wf=p,g_=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,mN(Ol,function(){return I_(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=j.T,j.T=null,p=U.p,U.p=2,b=Je,Je|=4;try{aN(i,r,l)}finally{Je=b,U.p=p,j.T=d}}Mt=1,N_(),O_(),R_()}}function N_(){if(Mt===1){Mt=0;var i=hi,r=ar,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=j.T,j.T=null;var d=U.p;U.p=2;var p=Je;Je|=4;try{l_(r,i);var g=mh,b=m0(i.containerInfo),C=g.focusedElem,M=g.selectionRange;if(b!==C&&C&&C.ownerDocument&&h0(C.ownerDocument.documentElement,C)){if(M!==null&&$d(C)){var q=M.start,K=M.end;if(K===void 0&&(K=q),"selectionStart"in C)C.selectionStart=q,C.selectionEnd=Math.min(K,C.value.length);else{var te=C.ownerDocument||document,F=te&&te.defaultView||window;if(F.getSelection){var Z=F.getSelection(),_e=C.textContent.length,Re=Math.min(M.start,_e),lt=M.end===void 0?Re:Math.min(M.end,_e);!Z.extend&&Re>lt&&(b=lt,lt=Re,Re=b);var B=f0(C,Re),D=f0(C,lt);if(B&&D&&(Z.rangeCount!==1||Z.anchorNode!==B.node||Z.anchorOffset!==B.offset||Z.focusNode!==D.node||Z.focusOffset!==D.offset)){var G=te.createRange();G.setStart(B.node,B.offset),Z.removeAllRanges(),Re>lt?(Z.addRange(G),Z.extend(D.node,D.offset)):(G.setEnd(D.node,D.offset),Z.addRange(G))}}}}for(te=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&te.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<te.length;C++){var ee=te[C];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Uu=!!hh,mh=hh=null}finally{Je=p,U.p=d,j.T=l}}i.current=r,Mt=2}}function O_(){if(Mt===2){Mt=0;var i=hi,r=ar,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=j.T,j.T=null;var d=U.p;U.p=2;var p=Je;Je|=4;try{a_(i,r.alternate,r)}finally{Je=p,U.p=d,j.T=l}}Mt=3}}function R_(){if(Mt===4||Mt===3){Mt=0,M2();var i=hi,r=ar,l=Ha,d=g_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Mt=5:(Mt=0,ar=hi=null,k_(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(fi=null),_d(l),r=r.stateNode,wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Hr,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=j.T,p=U.p,U.p=2,j.T=null;try{for(var g=i.onRecoverableError,b=0;b<d.length;b++){var C=d[b];g(C.value,{componentStack:C.stack})}}finally{j.T=r,U.p=p}}(Ha&3)!==0&&Cu(),ya(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===eh?To++:(To=0,eh=i):To=0,Ao(0)}}function k_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,so(r)))}function Cu(){return N_(),O_(),R_(),I_()}function I_(){if(Mt!==5)return!1;var i=hi,r=Jf;Jf=0;var l=_d(Ha),d=j.T,p=U.p;try{U.p=32>l?32:l,j.T=null,l=Wf,Wf=null;var g=hi,b=Ha;if(Mt=0,ar=hi=null,Ha=0,(Je&6)!==0)throw Error(a(331));var C=Je;if(Je|=4,h_(g.current),c_(g,g.current,b,l),Je=C,Ao(0,!1),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Hr,g)}catch{}return!0}finally{U.p=p,j.T=d,k_(i,r)}}function j_(i,r,l){r=Pn(l,r),r=If(i.stateNode,r,2),i=ri(i,r,2),i!==null&&(qr(i,2),ya(i))}function at(i,r,l){if(i.tag===3)j_(i,i,l);else for(;r!==null;){if(r.tag===3){j_(r,i,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(fi===null||!fi.has(d))){i=Pn(l,i),l=Mv(2),d=ri(r,l,2),d!==null&&(Lv(l,d,r,i),qr(d,2),ya(d));break}}r=r.return}}function ah(i,r,l){var d=i.pingCache;if(d===null){d=i.pingCache=new rN;var p=new Set;d.set(r,p)}else p=d.get(r),p===void 0&&(p=new Set,d.set(r,p));p.has(l)||(Xf=!0,p.add(l),i=dN.bind(null,i,r,l),r.then(i,i))}function dN(i,r,l){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,ut===i&&(He&l)===l&&(xt===4||xt===3&&(He&62914560)===He&&300>bn()-wu?(Je&2)===0&&ir(i,0):Kf|=l,nr===He&&(nr=0)),ya(i)}function M_(i,r){r===0&&(r=Ny()),i=Ki(i,r),i!==null&&(qr(i,r),ya(i))}function fN(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),M_(i,l)}function hN(i,r){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(r),M_(i,l)}function mN(i,r){return Ct(i,r)}var Nu=null,rr=null,ih=!1,Ou=!1,sh=!1,pi=0;function ya(i){i!==rr&&i.next===null&&(rr===null?Nu=rr=i:rr=rr.next=i),Ou=!0,ih||(ih=!0,gN())}function Ao(i,r){if(!sh&&Ou){sh=!0;do for(var l=!1,d=Nu;d!==null;){if(i!==0){var p=d.pendingLanes;if(p===0)var g=0;else{var b=d.suspendedLanes,C=d.pingedLanes;g=(1<<31-xn(42|i)+1)-1,g&=p&~(b&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,$_(d,g))}else g=He,g=jl(d,d===ut?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(g&3)===0||Gr(d,g)||(l=!0,$_(d,g));d=d.next}while(l);sh=!1}}function pN(){L_()}function L_(){Ou=ih=!1;var i=0;pi!==0&&AN()&&(i=pi);for(var r=bn(),l=null,d=Nu;d!==null;){var p=d.next,g=D_(d,r);g===0?(d.next=null,l===null?Nu=p:l.next=p,p===null&&(rr=l)):(l=d,(i!==0||(g&3)!==0)&&(Ou=!0)),d=p}Mt!==0&&Mt!==5||Ao(i),pi!==0&&(pi=0)}function D_(i,r){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-xn(g),C=1<<b,M=p[b];M===-1?((C&l)===0||(C&d)!==0)&&(p[b]=V2(C,r)):M<=r&&(i.expiredLanes|=C),g&=~C}if(r=ut,l=He,l=jl(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===r&&(nt===2||nt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&As(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Gr(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(d!==null&&As(d),_d(l)){case 2:case 8:l=Ay;break;case 32:l=Ol;break;case 268435456:l=Cy;break;default:l=Ol}return d=P_.bind(null,i),l=Ct(l,d),i.callbackPriority=r,i.callbackNode=l,r}return d!==null&&d!==null&&As(d),i.callbackPriority=2,i.callbackNode=null,2}function P_(i,r){if(Mt!==0&&Mt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Cu()&&i.callbackNode!==l)return null;var d=He;return d=jl(i,i===ut?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(v_(i,d,r),D_(i,bn()),i.callbackNode!=null&&i.callbackNode===l?P_.bind(null,i):null)}function $_(i,r){if(Cu())return null;v_(i,r,!0)}function gN(){NN(function(){(Je&6)!==0?Ct(Ty,pN):L_()})}function rh(){if(pi===0){var i=qs;i===0&&(i=Rl,Rl<<=1,(Rl&261888)===0&&(Rl=256)),pi=i}return pi}function U_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Pl(""+i)}function z_(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function yN(i,r,l,d,p){if(r==="submit"&&l&&l.stateNode===p){var g=U_((p[cn]||null).action),b=d.submitter;b&&(r=(r=b[cn]||null)?U_(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var C=new Bl("action","action",null,d,p);i.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(pi!==0){var M=b?z_(p,b):new FormData(p);Af(l,{pending:!0,data:M,method:p.method,action:g},null,M)}}else typeof g=="function"&&(C.preventDefault(),M=b?z_(p,b):new FormData(p),Af(l,{pending:!0,data:M,method:p.method,action:g},g,M))},currentTarget:p}]})}}for(var oh=0;oh<Vd.length;oh++){var lh=Vd[oh],vN=lh.toLowerCase(),_N=lh[0].toUpperCase()+lh.slice(1);Kn(vN,"on"+_N)}Kn(y0,"onAnimationEnd"),Kn(v0,"onAnimationIteration"),Kn(_0,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(LC,"onTransitionRun"),Kn(DC,"onTransitionStart"),Kn(PC,"onTransitionCancel"),Kn(b0,"onTransitionEnd"),ks("onMouseEnter",["mouseout","mouseover"]),ks("onMouseLeave",["mouseout","mouseover"]),ks("onPointerEnter",["pointerout","pointerover"]),ks("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Co));function B_(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var g=void 0;if(r)for(var b=d.length-1;0<=b;b--){var C=d[b],M=C.instance,q=C.currentTarget;if(C=C.listener,M!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=q;try{g(p)}catch(K){Gl(K)}p.currentTarget=null,g=M}else for(b=0;b<d.length;b++){if(C=d[b],M=C.instance,q=C.currentTarget,C=C.listener,M!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=q;try{g(p)}catch(K){Gl(K)}p.currentTarget=null,g=M}}}}function Ve(i,r){var l=r[bd];l===void 0&&(l=r[bd]=new Set);var d=i+"__bubble";l.has(d)||(V_(r,i,2,!1),l.add(d))}function uh(i,r,l){var d=0;r&&(d|=4),V_(l,i,d,r)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function ch(i){if(!i[Ru]){i[Ru]=!0,Ly.forEach(function(l){l!=="selectionchange"&&(bN.has(l)||uh(l,!1,i),uh(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Ru]||(r[Ru]=!0,uh("selectionchange",!1,r))}}function V_(i,r,l,d){switch(yb(r)){case 2:var p=ZN;break;case 8:p=XN;break;default:p=Th}l=p.bind(null,r,l,i),p=void 0,!Od||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(r,l,{capture:!0,passive:p}):i.addEventListener(r,l,!0):p!==void 0?i.addEventListener(r,l,{passive:p}):i.addEventListener(r,l,!1)}function dh(i,r,l,d,p){var g=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var C=d.stateNode.containerInfo;if(C===p)break;if(b===4)for(b=d.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;C!==null;){if(b=Ns(C),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){d=g=b;continue e}C=C.parentNode}}d=d.return}Yy(function(){var q=g,K=Cd(l),te=[];e:{var F=w0.get(i);if(F!==void 0){var Z=Bl,_e=i;switch(i){case"keypress":if(Ul(l)===0)break e;case"keydown":case"keyup":Z=hC;break;case"focusin":_e="focus",Z=jd;break;case"focusout":_e="blur",Z=jd;break;case"beforeblur":case"afterblur":Z=jd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=tC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=gC;break;case y0:case v0:case _0:Z=iC;break;case b0:Z=vC;break;case"scroll":case"scrollend":Z=W2;break;case"wheel":Z=bC;break;case"copy":case"cut":case"paste":Z=rC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Jy;break;case"toggle":case"beforetoggle":Z=xC}var Re=(r&4)!==0,lt=!Re&&(i==="scroll"||i==="scrollend"),B=Re?F!==null?F+"Capture":null:F;Re=[];for(var D=q,G;D!==null;){var ee=D;if(G=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||G===null||B===null||(ee=Zr(D,B),ee!=null&&Re.push(No(D,ee,G))),lt)break;D=D.return}0<Re.length&&(F=new Z(F,_e,null,l,K),te.push({event:F,listeners:Re}))}}if((r&7)===0){e:{if(F=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",F&&l!==Ad&&(_e=l.relatedTarget||l.fromElement)&&(Ns(_e)||_e[Cs]))break e;if((Z||F)&&(F=K.window===K?K:(F=K.ownerDocument)?F.defaultView||F.parentWindow:window,Z?(_e=l.relatedTarget||l.toElement,Z=q,_e=_e?Ns(_e):null,_e!==null&&(lt=o(_e),Re=_e.tag,_e!==lt||Re!==5&&Re!==27&&Re!==6)&&(_e=null)):(Z=null,_e=q),Z!==_e)){if(Re=Ky,ee="onMouseLeave",B="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(Re=Jy,ee="onPointerLeave",B="onPointerEnter",D="pointer"),lt=Z==null?F:Yr(Z),G=_e==null?F:Yr(_e),F=new Re(ee,D+"leave",Z,l,K),F.target=lt,F.relatedTarget=G,ee=null,Ns(K)===q&&(Re=new Re(B,D+"enter",_e,l,K),Re.target=G,Re.relatedTarget=lt,ee=Re),lt=ee,Z&&_e)t:{for(Re=wN,B=Z,D=_e,G=0,ee=B;ee;ee=Re(ee))G++;ee=0;for(var Ne=D;Ne;Ne=Re(Ne))ee++;for(;0<G-ee;)B=Re(B),G--;for(;0<ee-G;)D=Re(D),ee--;for(;G--;){if(B===D||D!==null&&B===D.alternate){Re=B;break t}B=Re(B),D=Re(D)}Re=null}else Re=null;Z!==null&&H_(te,F,Z,Re,!1),_e!==null&&lt!==null&&H_(te,lt,_e,Re,!0)}}e:{if(F=q?Yr(q):window,Z=F.nodeName&&F.nodeName.toLowerCase(),Z==="select"||Z==="input"&&F.type==="file")var Ze=r0;else if(i0(F))if(o0)Ze=IC;else{Ze=RC;var Se=OC}else Z=F.nodeName,!Z||Z.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&Td(q.elementType)&&(Ze=r0):Ze=kC;if(Ze&&(Ze=Ze(i,q))){s0(te,Ze,l,K);break e}Se&&Se(i,F,q),i==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&Sd(F,"number",F.value)}switch(Se=q?Yr(q):window,i){case"focusin":(i0(Se)||Se.contentEditable==="true")&&(Ps=Se,Ud=q,no=null);break;case"focusout":no=Ud=Ps=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,p0(te,l,K);break;case"selectionchange":if(MC)break;case"keydown":case"keyup":p0(te,l,K)}var $e;if(Ld)e:{switch(i){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Ds?n0(i,l)&&(Ge="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ge="onCompositionStart");Ge&&(Wy&&l.locale!=="ko"&&(Ds||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Ds&&($e=Zy()):(Wa=K,Rd="value"in Wa?Wa.value:Wa.textContent,Ds=!0)),Se=ku(q,Ge),0<Se.length&&(Ge=new Qy(Ge,i,null,l,K),te.push({event:Ge,listeners:Se}),$e?Ge.data=$e:($e=a0(l),$e!==null&&(Ge.data=$e)))),($e=SC?TC(i,l):AC(i,l))&&(Ge=ku(q,"onBeforeInput"),0<Ge.length&&(Se=new Qy("onBeforeInput","beforeinput",null,l,K),te.push({event:Se,listeners:Ge}),Se.data=$e)),yN(te,i,q,l,K)}B_(te,r)})}function No(i,r,l){return{instance:i,listener:r,currentTarget:l}}function ku(i,r){for(var l=r+"Capture",d=[];i!==null;){var p=i,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Zr(i,l),p!=null&&d.unshift(No(i,p,g)),p=Zr(i,r),p!=null&&d.push(No(i,p,g))),i.tag===3)return d;i=i.return}return[]}function wN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function H_(i,r,l,d,p){for(var g=r._reactName,b=[];l!==null&&l!==d;){var C=l,M=C.alternate,q=C.stateNode;if(C=C.tag,M!==null&&M===d)break;C!==5&&C!==26&&C!==27||q===null||(M=q,p?(q=Zr(l,g),q!=null&&b.unshift(No(l,q,M))):p||(q=Zr(l,g),q!=null&&b.push(No(l,q,M)))),l=l.return}b.length!==0&&i.push({event:r,listeners:b})}var xN=/\r\n?/g,EN=/\u0000|\uFFFD/g;function G_(i){return(typeof i=="string"?i:""+i).replace(xN,`
`).replace(EN,"")}function q_(i,r){return r=G_(r),G_(i)===r}function ot(i,r,l,d,p,g){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||js(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&js(i,""+d);break;case"className":Ll(i,"class",d);break;case"tabIndex":Ll(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ll(i,l,d);break;case"style":qy(i,d,g);break;case"data":if(r!=="object"){Ll(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Pl(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(r!=="input"&&ot(i,r,"name",p.name,p,null),ot(i,r,"formEncType",p.formEncType,p,null),ot(i,r,"formMethod",p.formMethod,p,null),ot(i,r,"formTarget",p.formTarget,p,null)):(ot(i,r,"encType",p.encType,p,null),ot(i,r,"method",p.method,p,null),ot(i,r,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Pl(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Na);break;case"onScroll":d!=null&&Ve("scroll",i);break;case"onScrollEnd":d!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(a(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=Pl(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),Ml(i,"popover",d);break;case"xlinkActuate":Ca(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ca(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ca(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ca(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ca(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ca(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ca(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ca(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ca(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ml(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Q2.get(l)||l,Ml(i,l,d))}}function fh(i,r,l,d,p,g){switch(l){case"style":qy(i,d,g);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(a(60));i.innerHTML=l}}break;case"children":typeof d=="string"?js(i,d):(typeof d=="number"||typeof d=="bigint")&&js(i,""+d);break;case"onScroll":d!=null&&Ve("scroll",i);break;case"onScrollEnd":d!=null&&Ve("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dy.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),r=l.slice(2,p?l.length-7:void 0),g=i[cn]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(r,g,p),typeof d=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,d,p);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):Ml(i,l,d)}}}function qt(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var d=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:ot(i,r,g,b,l,null)}}p&&ot(i,r,"srcSet",l.srcSet,l,null),d&&ot(i,r,"src",l.src,l,null);return;case"input":Ve("invalid",i);var C=g=b=p=null,M=null,q=null;for(d in l)if(l.hasOwnProperty(d)){var K=l[d];if(K!=null)switch(d){case"name":p=K;break;case"type":b=K;break;case"checked":M=K;break;case"defaultChecked":q=K;break;case"value":g=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,r));break;default:ot(i,r,d,K,l,null)}}By(i,g,C,M,q,b,p,!1);return;case"select":Ve("invalid",i),d=b=g=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":g=C;break;case"defaultValue":b=C;break;case"multiple":d=C;default:ot(i,r,p,C,l,null)}r=g,l=b,i.multiple=!!d,r!=null?Is(i,!!d,r,!1):l!=null&&Is(i,!!d,l,!0);return;case"textarea":Ve("invalid",i),g=p=d=null;for(b in l)if(l.hasOwnProperty(b)&&(C=l[b],C!=null))switch(b){case"value":d=C;break;case"defaultValue":p=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:ot(i,r,b,C,l,null)}Hy(i,d,p,g);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(d=l[M],d!=null))switch(M){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ot(i,r,M,d,l,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(d=0;d<Co.length;d++)Ve(Co[d],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(d=l[q],d!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:ot(i,r,q,d,l,null)}return;default:if(Td(r)){for(K in l)l.hasOwnProperty(K)&&(d=l[K],d!==void 0&&fh(i,r,K,d,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(d=l[C],d!=null&&ot(i,r,C,d,l,null))}function SN(i,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,b=null,C=null,M=null,q=null,K=null;for(Z in l){var te=l[Z];if(l.hasOwnProperty(Z)&&te!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=te;default:d.hasOwnProperty(Z)||ot(i,r,Z,null,d,te)}}for(var F in d){var Z=d[F];if(te=l[F],d.hasOwnProperty(F)&&(Z!=null||te!=null))switch(F){case"type":g=Z;break;case"name":p=Z;break;case"checked":q=Z;break;case"defaultChecked":K=Z;break;case"value":b=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,r));break;default:Z!==te&&ot(i,r,F,Z,d,te)}}Ed(i,b,C,M,q,K,g,p);return;case"select":Z=b=C=F=null;for(g in l)if(M=l[g],l.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":Z=M;default:d.hasOwnProperty(g)||ot(i,r,g,null,d,M)}for(p in d)if(g=d[p],M=l[p],d.hasOwnProperty(p)&&(g!=null||M!=null))switch(p){case"value":F=g;break;case"defaultValue":C=g;break;case"multiple":b=g;default:g!==M&&ot(i,r,p,g,d,M)}r=C,l=b,d=Z,F!=null?Is(i,!!l,F,!1):!!d!=!!l&&(r!=null?Is(i,!!l,r,!0):Is(i,!!l,l?[]:"",!1));return;case"textarea":Z=F=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ot(i,r,C,null,d,p)}for(b in d)if(p=d[b],g=l[b],d.hasOwnProperty(b)&&(p!=null||g!=null))switch(b){case"value":F=p;break;case"defaultValue":Z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(a(91));break;default:p!==g&&ot(i,r,b,p,d,g)}Vy(i,F,Z);return;case"option":for(var _e in l)if(F=l[_e],l.hasOwnProperty(_e)&&F!=null&&!d.hasOwnProperty(_e))switch(_e){case"selected":i.selected=!1;break;default:ot(i,r,_e,null,d,F)}for(M in d)if(F=d[M],Z=l[M],d.hasOwnProperty(M)&&F!==Z&&(F!=null||Z!=null))switch(M){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:ot(i,r,M,F,d,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)F=l[Re],l.hasOwnProperty(Re)&&F!=null&&!d.hasOwnProperty(Re)&&ot(i,r,Re,null,d,F);for(q in d)if(F=d[q],Z=l[q],d.hasOwnProperty(q)&&F!==Z&&(F!=null||Z!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,r));break;default:ot(i,r,q,F,d,Z)}return;default:if(Td(r)){for(var lt in l)F=l[lt],l.hasOwnProperty(lt)&&F!==void 0&&!d.hasOwnProperty(lt)&&fh(i,r,lt,void 0,d,F);for(K in d)F=d[K],Z=l[K],!d.hasOwnProperty(K)||F===Z||F===void 0&&Z===void 0||fh(i,r,K,F,d,Z);return}}for(var B in l)F=l[B],l.hasOwnProperty(B)&&F!=null&&!d.hasOwnProperty(B)&&ot(i,r,B,null,d,F);for(te in d)F=d[te],Z=l[te],!d.hasOwnProperty(te)||F===Z||F==null&&Z==null||ot(i,r,te,F,d,Z)}function F_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var p=l[d],g=p.transferSize,b=p.initiatorType,C=p.duration;if(g&&C&&F_(b)){for(b=0,C=p.responseEnd,d+=1;d<l.length;d++){var M=l[d],q=M.startTime;if(q>C)break;var K=M.transferSize,te=M.initiatorType;K&&F_(te)&&(M=M.responseEnd,b+=K*(M<C?1:(C-q)/(M-q)))}if(--d,r+=8*(g+b)/(p.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var hh=null,mh=null;function Iu(i){return i.nodeType===9?i:i.ownerDocument}function Y_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function ph(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gh=null;function AN(){var i=window.event;return i&&i.type==="popstate"?i===gh?!1:(gh=i,!0):(gh=null,!1)}var X_=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,NN=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(i){return K_.resolve(null).then(i).catch(ON)}:X_;function ON(i){setTimeout(function(){throw i})}function gi(i){return i==="head"}function Q_(i,r){var l=r,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(p),cr(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Oo(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Oo(l);for(var g=l.firstChild;g;){var b=g.nextSibling,C=g.nodeName;g[Fr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=b}}else l==="body"&&Oo(i.ownerDocument.body);l=p}while(l);cr(r)}function J_(i,r){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function yh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":yh(l),wd(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function RN(i,r,l,d){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Fr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Vn(i.nextSibling),i===null)break}return null}function kN(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Vn(i.nextSibling),i===null))return null;return i}function W_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Vn(i.nextSibling),i===null))return null;return i}function vh(i){return i.data==="$?"||i.data==="$~"}function _h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function IN(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Vn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var bh=null;function eb(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return Vn(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function tb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function nb(i,r,l){switch(r=Iu(l),i){case"html":if(i=r.documentElement,!i)throw Error(a(452));return i;case"head":if(i=r.head,!i)throw Error(a(453));return i;case"body":if(i=r.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Oo(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);wd(i)}var Hn=new Map,ab=new Set;function ju(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ga=U.d;U.d={f:jN,r:MN,D:LN,C:DN,L:PN,m:$N,X:zN,S:UN,M:BN};function jN(){var i=Ga.f(),r=Su();return i||r}function MN(i){var r=Os(i);r!==null&&r.tag===5&&r.type==="form"?bv(r):Ga.r(i)}var or=typeof document>"u"?null:document;function ib(i,r,l){var d=or;if(d&&typeof r=="string"&&r){var p=Ln(r);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),ab.has(p)||(ab.add(p),i={rel:i,crossOrigin:l,href:r},d.querySelector(p)===null&&(r=d.createElement("link"),qt(r,"link",i),Pt(r),d.head.appendChild(r)))}}function LN(i){Ga.D(i),ib("dns-prefetch",i,null)}function DN(i,r){Ga.C(i,r),ib("preconnect",i,r)}function PN(i,r,l){Ga.L(i,r,l);var d=or;if(d&&i&&r){var p='link[rel="preload"][as="'+Ln(r)+'"]';r==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Ln(l.imageSizes)+'"]')):p+='[href="'+Ln(i)+'"]';var g=p;switch(r){case"style":g=lr(i);break;case"script":g=ur(i)}Hn.has(g)||(i=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Hn.set(g,i),d.querySelector(p)!==null||r==="style"&&d.querySelector(Ro(g))||r==="script"&&d.querySelector(ko(g))||(r=d.createElement("link"),qt(r,"link",i),Pt(r),d.head.appendChild(r)))}}function $N(i,r){Ga.m(i,r);var l=or;if(l&&i){var d=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+Ln(d)+'"][href="'+Ln(i)+'"]',g=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ur(i)}if(!Hn.has(g)&&(i=y({rel:"modulepreload",href:i},r),Hn.set(g,i),l.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ko(g)))return}d=l.createElement("link"),qt(d,"link",i),Pt(d),l.head.appendChild(d)}}}function UN(i,r,l){Ga.S(i,r,l);var d=or;if(d&&i){var p=Rs(d).hoistableStyles,g=lr(i);r=r||"default";var b=p.get(g);if(!b){var C={loading:0,preload:null};if(b=d.querySelector(Ro(g)))C.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Hn.get(g))&&wh(i,l);var M=b=d.createElement("link");Pt(M),qt(M,"link",i),M._p=new Promise(function(q,K){M.onload=q,M.onerror=K}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Mu(b,r,d)}b={type:"stylesheet",instance:b,count:1,state:C},p.set(g,b)}}}function zN(i,r){Ga.X(i,r);var l=or;if(l&&i){var d=Rs(l).hoistableScripts,p=ur(i),g=d.get(p);g||(g=l.querySelector(ko(p)),g||(i=y({src:i,async:!0},r),(r=Hn.get(p))&&xh(i,r),g=l.createElement("script"),Pt(g),qt(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function BN(i,r){Ga.M(i,r);var l=or;if(l&&i){var d=Rs(l).hoistableScripts,p=ur(i),g=d.get(p);g||(g=l.querySelector(ko(p)),g||(i=y({src:i,async:!0,type:"module"},r),(r=Hn.get(p))&&xh(i,r),g=l.createElement("script"),Pt(g),qt(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function sb(i,r,l,d){var p=(p=N.current)?ju(p):null;if(!p)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=lr(l.href),l=Rs(p).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=lr(l.href);var g=Rs(p).hoistableStyles,b=g.get(i);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=p.querySelector(Ro(i)))&&!g._p&&(b.instance=g,b.state.loading=5),Hn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Hn.set(i,l),g||VN(p,i,l,b.state))),r&&d===null)throw Error(a(528,""));return b}if(r&&d!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ur(l),l=Rs(p).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function lr(i){return'href="'+Ln(i)+'"'}function Ro(i){return'link[rel="stylesheet"]['+i+"]"}function rb(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function VN(i,r,l,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),qt(r,"link",l),Pt(r),i.head.appendChild(r))}function ur(i){return'[src="'+Ln(i)+'"]'}function ko(i){return"script[async]"+i}function ob(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+Ln(l.href)+'"]');if(d)return r.instance=d,Pt(d),d;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Pt(d),qt(d,"style",p),Mu(d,l.precedence,i),r.instance=d;case"stylesheet":p=lr(l.href);var g=i.querySelector(Ro(p));if(g)return r.state.loading|=4,r.instance=g,Pt(g),g;d=rb(l),(p=Hn.get(p))&&wh(d,p),g=(i.ownerDocument||i).createElement("link"),Pt(g);var b=g;return b._p=new Promise(function(C,M){b.onload=C,b.onerror=M}),qt(g,"link",d),r.state.loading|=4,Mu(g,l.precedence,i),r.instance=g;case"script":return g=ur(l.src),(p=i.querySelector(ko(g)))?(r.instance=p,Pt(p),p):(d=l,(p=Hn.get(g))&&(d=y({},l),xh(d,p)),i=i.ownerDocument||i,p=i.createElement("script"),Pt(p),qt(p,"link",d),i.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Mu(d,l.precedence,i));return r.instance}function Mu(i,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,g=p,b=0;b<d.length;b++){var C=d[b];if(C.dataset.precedence===r)g=C;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function wh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function xh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Lu=null;function lb(i,r,l){if(Lu===null){var d=new Map,p=Lu=new Map;p.set(l,d)}else p=Lu,d=p.get(l),d||(d=new Map,p.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var g=l[p];if(!(g[Fr]||g[Bt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=i+b;var C=d.get(b);C?C.push(g):d.set(b,[g])}}return d}function ub(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function HN(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function cb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function GN(i,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=lr(d.href),g=r.querySelector(Ro(p));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Du.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=g,Pt(g);return}g=r.ownerDocument||r,d=rb(d),(p=Hn.get(p))&&wh(d,p),g=g.createElement("link"),Pt(g);var b=g;b._p=new Promise(function(C,M){b.onload=C,b.onerror=M}),qt(g,"link",d),l.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Du.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var Eh=0;function qN(i,r){return i.stylesheets&&i.count===0&&$u(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&$u(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+r);0<i.imgBytes&&Eh===0&&(Eh=62500*TN());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&$u(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>Eh?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function Du(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Pu=null;function $u(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Pu=new Map,r.forEach(FN,i),Pu=null,Du.call(i))}function FN(i,r){if(!(r.state.loading&4)){var l=Pu.get(i);if(l)var d=l.get(null);else{l=new Map,Pu.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var b=p[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),d=b)}d&&l.set(null,d)}p=r.instance,b=p.getAttribute("data-precedence"),g=l.get(b)||d,g===d&&l.set(null,p),l.set(b,p),this.count++,d=Du.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),r.state.loading|=4}}var Io={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function YN(i,r,l,d,p,g,b,C,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.hiddenUpdates=yd(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function db(i,r,l,d,p,g,b,C,M,q,K,te){return i=new YN(i,r,l,b,M,q,K,te,C),r=1,g===!0&&(r|=24),g=Sn(3,null,null,r),i.current=g,g.stateNode=i,r=tf(),r.refCount++,i.pooledCache=r,r.refCount++,g.memoizedState={element:d,isDehydrated:l,cache:r},rf(g),i}function fb(i){return i?(i=zs,i):zs}function hb(i,r,l,d,p,g){p=fb(p),d.context===null?d.context=p:d.pendingContext=p,d=si(r),d.payload={element:l},g=g===void 0?null:g,g!==null&&(d.callback=g),l=ri(i,d,r),l!==null&&(gn(l,i,r),uo(l,i,r))}function mb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Sh(i,r){mb(i,r),(i=i.alternate)&&mb(i,r)}function pb(i){if(i.tag===13||i.tag===31){var r=Ki(i,67108864);r!==null&&gn(r,i,67108864),Sh(i,67108864)}}function gb(i){if(i.tag===13||i.tag===31){var r=On();r=vd(r);var l=Ki(i,r);l!==null&&gn(l,i,r),Sh(i,r)}}var Uu=!0;function ZN(i,r,l,d){var p=j.T;j.T=null;var g=U.p;try{U.p=2,Th(i,r,l,d)}finally{U.p=g,j.T=p}}function XN(i,r,l,d){var p=j.T;j.T=null;var g=U.p;try{U.p=8,Th(i,r,l,d)}finally{U.p=g,j.T=p}}function Th(i,r,l,d){if(Uu){var p=Ah(d);if(p===null)dh(i,r,d,zu,l),vb(i,d);else if(QN(p,i,r,l,d))d.stopPropagation();else if(vb(i,d),r&4&&-1<KN.indexOf(i)){for(;p!==null;){var g=Os(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=qi(g.pendingLanes);if(b!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var M=1<<31-xn(b);C.entanglements[1]|=M,b&=~M}ya(g),(Je&6)===0&&(xu=bn()+500,Ao(0))}}break;case 31:case 13:C=Ki(g,2),C!==null&&gn(C,g,2),Su(),Sh(g,2)}if(g=Ah(d),g===null&&dh(i,r,d,zu,l),g===p)break;p=g}p!==null&&d.stopPropagation()}else dh(i,r,d,null,l)}}function Ah(i){return i=Cd(i),Ch(i)}var zu=null;function Ch(i){if(zu=null,i=Ns(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=u(r),i!==null)return i;i=null}else if(l===31){if(i=c(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return zu=i,null}function yb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(L2()){case Ty:return 2;case Ay:return 8;case Ol:case D2:return 32;case Cy:return 268435456;default:return 32}default:return 32}}var Nh=!1,yi=null,vi=null,_i=null,jo=new Map,Mo=new Map,bi=[],KN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vb(i,r){switch(i){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(r.pointerId)}}function Lo(i,r,l,d,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},r!==null&&(r=Os(r),r!==null&&pb(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),i)}function QN(i,r,l,d,p){switch(r){case"focusin":return yi=Lo(yi,i,r,l,d,p),!0;case"dragenter":return vi=Lo(vi,i,r,l,d,p),!0;case"mouseover":return _i=Lo(_i,i,r,l,d,p),!0;case"pointerover":var g=p.pointerId;return jo.set(g,Lo(jo.get(g)||null,i,r,l,d,p)),!0;case"gotpointercapture":return g=p.pointerId,Mo.set(g,Lo(Mo.get(g)||null,i,r,l,d,p)),!0}return!1}function _b(i){var r=Ns(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){i.blockedOn=r,jy(i.priority,function(){gb(l)});return}}else if(r===31){if(r=c(l),r!==null){i.blockedOn=r,jy(i.priority,function(){gb(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Ah(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Ad=d,l.target.dispatchEvent(d),Ad=null}else return r=Os(l),r!==null&&pb(r),i.blockedOn=l,!1;r.shift()}return!0}function bb(i,r,l){Bu(i)&&l.delete(r)}function JN(){Nh=!1,yi!==null&&Bu(yi)&&(yi=null),vi!==null&&Bu(vi)&&(vi=null),_i!==null&&Bu(_i)&&(_i=null),jo.forEach(bb),Mo.forEach(bb)}function Vu(i,r){i.blockedOn===r&&(i.blockedOn=null,Nh||(Nh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JN)))}var Hu=null;function wb(i){Hu!==i&&(Hu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hu===i&&(Hu=null);for(var r=0;r<i.length;r+=3){var l=i[r],d=i[r+1],p=i[r+2];if(typeof d!="function"){if(Ch(d||l)===null)continue;break}var g=Os(l);g!==null&&(i.splice(r,3),r-=3,Af(g,{pending:!0,data:p,method:l.method,action:d},d,p))}}))}function cr(i){function r(M){return Vu(M,i)}yi!==null&&Vu(yi,i),vi!==null&&Vu(vi,i),_i!==null&&Vu(_i,i),jo.forEach(r),Mo.forEach(r);for(var l=0;l<bi.length;l++){var d=bi[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<bi.length&&(l=bi[0],l.blockedOn===null);)_b(l),l.blockedOn===null&&bi.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var p=l[d],g=l[d+1],b=p[cn]||null;if(typeof g=="function")b||wb(l);else if(b){var C=null;if(g&&g.hasAttribute("formAction")){if(p=g,b=g[cn]||null)C=b.formAction;else if(Ch(p)!==null)continue}else C=b.action;typeof C=="function"?l[d+1]=C:(l.splice(d,3),d-=3),wb(l)}}}function xb(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function r(){p!==null&&(p(),p=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),p!==null&&(p(),p=null)}}}function Oh(i){this._internalRoot=i}Gu.prototype.render=Oh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,d=On();hb(l,d,i,r,null,null)},Gu.prototype.unmount=Oh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;hb(i.current,2,null,i,null,null),Su(),r[Cs]=null}};function Gu(i){this._internalRoot=i}Gu.prototype.unstable_scheduleHydration=function(i){if(i){var r=Iy();i={blockedOn:null,target:i,priority:r};for(var l=0;l<bi.length&&r!==0&&r<bi[l].priority;l++);bi.splice(l,0,i),l===0&&_b(i)}};var Eb=e.version;if(Eb!=="19.2.4")throw Error(a(527,Eb,"19.2.4"));U.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=h(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var WN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{Hr=qu.inject(WN),wn=qu}catch{}}return Po.createRoot=function(i,r){if(!s(i))throw Error(a(299));var l=!1,d="",p=Rv,g=kv,b=Iv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=db(i,1,!1,null,null,l,d,null,p,g,b,xb),i[Cs]=r.current,ch(i),new Oh(r)},Po.hydrateRoot=function(i,r,l){if(!s(i))throw Error(a(299));var d=!1,p="",g=Rv,b=kv,C=Iv,M=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(M=l.formState)),r=db(i,1,!0,r,l??null,d,p,M,g,b,C,xb),r.context=fb(null),l=r.current,d=On(),d=vd(d),p=si(d),p.callback=null,ri(l,p,d),l=d,r.current.lanes=l,qr(r,l),ya(r),i[Cs]=r.current,ch(i),new Gu(r)},Po.version="19.2.4",Po}var jb;function dO(){if(jb)return Ih.exports;jb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ih.exports=cO(),Ih.exports}var fO=dO();const wg=ne.createContext({});function ed(t){const e=ne.useRef(null);return e.current===null&&(e.current=t()),e.current}const rS=typeof window<"u",xg=rS?ne.useLayoutEffect:ne.useEffect,td=ne.createContext(null);function Eg(t,e){t.indexOf(e)===-1&&t.push(e)}function Nc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Sa=(t,e,n)=>n>e?e:n<t?t:n;let Sg=()=>{};const Za={},oS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function lS(t){return typeof t=="object"&&t!==null}const uS=t=>/^0[^.\s]+$/u.test(t);function cS(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fn=t=>t,hO=(t,e)=>n=>e(t(n)),bl=(...t)=>t.reduce(hO),il=(t,e,n)=>{const a=e-t;return a===0?1:(n-t)/a};class Tg{constructor(){this.subscriptions=[]}add(e){return Eg(this.subscriptions,e),()=>Nc(this.subscriptions,e)}notify(e,n,a){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,a);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const la=t=>t*1e3,qn=t=>t/1e3;function dS(t,e){return e?t*(1e3/e):0}const fS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,mO=1e-7,pO=12;function gO(t,e,n,a,s){let o,u,c=0;do u=e+(n-e)/2,o=fS(u,a,s)-t,o>0?n=u:e=u;while(Math.abs(o)>mO&&++c<pO);return u}function wl(t,e,n,a){if(t===e&&n===a)return Fn;const s=o=>gO(o,0,1,t,n);return o=>o===0||o===1?o:fS(s(o),e,a)}const hS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mS=t=>e=>1-t(1-e),pS=wl(.33,1.53,.69,.99),Ag=mS(pS),gS=hS(Ag),yS=t=>(t*=2)<1?.5*Ag(t):.5*(2-Math.pow(2,-10*(t-1))),Cg=t=>1-Math.sin(Math.acos(t)),vS=mS(Cg),_S=hS(Cg),yO=wl(.42,0,1,1),vO=wl(0,0,.58,1),bS=wl(.42,0,.58,1),_O=t=>Array.isArray(t)&&typeof t[0]!="number",wS=t=>Array.isArray(t)&&typeof t[0]=="number",bO={linear:Fn,easeIn:yO,easeInOut:bS,easeOut:vO,circIn:Cg,circInOut:_S,circOut:vS,backIn:Ag,backInOut:gS,backOut:pS,anticipate:yS},wO=t=>typeof t=="string",Mb=t=>{if(wS(t)){Sg(t.length===4);const[e,n,a,s]=t;return wl(e,n,a,s)}else if(wO(t))return bO[t];return t},Fu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xO(t,e){let n=new Set,a=new Set,s=!1,o=!1;const u=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(m){u.has(m)&&(h.schedule(m),t()),m(c)}const h={schedule:(m,y=!1,v=!1)=>{const x=v&&s?n:a;return y&&u.add(m),x.has(m)||x.add(m),m},cancel:m=>{a.delete(m),u.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[n,a]=[a,n],n.forEach(f),n.clear(),s=!1,o&&(o=!1,h.process(m))}};return h}const EO=40;function xS(t,e){let n=!1,a=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Fu.reduce((R,z)=>(R[z]=xO(o),R),{}),{setup:c,read:f,resolveKeyframes:h,preUpdate:m,update:y,preRender:v,render:_,postRender:x}=u,w=()=>{const R=Za.useManualTiming?s.timestamp:performance.now();n=!1,Za.useManualTiming||(s.delta=a?1e3/60:Math.max(Math.min(R-s.timestamp,EO),1)),s.timestamp=R,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),m.process(s),y.process(s),v.process(s),_.process(s),x.process(s),s.isProcessing=!1,n&&e&&(a=!1,t(w))},A=()=>{n=!0,a=!0,s.isProcessing||t(w)};return{schedule:Fu.reduce((R,z)=>{const P=u[z];return R[z]=(Y,W=!1,O=!1)=>(n||A(),P.schedule(Y,W,O)),R},{}),cancel:R=>{for(let z=0;z<Fu.length;z++)u[Fu[z]].cancel(R)},state:s,steps:u}}const{schedule:ft,cancel:$i,state:Zt,steps:Dh}=xS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fn,!0);let pc;function SO(){pc=void 0}const on={now:()=>(pc===void 0&&on.set(Zt.isProcessing||Za.useManualTiming?Zt.timestamp:performance.now()),pc),set:t=>{pc=t,queueMicrotask(SO)}},ES=t=>e=>typeof e=="string"&&e.startsWith(t),SS=ES("--"),TO=ES("var(--"),Ng=t=>TO(t)?AO.test(t.split("/*")[0].trim()):!1,AO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Lb(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Pr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sl={...Pr,transform:t=>Sa(0,1,t)},Yu={...Pr,default:1},Zo=t=>Math.round(t*1e5)/1e5,Og=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CO(t){return t==null}const NO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rg=(t,e)=>n=>!!(typeof n=="string"&&NO.test(n)&&n.startsWith(t)||e&&!CO(n)&&Object.prototype.hasOwnProperty.call(n,e)),TS=(t,e,n)=>a=>{if(typeof a!="string")return a;const[s,o,u,c]=a.match(Og);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},OO=t=>Sa(0,255,t),Ph={...Pr,transform:t=>Math.round(OO(t))},ms={test:Rg("rgb","red"),parse:TS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:a=1})=>"rgba("+Ph.transform(t)+", "+Ph.transform(e)+", "+Ph.transform(n)+", "+Zo(sl.transform(a))+")"};function RO(t){let e="",n="",a="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),a=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),a=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,a+=a,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:s?parseInt(s,16)/255:1}}const _p={test:Rg("#"),parse:RO,transform:ms.transform},xl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Si=xl("deg"),xa=xl("%"),we=xl("px"),kO=xl("vh"),IO=xl("vw"),Db={...xa,parse:t=>xa.parse(t)/100,transform:t=>xa.transform(t*100)},gr={test:Rg("hsl","hue"),parse:TS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:a=1})=>"hsla("+Math.round(t)+", "+xa.transform(Zo(e))+", "+xa.transform(Zo(n))+", "+Zo(sl.transform(a))+")"},It={test:t=>ms.test(t)||_p.test(t)||gr.test(t),parse:t=>ms.test(t)?ms.parse(t):gr.test(t)?gr.parse(t):_p.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ms.transform(t):gr.transform(t),getAnimatableNone:t=>{const e=It.parse(t);return e.alpha=0,It.transform(e)}},jO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Og))==null?void 0:e.length)||0)+(((n=t.match(jO))==null?void 0:n.length)||0)>0}const AS="number",CS="color",LO="var",DO="var(",Pb="${}",PO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rl(t){const e=t.toString(),n=[],a={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(PO,f=>(It.test(f)?(a.color.push(o),s.push(CS),n.push(It.parse(f))):f.startsWith(DO)?(a.var.push(o),s.push(LO),n.push(f)):(a.number.push(o),s.push(AS),n.push(parseFloat(f))),++o,Pb)).split(Pb);return{values:n,split:c,indexes:a,types:s}}function NS(t){return rl(t).values}function OS(t){const{split:e,types:n}=rl(t),a=e.length;return s=>{let o="";for(let u=0;u<a;u++)if(o+=e[u],s[u]!==void 0){const c=n[u];c===AS?o+=Zo(s[u]):c===CS?o+=It.transform(s[u]):o+=s[u]}return o}}const $O=t=>typeof t=="number"?0:It.test(t)?It.getAnimatableNone(t):t;function UO(t){const e=NS(t);return OS(t)(e.map($O))}const ua={test:MO,parse:NS,createTransformer:OS,getAnimatableNone:UO};function $h(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zO({hue:t,saturation:e,lightness:n,alpha:a}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=$h(f,c,t+1/3),o=$h(f,c,t),u=$h(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:a}}function Oc(t,e){return n=>n>0?e:t}const bt=(t,e,n)=>t+(e-t)*n,Uh=(t,e,n)=>{const a=t*t,s=n*(e*e-a)+a;return s<0?0:Math.sqrt(s)},BO=[_p,ms,gr],VO=t=>BO.find(e=>e.test(t));function $b(t){const e=VO(t);if(!e)return!1;let n=e.parse(t);return e===gr&&(n=zO(n)),n}const Ub=(t,e)=>{const n=$b(t),a=$b(e);if(!n||!a)return Oc(t,e);const s={...n};return o=>(s.red=Uh(n.red,a.red,o),s.green=Uh(n.green,a.green,o),s.blue=Uh(n.blue,a.blue,o),s.alpha=bt(n.alpha,a.alpha,o),ms.transform(s))},bp=new Set(["none","hidden"]);function HO(t,e){return bp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function GO(t,e){return n=>bt(t,e,n)}function kg(t){return typeof t=="number"?GO:typeof t=="string"?Ng(t)?Oc:It.test(t)?Ub:YO:Array.isArray(t)?RS:typeof t=="object"?It.test(t)?Ub:qO:Oc}function RS(t,e){const n=[...t],a=n.length,s=t.map((o,u)=>kg(o)(o,e[u]));return o=>{for(let u=0;u<a;u++)n[u]=s[u](o);return n}}function qO(t,e){const n={...t,...e},a={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(a[s]=kg(t[s])(t[s],e[s]));return s=>{for(const o in a)n[o]=a[o](s);return n}}function FO(t,e){const n=[],a={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],u=t.indexes[o][a[o]],c=t.values[u]??0;n[s]=c,a[o]++}return n}const YO=(t,e)=>{const n=ua.createTransformer(e),a=rl(t),s=rl(e);return a.indexes.var.length===s.indexes.var.length&&a.indexes.color.length===s.indexes.color.length&&a.indexes.number.length>=s.indexes.number.length?bp.has(t)&&!s.values.length||bp.has(e)&&!a.values.length?HO(t,e):bl(RS(FO(a,s),s.values),n):Oc(t,e)};function kS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?bt(t,e,n):kg(t)(t,e)}const ZO=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ft.update(e,n),stop:()=>$i(e),now:()=>Zt.isProcessing?Zt.timestamp:on.now()}},IS=(t,e,n=10)=>{let a="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)a+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Rc=2e4;function Ig(t){let e=0;const n=50;let a=t.next(e);for(;!a.done&&e<Rc;)e+=n,a=t.next(e);return e>=Rc?1/0:e}function XO(t,e=100,n){const a=n({...t,keyframes:[0,e]}),s=Math.min(Ig(a),Rc);return{type:"keyframes",ease:o=>a.next(s*o).value/e,duration:qn(s)}}const KO=5;function jS(t,e,n){const a=Math.max(e-KO,0);return dS(n-t(a),e-a)}const Et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zh=.001;function QO({duration:t=Et.duration,bounce:e=Et.bounce,velocity:n=Et.velocity,mass:a=Et.mass}){let s,o,u=1-e;u=Sa(Et.minDamping,Et.maxDamping,u),t=Sa(Et.minDuration,Et.maxDuration,qn(t)),u<1?(s=h=>{const m=h*u,y=m*t,v=m-n,_=wp(h,u),x=Math.exp(-y);return zh-v/_*x},o=h=>{const y=h*u*t,v=y*n+n,_=Math.pow(u,2)*Math.pow(h,2)*t,x=Math.exp(-y),w=wp(Math.pow(h,2),u);return(-s(h)+zh>0?-1:1)*((v-_)*x)/w}):(s=h=>{const m=Math.exp(-h*t),y=(h-n)*t+1;return-zh+m*y},o=h=>{const m=Math.exp(-h*t),y=(n-h)*(t*t);return m*y});const c=5/t,f=WO(s,o,c);if(t=la(t),isNaN(f))return{stiffness:Et.stiffness,damping:Et.damping,duration:t};{const h=Math.pow(f,2)*a;return{stiffness:h,damping:u*2*Math.sqrt(a*h),duration:t}}}const JO=12;function WO(t,e,n){let a=n;for(let s=1;s<JO;s++)a=a-t(a)/e(a);return a}function wp(t,e){return t*Math.sqrt(1-e*e)}const eR=["duration","bounce"],tR=["stiffness","damping","mass"];function zb(t,e){return e.some(n=>t[n]!==void 0)}function nR(t){let e={velocity:Et.velocity,stiffness:Et.stiffness,damping:Et.damping,mass:Et.mass,isResolvedFromDuration:!1,...t};if(!zb(t,tR)&&zb(t,eR))if(t.visualDuration){const n=t.visualDuration,a=2*Math.PI/(n*1.2),s=a*a,o=2*Sa(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Et.mass,stiffness:s,damping:o}}else{const n=QO(t);e={...e,...n,mass:Et.mass},e.isResolvedFromDuration=!0}return e}function kc(t=Et.visualDuration,e=Et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:a,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:m,duration:y,velocity:v,isResolvedFromDuration:_}=nR({...n,velocity:-qn(n.velocity||0)}),x=v||0,w=h/(2*Math.sqrt(f*m)),A=u-o,T=qn(Math.sqrt(f/m)),k=Math.abs(A)<5;a||(a=k?Et.restSpeed.granular:Et.restSpeed.default),s||(s=k?Et.restDelta.granular:Et.restDelta.default);let R;if(w<1){const P=wp(T,w);R=Y=>{const W=Math.exp(-w*T*Y);return u-W*((x+w*T*A)/P*Math.sin(P*Y)+A*Math.cos(P*Y))}}else if(w===1)R=P=>u-Math.exp(-T*P)*(A+(x+T*A)*P);else{const P=T*Math.sqrt(w*w-1);R=Y=>{const W=Math.exp(-w*T*Y),O=Math.min(P*Y,300);return u-W*((x+w*T*A)*Math.sinh(O)+P*A*Math.cosh(O))/P}}const z={calculatedDuration:_&&y||null,next:P=>{const Y=R(P);if(_)c.done=P>=y;else{let W=P===0?x:0;w<1&&(W=P===0?la(x):jS(R,P,Y));const O=Math.abs(W)<=a,ge=Math.abs(u-Y)<=s;c.done=O&&ge}return c.value=c.done?u:Y,c},toString:()=>{const P=Math.min(Ig(z),Rc),Y=IS(W=>z.next(P*W).value,P,30);return P+"ms "+Y},toTransition:()=>{}};return z}kc.applyToOptions=t=>{const e=XO(t,100,kc);return t.ease=e.ease,t.duration=la(e.duration),t.type="keyframes",t};function xp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:a=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:c,max:f,restDelta:h=.5,restSpeed:m}){const y=t[0],v={done:!1,value:y},_=O=>c!==void 0&&O<c||f!==void 0&&O>f,x=O=>c===void 0?f:f===void 0||Math.abs(c-O)<Math.abs(f-O)?c:f;let w=n*e;const A=y+w,T=u===void 0?A:u(A);T!==A&&(w=T-y);const k=O=>-w*Math.exp(-O/a),R=O=>T+k(O),z=O=>{const ge=k(O),Ce=R(O);v.done=Math.abs(ge)<=h,v.value=v.done?T:Ce};let P,Y;const W=O=>{_(v.value)&&(P=O,Y=kc({keyframes:[v.value,x(v.value)],velocity:jS(R,O,v.value),damping:s,stiffness:o,restDelta:h,restSpeed:m}))};return W(0),{calculatedDuration:null,next:O=>{let ge=!1;return!Y&&P===void 0&&(ge=!0,z(O),W(O)),P!==void 0&&O>=P?Y.next(O-P):(!ge&&z(O),v)}}}function aR(t,e,n){const a=[],s=n||Za.mix||kS,o=t.length-1;for(let u=0;u<o;u++){let c=s(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Fn:e;c=bl(f,c)}a.push(c)}return a}function iR(t,e,{clamp:n=!0,ease:a,mixer:s}={}){const o=t.length;if(Sg(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=aR(e,a,s),f=c.length,h=m=>{if(u&&m<t[0])return e[0];let y=0;if(f>1)for(;y<t.length-2&&!(m<t[y+1]);y++);const v=il(t[y],t[y+1],m);return c[y](v)};return n?m=>h(Sa(t[0],t[o-1],m)):h}function sR(t,e){const n=t[t.length-1];for(let a=1;a<=e;a++){const s=il(0,e,a);t.push(bt(n,1,s))}}function rR(t){const e=[0];return sR(e,t.length-1),e}function oR(t,e){return t.map(n=>n*e)}function lR(t,e){return t.map(()=>e||bS).splice(0,t.length-1)}function Xo({duration:t=300,keyframes:e,times:n,ease:a="easeInOut"}){const s=_O(a)?a.map(Mb):Mb(a),o={done:!1,value:e[0]},u=oR(n&&n.length===e.length?n:rR(e),t),c=iR(u,e,{ease:Array.isArray(s)?s:lR(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const uR=t=>t!==null;function jg(t,{repeat:e,repeatType:n="loop"},a,s=1){const o=t.filter(uR),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||a===void 0?o[c]:a}const cR={decay:xp,inertia:xp,tween:Xo,keyframes:Xo,spring:kc};function MS(t){typeof t.type=="string"&&(t.type=cR[t.type])}class Mg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const dR=t=>t/100;class Lg extends Mg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,s;const{motionValue:n}=this.options;n&&n.updatedAt!==on.now()&&this.tick(on.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(a=this.options).onStop)==null||s.call(a))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;MS(e);const{type:n=Xo,repeat:a=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=e;let{keyframes:c}=e;const f=n||Xo;f!==Xo&&typeof c[0]!="number"&&(this.mixKeyframes=bl(dR,kS(c[0],c[1])),c=[0,100]);const h=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-u})),h.calculatedDuration===null&&(h.calculatedDuration=Ig(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(a+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:a,totalDuration:s,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:m,repeat:y,repeatType:v,repeatDelay:_,type:x,onUpdate:w,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let R=this.currentTime,z=a;if(y){const O=Math.min(this.currentTime,s)/c;let ge=Math.floor(O),Ce=O%1;!Ce&&O>=1&&(Ce=1),Ce===1&&ge--,ge=Math.min(ge,y+1),!!(ge%2)&&(v==="reverse"?(Ce=1-Ce,_&&(Ce-=_/c)):v==="mirror"&&(z=u)),R=Sa(0,1,Ce)*c}const P=k?{done:!1,value:m[0]}:z.next(R);o&&(P.value=o(P.value));let{done:Y}=P;!k&&f!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const W=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return W&&x!==xp&&(P.value=jg(m,this.options,A,this.speed)),w&&w(P.value),W&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return qn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qn(e)}get time(){return qn(this.currentTime)}set time(e){var n;e=la(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(on.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qn(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=ZO,startTime:n}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),(o=(s=this.options).onPlay)==null||o.call(s);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=n??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(on.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function fR(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ps=t=>t*180/Math.PI,Ep=t=>{const e=ps(Math.atan2(t[1],t[0]));return Sp(e)},hR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ep,rotateZ:Ep,skewX:t=>ps(Math.atan(t[1])),skewY:t=>ps(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sp=t=>(t=t%360,t<0&&(t+=360),t),Bb=Ep,Vb=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Hb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),mR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Vb,scaleY:Hb,scale:t=>(Vb(t)+Hb(t))/2,rotateX:t=>Sp(ps(Math.atan2(t[6],t[5]))),rotateY:t=>Sp(ps(Math.atan2(-t[2],t[0]))),rotateZ:Bb,rotate:Bb,skewX:t=>ps(Math.atan(t[4])),skewY:t=>ps(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Tp(t){return t.includes("scale")?1:0}function Ap(t,e){if(!t||t==="none")return Tp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,s;if(n)a=mR,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=hR,s=c}if(!s)return Tp(e);const o=a[e],u=s[1].split(",").map(gR);return typeof o=="function"?o(u):u[o]}const pR=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ap(n,e)};function gR(t){return parseFloat(t.trim())}const $r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ur=new Set($r),Gb=t=>t===Pr||t===we,yR=new Set(["x","y","z"]),vR=$r.filter(t=>!yR.has(t));function _R(t){const e=[];return vR.forEach(n=>{const a=t.getValue(n);a!==void 0&&(e.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),e}const Ri={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ap(e,"x"),y:(t,{transform:e})=>Ap(e,"y")};Ri.translateX=Ri.x;Ri.translateY=Ri.y;const ys=new Set;let Cp=!1,Np=!1,Op=!1;function LS(){if(Np){const t=Array.from(ys).filter(a=>a.needsMeasurement),e=new Set(t.map(a=>a.element)),n=new Map;e.forEach(a=>{const s=_R(a);s.length&&(n.set(a,s),a.render())}),t.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();const s=n.get(a);s&&s.forEach(([o,u])=>{var c;(c=a.getValue(o))==null||c.set(u)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Np=!1,Cp=!1,ys.forEach(t=>t.complete(Op)),ys.clear()}function DS(){ys.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Np=!0)})}function bR(){Op=!0,DS(),LS(),Op=!1}class Dg{constructor(e,n,a,s,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=a,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(ys.add(this),Cp||(Cp=!0,ft.read(DS),ft.resolveKeyframes(LS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:a,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(a&&n){const c=a.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&o===void 0&&s.set(e[0])}fR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ys.delete(this)}cancel(){this.state==="scheduled"&&(ys.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wR=t=>t.startsWith("--");function xR(t,e,n){wR(e)?t.style.setProperty(e,n):t.style[e]=n}const ER={};function PS(t,e){const n=cS(t);return()=>ER[e]??n()}const SR=PS(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),$S=PS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Go=([t,e,n,a])=>`cubic-bezier(${t}, ${e}, ${n}, ${a})`,qb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function US(t,e){if(t)return typeof t=="function"?$S()?IS(t,e):"ease-out":wS(t)?Go(t):Array.isArray(t)?t.map(n=>US(n,e)||qb.easeOut):qb[t]}function TR(t,e,n,{delay:a=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:c="easeOut",times:f}={},h=void 0){const m={[e]:n};f&&(m.offset=f);const y=US(c,s);Array.isArray(y)&&(m.easing=y);const v={delay:a,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(m,v)}function zS(t){return typeof t=="function"&&"applyToOptions"in t}function AR({type:t,...e}){return zS(t)&&$S()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class BS extends Mg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:a,keyframes:s,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,Sg(typeof e.type!="string");const h=AR(e);this.animation=TR(n,a,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=jg(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):xR(n,a,m),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,a,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(a=this.animation).commitStyles)==null||s.call(a))}get duration(){var n,a;const e=((a=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:a.call(n).duration)||0;return qn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qn(e)}get time(){return qn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=la(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&SR()?(this.animation.timeline=e,Fn):n(this)}}const VS={anticipate:yS,backInOut:gS,circInOut:_S};function CR(t){return t in VS}function NR(t){typeof t.ease=="string"&&CR(t.ease)&&(t.ease=VS[t.ease])}const Bh=10;class OR extends BS{constructor(e){NR(e),MS(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:a,onComplete:s,element:o,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Lg({...u,autoplay:!1}),f=Math.max(Bh,on.now()-this.startTime),h=Sa(0,Bh,f-Bh);n.setWithVelocity(c.sample(Math.max(0,f-h)).value,c.sample(f).value,h),c.stop()}}const Fb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ua.test(t)||t==="0")&&!t.startsWith("url("));function RR(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function kR(t,e,n,a){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=Fb(s,e),c=Fb(o,e);return!u||!c?!1:RR(t)||(n==="spring"||zS(n))&&a}function Rp(t){t.duration=0,t.type="keyframes"}const IR=new Set(["opacity","clipPath","filter","transform"]),jR=cS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function MR(t){var m;const{motionValue:e,name:n,repeatDelay:a,repeatType:s,damping:o,type:u}=t;if(!(((m=e==null?void 0:e.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=e.owner.getProps();return jR()&&n&&IR.has(n)&&(n!=="transform"||!h)&&!f&&!a&&s!=="mirror"&&o!==0&&u!=="inertia"}const LR=40;class DR extends Mg{constructor({autoplay:e=!0,delay:n=0,type:a="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",keyframes:c,name:f,motionValue:h,element:m,...y}){var x;super(),this.stop=()=>{var w,A;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=on.now();const v={autoplay:e,delay:n,type:a,repeat:s,repeatDelay:o,repeatType:u,name:f,motionValue:h,element:m,...y},_=(m==null?void 0:m.KeyframeResolver)||Dg;this.keyframeResolver=new _(c,(w,A,T)=>this.onKeyframesResolved(w,A,v,!T),f,h,m),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,a,s){var A,T;this.keyframeResolver=void 0;const{name:o,type:u,velocity:c,delay:f,isHandoff:h,onUpdate:m}=a;this.resolvedAt=on.now(),kR(e,o,u,c)||((Za.instantAnimations||!f)&&(m==null||m(jg(e,a,n))),e[0]=e[e.length-1],Rp(a),a.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>LR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...a,keyframes:e},_=!h&&MR(v),x=(T=(A=v.motionValue)==null?void 0:A.owner)==null?void 0:T.current,w=_?new OR({...v,element:x}):new Lg(v);w.finished.then(()=>{this.notifyFinished()}).catch(Fn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),bR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function HS(t,e,n,a=0,s=1){const o=Array.from(t).sort((h,m)=>h.sortNodePosition(m)).indexOf(e),u=t.size,c=(u-1)*a;return typeof n=="function"?n(o,u):s===1?o*a:c-o*a}const PR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $R(t){const e=PR.exec(t);if(!e)return[,];const[,n,a,s]=e;return[`--${n??a}`,s]}function GS(t,e,n=1){const[a,s]=$R(t);if(!a)return;const o=window.getComputedStyle(e).getPropertyValue(a);if(o){const u=o.trim();return oS(u)?parseFloat(u):u}return Ng(s)?GS(s,e,n+1):s}const UR={type:"spring",stiffness:500,damping:25,restSpeed:10},zR=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),BR={type:"keyframes",duration:.8},VR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HR=(t,{keyframes:e})=>e.length>2?BR:Ur.has(t)?t.startsWith("scale")?zR(e[1]):UR:VR,GR=t=>t!==null;function qR(t,{repeat:e,repeatType:n="loop"},a){const s=t.filter(GR),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}function qS(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...a}=t;return{...e,...a}}return t}function Pg(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?qS(n,t):n}function FR({when:t,delay:e,delayChildren:n,staggerChildren:a,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:c,from:f,elapsed:h,...m}){return!!Object.keys(m).length}const $g=(t,e,n,a={},s,o)=>u=>{const c=Pg(a,t)||{},f=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-la(f);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};FR(c)||Object.assign(m,HR(t,m)),m.duration&&(m.duration=la(m.duration)),m.repeatDelay&&(m.repeatDelay=la(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Rp(m),m.delay===0&&(y=!0)),(Za.instantAnimations||Za.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(y=!0,Rp(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const v=qR(m.keyframes,c);if(v!==void 0){ft.update(()=>{m.onUpdate(v),m.onComplete()});return}}return c.isSync?new Lg(m):new DR(m)};function Yb(t){const e=[{},{}];return t==null||t.values.forEach((n,a)=>{e[0][a]=n.get(),e[1][a]=n.getVelocity()}),e}function Ug(t,e,n,a){if(typeof e=="function"){const[s,o]=Yb(a);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Yb(a);e=e(n!==void 0?n:t.custom,s,o)}return e}function Cr(t,e,n){const a=t.getProps();return Ug(a,e,n!==void 0?n:a.custom,t)}const FS=new Set(["width","height","top","left","right","bottom",...$r]),Zb=30,YR=t=>!isNaN(parseFloat(t));class ZR{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var o;const s=on.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=on.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Tg);const a=this.events[e].add(n);return e==="change"?()=>{a(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,a){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=on.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zb);return dS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Or(t,e){return new ZR(t,e)}const kp=t=>Array.isArray(t);function XR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Or(n))}function KR(t){return kp(t)?t[t.length-1]||0:t}function zg(t,e){const n=Cr(t,e);let{transitionEnd:a={},transition:s={},...o}=n||{};o={...o,...a};for(const u in o){const c=KR(o[u]);XR(t,u,c)}}const Jt=t=>!!(t&&t.getVelocity);function QR(t){return!!(Jt(t)&&t.add)}function Ip(t,e){const n=t.getValue("willChange");if(QR(n))return n.add(e);if(!n&&Za.WillChange){const a=new Za.WillChange("auto");t.addValue("willChange",a),a.add(e)}}function Bg(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const JR="framerAppearId",YS="data-"+Bg(JR);function ZS(t){return t.props[YS]}function WR({protectedKeys:t,needsAnimating:e},n){const a=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,a}function XS(t,e,{delay:n=0,transitionOverride:a,type:s}={}){let{transition:o,transitionEnd:u,...c}=e;const f=t.getDefaultTransition();o=o?qS(o,f):f;const h=o==null?void 0:o.reduceMotion;a&&(o=a);const m=[],y=s&&t.animationState&&t.animationState.getState()[s];for(const v in c){const _=t.getValue(v,t.latestValues[v]??null),x=c[v];if(x===void 0||y&&WR(y,v))continue;const w={delay:n,...Pg(o||{},v)},A=_.get();if(A!==void 0&&!_.isAnimating&&!Array.isArray(x)&&x===A&&!w.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const z=ZS(t);if(z){const P=window.MotionHandoffAnimation(z,v,ft);P!==null&&(w.startTime=P,T=!0)}}Ip(t,v);const k=h??t.shouldReduceMotion;_.start($g(v,_,x,k&&FS.has(v)?{type:!1}:w,t,T));const R=_.animation;R&&m.push(R)}if(u){const v=()=>ft.update(()=>{u&&zg(t,u)});m.length?Promise.all(m).then(v):v()}return m}function jp(t,e,n={}){var f;const a=Cr(t,e,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(s=n.transitionOverride);const o=a?()=>Promise.all(XS(t,a,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:v}=s;return ek(t,e,h,m,y,v,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,m]=c==="beforeChildren"?[o,u]:[u,o];return h().then(()=>m())}else return Promise.all([o(),u(n.delay)])}function ek(t,e,n=0,a=0,s=0,o=1,u){const c=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),c.push(jp(f,e,{...u,delay:n+(typeof a=="function"?0:a)+HS(t.variantChildren,f,a,s,o)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function KS(t,e,n={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const s=e.map(o=>jp(t,o,n));a=Promise.all(s)}else if(typeof e=="string")a=jp(t,e,n);else{const s=typeof e=="function"?Cr(t,e,n.custom):e;a=Promise.all(XS(t,s,n))}return a.then(()=>{t.notify("AnimationComplete",e)})}const tk={test:t=>t==="auto",parse:t=>t},QS=t=>e=>e.test(t),JS=[Pr,we,xa,Si,IO,kO,tk],Xb=t=>JS.find(QS(t));function nk(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uS(t):!0}const ak=new Set(["brightness","contrast","saturate","opacity"]);function ik(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=n.match(Og)||[];if(!a)return t;const s=n.replace(a,"");let o=ak.has(e)?1:0;return a!==n&&(o*=100),e+"("+o+s+")"}const sk=/\b([a-z-]*)\(.*?\)/gu,Mp={...ua,getAnimatableNone:t=>{const e=t.match(sk);return e?e.map(ik).join(" "):t}},Lp={...ua,getAnimatableNone:t=>{const e=ua.parse(t);return ua.createTransformer(t)(e.map(a=>typeof a=="number"?0:typeof a=="object"?{...a,alpha:1}:a))}},Kb={...Pr,transform:Math.round},rk={rotate:Si,rotateX:Si,rotateY:Si,rotateZ:Si,scale:Yu,scaleX:Yu,scaleY:Yu,scaleZ:Yu,skew:Si,skewX:Si,skewY:Si,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:sl,originX:Db,originY:Db,originZ:we},Vg={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,inset:we,insetBlock:we,insetBlockStart:we,insetBlockEnd:we,insetInline:we,insetInlineStart:we,insetInlineEnd:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,paddingBlock:we,paddingBlockStart:we,paddingBlockEnd:we,paddingInline:we,paddingInlineStart:we,paddingInlineEnd:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,marginBlock:we,marginBlockStart:we,marginBlockEnd:we,marginInline:we,marginInlineStart:we,marginInlineEnd:we,fontSize:we,backgroundPositionX:we,backgroundPositionY:we,...rk,zIndex:Kb,fillOpacity:sl,strokeOpacity:sl,numOctaves:Kb},ok={...Vg,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:Mp,WebkitFilter:Mp,mask:Lp,WebkitMask:Lp},WS=t=>ok[t],lk=new Set([Mp,Lp]);function eT(t,e){let n=WS(t);return lk.has(n)||(n=ua),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const uk=new Set(["auto","none","0"]);function ck(t,e,n){let a=0,s;for(;a<t.length&&!s;){const o=t[a];typeof o=="string"&&!uk.has(o)&&rl(o).values.length&&(s=t[a]),a++}if(s&&n)for(const o of e)t[o]=eT(n,s)}class dk extends Dg{constructor(e,n,a,s,o){super(e,n,a,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:a}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let y=e[m];if(typeof y=="string"&&(y=y.trim(),Ng(y))){const v=GS(y,n.current);v!==void 0&&(e[m]=v),m===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!FS.has(a)||e.length!==2)return;const[s,o]=e,u=Xb(s),c=Xb(o),f=Lb(s),h=Lb(o);if(f!==h&&Ri[a]){this.needsMeasurement=!0;return}if(u!==c)if(Gb(u)&&Gb(c))for(let m=0;m<e.length;m++){const y=e[m];typeof y=="string"&&(e[m]=parseFloat(y))}else Ri[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,a=[];for(let s=0;s<e.length;s++)(e[s]===null||nk(e[s]))&&a.push(s);a.length&&ck(e,a,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ri[a](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(a,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=a.length-1,u=a[o];a[o]=Ri[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([f,h])=>{e.getValue(f).set(h)}),this.resolveNoneKeyframes()}}const fk=new Set(["opacity","clipPath","filter","transform"]);function tT(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const s=(n==null?void 0:n[t])??a.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(a=>a!=null)}const nT=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Dp(t){return lS(t)&&"offsetHeight"in t}const{schedule:Hg}=xS(queueMicrotask,!1),sa={x:!1,y:!1};function aT(){return sa.x||sa.y}function hk(t){return t==="x"||t==="y"?sa[t]?null:(sa[t]=!0,()=>{sa[t]=!1}):sa.x||sa.y?null:(sa.x=sa.y=!0,()=>{sa.x=sa.y=!1})}function iT(t,e){const n=tT(t),a=new AbortController,s={passive:!0,...e,signal:a.signal};return[n,s,()=>a.abort()]}function mk(t){return!(t.pointerType==="touch"||aT())}function pk(t,e,n={}){const[a,s,o]=iT(t,n);return a.forEach(u=>{let c=!1,f=!1,h;const m=()=>{u.removeEventListener("pointerleave",x)},y=A=>{h&&(h(A),h=void 0),m()},v=A=>{c=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f&&(f=!1,y(A))},_=()=>{c=!0,window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",v,s)},x=A=>{if(A.pointerType!=="touch"){if(c){f=!0;return}y(A)}},w=A=>{if(!mk(A))return;f=!1;const T=e(u,A);typeof T=="function"&&(h=T,u.addEventListener("pointerleave",x,s))};u.addEventListener("pointerenter",w,s),u.addEventListener("pointerdown",_,s)}),o}const sT=(t,e)=>e?t===e?!0:sT(t,e.parentElement):!1,Gg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yk(t){return gk.has(t.tagName)||t.isContentEditable===!0}const vk=new Set(["INPUT","SELECT","TEXTAREA"]);function _k(t){return vk.has(t.tagName)||t.isContentEditable===!0}const gc=new WeakSet;function Qb(t){return e=>{e.key==="Enter"&&t(e)}}function Vh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bk=(t,e)=>{const n=t.currentTarget;if(!n)return;const a=Qb(()=>{if(gc.has(n))return;Vh(n,"down");const s=Qb(()=>{Vh(n,"up")}),o=()=>Vh(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",a,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",a),e)};function Jb(t){return Gg(t)&&!aT()}const Wb=new WeakSet;function wk(t,e,n={}){const[a,s,o]=iT(t,n),u=c=>{const f=c.currentTarget;if(!Jb(c)||Wb.has(c))return;gc.add(f),n.stopPropagation&&Wb.add(c);const h=e(f,c),m=(_,x)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),gc.has(f)&&gc.delete(f),Jb(_)&&typeof h=="function"&&h(_,{success:x})},y=_=>{m(_,f===window||f===document||n.useGlobalTarget||sT(f,_.target))},v=_=>{m(_,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return a.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",u,s),Dp(c)&&(c.addEventListener("focus",h=>bk(h,s)),!yk(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function qg(t){return lS(t)&&"ownerSVGElement"in t}const yc=new WeakMap;let Ti;const rT=(t,e,n)=>(a,s)=>s&&s[0]?s[0][t+"Size"]:qg(a)&&"getBBox"in a?a.getBBox()[e]:a[n],xk=rT("inline","width","offsetWidth"),Ek=rT("block","height","offsetHeight");function Sk({target:t,borderBoxSize:e}){var n;(n=yc.get(t))==null||n.forEach(a=>{a(t,{get width(){return xk(t,e)},get height(){return Ek(t,e)}})})}function Tk(t){t.forEach(Sk)}function Ak(){typeof ResizeObserver>"u"||(Ti=new ResizeObserver(Tk))}function Ck(t,e){Ti||Ak();const n=tT(t);return n.forEach(a=>{let s=yc.get(a);s||(s=new Set,yc.set(a,s)),s.add(e),Ti==null||Ti.observe(a)}),()=>{n.forEach(a=>{const s=yc.get(a);s==null||s.delete(e),s!=null&&s.size||Ti==null||Ti.unobserve(a)})}}const vc=new Set;let yr;function Nk(){yr=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};vc.forEach(e=>e(t))},window.addEventListener("resize",yr)}function Ok(t){return vc.add(t),yr||Nk(),()=>{vc.delete(t),!vc.size&&typeof yr=="function"&&(window.removeEventListener("resize",yr),yr=void 0)}}function ew(t,e){return typeof t=="function"?Ok(t):Ck(t,e)}function Rk(t){return qg(t)&&t.tagName==="svg"}const kk=[...JS,It,ua],Ik=t=>kk.find(QS(t)),tw=()=>({translate:0,scale:1,origin:0,originPoint:0}),vr=()=>({x:tw(),y:tw()}),nw=()=>({min:0,max:0}),Lt=()=>({x:nw(),y:nw()}),jk=new WeakMap;function nd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ol(t){return typeof t=="string"||Array.isArray(t)}const Fg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yg=["initial",...Fg];function ad(t){return nd(t.animate)||Yg.some(e=>ol(t[e]))}function oT(t){return!!(ad(t)||t.variants)}function Mk(t,e,n){for(const a in e){const s=e[a],o=n[a];if(Jt(s))t.addValue(a,s);else if(Jt(o))t.addValue(a,Or(s,{owner:t}));else if(o!==s)if(t.hasValue(a)){const u=t.getValue(a);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(a);t.addValue(a,Or(u!==void 0?u:s,{owner:t}))}}for(const a in n)e[a]===void 0&&t.removeValue(a);return e}const Pp={current:null},lT={current:!1},Lk=typeof window<"u";function Dk(){if(lT.current=!0,!!Lk)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pp.current=t.matches;t.addEventListener("change",e),e()}else Pp.current=!1}const aw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ic={};function uT(t){Ic=t}function Pk(){return Ic}class $k{scrapeMotionValuesFromProps(e,n,a){return{}}constructor({parent:e,props:n,presenceContext:a,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:u,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Dg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=on.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,ft.render(this.render,!1,!0))};const{latestValues:h,renderState:m}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=f,this.blockInitialAnimation=!!u,this.isControllingVariants=ad(n),this.isVariantNode=oT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in v){const x=v[_];h[_]!==void 0&&Jt(x)&&x.set(h[_])}}mount(e){var n,a;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,jk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(lT.current||Dk(),this.shouldReduceMotion=Pp.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),$i(this.notifyUpdate),$i(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const a=this.features[n];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&fk.has(e)&&this.current instanceof HTMLElement){const{factory:u,keyframes:c,times:f,ease:h,duration:m}=n.accelerate,y=new BS({element:this.current,name:e,keyframes:c,times:f,ease:h,duration:la(m)}),v=u(y);this.valueSubscriptions.set(e,()=>{v(),y.cancel()});return}const a=Ur.has(e);a&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ft.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ic){const n=Ic[e];if(!n)continue;const{isEnabled:a,Feature:s}=n;if(!this.features[e]&&s&&a(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let a=0;a<aw.length;a++){const s=aw[a];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=Mk(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const a=this.values.get(e);n!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&n!==void 0&&(a=Or(n===null?void 0:n,{owner:this}),this.addValue(e,a)),a}readValue(e,n){let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(oS(a)||uS(a))?a=parseFloat(a):!Ik(a)&&ua.test(n)&&(a=eT(e,n)),this.setBaseTarget(e,Jt(a)?a.get():a)),Jt(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const u=Ug(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);u&&(a=u[e])}if(n&&a!==void 0)return a;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Jt(s)?s:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Tg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Hg.render(this.render)}}class cT extends $k{constructor(){super(...arguments),this.KeyframeResolver=dk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const a=e.style;return a?a[n]:void 0}removeValueFromRenderState(e,{vars:n,style:a}){delete n[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Gi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function dT({top:t,left:e,right:n,bottom:a}){return{x:{min:e,max:n},y:{min:t,max:a}}}function Uk({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zk(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}function Hh(t){return t===void 0||t===1}function $p({scale:t,scaleX:e,scaleY:n}){return!Hh(t)||!Hh(e)||!Hh(n)}function cs(t){return $p(t)||fT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fT(t){return iw(t.x)||iw(t.y)}function iw(t){return t&&t!=="0%"}function jc(t,e,n){const a=t-n,s=e*a;return n+s}function sw(t,e,n,a,s){return s!==void 0&&(t=jc(t,s,a)),jc(t,n,a)+e}function Up(t,e=0,n=1,a,s){t.min=sw(t.min,e,n,a,s),t.max=sw(t.max,e,n,a,s)}function hT(t,{x:e,y:n}){Up(t.x,e.translate,e.scale,e.originPoint),Up(t.y,n.translate,n.scale,n.originPoint)}const rw=.999999999999,ow=1.0000000000001;function Bk(t,e,n,a=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let c=0;c<s;c++){o=n[c],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(a&&o.options.layoutScroll&&o.scroll&&o!==o.root&&br(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,hT(t,u)),a&&cs(o.latestValues)&&br(t,o.latestValues))}e.x<ow&&e.x>rw&&(e.x=1),e.y<ow&&e.y>rw&&(e.y=1)}function _r(t,e){t.min=t.min+e,t.max=t.max+e}function lw(t,e,n,a,s=.5){const o=bt(t.min,t.max,s);Up(t,e,n,o,a)}function br(t,e){lw(t.x,e.x,e.scaleX,e.scale,e.originX),lw(t.y,e.y,e.scaleY,e.scale,e.originY)}function mT(t,e){return dT(zk(t.getBoundingClientRect(),e))}function Vk(t,e,n){const a=mT(t,n),{scroll:s}=e;return s&&(_r(a.x,s.offset.x),_r(a.y,s.offset.y)),a}const Hk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gk=$r.length;function qk(t,e,n){let a="",s=!0;for(let o=0;o<Gk;o++){const u=$r[o],c=t[u];if(c===void 0)continue;let f=!0;if(typeof c=="number")f=c===(u.startsWith("scale")?1:0);else{const h=parseFloat(c);f=u.startsWith("scale")?h===1:h===0}if(!f||n){const h=nT(c,Vg[u]);if(!f){s=!1;const m=Hk[u]||u;a+=`${m}(${h}) `}n&&(e[u]=h)}}return a=a.trim(),n?a=n(e,s?"":a):s&&(a="none"),a}function Zg(t,e,n){const{style:a,vars:s,transformOrigin:o}=t;let u=!1,c=!1;for(const f in e){const h=e[f];if(Ur.has(f)){u=!0;continue}else if(SS(f)){s[f]=h;continue}else{const m=nT(h,Vg[f]);f.startsWith("origin")?(c=!0,o[f]=m):a[f]=m}}if(e.transform||(u||n?a.transform=qk(e,t.transform,n):a.transform&&(a.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:m=0}=o;a.transformOrigin=`${f} ${h} ${m}`}}function pT(t,{style:e,vars:n},a,s){const o=t.style;let u;for(u in e)o[u]=e[u];s==null||s.applyProjectionStyles(o,a);for(u in n)o.setProperty(u,n[u])}function uw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $o={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const n=uw(t,e.target.x),a=uw(t,e.target.y);return`${n}% ${a}%`}},Fk={correct:(t,{treeScale:e,projectionDelta:n})=>{const a=t,s=ua.parse(t);if(s.length>5)return a;const o=ua.createTransformer(t),u=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+u]/=c,s[1+u]/=f;const h=bt(c,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=h),typeof s[3+u]=="number"&&(s[3+u]/=h),o(s)}},zp={borderRadius:{...$o,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$o,borderTopRightRadius:$o,borderBottomLeftRadius:$o,borderBottomRightRadius:$o,boxShadow:Fk};function gT(t,{layout:e,layoutId:n}){return Ur.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zp[t]||t==="opacity")}function Xg(t,e,n){var u;const a=t.style,s=e==null?void 0:e.style,o={};if(!a)return o;for(const c in a)(Jt(a[c])||s&&Jt(s[c])||gT(c,t)||((u=n==null?void 0:n.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(o[c]=a[c]);return o}function Yk(t){return window.getComputedStyle(t)}class Zk extends cT{constructor(){super(...arguments),this.type="html",this.renderInstance=pT}readValueFromInstance(e,n){var a;if(Ur.has(n))return(a=this.projection)!=null&&a.isProjecting?Tp(n):pR(e,n);{const s=Yk(e),o=(SS(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return mT(e,n)}build(e,n,a){Zg(e,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,n,a){return Xg(e,n,a)}}const Xk={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kk={offset:"strokeDashoffset",array:"strokeDasharray"};function Qk(t,e,n=1,a=0,s=!0){t.pathLength=1;const o=s?Xk:Kk;t[o.offset]=`${-a}`,t[o.array]=`${e} ${n}`}const Jk=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function yT(t,{attrX:e,attrY:n,attrScale:a,pathLength:s,pathSpacing:o=1,pathOffset:u=0,...c},f,h,m){if(Zg(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox);for(const _ of Jk)y[_]!==void 0&&(v[_]=y[_],delete y[_]);e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),a!==void 0&&(y.scale=a),s!==void 0&&Qk(y,s,o,u,!1)}const vT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),_T=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Wk(t,e,n,a){pT(t,e,void 0,a);for(const s in e.attrs)t.setAttribute(vT.has(s)?s:Bg(s),e.attrs[s])}function bT(t,e,n){const a=Xg(t,e,n);for(const s in t)if(Jt(t[s])||Jt(e[s])){const o=$r.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;a[o]=t[s]}return a}class eI extends cT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ur.has(n)){const a=WS(n);return a&&a.default||0}return n=vT.has(n)?n:Bg(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,a){return bT(e,n,a)}build(e,n,a){yT(e,n,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(e,n,a,s){Wk(e,n,a,s)}mount(e){this.isSVGTag=_T(e.tagName),super.mount(e)}}const tI=Yg.length;function wT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?wT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<tI;n++){const a=Yg[n],s=t.props[a];(ol(s)||s===!1)&&(e[a]=s)}return e}function xT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let a=0;a<n;a++)if(e[a]!==t[a])return!1;return!0}const nI=[...Fg].reverse(),aI=Fg.length;function iI(t){return e=>Promise.all(e.map(({animation:n,options:a})=>KS(t,n,a)))}function sI(t){let e=iI(t),n=cw(),a=!0;const s=f=>(h,m)=>{var v;const y=Cr(t,m,f==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:_,transitionEnd:x,...w}=y;h={...h,...w,...x}}return h};function o(f){e=f(t)}function u(f){const{props:h}=t,m=wT(t.parent)||{},y=[],v=new Set;let _={},x=1/0;for(let A=0;A<aI;A++){const T=nI[A],k=n[T],R=h[T]!==void 0?h[T]:m[T],z=ol(R),P=T===f?k.isActive:null;P===!1&&(x=A);let Y=R===m[T]&&R!==h[T]&&z;if(Y&&a&&t.manuallyAnimateOnMount&&(Y=!1),k.protectedKeys={..._},!k.isActive&&P===null||!R&&!k.prevProp||nd(R)||typeof R=="boolean")continue;if(T==="exit"&&k.isActive&&P!==!0){k.prevResolvedValues&&(_={..._,...k.prevResolvedValues});continue}const W=rI(k.prevProp,R);let O=W||T===f&&k.isActive&&!Y&&z||A>x&&z,ge=!1;const Ce=Array.isArray(R)?R:[R];let ve=Ce.reduce(s(T),{});P===!1&&(ve={});const{prevResolvedValues:De={}}=k,We={...De,...ve},oe=U=>{O=!0,v.has(U)&&(ge=!0,v.delete(U)),k.needsAnimating[U]=!0;const Q=t.getValue(U);Q&&(Q.liveStyle=!1)};for(const U in We){const Q=ve[U],X=De[U];if(_.hasOwnProperty(U))continue;let ae=!1;kp(Q)&&kp(X)?ae=!xT(Q,X):ae=Q!==X,ae?Q!=null?oe(U):v.add(U):Q!==void 0&&v.has(U)?oe(U):k.protectedKeys[U]=!0}k.prevProp=R,k.prevResolvedValues=ve,k.isActive&&(_={..._,...ve}),a&&t.blockInitialAnimation&&(O=!1);const re=Y&&W;O&&(!re||ge)&&y.push(...Ce.map(U=>{const Q={type:T};if(typeof U=="string"&&a&&!re&&t.manuallyAnimateOnMount&&t.parent){const{parent:X}=t,ae=Cr(X,U);if(X.enteringChildren&&ae){const{delayChildren:I}=ae.transition||{};Q.delay=HS(X.enteringChildren,t,I)}}return{animation:U,options:Q}}))}if(v.size){const A={};if(typeof h.initial!="boolean"){const T=Cr(t,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(A.transition=T.transition)}v.forEach(T=>{const k=t.getBaseTarget(T),R=t.getValue(T);R&&(R.liveStyle=!0),A[T]=k??null}),y.push({animation:A})}let w=!!y.length;return a&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),a=!1,w?e(y):Promise.resolve()}function c(f,h){var y;if(n[f].isActive===h)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var _;return(_=v.animationState)==null?void 0:_.setActive(f,h)}),n[f].isActive=h;const m=u(f);for(const v in n)n[v].protectedKeys={};return m}return{animateChanges:u,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=cw()}}}function rI(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xT(e,t):!1}function us(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cw(){return{animate:us(!0),whileInView:us(),whileHover:us(),whileTap:us(),whileDrag:us(),whileFocus:us(),exit:us()}}function dw(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){dw(t.x,e.x),dw(t.y,e.y)}function fw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const ET=1e-4,oI=1-ET,lI=1+ET,ST=.01,uI=0-ST,cI=0+ST;function ln(t){return t.max-t.min}function dI(t,e,n){return Math.abs(t-e)<=n}function hw(t,e,n,a=.5){t.origin=a,t.originPoint=bt(e.min,e.max,t.origin),t.scale=ln(n)/ln(e),t.translate=bt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=oI&&t.scale<=lI||isNaN(t.scale))&&(t.scale=1),(t.translate>=uI&&t.translate<=cI||isNaN(t.translate))&&(t.translate=0)}function Ko(t,e,n,a){hw(t.x,e.x,n.x,a?a.originX:void 0),hw(t.y,e.y,n.y,a?a.originY:void 0)}function mw(t,e,n){t.min=n.min+e.min,t.max=t.min+ln(e)}function fI(t,e,n){mw(t.x,e.x,n.x),mw(t.y,e.y,n.y)}function pw(t,e,n){t.min=e.min-n.min,t.max=t.min+ln(e)}function Mc(t,e,n){pw(t.x,e.x,n.x),pw(t.y,e.y,n.y)}function gw(t,e,n,a,s){return t-=e,t=jc(t,1/n,a),s!==void 0&&(t=jc(t,1/s,a)),t}function hI(t,e=0,n=1,a=.5,s,o=t,u=t){if(xa.test(e)&&(e=parseFloat(e),e=bt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let c=bt(o.min,o.max,a);t===o&&(c-=e),t.min=gw(t.min,e,n,c,s),t.max=gw(t.max,e,n,c,s)}function yw(t,e,[n,a,s],o,u){hI(t,e[n],e[a],e[s],e.scale,o,u)}const mI=["x","scaleX","originX"],pI=["y","scaleY","originY"];function vw(t,e,n,a){yw(t.x,e,mI,n?n.x:void 0,a?a.x:void 0),yw(t.y,e,pI,n?n.y:void 0,a?a.y:void 0)}function _w(t){return t.translate===0&&t.scale===1}function TT(t){return _w(t.x)&&_w(t.y)}function bw(t,e){return t.min===e.min&&t.max===e.max}function gI(t,e){return bw(t.x,e.x)&&bw(t.y,e.y)}function ww(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function AT(t,e){return ww(t.x,e.x)&&ww(t.y,e.y)}function xw(t){return ln(t.x)/ln(t.y)}function Ew(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function _a(t){return[t("x"),t("y")]}function yI(t,e,n){let a="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||o||u)&&(a=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:y,rotateY:v,skewX:_,skewY:x}=n;h&&(a=`perspective(${h}px) ${a}`),m&&(a+=`rotate(${m}deg) `),y&&(a+=`rotateX(${y}deg) `),v&&(a+=`rotateY(${v}deg) `),_&&(a+=`skewX(${_}deg) `),x&&(a+=`skewY(${x}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(a+=`scale(${c}, ${f})`),a||"none"}const CT=["TopLeft","TopRight","BottomLeft","BottomRight"],vI=CT.length,Sw=t=>typeof t=="string"?parseFloat(t):t,Tw=t=>typeof t=="number"||we.test(t);function _I(t,e,n,a,s,o){s?(t.opacity=bt(0,n.opacity??1,bI(a)),t.opacityExit=bt(e.opacity??1,0,wI(a))):o&&(t.opacity=bt(e.opacity??1,n.opacity??1,a));for(let u=0;u<vI;u++){const c=`border${CT[u]}Radius`;let f=Aw(e,c),h=Aw(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||Tw(f)===Tw(h)?(t[c]=Math.max(bt(Sw(f),Sw(h),a),0),(xa.test(h)||xa.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=bt(e.rotate||0,n.rotate||0,a))}function Aw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bI=NT(0,.5,vS),wI=NT(.5,.95,Fn);function NT(t,e,n){return a=>a<t?0:a>e?1:n(il(t,e,a))}function xI(t,e,n){const a=Jt(t)?t:Or(t);return a.start($g("",a,e,n)),a.animation}function ll(t,e,n,a={passive:!0}){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n)}const EI=(t,e)=>t.depth-e.depth;class SI{constructor(){this.children=[],this.isDirty=!1}add(e){Eg(this.children,e),this.isDirty=!0}remove(e){Nc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EI),this.isDirty=!1,this.children.forEach(e)}}function TI(t,e){const n=on.now(),a=({timestamp:s})=>{const o=s-n;o>=e&&($i(a),t(o-e))};return ft.setup(a,!0),()=>$i(a)}function _c(t){return Jt(t)?t.get():t}class AI{constructor(){this.members=[]}add(e){Eg(this.members,e);for(let n=this.members.length-1;n>=0;n--){const a=this.members[n];if(a===e||a===this.lead||a===this.prevLead)continue;const s=a.instance;s&&s.isConnected===!1&&a.isPresent!==!1&&!a.snapshot&&Nc(this.members,a)}e.scheduleRender()}remove(e){if(Nc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let a;for(let s=n;s>=0;s--){const o=this.members[s],u=o.instance;if(o.isPresent!==!1&&(!u||u.isConnected!==!1)){a=o;break}}return a?(this.promote(a),!0):!1}promote(e,n){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender();const s=a.options.layoutDependency,o=e.options.layoutDependency;if(!(s!==void 0&&o!==void 0&&s===o)){const f=a.instance;f&&f.isConnected===!1&&!a.snapshot||(e.resumeFrom=a,n&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:c}=e.options;c===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:a}=e;n.onExitComplete&&n.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const bc={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Gh=["","X","Y","Z"],CI=1e3;let NI=0;function qh(t,e,n,a){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),a&&(a[t]=0))}function OT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ZS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ft,!(s||o))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&OT(a)}function RT({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:a,resetTransform:s}){return class{constructor(u={},c=e==null?void 0:e()){this.id=NI++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(kI),this.nodes.forEach(LI),this.nodes.forEach(DI),this.nodes.forEach(II)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new SI)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Tg),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const f=this.eventHandlers.get(u);f&&f.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=qg(u)&&!Rk(u),this.instance=u;const{layoutId:c,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let m,y=0;const v=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{y=window.innerWidth}),t(u,()=>{const _=window.innerWidth;_!==y&&(y=_,this.root.updateBlockedByResize=!0,m&&m(),m=TI(v,250),bc.hasAnimatedSinceResize&&(bc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ow)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||BI,{onLayoutAnimationStart:w,onLayoutAnimationComplete:A}=h.getProps(),T=!this.targetLayout||!AT(this.targetLayout,_),k=!y&&v;if(this.options.layoutRoot||this.resumeFrom||k||y&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Pg(x,"layout"),onPlay:w,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(m,k)}else y||Ow(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$i(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PI),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Nw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MI),this.nodes.forEach(OI),this.nodes.forEach(RI)):this.nodes.forEach(Nw),this.clearAllSnapshots();const c=on.now();Zt.delta=Sa(0,1e3/60,c-Zt.timestamp),Zt.timestamp=c,Zt.isProcessing=!0,Dh.update.process(Zt),Dh.preRender.process(Zt),Dh.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jI),this.sharedNodes.forEach($I)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ln(this.snapshot.measuredBox.x)&&!ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c&&this.instance){const f=a(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!TT(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;u&&this.instance&&(c||cs(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return u&&(f=this.removeTransform(f)),VI(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:u}=this.options;if(!u)return Lt();const c=u.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(HI))){const{scroll:m}=this.root;m&&(_r(c.x,m.offset.x),_r(c.y,m.offset.y))}return c}removeElementScroll(u){var f;const c=Lt();if(Wn(c,u),(f=this.scroll)!=null&&f.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:y,options:v}=m;m!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Wn(c,u),_r(c.x,y.offset.x),_r(c.y,y.offset.y))}return c}applyTransform(u,c=!1){const f=Lt();Wn(f,u);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&br(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),cs(m.latestValues)&&br(f,m.latestValues)}return cs(this.latestValues)&&br(f,this.latestValues),f}removeTransform(u){const c=Lt();Wn(c,u);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!cs(h.latestValues))continue;$p(h.latestValues)&&h.updateSnapshot();const m=Lt(),y=h.measurePageBox();Wn(m,y),vw(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return cs(this.latestValues)&&vw(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var _;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=Zt.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lt(),this.targetWithTransforms=Lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),hT(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||$p(this.parent.latestValues)||fT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,c,f){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),Mc(this.relativeTargetOrigin,c,f),Wn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var x;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(f=!1),f)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Wn(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;Bk(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Lt());const{target:_}=u;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fw(this.prevProjectionDelta.x,this.projectionDelta.x),fw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ko(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!Ew(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ew(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vr(),this.projectionDelta=vr(),this.projectionDeltaWithTransform=vr()}setAnimationOrigin(u,c=!1){const f=this.snapshot,h=f?f.latestValues:{},m={...this.latestValues},y=vr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Lt(),_=f?f.source:void 0,x=this.layout?this.layout.source:void 0,w=_!==x,A=this.getStack(),T=!A||A.members.length<=1,k=!!(w&&!T&&this.options.crossfade===!0&&!this.path.some(zI));this.animationProgress=0;let R;this.mixTargetDelta=z=>{const P=z/1e3;Rw(y.x,u.x,P),Rw(y.y,u.y,P),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mc(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UI(this.relativeTarget,this.relativeTargetOrigin,v,P),R&&gI(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Lt()),Wn(R,this.relativeTarget)),w&&(this.animationValues=m,_I(m,h,this.latestValues,P,k,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var c,f,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||h.stop(),this.pendingAnimation&&($i(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{bc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Or(0)),this.motionValue.jump(0,!1),this.currentAnimation=xI(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),u.onUpdate&&u.onUpdate(m)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(CI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:m}=u;if(!(!c||!f||!h)){if(this!==u&&this.layout&&h&&kT(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Lt();const y=ln(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const v=ln(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+v}Wn(c,f),br(c,m),Ko(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new AI),this.sharedNodes.get(u).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&qh("z",u,h,this.animationValues);for(let m=0;m<Gh.length;m++)qh(`rotate${Gh[m]}`,u,h,this.animationValues),qh(`skew${Gh[m]}`,u,h,this.animationValues);u.render();for(const m in h)u.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);u.scheduleRender()}applyProjectionStyles(u,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=_c(c==null?void 0:c.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=_c(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!cs(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let y=yI(this.projectionDeltaWithTransform,this.treeScale,m);f&&(y=f(m,y)),u.transform=y;const{x:v,y:_}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,h.animationValues?u.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in zp){if(m[x]===void 0)continue;const{correct:w,applyTo:A,isCSSVariable:T}=zp[x],k=y==="none"?m[x]:w(m[x],h);if(A){const R=A.length;for(let z=0;z<R;z++)u[A[z]]=k}else T?this.options.visualElement.renderState.vars[x]=k:u[x]=k}this.options.layoutId&&(u.pointerEvents=h===this?_c(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var c;return(c=u.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(Cw),this.root.sharedNodes.clear()}}}function OI(t){t.updateLayout()}function RI(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:s}=t.layout,{animationType:o}=t.options,u=e.source!==t.layout.source;o==="size"?_a(y=>{const v=u?e.measuredBox[y]:e.layoutBox[y],_=ln(v);v.min=a[y].min,v.max=v.min+_}):kT(o,e.layoutBox,a)&&_a(y=>{const v=u?e.measuredBox[y]:e.layoutBox[y],_=ln(a[y]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+_)});const c=vr();Ko(c,a,e.layoutBox);const f=vr();u?Ko(f,t.applyTransform(s,!0),e.measuredBox):Ko(f,a,e.layoutBox);const h=!TT(c);let m=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:_}=y;if(v&&_){const x=Lt();Mc(x,e.layoutBox,v.layoutBox);const w=Lt();Mc(w,a,_.layoutBox),AT(x,w)||(m=!0),y.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=x,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:e,delta:f,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function kI(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function II(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function jI(t){t.clearSnapshot()}function Cw(t){t.clearMeasurements()}function Nw(t){t.isLayoutDirty=!1}function MI(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ow(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function LI(t){t.resolveTargetDelta()}function DI(t){t.calcProjection()}function PI(t){t.resetSkewAndRotation()}function $I(t){t.removeLeadSnapshot()}function Rw(t,e,n){t.translate=bt(e.translate,0,n),t.scale=bt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kw(t,e,n,a){t.min=bt(e.min,n.min,a),t.max=bt(e.max,n.max,a)}function UI(t,e,n,a){kw(t.x,e.x,n.x,a),kw(t.y,e.y,n.y,a)}function zI(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BI={duration:.45,ease:[.4,0,.1,1]},Iw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),jw=Iw("applewebkit/")&&!Iw("chrome/")?Math.round:Fn;function Mw(t){t.min=jw(t.min),t.max=jw(t.max)}function VI(t){Mw(t.x),Mw(t.y)}function kT(t,e,n){return t==="position"||t==="preserve-aspect"&&!dI(xw(e),xw(n),.2)}function HI(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const GI=RT({attachResizeListener:(t,e)=>ll(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Fh={current:void 0},IT=RT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fh.current){const t=new GI({});t.mount(window),t.setOptions({layoutScroll:!0}),Fh.current=t}return Fh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kg=ne.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Lw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qI(...t){return e=>{let n=!1;const a=t.map(s=>{const o=Lw(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<a.length;s++){const o=a[s];typeof o=="function"?o():Lw(t[s],null)}}}}function FI(...t){return ne.useCallback(qI(...t),t)}class YI extends ne.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const a=n.offsetParent,s=Dp(a)&&a.offsetWidth||0,o=Dp(a)&&a.offsetHeight||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=s-u.width-u.left,u.bottom=o-u.height-u.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ZI({children:t,isPresent:e,anchorX:n,anchorY:a,root:s,pop:o}){var v;const u=ne.useId(),c=ne.useRef(null),f=ne.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=ne.useContext(Kg),m=((v=t.props)==null?void 0:v.ref)??(t==null?void 0:t.ref),y=FI(c,m);return ne.useInsertionEffect(()=>{const{width:_,height:x,top:w,left:A,right:T,bottom:k}=f.current;if(e||o===!1||!c.current||!_||!x)return;const R=n==="left"?`left: ${A}`:`right: ${T}`,z=a==="bottom"?`bottom: ${k}`:`top: ${w}`;c.current.dataset.motionPopId=u;const P=document.createElement("style");h&&(P.nonce=h);const Y=s??document.head;return Y.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${_}px !important;
            height: ${x}px !important;
            ${R}px !important;
            ${z}px !important;
          }
        `),()=>{Y.contains(P)&&Y.removeChild(P)}},[e]),E.jsx(YI,{isPresent:e,childRef:c,sizeRef:f,pop:o,children:o===!1?t:ne.cloneElement(t,{ref:y})})}const XI=({children:t,initial:e,isPresent:n,onExitComplete:a,custom:s,presenceAffectsLayout:o,mode:u,anchorX:c,anchorY:f,root:h})=>{const m=ed(KI),y=ne.useId();let v=!0,_=ne.useMemo(()=>(v=!1,{id:y,initial:e,isPresent:n,custom:s,onExitComplete:x=>{m.set(x,!0);for(const w of m.values())if(!w)return;a&&a()},register:x=>(m.set(x,!1),()=>m.delete(x))}),[n,m,a]);return o&&v&&(_={..._}),ne.useMemo(()=>{m.forEach((x,w)=>m.set(w,!1))},[n]),ne.useEffect(()=>{!n&&!m.size&&a&&a()},[n]),t=E.jsx(ZI,{pop:u==="popLayout",isPresent:n,anchorX:c,anchorY:f,root:h,children:t}),E.jsx(td.Provider,{value:_,children:t})};function KI(){return new Map}function jT(t=!0){const e=ne.useContext(td);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:a,register:s}=e,o=ne.useId();ne.useEffect(()=>{if(t)return s(o)},[t]);const u=ne.useCallback(()=>t&&a&&a(o),[o,a,t]);return!n&&a?[!1,u]:[!0]}const Zu=t=>t.key||"";function Dw(t){const e=[];return ne.Children.forEach(t,n=>{ne.isValidElement(n)&&e.push(n)}),e}const an=({children:t,custom:e,initial:n=!0,onExitComplete:a,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1,anchorX:c="left",anchorY:f="top",root:h})=>{const[m,y]=jT(u),v=ne.useMemo(()=>Dw(t),[t]),_=u&&!m?[]:v.map(Zu),x=ne.useRef(!0),w=ne.useRef(v),A=ed(()=>new Map),T=ne.useRef(new Set),[k,R]=ne.useState(v),[z,P]=ne.useState(v);xg(()=>{x.current=!1,w.current=v;for(let O=0;O<z.length;O++){const ge=Zu(z[O]);_.includes(ge)?(A.delete(ge),T.current.delete(ge)):A.get(ge)!==!0&&A.set(ge,!1)}},[z,_.length,_.join("-")]);const Y=[];if(v!==k){let O=[...v];for(let ge=0;ge<z.length;ge++){const Ce=z[ge],ve=Zu(Ce);_.includes(ve)||(O.splice(ge,0,Ce),Y.push(Ce))}return o==="wait"&&Y.length&&(O=Y),P(Dw(O)),R(v),null}const{forceRender:W}=ne.useContext(wg);return E.jsx(E.Fragment,{children:z.map(O=>{const ge=Zu(O),Ce=u&&!m?!1:v===z||_.includes(ge),ve=()=>{if(T.current.has(ge))return;if(T.current.add(ge),A.has(ge))A.set(ge,!0);else return;let De=!0;A.forEach(We=>{We||(De=!1)}),De&&(W==null||W(),P(w.current),u&&(y==null||y()),a&&a())};return E.jsx(XI,{isPresent:Ce,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:h,onExitComplete:Ce?void 0:ve,anchorX:c,anchorY:f,children:O},ge)})})},MT=ne.createContext({strict:!1}),Pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $w=!1;function QI(){if($w)return;const t={};for(const e in Pw)t[e]={isEnabled:n=>Pw[e].some(a=>!!n[a])};uT(t),$w=!0}function LT(){return QI(),Pk()}function JI(t){const e=LT();for(const n in t)e[n]={...e[n],...t[n]};uT(e)}const WI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Lc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WI.has(t)}let DT=t=>!Lc(t);function e4(t){typeof t=="function"&&(DT=e=>e.startsWith("on")?!Lc(e):t(e))}try{e4(require("@emotion/is-prop-valid").default)}catch{}function t4(t,e,n){const a={};for(const s in t)s==="values"&&typeof t.values=="object"||(DT(s)||n===!0&&Lc(s)||!e&&!Lc(s)||t.draggable&&s.startsWith("onDrag"))&&(a[s]=t[s]);return a}const id=ne.createContext({});function n4(t,e){if(ad(t)){const{initial:n,animate:a}=t;return{initial:n===!1||ol(n)?n:void 0,animate:ol(a)?a:void 0}}return t.inherit!==!1?e:{}}function a4(t){const{initial:e,animate:n}=n4(t,ne.useContext(id));return ne.useMemo(()=>({initial:e,animate:n}),[Uw(e),Uw(n)])}function Uw(t){return Array.isArray(t)?t.join(" "):t}const Qg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function PT(t,e,n){for(const a in e)!Jt(e[a])&&!gT(a,n)&&(t[a]=e[a])}function i4({transformTemplate:t},e){return ne.useMemo(()=>{const n=Qg();return Zg(n,e,t),Object.assign({},n.vars,n.style)},[e])}function s4(t,e){const n=t.style||{},a={};return PT(a,n,t),Object.assign(a,i4(t,e)),a}function r4(t,e){const n={},a=s4(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=a,n}const $T=()=>({...Qg(),attrs:{}});function o4(t,e,n,a){const s=ne.useMemo(()=>{const o=$T();return yT(o,e,_T(a),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};PT(o,t.style,t),s.style={...o,...s.style}}return s}const l4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jg(t){return typeof t!="string"||t.includes("-")?!1:!!(l4.indexOf(t)>-1||/[A-Z]/u.test(t))}function u4(t,e,n,{latestValues:a},s,o=!1,u){const f=(u??Jg(t)?o4:r4)(e,a,s,t),h=t4(e,typeof t=="string",o),m=t!==ne.Fragment?{...h,...f,ref:n}:{},{children:y}=e,v=ne.useMemo(()=>Jt(y)?y.get():y,[y]);return ne.createElement(t,{...m,children:v})}function c4({scrapeMotionValuesFromProps:t,createRenderState:e},n,a,s){return{latestValues:d4(n,a,s,t),renderState:e()}}function d4(t,e,n,a){const s={},o=a(t,{});for(const v in o)s[v]=_c(o[v]);let{initial:u,animate:c}=t;const f=ad(t),h=oT(t);e&&h&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||u===!1;const y=m?c:u;if(y&&typeof y!="boolean"&&!nd(y)){const v=Array.isArray(y)?y:[y];for(let _=0;_<v.length;_++){const x=Ug(t,v[_]);if(x){const{transitionEnd:w,transition:A,...T}=x;for(const k in T){let R=T[k];if(Array.isArray(R)){const z=m?R.length-1:0;R=R[z]}R!==null&&(s[k]=R)}for(const k in w)s[k]=w[k]}}}return s}const UT=t=>(e,n)=>{const a=ne.useContext(id),s=ne.useContext(td),o=()=>c4(t,e,a,s);return n?o():ed(o)},f4=UT({scrapeMotionValuesFromProps:Xg,createRenderState:Qg}),h4=UT({scrapeMotionValuesFromProps:bT,createRenderState:$T}),m4=Symbol.for("motionComponentSymbol");function p4(t,e,n){const a=ne.useRef(n);ne.useInsertionEffect(()=>{a.current=n});const s=ne.useRef(null);return ne.useCallback(o=>{var c;o&&((c=t.onMount)==null||c.call(t,o)),e&&(o?e.mount(o):e.unmount());const u=a.current;if(typeof u=="function")if(o){const f=u(o);typeof f=="function"&&(s.current=f)}else s.current?(s.current(),s.current=null):u(o);else u&&(u.current=o)},[e])}const zT=ne.createContext({});function mr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function g4(t,e,n,a,s,o){var R,z;const{visualElement:u}=ne.useContext(id),c=ne.useContext(MT),f=ne.useContext(td),h=ne.useContext(Kg),m=h.reducedMotion,y=h.skipAnimations,v=ne.useRef(null),_=ne.useRef(!1);a=a||c.renderer,!v.current&&a&&(v.current=a(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m,skipAnimations:y,isSVG:o}),_.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const x=v.current,w=ne.useContext(zT);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&y4(v.current,n,s,w);const A=ne.useRef(!1);ne.useInsertionEffect(()=>{x&&A.current&&x.update(n,f)});const T=n[YS],k=ne.useRef(!!T&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,T))&&((z=window.MotionHasOptimisedAnimation)==null?void 0:z.call(window,T)));return xg(()=>{_.current=!0,x&&(A.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),k.current&&x.animationState&&x.animationState.animateChanges())}),ne.useEffect(()=>{x&&(!k.current&&x.animationState&&x.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)==null||P.call(window,T)}),k.current=!1),x.enteringChildren=void 0)}),x}function y4(t,e,n,a){const{layoutId:s,layout:o,drag:u,dragConstraints:c,layoutScroll:f,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BT(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||c&&mr(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:a,crossfade:m,layoutScroll:f,layoutRoot:h})}function BT(t){if(t)return t.options.allowProjection!==!1?t.projection:BT(t.parent)}function Yh(t,{forwardMotionProps:e=!1,type:n}={},a,s){a&&JI(a);const o=n?n==="svg":Jg(t),u=o?h4:f4;function c(h,m){let y;const v={...ne.useContext(Kg),...h,layoutId:v4(h)},{isStatic:_}=v,x=a4(h),w=u(h,_);if(!_&&rS){_4();const A=b4(v);y=A.MeasureLayout,x.visualElement=g4(t,w,v,s,A.ProjectionNode,o)}return E.jsxs(id.Provider,{value:x,children:[y&&x.visualElement?E.jsx(y,{visualElement:x.visualElement,...v}):null,u4(t,h,p4(w,x.visualElement,m),w,_,e,o)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const f=ne.forwardRef(c);return f[m4]=t,f}function v4({layoutId:t}){const e=ne.useContext(wg).id;return e&&t!==void 0?e+"-"+t:t}function _4(t,e){ne.useContext(MT).strict}function b4(t){const e=LT(),{drag:n,layout:a}=e;if(!n&&!a)return{};const s={...n,...a};return{MeasureLayout:n!=null&&n.isEnabled(t)||a!=null&&a.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function w4(t,e){if(typeof Proxy>"u")return Yh;const n=new Map,a=(o,u)=>Yh(o,u,t,e),s=(o,u)=>a(o,u);return new Proxy(s,{get:(o,u)=>u==="create"?a:(n.has(u)||n.set(u,Yh(u,void 0,t,e)),n.get(u))})}const x4=(t,e)=>e.isSVG??Jg(t)?new eI(e):new Zk(e,{allowProjection:t!==ne.Fragment});class E4 extends Gi{constructor(e){super(e),e.animationState||(e.animationState=sI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let S4=0;class T4 extends Gi{constructor(){super(...arguments),this.id=S4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const A4={animation:{Feature:E4},exit:{Feature:T4}};function El(t){return{point:{x:t.pageX,y:t.pageY}}}const C4=t=>e=>Gg(e)&&t(e,El(e));function Qo(t,e,n,a){return ll(t,e,C4(n),a)}const VT=({current:t})=>t?t.ownerDocument.defaultView:null,zw=(t,e)=>Math.abs(t-e);function N4(t,e){const n=zw(t.x,e.x),a=zw(t.y,e.y);return Math.sqrt(n**2+a**2)}const Bw=new Set(["auto","scroll"]);class HT{constructor(e,n,{transformPagePoint:a,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Xh(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=N4(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!w)return;const{point:A}=_,{timestamp:T}=Zt;this.history.push({...A,timestamp:T});const{onStart:k,onMove:R}=this.handlers;x||(k&&k(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,_)},this.handlePointerMove=(_,x)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Zh(x,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(_,x)=>{this.end();const{onEnd:w,onSessionEnd:A,resumeAnimation:T}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Xh(_.type==="pointercancel"?this.lastMoveEventInfo:Zh(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(_,k),A&&A(_,k)},!Gg(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=a,this.distanceThreshold=u,this.contextWindow=s||window;const f=El(e),h=Zh(f,this.transformPagePoint),{point:m}=h,{timestamp:y}=Zt;this.history=[{...m,timestamp:y}];const{onSessionStart:v}=n;v&&v(e,Xh(h,this.history)),this.removeListeners=bl(Qo(this.contextWindow,"pointermove",this.handlePointerMove),Qo(this.contextWindow,"pointerup",this.handlePointerUp),Qo(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let n=e.parentElement;for(;n;){const a=getComputedStyle(n);(Bw.has(a.overflowX)||Bw.has(a.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const a=e===window,s=a?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:s.x-n.x,y:s.y-n.y};o.x===0&&o.y===0||(a?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,s),ft.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),$i(this.updatePoint)}}function Zh(t,e){return e?{point:e(t.point)}:t}function Vw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xh({point:t},e){return{point:t,delta:Vw(t,GT(e)),offset:Vw(t,O4(e)),velocity:R4(e,.1)}}function O4(t){return t[0]}function GT(t){return t[t.length-1]}function R4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,a=null;const s=GT(t);for(;n>=0&&(a=t[n],!(s.timestamp-a.timestamp>la(e)));)n--;if(!a)return{x:0,y:0};a===t[0]&&t.length>2&&s.timestamp-a.timestamp>la(e)*2&&(a=t[1]);const o=qn(s.timestamp-a.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-a.x)/o,y:(s.y-a.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function k4(t,{min:e,max:n},a){return e!==void 0&&t<e?t=a?bt(e,t,a.min):Math.max(t,e):n!==void 0&&t>n&&(t=a?bt(n,t,a.max):Math.min(t,n)),t}function Hw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I4(t,{top:e,left:n,bottom:a,right:s}){return{x:Hw(t.x,n,s),y:Hw(t.y,e,a)}}function Gw(t,e){let n=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,a]=[a,n]),{min:n,max:a}}function j4(t,e){return{x:Gw(t.x,e.x),y:Gw(t.y,e.y)}}function M4(t,e){let n=.5;const a=ln(t),s=ln(e);return s>a?n=il(e.min,e.max-a,t.min):a>s&&(n=il(t.min,t.max-s,e.min)),Sa(0,1,n)}function L4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Bp=.35;function D4(t=Bp){return t===!1?t=0:t===!0&&(t=Bp),{x:qw(t,"left","right"),y:qw(t,"top","bottom")}}function qw(t,e,n){return{min:Fw(t,e),max:Fw(t,n)}}function Fw(t,e){return typeof t=="number"?t:t[e]||0}const P4=new WeakMap;class $4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:a}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{n&&this.snapToCursor(El(y).point),this.stopAnimation()},u=(y,v)=>{const{drag:_,dragPropagation:x,onDragStart:w}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hk(_),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_a(T=>{let k=this.getAxisMotionValue(T).get()||0;if(xa.test(k)){const{projection:R}=this.visualElement;if(R&&R.layout){const z=R.layout.layoutBox[T];z&&(k=ln(z)*(parseFloat(k)/100))}}this.originPoint[T]=k}),w&&ft.update(()=>w(y,v),!1,!0),Ip(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:w,onDrag:A}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:T}=v;if(x&&this.currentDirection===null){this.currentDirection=z4(T),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),A&&ft.update(()=>A(y,v),!1,!0)},f=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new HT(e,{onSessionStart:o,onStart:u,onMove:c,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:a,contextWindow:VT(this.visualElement),element:this.visualElement.current})}stop(e,n){const a=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!a)return;const{velocity:u}=s;this.startAnimation(u);const{onDragEnd:c}=this.getProps();c&&ft.postRender(()=>c(a,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,a){const{drag:s}=this.getProps();if(!a||!Xu(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(u=k4(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&mr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=I4(a.layoutBox,e):this.constraints=!1,this.elastic=D4(n),s!==this.constraints&&!mr(e)&&a&&this.constraints&&!this.hasMutatedConstraints&&_a(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=L4(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!mr(e))return!1;const a=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=Vk(a,s.root,this.visualElement.getTransformPagePoint());let u=j4(s.layout.layoutBox,o);if(n){const c=n(Uk(u));this.hasMutatedConstraints=!!c,c&&(u=dT(c))}return u}startAnimation(e){const{drag:n,dragMomentum:a,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=_a(m=>{if(!Xu(m,n,this.currentDirection))return;let y=f&&f[m]||{};u&&(y={min:0,max:0});const v=s?200:1e6,_=s?40:1e7,x={type:"inertia",velocity:a?e[m]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,x)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const a=this.getAxisMotionValue(e);return Ip(this.visualElement,e),a.start($g(e,a,0,n,this.visualElement,!1))}stopAnimation(){_a(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps(),s=a[n];return s||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){_a(n=>{const{drag:a}=this.getProps();if(!Xu(n,a,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:c}=s.layout.layoutBox[n],f=o.get()||0;o.set(e[n]-bt(u,c,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:a}=this.visualElement;if(!mr(n)||!a||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_a(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const f=c.get();s[u]=M4({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.constraints=!1,this.resolveConstraints(),_a(u=>{if(!Xu(u,e,null))return;const c=this.getAxisMotionValue(u),{min:f,max:h}=this.constraints[u];c.set(bt(f,h,s[u]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;P4.set(this.visualElement,this);const e=this.visualElement.current,n=Qo(e,"pointerdown",h=>{const{drag:m,dragListener:y=!0}=this.getProps(),v=h.target,_=v!==e&&_k(v);m&&y&&!_&&this.start(h)});let a;const s=()=>{const{dragConstraints:h}=this.getProps();mr(h)&&h.current&&(this.constraints=this.resolveRefConstraints(),a||(a=U4(e,h.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,u=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ft.read(s);const c=ll(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(_a(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=h[y].translate,v.set(v.get()+h[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),u(),f&&f(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:a=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=Bp,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:a,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:c}}}function Yw(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function U4(t,e,n){const a=ew(t,Yw(n)),s=ew(e,Yw(n));return()=>{a(),s()}}function Xu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function z4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class B4 extends Gi{constructor(e){super(e),this.removeGroupControls=Fn,this.removeListeners=Fn,this.controls=new $4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Kh=t=>(e,n)=>{t&&ft.update(()=>t(e,n),!1,!0)};class V4 extends Gi{constructor(){super(...arguments),this.removePointerDownListener=Fn}onPointerDown(e){this.session=new HT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:a,onPanEnd:s}=this.node.getProps();return{onSessionStart:Kh(e),onStart:Kh(n),onMove:Kh(a),onEnd:(o,u)=>{delete this.session,s&&ft.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=Qo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Qh=!1;class H4 extends ne.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:a,layoutId:s}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),a&&a.register&&s&&a.register(o),Qh&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),bc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:a,drag:s,isPresent:o}=this.props,{projection:u}=a;return u&&(u.isPresent=o,e.layoutDependency!==n&&u.setOptions({...u.options,layoutDependency:n}),Qh=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||ft.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Hg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:a}=this.props,{projection:s}=e;Qh=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),a&&a.deregister&&a.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qT(t){const[e,n]=jT(),a=ne.useContext(wg);return E.jsx(H4,{...t,layoutGroup:a,switchLayoutGroup:ne.useContext(zT),isPresent:e,safeToRemove:n})}const G4={pan:{Feature:V4},drag:{Feature:B4,ProjectionNode:IT,MeasureLayout:qT}};function Zw(t,e,n){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=a[s];o&&ft.postRender(()=>o(e,El(e)))}class q4 extends Gi{mount(){const{current:e}=this.node;e&&(this.unmount=pk(e,(n,a)=>(Zw(this.node,a,"Start"),s=>Zw(this.node,s,"End"))))}unmount(){}}class F4 extends Gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bl(ll(this.node.current,"focus",()=>this.onFocus()),ll(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Xw(t,e,n){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=a[s];o&&ft.postRender(()=>o(e,El(e)))}class Y4 extends Gi{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:a}=this.node.props;this.unmount=wk(e,(s,o)=>(Xw(this.node,o,"Start"),(u,{success:c})=>Xw(this.node,u,c?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(a==null?void 0:a.tap)===!1})}unmount(){}}const Vp=new WeakMap,Jh=new WeakMap,Z4=t=>{const e=Vp.get(t.target);e&&e(t)},X4=t=>{t.forEach(Z4)};function K4({root:t,...e}){const n=t||document;Jh.has(n)||Jh.set(n,{});const a=Jh.get(n),s=JSON.stringify(e);return a[s]||(a[s]=new IntersectionObserver(X4,{root:t,...e})),a[s]}function Q4(t,e,n){const a=K4(e);return Vp.set(t,n),a.observe(t),()=>{Vp.delete(t),a.unobserve(t)}}const J4={some:0,all:1};class W4 extends Gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:a,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:a,threshold:typeof s=="number"?s:J4[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),v=h?m:y;v&&v(f)};return Q4(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ej(e,n))&&this.startObserver()}unmount(){}}function ej({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const tj={inView:{Feature:W4},tap:{Feature:Y4},focus:{Feature:F4},hover:{Feature:q4}},nj={layout:{ProjectionNode:IT,MeasureLayout:qT}},aj={...A4,...tj,...G4,...nj},fe=w4(aj,x4);function ij(t){t.values.forEach(e=>e.stop())}function Hp(t,e){[...e].reverse().forEach(a=>{const s=t.getVariant(a);s&&zg(t,s),t.variantChildren&&t.variantChildren.forEach(o=>{Hp(o,e)})})}function sj(t,e){if(Array.isArray(e))return Hp(t,e);if(typeof e=="string")return Hp(t,[e]);zg(t,e)}function rj(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,a){const s=[];return t.forEach(o=>{s.push(KS(o,n,{transitionOverride:a}))}),Promise.all(s)},set(n){return t.forEach(a=>{sj(a,n)})},stop(){t.forEach(n=>{ij(n)})},mount(){return()=>{e.stop()}}};return e}function oj(){const t=ed(rj);return xg(t.mount,[]),t}const lj=oj;/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),Kw=t=>{const e=cj(t);return e.charAt(0).toUpperCase()+e.slice(1)},FT=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),dj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=ne.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:u,...c},f)=>ne.createElement("svg",{ref:f,...fj,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:FT("lucide",s),...!o&&!dj(c)&&{"aria-hidden":"true"},...c},[...u.map(([h,m])=>ne.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(t,e)=>{const n=ne.forwardRef(({className:a,...s},o)=>ne.createElement(hj,{ref:o,iconNode:e,className:FT(`lucide-${uj(Kw(t))}`,`lucide-${t}`,a),...s}));return n.displayName=Kw(t),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],pj=qe("activity",mj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yj=qe("arrow-right",gj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Qw=qe("arrow-up",vj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],bj=qe("book-open",_j);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xj=qe("circle-alert",wj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Jw=qe("circle-check-big",Ej);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tj=qe("circle-check",Sj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Cj=qe("circle-x",Aj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Wh=qe("cloud",Nj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Ww=qe("code",Oj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],YT=qe("external-link",Rj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Ij=qe("gamepad-2",kj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Mj=qe("graduation-cap",jj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Dj=qe("heart",Lj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11",key:"1v6356"}],["path",{d:"M17 7A5 5 0 0 0 7 7",key:"151p3v"}],["path",{d:"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4",key:"1sdaij"}]],$j=qe("ice-cream-cone",Pj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zj=qe("layers",Uj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Vj=qe("lightbulb",Bj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Gj=qe("lock-open",Hj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Fj=qe("lock",qj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Zj=qe("message-circle",Yj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Kj=qe("moon",Xj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Jj=qe("pause",Qj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ZT=qe("play",Wj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],XT=qe("rotate-ccw",e3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],e1=qe("search",t3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],a3=qe("settings-2",n3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],t1=qe("share-2",i3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Uo=qe("sparkles",s3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],dr=qe("star",r3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],n1=qe("sun",o3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],u3=qe("timer",l3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],d3=qe("trophy",c3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],h3=qe("volume-2",f3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],p3=qe("volume-x",m3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],y3=qe("waves",g3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ku=qe("zap",v3);var a1=Object.defineProperty,_3=(t,e)=>{let n={};for(var a in t)a1(n,a,{get:t[a],enumerable:!0});return a1(n,Symbol.toStringTag,{value:"Module"}),n};function sd(t,e,n){function a(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:u,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const h=u.prototype,m=Object.keys(h);for(let y=0;y<m.length;y++){const v=m[y];v in c||(c[v]=h[v].bind(c))}}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:t});function u(c){var f;const h=n!=null&&n.Parent?new o:this;a(h,c),(f=h._zod).deferred??(f.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(u,"init",{value:a}),Object.defineProperty(u,Symbol.hasInstance,{value:c=>{var f,h;return n!=null&&n.Parent&&c instanceof n.Parent?!0:(h=(f=c==null?void 0:c._zod)==null?void 0:f.traits)==null?void 0:h.has(t)}}),Object.defineProperty(u,"name",{value:t}),u}class wc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const b3={};function Wg(t){return b3}function w3(t){const e=Object.values(t).filter(a=>typeof a=="number");return Object.entries(t).filter(([a,s])=>e.indexOf(+a)===-1).map(([a,s])=>s)}function x3(t,e){return typeof e=="bigint"?e.toString():e}const i1=Symbol("evaluating");function E3(t,e,n){let a;Object.defineProperty(t,e,{get(){if(a!==i1)return a===void 0&&(a=i1,a=n()),a},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}const S3="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function wr(t,e,n){const a=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(a._zod.parent=t),a}function T3(t){return{}}function Qu(t,e=0){var n;if(t.aborted===!0)return!0;for(let a=e;a<t.issues.length;a++)if(((n=t.issues[a])==null?void 0:n.continue)!==!0)return!0;return!1}function Ju(t){return typeof t=="string"?t:t==null?void 0:t.message}function ey(t,e,n){var s,o,u,c,f,h;const a={...t,path:t.path??[]};if(!t.message){const m=Ju((u=(o=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:u.call(o,t))??Ju((c=e==null?void 0:e.error)==null?void 0:c.call(e,t))??Ju((f=n.customError)==null?void 0:f.call(n,t))??Ju((h=n.localeError)==null?void 0:h.call(n,t))??"Invalid input";a.message=m}return delete a.inst,delete a.continue,e!=null&&e.reportInput||delete a.input,a}const KT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,x3,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},A3=sd("$ZodError",KT),ty=sd("$ZodError",KT,{Parent:Error}),C3=t=>async(e,n,a,s)=>{const o=a?Object.assign(a,{async:!0}):{async:!0};let u=e._zod.run({value:n,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const c=new((s==null?void 0:s.Err)??t)(u.issues.map(f=>ey(f,o,Wg())));throw S3(c,s==null?void 0:s.callee),c}return u.value},QT=C3(ty),N3=t=>(e,n,a)=>{const s=a?{...a,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new wc;return o.issues.length?{success:!1,error:new(t??A3)(o.issues.map(u=>ey(u,s,Wg())))}:{success:!0,data:o.value}},O3=N3(ty),R3=t=>async(e,n,a)=>{const s=a?Object.assign(a,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(u=>ey(u,s,Wg())))}:{success:!0,data:o.value}},k3=R3(ty),I3={major:4,minor:3,patch:6},j3=sd("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=I3;const a=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&a.unshift(t);for(const o of a)for(const u of o._zod.onattach)u(t);if(a.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const o=(c,f,h)=>{let m=Qu(c),y;for(const v of f){if(v._zod.def.when){if(!v._zod.def.when(c))continue}else if(m)continue;const _=c.issues.length,x=v._zod.check(c);if(x instanceof Promise&&(h==null?void 0:h.async)===!1)throw new wc;if(y||x instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await x,c.issues.length!==_&&(m||(m=Qu(c,_)))});else{if(c.issues.length===_)continue;m||(m=Qu(c,_))}}return y?y.then(()=>c):c},u=(c,f,h)=>{if(Qu(c))return c.aborted=!0,c;const m=o(f,a,h);if(m instanceof Promise){if(h.async===!1)throw new wc;return m.then(y=>t._zod.parse(y,h))}return t._zod.parse(m,h)};t._zod.run=(c,f)=>{if(f.skipChecks)return t._zod.parse(c,f);if(f.direction==="backward"){const m=t._zod.parse({value:c.value,issues:[]},{...f,skipChecks:!0});return m instanceof Promise?m.then(y=>u(y,c,f)):u(m,c,f)}const h=t._zod.parse(c,f);if(h instanceof Promise){if(f.async===!1)throw new wc;return h.then(m=>o(m,a,f))}return o(h,a,f)}}E3(t,"~standard",()=>({validate:o=>{var u;try{const c=O3(t,o);return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}}catch{return k3(t,o).then(f=>{var h;return f.success?{value:f.data}:{issues:(h=f.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}))}),M3=sd("$ZodNever",(t,e)=>{j3.init(t,e),t._zod.parse=(n,a)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});var s1;class L3{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const a=n[0];return this._map.set(e,a),a&&typeof a=="object"&&"id"in a&&this._idmap.set(a.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const a={...this.get(n)??{}};delete a.id;const s={...a,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function D3(){return new L3}(s1=globalThis).__zod_globalRegistry??(s1.__zod_globalRegistry=D3());const ki=globalThis.__zod_globalRegistry;function P3(t,e){return new t({type:"never",...T3()})}function Gp(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??ki,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function gt(t,e,n={path:[],schemaPath:[]}){var m,y;var a;const s=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const u={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,u);const c=(y=(m=t._zod).toJSONSchema)==null?void 0:y.call(m);if(c)u.schema=c;else{const v={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,u.schema,v);else{const x=u.schema,w=e.processors[s.type];if(!w)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);w(t,e,x,v)}const _=t._zod.parent;_&&(u.ref||(u.ref=_),gt(_,e,v),e.seen.get(_).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(u.schema,f),e.io==="input"&&nn(t)&&(delete u.schema.examples,delete u.schema.default),e.io==="input"&&u.schema._prefault&&((a=u.schema).default??(a.default=u.schema._prefault)),delete u.schema._prefault,e.seen.get(t).schema}function qp(t,e){var u,c,f,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=new Map;for(const m of t.seen.entries()){const y=(u=t.metadataRegistry.get(m[0]))==null?void 0:u.id;if(y){const v=a.get(y);if(v&&v!==m[0])throw new Error(`Duplicate schema id "${y}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);a.set(y,m[0])}}const s=m=>{var w;const y=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const A=(w=t.external.registry.get(m[0]))==null?void 0:w.id,T=t.external.uri??(R=>R);if(A)return{ref:T(A)};const k=m[1].defId??m[1].schema.id??`schema${t.counter++}`;return m[1].defId=k,{defId:k,ref:`${T("__shared")}#/${y}/${k}`}}if(m[1]===n)return{ref:"#"};const _=`#/${y}/`,x=m[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:_+x}},o=m=>{if(m[1].schema.$ref)return;const y=m[1],{ref:v,defId:_}=s(m);y.def={...y.schema},_&&(y.defId=_);const x=y.schema;for(const w in x)delete x[w];x.$ref=v};if(t.cycles==="throw")for(const m of t.seen.entries()){const y=m[1];if(y.cycle)throw new Error(`Cycle detected: #/${(c=y.cycle)==null?void 0:c.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const m of t.seen.entries()){const y=m[1];if(e===m[0]){o(m);continue}if(t.external){const _=(f=t.external.registry.get(m[0]))==null?void 0:f.id;if(e!==m[0]&&_){o(m);continue}}if((h=t.metadataRegistry.get(m[0]))==null?void 0:h.id){o(m);continue}if(y.cycle){o(m);continue}if(y.count>1&&t.reused==="ref"){o(m);continue}}}function Fp(t,e){var u,c,f;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=h=>{const m=t.seen.get(h);if(m.ref===null)return;const y=m.def??m.schema,v={...y},_=m.ref;if(m.ref=null,_){a(_);const w=t.seen.get(_),A=w.schema;if(A.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(A)):Object.assign(y,A),Object.assign(y,v),h._zod.parent===_)for(const k in y)k==="$ref"||k==="allOf"||k in v||delete y[k];if(A.$ref&&w.def)for(const k in y)k==="$ref"||k==="allOf"||k in w.def&&JSON.stringify(y[k])===JSON.stringify(w.def[k])&&delete y[k]}const x=h._zod.parent;if(x&&x!==_){a(x);const w=t.seen.get(x);if(w!=null&&w.schema.$ref&&(y.$ref=w.schema.$ref,w.def))for(const A in y)A==="$ref"||A==="allOf"||A in w.def&&JSON.stringify(y[A])===JSON.stringify(w.def[A])&&delete y[A]}t.override({zodSchema:h,jsonSchema:y,path:m.path??[]})};for(const h of[...t.seen.entries()].reverse())a(h[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(u=t.external)!=null&&u.uri){const h=(c=t.external.registry.get(e))==null?void 0:c.id;if(!h)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(h)}Object.assign(s,n.def??n.schema);const o=((f=t.external)==null?void 0:f.defs)??{};for(const h of t.seen.entries()){const m=h[1];m.def&&m.defId&&(o[m.defId]=m.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const h=JSON.parse(JSON.stringify(s));return Object.defineProperty(h,"~standard",{value:{...e["~standard"],jsonSchema:{input:r1(e,"input",t.processors),output:r1(e,"output",t.processors)}},enumerable:!1,writable:!1}),h}catch{throw new Error("Error converting schema to JSON.")}}function nn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const a=t._zod.def;if(a.type==="transform")return!0;if(a.type==="array")return nn(a.element,n);if(a.type==="set")return nn(a.valueType,n);if(a.type==="lazy")return nn(a.getter(),n);if(a.type==="promise"||a.type==="optional"||a.type==="nonoptional"||a.type==="nullable"||a.type==="readonly"||a.type==="default"||a.type==="prefault")return nn(a.innerType,n);if(a.type==="intersection")return nn(a.left,n)||nn(a.right,n);if(a.type==="record"||a.type==="map")return nn(a.keyType,n)||nn(a.valueType,n);if(a.type==="pipe")return nn(a.in,n)||nn(a.out,n);if(a.type==="object"){for(const s in a.shape)if(nn(a.shape[s],n))return!0;return!1}if(a.type==="union"){for(const s of a.options)if(nn(s,n))return!0;return!1}if(a.type==="tuple"){for(const s of a.items)if(nn(s,n))return!0;return!!(a.rest&&nn(a.rest,n))}return!1}const r1=(t,e,n={})=>a=>{const{libraryOptions:s,target:o}=a??{},u=Gp({...s??{},target:o,io:e,processors:n});return gt(t,u),qp(u,t),Fp(u,t)},$3={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},U3=(t,e,n,a)=>{const s=n;s.type="string";const{minimum:o,maximum:u,format:c,patterns:f,contentEncoding:h}=t._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof u=="number"&&(s.maxLength=u),c&&(s.format=$3[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(y=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:y.source}))])}},z3=(t,e,n,a)=>{const s=n,{minimum:o,maximum:u,format:c,multipleOf:f,exclusiveMaximum:h,exclusiveMinimum:m}=t._zod.bag;typeof c=="string"&&c.includes("int")?s.type="integer":s.type="number",typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=m,s.exclusiveMinimum=!0):s.exclusiveMinimum=m),typeof o=="number"&&(s.minimum=o,typeof m=="number"&&e.target!=="draft-04"&&(m>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof u=="number"&&(s.maximum=u,typeof h=="number"&&e.target!=="draft-04"&&(h<=u?delete s.maximum:delete s.exclusiveMaximum)),typeof f=="number"&&(s.multipleOf=f)},B3=(t,e,n,a)=>{n.type="boolean"},V3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},H3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},G3=(t,e,n,a)=>{e.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},q3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},F3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},Y3=(t,e,n,a)=>{n.not={}},Z3=(t,e,n,a)=>{},X3=(t,e,n,a)=>{},K3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},Q3=(t,e,n,a)=>{const s=t._zod.def,o=w3(s.entries);o.every(u=>typeof u=="number")&&(n.type="number"),o.every(u=>typeof u=="string")&&(n.type="string"),n.enum=o},J3=(t,e,n,a)=>{const s=t._zod.def,o=[];for(const u of s.values)if(u===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof u=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(u))}else o.push(u);if(o.length!==0)if(o.length===1){const u=o[0];n.type=u===null?"null":typeof u,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[u]:n.const=u}else o.every(u=>typeof u=="number")&&(n.type="number"),o.every(u=>typeof u=="string")&&(n.type="string"),o.every(u=>typeof u=="boolean")&&(n.type="boolean"),o.every(u=>u===null)&&(n.type="null"),n.enum=o},W3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},e5=(t,e,n,a)=>{const s=n,o=t._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=o.source},t5=(t,e,n,a)=>{const s=n,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:u,maximum:c,mime:f}=t._zod.bag;u!==void 0&&(o.minLength=u),c!==void 0&&(o.maxLength=c),f?f.length===1?(o.contentMediaType=f[0],Object.assign(s,o)):(Object.assign(s,o),s.anyOf=f.map(h=>({contentMediaType:h}))):Object.assign(s,o)},n5=(t,e,n,a)=>{n.type="boolean"},a5=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},i5=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},s5=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},r5=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},o5=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},l5=(t,e,n,a)=>{const s=n,o=t._zod.def,{minimum:u,maximum:c}=t._zod.bag;typeof u=="number"&&(s.minItems=u),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=gt(o.element,e,{...a,path:[...a.path,"items"]})},u5=(t,e,n,a)=>{var h;const s=n,o=t._zod.def;s.type="object",s.properties={};const u=o.shape;for(const m in u)s.properties[m]=gt(u[m],e,{...a,path:[...a.path,"properties",m]});const c=new Set(Object.keys(u)),f=new Set([...c].filter(m=>{const y=o.shape[m]._zod;return e.io==="input"?y.optin===void 0:y.optout===void 0}));f.size>0&&(s.required=Array.from(f)),((h=o.catchall)==null?void 0:h._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=gt(o.catchall,e,{...a,path:[...a.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},c5=(t,e,n,a)=>{const s=t._zod.def,o=s.inclusive===!1,u=s.options.map((c,f)=>gt(c,e,{...a,path:[...a.path,o?"oneOf":"anyOf",f]}));o?n.oneOf=u:n.anyOf=u},d5=(t,e,n,a)=>{const s=t._zod.def,o=gt(s.left,e,{...a,path:[...a.path,"allOf",0]}),u=gt(s.right,e,{...a,path:[...a.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,f=[...c(o)?o.allOf:[o],...c(u)?u.allOf:[u]];n.allOf=f},f5=(t,e,n,a)=>{const s=n,o=t._zod.def;s.type="array";const u=e.target==="draft-2020-12"?"prefixItems":"items",c=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",f=o.items.map((v,_)=>gt(v,e,{...a,path:[...a.path,u,_]})),h=o.rest?gt(o.rest,e,{...a,path:[...a.path,c,...e.target==="openapi-3.0"?[o.items.length]:[]]}):null;e.target==="draft-2020-12"?(s.prefixItems=f,h&&(s.items=h)):e.target==="openapi-3.0"?(s.items={anyOf:f},h&&s.items.anyOf.push(h),s.minItems=f.length,h||(s.maxItems=f.length)):(s.items=f,h&&(s.additionalItems=h));const{minimum:m,maximum:y}=t._zod.bag;typeof m=="number"&&(s.minItems=m),typeof y=="number"&&(s.maxItems=y)},h5=(t,e,n,a)=>{const s=n,o=t._zod.def;s.type="object";const u=o.keyType,c=u._zod.bag,f=c==null?void 0:c.patterns;if(o.mode==="loose"&&f&&f.size>0){const m=gt(o.valueType,e,{...a,path:[...a.path,"patternProperties","*"]});s.patternProperties={};for(const y of f)s.patternProperties[y.source]=m}else(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=gt(o.keyType,e,{...a,path:[...a.path,"propertyNames"]})),s.additionalProperties=gt(o.valueType,e,{...a,path:[...a.path,"additionalProperties"]});const h=u._zod.values;if(h){const m=[...h].filter(y=>typeof y=="string"||typeof y=="number");m.length>0&&(s.required=m)}},m5=(t,e,n,a)=>{const s=t._zod.def,o=gt(s.innerType,e,a),u=e.seen.get(t);e.target==="openapi-3.0"?(u.ref=s.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},p5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType},g5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},y5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},v5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType;let u;try{u=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=u},_5=(t,e,n,a)=>{const s=t._zod.def,o=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;gt(o,e,a);const u=e.seen.get(t);u.ref=o},b5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType,n.readOnly=!0},w5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType},x5=(t,e,n,a)=>{const s=t._zod.def;gt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType},E5=(t,e,n,a)=>{const s=t._zod.innerType;gt(s,e,a);const o=e.seen.get(t);o.ref=s},o1={string:U3,number:z3,boolean:B3,bigint:V3,symbol:H3,null:G3,undefined:q3,void:F3,never:Y3,any:Z3,unknown:X3,date:K3,enum:Q3,literal:J3,nan:W3,template_literal:e5,file:t5,success:n5,custom:a5,function:i5,transform:s5,map:r5,set:o5,array:l5,object:u5,union:c5,intersection:d5,tuple:f5,record:h5,nullable:m5,nonoptional:p5,default:g5,prefault:y5,catch:v5,pipe:_5,readonly:b5,promise:w5,optional:x5,lazy:E5};function l1(t,e){if("_idmap"in t){const a=t,s=Gp({...e,processors:o1}),o={};for(const f of a._idmap.entries()){const[h,m]=f;gt(m,s)}const u={},c={registry:a,uri:e==null?void 0:e.uri,defs:o};s.external=c;for(const f of a._idmap.entries()){const[h,m]=f;qp(s,m),u[h]=Fp(s,m)}if(Object.keys(o).length>0){const f=s.target==="draft-2020-12"?"$defs":"definitions";u.__shared={[f]:o}}return{schemas:u}}const n=Gp({...e,processors:o1});return gt(t,n),qp(n,t),Fp(n,t)}function Zn(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function Ka(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function Sl(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(Zn(t)||Ka(t))}async function S5(t,e){if(Zn(t))try{return{success:!0,data:await QT(t,e)}}catch(n){return{success:!1,error:n}}if(Ka(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function T5(t,e){if(Zn(t))return await QT(t,e);if(Ka(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function JT(t){var e;if(Zn(t))return(e=ki.get(t))==null?void 0:e.description;if(Ka(t)||"description"in t&&typeof t.description=="string")return t.description}function A5(t){return Sl(t)?Ka(t)?t._def.typeName==="ZodString":Zn(t)?t._zod.def.type==="string":!1:!1}function Jo(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function WT(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function C5(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="optional":!1}function N5(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="nullable":!1}function Yp(t,e=!1){if(Ka(t))return t.strict();if(Jo(t)){const n=t._zod.def.shape;if(e)for(const[o,u]of Object.entries(t._zod.def.shape)){if(Jo(u))n[o]=Yp(u,e);else if(WT(u)){let f=u._zod.def.element;Jo(f)&&(f=Yp(f,e)),n[o]=wr(u,{...u._zod.def,element:f})}else n[o]=u;const c=ki.get(u);c&&ki.add(n[o],c)}const a=wr(t,{...t._zod.def,shape:n,catchall:P3(M3)}),s=ki.get(t);return s&&ki.add(a,s),a}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function O5(t){return Ka(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function R5(t){return Zn(t)&&t._zod.def.type==="pipe"}function ds(t,e,n){const a=n.get(t);if(a!==void 0)return a;if(Ka(t))return O5(t)?ds(t._def.schema,e,n):t;if(Zn(t)){let s=t;if(R5(t)&&(s=ds(t._zod.def.in,e,n)),e){if(Jo(s)){const u={};for(const[c,f]of Object.entries(s._zod.def.shape))u[c]=ds(f,e,n);s=wr(s,{...s._zod.def,shape:u})}else if(WT(s)){const u=ds(s._zod.def.element,e,n);s=wr(s,{...s._zod.def,element:u})}else if(C5(s)){const u=ds(s._zod.def.innerType,e,n);s=wr(s,{...s._zod.def,innerType:u})}else if(N5(s)){const u=ds(s._zod.def.innerType,e,n);s=wr(s,{...s._zod.def,innerType:u})}}const o=ki.get(t);return o&&ki.add(s,o),n.set(t,s),s}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function k5(t,e=!1){return ds(t,e,new WeakMap)}const I5=Symbol("Let zodToJsonSchema decide on which parser to use"),j5={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},M5=t=>({...j5,...t}),L5=t=>{const e=M5(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([a,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,a],jsonSchema:void 0}]))}},eA=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function In(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?eA(e,t.currentPath):e.join("/")}}function tA(t,e,n,a){a!=null&&a.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function st(t,e,n,a,s){t[e]=n,tA(t,e,a,s)}var Ke;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const u of s)o[u]=u;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),u={};for(const c of o)u[c]=s[c];return t.objectValues(u)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&o.push(u);return o},t.find=(s,o)=>{for(const u of s)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function a(s,o=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=a,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(Ke||(Ke={}));var u1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(u1||(u1={}));const Ee=Ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ai=t=>{switch(typeof t){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return Number.isNaN(t)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(t)?Ee.array:t===null?Ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ee.promise:typeof Map<"u"&&t instanceof Map?Ee.map:typeof Set<"u"&&t instanceof Set?Ee.set:typeof Date<"u"&&t instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},de=Ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},a={_errors:[]},s=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)a._errors.push(n(u));else{let c=a,f=0;for(;f<u.path.length;){const h=u.path[f];f===u.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(n(u))):c[h]=c[h]||{_errors:[]},c=c[h],f++}}};return s(this),a}static assert(e){if(!(e instanceof Xa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ke.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n=Object.create(null),a=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];n[o]=n[o]||[],n[o].push(e(s))}else a.push(e(s));return{formErrors:a,fieldErrors:n}}get formErrors(){return this.flatten()}}Xa.create=t=>new Xa(t);const Zp=(t,e)=>{let n;switch(t.code){case de.invalid_type:t.received===Ee.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ke.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ke.joinValues(t.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ke.joinValues(t.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${Ke.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ke.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case de.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case de.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ke.assertNever(t)}return{message:n}};let D5=Zp;function P5(){return D5}const $5=t=>{const{data:e,path:n,errorMaps:a,issueData:s}=t,o=[...n,...s.path||[]],u={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let c="";const f=a.filter(h=>!!h).slice().reverse();for(const h of f)c=h(u,{data:e,defaultError:c}).message;return{...s,path:o,message:c}};function ye(t,e){const n=P5(),a=$5({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Zp?void 0:Zp].filter(s=>!!s)});t.common.issues.push(a)}class jn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const a=[];for(const s of n){if(s.status==="aborted")return Le;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,n){const a=[];for(const s of n){const o=await s.key,u=await s.value;a.push({key:o,value:u})}return jn.mergeObjectSync(e,a)}static mergeObjectSync(e,n){const a={};for(const s of n){const{key:o,value:u}=s;if(o.status==="aborted"||u.status==="aborted")return Le;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(a[o.value]=u.value)}return{status:e.value,value:a}}}const Le=Object.freeze({status:"aborted"}),qo=t=>({status:"dirty",value:t}),Xn=t=>({status:"valid",value:t}),c1=t=>t.status==="aborted",d1=t=>t.status==="dirty",Rr=t=>t.status==="valid",Dc=t=>typeof Promise<"u"&&t instanceof Promise;var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class Ui{constructor(e,n,a,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=a,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const f1=(t,e)=>{if(Rr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Xa(t.common.issues);return this._error=n,this._error}}};function ze(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:a,description:s}=t;if(e&&(n||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,c)=>{const{message:f}=t;return u.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:f??a??c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:f??n??c.defaultError}},description:s}}class Ye{get description(){return this._def.description}_getType(e){return Ai(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jn,ctx:{common:e.parent.common,data:e.data,parsedType:Ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Dc(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const a=this.safeParse(e,n);if(a.success)return a.data;throw a.error}safeParse(e,n){const a={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)},s=this._parseSync({data:e,path:a.path,parent:a});return f1(a,s)}"~validate"(e){var a,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return Rr(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(s=(a=o==null?void 0:o.message)==null?void 0:a.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>Rr(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(e,n){const a=await this.safeParseAsync(e,n);if(a.success)return a.data;throw a.error}async safeParseAsync(e,n){const a={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)},s=this._parse({data:e,path:a.path,parent:a}),o=await(Dc(s)?s:Promise.resolve(s));return f1(a,o)}refine(e,n){const a=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const u=e(s),c=()=>o.addIssue({code:de.custom,...a(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,n){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof n=="function"?n(a,s):n),!1))}_refinement(e){return new Ir({schema:this,typeName:he.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ji.create(this,this._def)}nullable(){return jr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ea.create(this)}promise(){return zc.create(this,this._def)}or(e){return $c.create([this,e],this._def)}and(e){return Uc.create(this,e,this._def)}transform(e){return new Ir({...ze(this._def),schema:this,typeName:he.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Qp({...ze(this._def),innerType:this,defaultValue:n,typeName:he.ZodDefault})}brand(){return new oM({typeName:he.ZodBranded,type:this,...ze(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Jp({...ze(this._def),innerType:this,catchValue:n,typeName:he.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ny.create(this,e)}readonly(){return Wp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const U5=/^c[^\s-]{8,}$/i,z5=/^[0-9a-z]+$/,B5=/^[0-9A-HJKMNP-TV-Z]{26}$/i,V5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H5=/^[a-z0-9_-]{21}$/i,G5=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,q5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,F5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let em;const Z5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,X5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Q5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,J5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,W5=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eM=new RegExp(`^${nA}$`);function aA(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function tM(t){return new RegExp(`^${aA(t)}$`)}function nM(t){let e=`${nA}T${aA(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function aM(t,e){return!!((e==="v4"||!e)&&Z5.test(t)||(e==="v6"||!e)&&K5.test(t))}function iM(t,e){if(!G5.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function sM(t,e){return!!((e==="v4"||!e)&&X5.test(t)||(e==="v6"||!e)&&Q5.test(t))}class Ii extends Ye{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ee.string){const o=this._getOrReturnCtx(e);return ye(o,{code:de.invalid_type,expected:Ee.string,received:o.parsedType}),Le}const a=new jn;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),ye(s,{code:de.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),ye(s,{code:de.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(s=this._getOrReturnCtx(e,s),u?ye(s,{code:de.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&ye(s,{code:de.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),a.dirty())}else if(o.kind==="email")F5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"email",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="emoji")em||(em=new RegExp(Y5,"u")),em.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"emoji",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="uuid")V5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"uuid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="nanoid")H5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"nanoid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid")U5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"cuid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid2")z5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"cuid2",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="ulid")B5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"ulid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ye(s,{validation:"url",code:de.invalid_string,message:o.message}),a.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"regex",code:de.invalid_string,message:o.message}),a.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),ye(s,{code:de.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),a.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),ye(s,{code:de.invalid_string,validation:{startsWith:o.value},message:o.message}),a.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),ye(s,{code:de.invalid_string,validation:{endsWith:o.value},message:o.message}),a.dirty()):o.kind==="datetime"?nM(o).test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{code:de.invalid_string,validation:"datetime",message:o.message}),a.dirty()):o.kind==="date"?eM.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{code:de.invalid_string,validation:"date",message:o.message}),a.dirty()):o.kind==="time"?tM(o).test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{code:de.invalid_string,validation:"time",message:o.message}),a.dirty()):o.kind==="duration"?q5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"duration",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="ip"?aM(e.data,o.version)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"ip",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="jwt"?iM(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"jwt",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="cidr"?sM(e.data,o.version)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"cidr",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="base64"?J5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"base64",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="base64url"?W5.test(e.data)||(s=this._getOrReturnCtx(e,s),ye(s,{validation:"base64url",code:de.invalid_string,message:o.message}),a.dirty()):Ke.assertNever(o);return{status:a.value,value:e.data}}_regex(e,n,a){return this.refinement(s=>e.test(s),{validation:n,code:de.invalid_string,...Ae.errToObj(a)})}_addCheck(e){return new Ii({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ae.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ae.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ae.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ae.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ae.errToObj(n)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new Ii({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ii({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ii({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ii.create=t=>new Ii({checks:[],typeName:he.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ze(t)});function rM(t,e){const n=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=n>a?n:a,o=Number.parseInt(t.toFixed(s).replace(".","")),u=Number.parseInt(e.toFixed(s).replace(".",""));return o%u/10**s}class ul extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ee.number){const o=this._getOrReturnCtx(e);return ye(o,{code:de.invalid_type,expected:Ee.number,received:o.parsedType}),Le}let a;const s=new jn;for(const o of this._def.checks)o.kind==="int"?Ke.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),ye(a,{code:de.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(a=this._getOrReturnCtx(e,a),ye(a,{code:de.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(a=this._getOrReturnCtx(e,a),ye(a,{code:de.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?rM(e.data,o.value)!==0&&(a=this._getOrReturnCtx(e,a),ye(a,{code:de.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),ye(a,{code:de.not_finite,message:o.message}),s.dirty()):Ke.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,a,s){return new ul({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:Ae.toString(s)}]})}_addCheck(e){return new ul({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ke.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(n===null||a.value>n)&&(n=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ul.create=t=>new ul({checks:[],typeName:he.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ze(t)});class cl extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ee.bigint)return this._getInvalidInput(e);let a;const s=new jn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(a=this._getOrReturnCtx(e,a),ye(a,{code:de.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(a=this._getOrReturnCtx(e,a),ye(a,{code:de.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),ye(a,{code:de.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):Ke.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ye(n,{code:de.invalid_type,expected:Ee.bigint,received:n.parsedType}),Le}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,a,s){return new cl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:Ae.toString(s)}]})}_addCheck(e){return new cl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}cl.create=t=>new cl({checks:[],typeName:he.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ze(t)});class h1 extends Ye{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ee.boolean){const a=this._getOrReturnCtx(e);return ye(a,{code:de.invalid_type,expected:Ee.boolean,received:a.parsedType}),Le}return Xn(e.data)}}h1.create=t=>new h1({typeName:he.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ze(t)});class Pc extends Ye{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ee.date){const o=this._getOrReturnCtx(e);return ye(o,{code:de.invalid_type,expected:Ee.date,received:o.parsedType}),Le}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ye(o,{code:de.invalid_date}),Le}const a=new jn;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),ye(s,{code:de.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),a.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),ye(s,{code:de.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),a.dirty()):Ke.assertNever(o);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Pc.create=t=>new Pc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:he.ZodDate,...ze(t)});class m1 extends Ye{_parse(e){if(this._getType(e)!==Ee.symbol){const a=this._getOrReturnCtx(e);return ye(a,{code:de.invalid_type,expected:Ee.symbol,received:a.parsedType}),Le}return Xn(e.data)}}m1.create=t=>new m1({typeName:he.ZodSymbol,...ze(t)});class p1 extends Ye{_parse(e){if(this._getType(e)!==Ee.undefined){const a=this._getOrReturnCtx(e);return ye(a,{code:de.invalid_type,expected:Ee.undefined,received:a.parsedType}),Le}return Xn(e.data)}}p1.create=t=>new p1({typeName:he.ZodUndefined,...ze(t)});class g1 extends Ye{_parse(e){if(this._getType(e)!==Ee.null){const a=this._getOrReturnCtx(e);return ye(a,{code:de.invalid_type,expected:Ee.null,received:a.parsedType}),Le}return Xn(e.data)}}g1.create=t=>new g1({typeName:he.ZodNull,...ze(t)});class Xp extends Ye{constructor(){super(...arguments),this._any=!0}_parse(e){return Xn(e.data)}}Xp.create=t=>new Xp({typeName:he.ZodAny,...ze(t)});class y1 extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xn(e.data)}}y1.create=t=>new y1({typeName:he.ZodUnknown,...ze(t)});class zi extends Ye{_parse(e){const n=this._getOrReturnCtx(e);return ye(n,{code:de.invalid_type,expected:Ee.never,received:n.parsedType}),Le}}zi.create=t=>new zi({typeName:he.ZodNever,...ze(t)});class v1 extends Ye{_parse(e){if(this._getType(e)!==Ee.undefined){const a=this._getOrReturnCtx(e);return ye(a,{code:de.invalid_type,expected:Ee.void,received:a.parsedType}),Le}return Xn(e.data)}}v1.create=t=>new v1({typeName:he.ZodVoid,...ze(t)});class Ea extends Ye{_parse(e){const{ctx:n,status:a}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ee.array)return ye(n,{code:de.invalid_type,expected:Ee.array,received:n.parsedType}),Le;if(s.exactLength!==null){const u=n.data.length>s.exactLength.value,c=n.data.length<s.exactLength.value;(u||c)&&(ye(n,{code:u?de.too_big:de.too_small,minimum:c?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ye(n,{code:de.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ye(n,{code:de.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),n.common.async)return Promise.all([...n.data].map((u,c)=>s.type._parseAsync(new Ui(n,u,n.path,c)))).then(u=>jn.mergeArray(a,u));const o=[...n.data].map((u,c)=>s.type._parseSync(new Ui(n,u,n.path,c)));return jn.mergeArray(a,o)}get element(){return this._def.type}min(e,n){return new Ea({...this._def,minLength:{value:e,message:Ae.toString(n)}})}max(e,n){return new Ea({...this._def,maxLength:{value:e,message:Ae.toString(n)}})}length(e,n){return new Ea({...this._def,exactLength:{value:e,message:Ae.toString(n)}})}nonempty(e){return this.min(1,e)}}Ea.create=(t,e)=>new Ea({type:t,minLength:null,maxLength:null,exactLength:null,typeName:he.ZodArray,...ze(e)});function pr(t){if(t instanceof jt){const e={};for(const n in t.shape){const a=t.shape[n];e[n]=ji.create(pr(a))}return new jt({...t._def,shape:()=>e})}else return t instanceof Ea?new Ea({...t._def,type:pr(t.element)}):t instanceof ji?ji.create(pr(t.unwrap())):t instanceof jr?jr.create(pr(t.unwrap())):t instanceof _s?_s.create(t.items.map(e=>pr(e))):t}class jt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ke.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ee.object){const h=this._getOrReturnCtx(e);return ye(h,{code:de.invalid_type,expected:Ee.object,received:h.parsedType}),Le}const{status:a,ctx:s}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof zi&&this._def.unknownKeys==="strip"))for(const h in s.data)u.includes(h)||c.push(h);const f=[];for(const h of u){const m=o[h],y=s.data[h];f.push({key:{status:"valid",value:h},value:m._parse(new Ui(s,y,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof zi){const h=this._def.unknownKeys;if(h==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(h==="strict")c.length>0&&(ye(s,{code:de.unrecognized_keys,keys:c}),a.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const m of c){const y=s.data[m];f.push({key:{status:"valid",value:m},value:h._parse(new Ui(s,y,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const m of f){const y=await m.key,v=await m.value;h.push({key:y,value:v,alwaysSet:m.alwaysSet})}return h}).then(h=>jn.mergeObjectSync(a,h)):jn.mergeObjectSync(a,f)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,a)=>{var o,u;const s=((u=(o=this._def).errorMap)==null?void 0:u.call(o,n,a).message)??a.defaultError;return n.code==="unrecognized_keys"?{message:Ae.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new jt({...this._def,unknownKeys:"strip"})}passthrough(){return new jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:he.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new jt({...this._def,catchall:e})}pick(e){const n={};for(const a of Ke.objectKeys(e))e[a]&&this.shape[a]&&(n[a]=this.shape[a]);return new jt({...this._def,shape:()=>n})}omit(e){const n={};for(const a of Ke.objectKeys(this.shape))e[a]||(n[a]=this.shape[a]);return new jt({...this._def,shape:()=>n})}deepPartial(){return pr(this)}partial(e){const n={};for(const a of Ke.objectKeys(this.shape)){const s=this.shape[a];e&&!e[a]?n[a]=s:n[a]=s.optional()}return new jt({...this._def,shape:()=>n})}required(e){const n={};for(const a of Ke.objectKeys(this.shape))if(e&&!e[a])n[a]=this.shape[a];else{let o=this.shape[a];for(;o instanceof ji;)o=o._def.innerType;n[a]=o}return new jt({...this._def,shape:()=>n})}keyof(){return iA(Ke.objectKeys(this.shape))}}jt.create=(t,e)=>new jt({shape:()=>t,unknownKeys:"strip",catchall:zi.create(),typeName:he.ZodObject,...ze(e)});jt.strictCreate=(t,e)=>new jt({shape:()=>t,unknownKeys:"strict",catchall:zi.create(),typeName:he.ZodObject,...ze(e)});jt.lazycreate=(t,e)=>new jt({shape:t,unknownKeys:"strip",catchall:zi.create(),typeName:he.ZodObject,...ze(e)});class $c extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),a=this._def.options;function s(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new Xa(c.ctx.common.issues));return ye(n,{code:de.invalid_union,unionErrors:u}),Le}if(n.common.async)return Promise.all(a.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(s);{let o;const u=[];for(const f of a){const h={...n,common:{...n.common,issues:[]},parent:null},m=f._parseSync({data:n.data,path:n.path,parent:h});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:h}),h.common.issues.length&&u.push(h.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new Xa(f));return ye(n,{code:de.invalid_union,unionErrors:c}),Le}}get options(){return this._def.options}}$c.create=(t,e)=>new $c({options:t,typeName:he.ZodUnion,...ze(e)});function Kp(t,e){const n=Ai(t),a=Ai(e);if(t===e)return{valid:!0,data:t};if(n===Ee.object&&a===Ee.object){const s=Ke.objectKeys(e),o=Ke.objectKeys(t).filter(c=>s.indexOf(c)!==-1),u={...t,...e};for(const c of o){const f=Kp(t[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(n===Ee.array&&a===Ee.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const u=t[o],c=e[o],f=Kp(u,c);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===Ee.date&&a===Ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Uc extends Ye{_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=(o,u)=>{if(c1(o)||c1(u))return Le;const c=Kp(o.value,u.value);return c.valid?((d1(o)||d1(u))&&n.dirty(),{status:n.value,value:c.data}):(ye(a,{code:de.invalid_intersection_types}),Le)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([o,u])=>s(o,u)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Uc.create=(t,e,n)=>new Uc({left:t,right:e,typeName:he.ZodIntersection,...ze(n)});class _s extends Ye{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ee.array)return ye(a,{code:de.invalid_type,expected:Ee.array,received:a.parsedType}),Le;if(a.data.length<this._def.items.length)return ye(a,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Le;!this._def.rest&&a.data.length>this._def.items.length&&(ye(a,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...a.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Ui(a,u,a.path,c)):null}).filter(u=>!!u);return a.common.async?Promise.all(o).then(u=>jn.mergeArray(n,u)):jn.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new _s({...this._def,rest:e})}}_s.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _s({items:t,typeName:he.ZodTuple,rest:null,...ze(e)})};class _1 extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ee.map)return ye(a,{code:de.invalid_type,expected:Ee.map,received:a.parsedType}),Le;const s=this._def.keyType,o=this._def.valueType,u=[...a.data.entries()].map(([c,f],h)=>({key:s._parse(new Ui(a,c,a.path,[h,"key"])),value:o._parse(new Ui(a,f,a.path,[h,"value"]))}));if(a.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const h=await f.key,m=await f.value;if(h.status==="aborted"||m.status==="aborted")return Le;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(h.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of u){const h=f.key,m=f.value;if(h.status==="aborted"||m.status==="aborted")return Le;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(h.value,m.value)}return{status:n.value,value:c}}}}_1.create=(t,e,n)=>new _1({valueType:e,keyType:t,typeName:he.ZodMap,...ze(n)});class dl extends Ye{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ee.set)return ye(a,{code:de.invalid_type,expected:Ee.set,received:a.parsedType}),Le;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(ye(a,{code:de.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(ye(a,{code:de.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function u(f){const h=new Set;for(const m of f){if(m.status==="aborted")return Le;m.status==="dirty"&&n.dirty(),h.add(m.value)}return{status:n.value,value:h}}const c=[...a.data.values()].map((f,h)=>o._parse(new Ui(a,f,a.path,h)));return a.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,n){return new dl({...this._def,minSize:{value:e,message:Ae.toString(n)}})}max(e,n){return new dl({...this._def,maxSize:{value:e,message:Ae.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}dl.create=(t,e)=>new dl({valueType:t,minSize:null,maxSize:null,typeName:he.ZodSet,...ze(e)});class b1 extends Ye{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}b1.create=(t,e)=>new b1({getter:t,typeName:he.ZodLazy,...ze(e)});class w1 extends Ye{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ye(n,{received:n.data,code:de.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:e.data}}get value(){return this._def.value}}w1.create=(t,e)=>new w1({value:t,typeName:he.ZodLiteral,...ze(e)});function iA(t,e){return new kr({values:t,typeName:he.ZodEnum,...ze(e)})}class kr extends Ye{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),a=this._def.values;return ye(n,{expected:Ke.joinValues(a),received:n.parsedType,code:de.invalid_type}),Le}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),a=this._def.values;return ye(n,{received:n.data,code:de.invalid_enum_value,options:a}),Le}return Xn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return kr.create(e,{...this._def,...n})}exclude(e,n=this._def){return kr.create(this.options.filter(a=>!e.includes(a)),{...this._def,...n})}}kr.create=iA;class x1 extends Ye{_parse(e){const n=Ke.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==Ee.string&&a.parsedType!==Ee.number){const s=Ke.objectValues(n);return ye(a,{expected:Ke.joinValues(s),received:a.parsedType,code:de.invalid_type}),Le}if(this._cache||(this._cache=new Set(Ke.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ke.objectValues(n);return ye(a,{received:a.data,code:de.invalid_enum_value,options:s}),Le}return Xn(e.data)}get enum(){return this._def.values}}x1.create=(t,e)=>new x1({values:t,typeName:he.ZodNativeEnum,...ze(e)});class zc extends Ye{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.promise&&n.common.async===!1)return ye(n,{code:de.invalid_type,expected:Ee.promise,received:n.parsedType}),Le;const a=n.parsedType===Ee.promise?n.data:Promise.resolve(n.data);return Xn(a.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zc.create=(t,e)=>new zc({type:t,typeName:he.ZodPromise,...ze(e)});class Ir extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===he.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:u=>{ye(a,u),u.fatal?n.abort():n.dirty()},get path(){return a.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const u=s.transform(a.data,o);if(a.common.async)return Promise.resolve(u).then(async c=>{if(n.value==="aborted")return Le;const f=await this._def.schema._parseAsync({data:c,path:a.path,parent:a});return f.status==="aborted"?Le:f.status==="dirty"||n.value==="dirty"?qo(f.value):f});{if(n.value==="aborted")return Le;const c=this._def.schema._parseSync({data:u,path:a.path,parent:a});return c.status==="aborted"?Le:c.status==="dirty"||n.value==="dirty"?qo(c.value):c}}if(s.type==="refinement"){const u=c=>{const f=s.refinement(c,o);if(a.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return c.status==="aborted"?Le:(c.status==="dirty"&&n.dirty(),u(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>c.status==="aborted"?Le:(c.status==="dirty"&&n.dirty(),u(c.value).then(()=>({status:n.value,value:c.value}))))}if(s.type==="transform")if(a.common.async===!1){const u=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Rr(u))return Le;const c=s.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(u=>Rr(u)?Promise.resolve(s.transform(u.value,o)).then(c=>({status:n.value,value:c})):Le);Ke.assertNever(s)}}Ir.create=(t,e,n)=>new Ir({schema:t,typeName:he.ZodEffects,effect:e,...ze(n)});Ir.createWithPreprocess=(t,e,n)=>new Ir({schema:e,effect:{type:"preprocess",transform:t},typeName:he.ZodEffects,...ze(n)});class ji extends Ye{_parse(e){return this._getType(e)===Ee.undefined?Xn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ji.create=(t,e)=>new ji({innerType:t,typeName:he.ZodOptional,...ze(e)});class jr extends Ye{_parse(e){return this._getType(e)===Ee.null?Xn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jr.create=(t,e)=>new jr({innerType:t,typeName:he.ZodNullable,...ze(e)});class Qp extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e);let a=n.data;return n.parsedType===Ee.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Qp.create=(t,e)=>new Qp({innerType:t,typeName:he.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ze(e)});class Jp extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),a={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Dc(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Xa(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Xa(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Jp.create=(t,e)=>new Jp({innerType:t,typeName:he.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ze(e)});class E1 extends Ye{_parse(e){if(this._getType(e)!==Ee.nan){const a=this._getOrReturnCtx(e);return ye(a,{code:de.invalid_type,expected:Ee.nan,received:a.parsedType}),Le}return{status:"valid",value:e.data}}}E1.create=t=>new E1({typeName:he.ZodNaN,...ze(t)});class oM extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),a=n.data;return this._def.type._parse({data:a,path:n.path,parent:n})}unwrap(){return this._def.type}}class ny extends Ye{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?Le:o.status==="dirty"?(n.dirty(),qo(o.value)):this._def.out._parseAsync({data:o.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?Le:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,n){return new ny({in:e,out:n,typeName:he.ZodPipeline})}}class Wp extends Ye{_parse(e){const n=this._def.innerType._parse(e),a=s=>(Rr(s)&&(s.value=Object.freeze(s.value)),s);return Dc(n)?n.then(s=>a(s)):a(n)}unwrap(){return this._def.innerType}}Wp.create=(t,e)=>new Wp({innerType:t,typeName:he.ZodReadonly,...ze(e)});var he;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(he||(he={}));const lM=Ii.create,S1=Xp.create;zi.create;Ea.create;const uM=jt.create;$c.create;Uc.create;_s.create;kr.create;zc.create;ji.create;jr.create;function cM(t,e){var a,s,o;const n={type:"array"};return(a=t.type)!=null&&a._def&&((o=(s=t.type)==null?void 0:s._def)==null?void 0:o.typeName)!==he.ZodAny&&(n.items=et(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&st(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&st(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(st(n,"minItems",t.exactLength.value,t.exactLength.message,e),st(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function dM(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const a of t.checks)switch(a.kind){case"min":e.target==="jsonSchema7"?a.inclusive?st(n,"minimum",a.value,a.message,e):st(n,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(n.exclusiveMinimum=!0),st(n,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?st(n,"maximum",a.value,a.message,e):st(n,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(n.exclusiveMaximum=!0),st(n,"maximum",a.value,a.message,e));break;case"multipleOf":st(n,"multipleOf",a.value,a.message,e);break}return n}function fM(){return{type:"boolean"}}function sA(t,e){return et(t.type._def,e)}const hM=(t,e)=>et(t.innerType._def,e);function rA(t,e,n){const a=n??e.dateStrategy;if(Array.isArray(a))return{anyOf:a.map(s=>rA(t,e,s))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return mM(t,e)}}const mM=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const a of t.checks)switch(a.kind){case"min":st(n,"minimum",a.value,a.message,e);break;case"max":st(n,"maximum",a.value,a.message,e);break}return n};function pM(t,e){return{...et(t.innerType._def,e),default:t.defaultValue()}}function gM(t,e){return e.effectStrategy==="input"?et(t.schema._def,e):In(e)}function yM(t){return{type:"string",enum:Array.from(t.values)}}const vM=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function _M(t,e){const n=[et(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),et(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let a=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(o=>{if(vM(o))s.push(...o.allOf),o.unevaluatedProperties===void 0&&(a=void 0);else{let u=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...f}=o;u=f}else a=void 0;s.push(u)}}),s.length?{allOf:s,...a}:void 0}function bM(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let tm;const ea={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(tm===void 0&&(tm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),tm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function oA(t,e){const n={type:"string"};if(t.checks)for(const a of t.checks)switch(a.kind){case"min":st(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,a.value):a.value,a.message,e);break;case"max":st(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,a.value):a.value,a.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ta(n,"email",a.message,e);break;case"format:idn-email":ta(n,"idn-email",a.message,e);break;case"pattern:zod":en(n,ea.email,a.message,e);break}break;case"url":ta(n,"uri",a.message,e);break;case"uuid":ta(n,"uuid",a.message,e);break;case"regex":en(n,a.regex,a.message,e);break;case"cuid":en(n,ea.cuid,a.message,e);break;case"cuid2":en(n,ea.cuid2,a.message,e);break;case"startsWith":en(n,RegExp(`^${nm(a.value,e)}`),a.message,e);break;case"endsWith":en(n,RegExp(`${nm(a.value,e)}$`),a.message,e);break;case"datetime":ta(n,"date-time",a.message,e);break;case"date":ta(n,"date",a.message,e);break;case"time":ta(n,"time",a.message,e);break;case"duration":ta(n,"duration",a.message,e);break;case"length":st(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,a.value):a.value,a.message,e),st(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,a.value):a.value,a.message,e);break;case"includes":en(n,RegExp(nm(a.value,e)),a.message,e);break;case"ip":a.version!=="v6"&&ta(n,"ipv4",a.message,e),a.version!=="v4"&&ta(n,"ipv6",a.message,e);break;case"base64url":en(n,ea.base64url,a.message,e);break;case"jwt":en(n,ea.jwt,a.message,e);break;case"cidr":a.version!=="v6"&&en(n,ea.ipv4Cidr,a.message,e),a.version!=="v4"&&en(n,ea.ipv6Cidr,a.message,e);break;case"emoji":en(n,ea.emoji(),a.message,e);break;case"ulid":en(n,ea.ulid,a.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":ta(n,"binary",a.message,e);break;case"contentEncoding:base64":st(n,"contentEncoding","base64",a.message,e);break;case"pattern:zod":en(n,ea.base64,a.message,e);break}break;case"nanoid":en(n,ea.nanoid,a.message,e);break}return n}function nm(t,e){return e.patternStrategy==="escape"?xM(t):t}const wM=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function xM(t){let e="";for(let n=0;n<t.length;n++)wM.has(t[n])||(e+="\\"),e+=t[n];return e}function ta(t,e,n,a){var s;t.format||(s=t.anyOf)!=null&&s.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&a.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&a.errorMessages&&{errorMessage:{format:n}}})):st(t,"format",e,n,a)}function en(t,e,n,a){var s;t.pattern||(s=t.allOf)!=null&&s.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&a.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:T1(e,a),...n&&a.errorMessages&&{errorMessage:{pattern:n}}})):st(t,"pattern",T1(e,a),n,a)}function T1(t,e){var f;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},a=n.i?t.source.toLowerCase():t.source;let s="",o=!1,u=!1,c=!1;for(let h=0;h<a.length;h++){if(o){s+=a[h],o=!1;continue}if(n.i){if(u){if(a[h].match(/[a-z]/)){c?(s+=a[h],s+=`${a[h-2]}-${a[h]}`.toUpperCase(),c=!1):a[h+1]==="-"&&((f=a[h+2])!=null&&f.match(/[a-z]/))?(s+=a[h],c=!0):s+=`${a[h]}${a[h].toUpperCase()}`;continue}}else if(a[h].match(/[a-z]/)){s+=`[${a[h]}${a[h].toUpperCase()}]`;continue}}if(n.m){if(a[h]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(a[h]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&a[h]==="."){s+=u?`${a[h]}\r
`:`[${a[h]}\r
]`;continue}s+=a[h],a[h]==="\\"?o=!0:u&&a[h]==="]"?u=!1:!u&&a[h]==="["&&(u=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function lA(t,e){var a,s,o,u,c,f;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((a=t.keyType)==null?void 0:a._def.typeName)===he.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((h,m)=>({...h,[m]:et(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",m]})??In(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:et(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===he.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){const{type:h,...m}=oA(t.keyType._def,e);return{...n,propertyNames:m}}else{if(((u=t.keyType)==null?void 0:u._def.typeName)===he.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((c=t.keyType)==null?void 0:c._def.typeName)===he.ZodBranded&&t.keyType._def.type._def.typeName===he.ZodString&&((f=t.keyType._def.type._def.checks)!=null&&f.length)){const{type:h,...m}=sA(t.keyType._def,e);return{...n,propertyNames:m}}}return n}function EM(t,e){return e.mapStrategy==="record"?lA(t,e):{type:"array",maxItems:125,items:{type:"array",items:[et(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||In(e),et(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||In(e)],minItems:2,maxItems:2}}}function SM(t){const e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),a=Array.from(new Set(n.map(s=>typeof s)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}function TM(t){return t.target==="openAi"?void 0:{not:In({...t,currentPath:[...t.currentPath,"not"]})}}function AM(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Bc={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function CM(t,e){if(e.target==="openApi3")return A1(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(a=>a._def.typeName in Bc&&(!a._def.checks||!a._def.checks.length))){const a=n.reduce((s,o)=>{const u=Bc[o._def.typeName];return u&&!s.includes(u)?[...s,u]:s},[]);return{type:a.length>1?a:a[0]}}else if(n.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=n.reduce((s,o)=>{const u=typeof o._def.value;switch(u){case"string":case"number":case"boolean":return[...s,u];case"bigint":return[...s,"integer"];case"object":return o._def.value===null?[...s,"null"]:s;default:return s}},[]);if(a.length===n.length){const s=a.filter((o,u,c)=>c.indexOf(o)===u);return{type:s.length>1?s:s[0],enum:n.reduce((o,u)=>o.includes(u._def.value)?o:[...o,u._def.value],[])}}}else if(n.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((a,s)=>[...a,...s._def.values.filter(o=>!a.includes(o))],[])};return A1(t,e)}const A1=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((a,s)=>et(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(a=>!!a&&(!e.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return n.length?{anyOf:n}:void 0};function NM(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Bc[t.innerType._def.typeName],nullable:!0}:{type:[Bc[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const a=et(t.innerType._def,{...e,currentPath:[...e.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}const n=et(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function OM(t,e){const n={type:"number"};if(!t.checks)return n;for(const a of t.checks)switch(a.kind){case"int":n.type="integer",tA(n,"type",a.message,e);break;case"min":e.target==="jsonSchema7"?a.inclusive?st(n,"minimum",a.value,a.message,e):st(n,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(n.exclusiveMinimum=!0),st(n,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?st(n,"maximum",a.value,a.message,e):st(n,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(n.exclusiveMaximum=!0),st(n,"maximum",a.value,a.message,e));break;case"multipleOf":st(n,"multipleOf",a.value,a.message,e);break}return n}function RM(t,e){const n=e.target==="openAi",a={type:"object",properties:{}},s=[],o=t.shape();for(const c in o){let f=o[c];if(f===void 0||f._def===void 0)continue;let h=IM(f);h&&n&&(f._def.typeName==="ZodOptional"&&(f=f._def.innerType),f.isNullable()||(f=f.nullable()),h=!1);const m=et(f._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});m!==void 0&&(a.properties[c]=m,h||s.push(c))}s.length&&(a.required=s);const u=kM(t,e);return u!==void 0&&(a.additionalProperties=u),a}function kM(t,e){if(t.catchall._def.typeName!=="ZodNever")return et(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function IM(t){try{return t.isOptional()}catch{return!0}}const jM=(t,e)=>{var a;if(e.currentPath.toString()===((a=e.propertyPath)==null?void 0:a.toString()))return et(t.innerType._def,e);const n=et(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:In(e)},n]}:In(e)},MM=(t,e)=>{if(e.pipeStrategy==="input")return et(t.in._def,e);if(e.pipeStrategy==="output")return et(t.out._def,e);const n=et(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]});return{allOf:[n,et(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]})].filter(a=>a!==void 0)}};function LM(t,e){return et(t.type._def,e)}function DM(t,e){const n={type:"array",uniqueItems:!0,items:et(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&st(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&st(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function PM(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,a)=>et(n._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((n,a)=>a===void 0?n:[...n,a],[]),additionalItems:et(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,a)=>et(n._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((n,a)=>a===void 0?n:[...n,a],[])}}function $M(t){return{not:In(t)}}function UM(t){return In(t)}const zM=(t,e)=>et(t.innerType._def,e),BM=(t,e,n)=>{switch(e){case he.ZodString:return oA(t,n);case he.ZodNumber:return OM(t,n);case he.ZodObject:return RM(t,n);case he.ZodBigInt:return dM(t,n);case he.ZodBoolean:return fM();case he.ZodDate:return rA(t,n);case he.ZodUndefined:return $M(n);case he.ZodNull:return AM(n);case he.ZodArray:return cM(t,n);case he.ZodUnion:case he.ZodDiscriminatedUnion:return CM(t,n);case he.ZodIntersection:return _M(t,n);case he.ZodTuple:return PM(t,n);case he.ZodRecord:return lA(t,n);case he.ZodLiteral:return bM(t,n);case he.ZodEnum:return yM(t);case he.ZodNativeEnum:return SM(t);case he.ZodNullable:return NM(t,n);case he.ZodOptional:return jM(t,n);case he.ZodMap:return EM(t,n);case he.ZodSet:return DM(t,n);case he.ZodLazy:return()=>t.getter()._def;case he.ZodPromise:return LM(t,n);case he.ZodNaN:case he.ZodNever:return TM(n);case he.ZodEffects:return gM(t,n);case he.ZodAny:return In(n);case he.ZodUnknown:return UM(n);case he.ZodDefault:return pM(t,n);case he.ZodBranded:return sA(t,n);case he.ZodReadonly:return zM(t,n);case he.ZodCatch:return hM(t,n);case he.ZodPipeline:return MM(t,n);case he.ZodFunction:case he.ZodVoid:case he.ZodSymbol:return;default:return(a=>{})()}};function et(t,e,n=!1){var c;const a=e.seen.get(t);if(e.override){const f=(c=e.override)==null?void 0:c.call(e,t,e,a,n);if(f!==I5)return f}if(a&&!n){const f=VM(a,e);if(f!==void 0)return f}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const o=BM(t,t.typeName,e),u=typeof o=="function"?et(o(),e):o;if(u&&HM(t,e,u),e.postProcess){const f=e.postProcess(u,t,e);return s.jsonSchema=u,f}return s.jsonSchema=u,u}const VM=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:eA(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,a)=>e.currentPath[a]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),In(e)):e.$refStrategy==="seen"?In(e):void 0}},HM=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),GM=(t,e)=>{const n=L5(e);let a;const s=e==null?void 0:e.name,o=et(t._def,n,!1)??In(n);n.flags.hasReferencedOpenAiAnyType&&(a||(a={}),a[n.openAiAnyTypeName]||(a[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const u=s===void 0?a?{...o,[n.definitionPath]:a}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...a,[s]:o}};return n.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};function eg(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const a=t.length;if(a!==e.length)return!1;for(let s=0;s<a;s++)if(!eg(t[s],e[s]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const a=Object.keys(t),s=Object.keys(e);if(a.length!==s.length)return!1;for(const u of a)if(!eg(t[u],e[u]))return!1;return!0}return t===e}function ay(t,e){if(Zn(t)){const n=k5(t,!0);return Jo(n)?l1(Yp(n,!0),e):l1(t,e)}return Ka(t)?GM(t):t}function bs(t){if(typeof t=="object"&&t!==null){const e={...t};"additionalProperties"in e&&delete e.additionalProperties,"$schema"in e&&delete e.$schema,"strict"in e&&delete e.strict;for(const n in e)n in e&&(Array.isArray(e[n])?e[n]=e[n].map(bs):typeof e[n]=="object"&&e[n]!==null&&(e[n]=bs(e[n])));return e}return t}function tg(t){const{$schema:e,...n}=bs(Sl(t)?ay(t):t);return n}function qM(t){const{$schema:e,...n}=bs(t);return n}function xr(t,e,n=[]){if(t==null||typeof t!="object")return;const a=t;if(Array.isArray(a.enum)&&a.enum.some(s=>s==="")){const s=n.length?` at path "${n.join(".")}"`:"",o=e?` in tool "${e}"`:"";throw new Error(`Invalid enum: empty string not allowed${o}${s}. Gemini API rejects empty strings in enums.`)}if(a.type==="object"&&a.properties&&typeof a.properties=="object")for(const[s,o]of Object.entries(a.properties))xr(o,e,[...n,s]);a.items&&xr(a.items,e,[...n,"[]"]);for(const s of["anyOf","oneOf","allOf"]){const o=a[s];Array.isArray(o)&&o.forEach((u,c)=>xr(u,e,[...n,`${s}[${c}]`]))}a.additionalProperties&&typeof a.additionalProperties=="object"&&xr(a.additionalProperties,e,[...n,"additionalProperties"])}function ws(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function uA(t){return ws(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function cA(t){return ws(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function FM(t){return ws(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function YM(t){if(ws(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function Wo({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let a;if(n){a=n[1].toLowerCase();const s=e?Uint8Array.from(atob(n[2]),o=>o.charCodeAt(0)):n[2];return{mime_type:a,data:s}}}function ZM(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function XM(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}var am,C1;function KM(){return C1||(C1=1,am=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),am}var QM=KM();const JM=_g(QM);var Wu={exports:{}},N1;function WM(){if(N1)return Wu.exports;N1=1;const t=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,a=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),u=new RegExp(s.source+a.source,"gu"),c=new RegExp("\\d+"+a.source,"gu"),f=(v,_,x)=>{let w=!1,A=!1,T=!1;for(let k=0;k<v.length;k++){const R=v[k];w&&t.test(R)?(v=v.slice(0,k)+"-"+v.slice(k),w=!1,T=A,A=!0,k++):A&&T&&e.test(R)?(v=v.slice(0,k-1)+"-"+v.slice(k-1),T=A,A=!1,w=!0):(w=_(R)===R&&x(R)!==R,T=A,A=x(R)===R&&_(R)!==R)}return v},h=(v,_)=>(n.lastIndex=0,v.replace(n,x=>_(x))),m=(v,_)=>(u.lastIndex=0,c.lastIndex=0,v.replace(u,(x,w)=>_(w)).replace(c,x=>_(x))),y=(v,_)=>{if(!(typeof v=="string"||Array.isArray(v)))throw new TypeError("Expected the input to be `string | string[]`");if(_={pascalCase:!1,preserveConsecutiveUppercase:!1,..._},Array.isArray(v)?v=v.map(T=>T.trim()).filter(T=>T.length).join("-"):v=v.trim(),v.length===0)return"";const x=_.locale===!1?T=>T.toLowerCase():T=>T.toLocaleLowerCase(_.locale),w=_.locale===!1?T=>T.toUpperCase():T=>T.toLocaleUpperCase(_.locale);return v.length===1?_.pascalCase?w(v):x(v):(v!==x(v)&&(v=f(v,x,w)),v=v.replace(o,""),_.preserveConsecutiveUppercase?v=h(v,x):v=x(v),_.pascalCase&&(v=w(v.charAt(0))+v.slice(1)),m(v,w))};return Wu.exports=y,Wu.exports.default=y,Wu.exports}WM();function eL(t,e){return(e==null?void 0:e[t])||JM(t)}function tL(t,e,n){const a={};for(const s in t)Object.hasOwn(t,s)&&(a[e(s,n)]=t[s]);return a}const dA="__lc_escaped__";function nL(t){return"lc"in t||Object.keys(t).length===1&&dA in t}function aL(t){return{[dA]:t}}function iL(t){return t!==null&&typeof t=="object"&&"lc_serializable"in t&&typeof t.toJSON=="function"}function sL(t){var n;let e;return t!==null&&typeof t=="object"?"lc_id"in t&&Array.isArray(t.lc_id)?e=t.lc_id:e=[((n=t.constructor)==null?void 0:n.name)??"Object"]:e=[typeof t],{lc:1,type:"not_implemented",id:e}}function ng(t,e=new WeakSet){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){if(e.has(t))return sL(t);if(iL(t))return t;e.add(t);const n=t;if(nL(n))return e.delete(t),aL(n);const a={};for(const[s,o]of Object.entries(n))a[s]=ng(o,e);return e.delete(t),a}return Array.isArray(t)?t.map(n=>ng(n,e)):t}function O1(t){return Array.isArray(t)?[...t]:{...t}}function rL(t,e){const n=O1(t);for(const[a,s]of Object.entries(e)){const[o,...u]=a.split(".").reverse();let c=n;for(const f of u.reverse()){if(c[f]===void 0)break;c[f]=O1(c[f]),c=c[f]}c[o]!==void 0&&(c[o]={lc:1,type:"secret",id:[s]})}return n}function fA(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var fl=class hA{constructor(e,...n){L(this,"lc_serializable",!1);L(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([a])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(a)})):this.lc_kwargs=e??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,fA(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof hA||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},a=Object.keys(this.lc_kwargs).reduce((c,f)=>(c[f]=f in this?this[f]:this.lc_kwargs[f],c),{});for(let c=Object.getPrototypeOf(this);c;c=Object.getPrototypeOf(c))Object.assign(e,Reflect.get(c,"lc_aliases",this)),Object.assign(n,Reflect.get(c,"lc_secrets",this)),Object.assign(a,Reflect.get(c,"lc_attributes",this));Object.keys(n).forEach(c=>{let f=this,h=a;const[m,...y]=c.split(".").reverse();for(const v of y.reverse()){if(!(v in f)||f[v]===void 0)return;(!(v in h)||h[v]===void 0)&&(typeof f[v]=="object"&&f[v]!=null?h[v]={}:Array.isArray(f[v])&&(h[v]=[])),f=f[v],h=h[v]}m in f&&f[m]!==void 0&&(h[m]=h[m]||f[m])});const s={},o=new WeakSet;o.add(this);for(const[c,f]of Object.entries(a))s[c]=ng(f,o);const u=tL(Object.keys(n).length?rL(s,n):s,eL,e);return{lc:1,type:"constructor",id:this.lc_id,kwargs:u}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function xe(t,e){return Oe(t)&&t.type===e}function Oe(t){return typeof t=="object"&&t!==null}function kn(t){return Array.isArray(t)}function ce(t){return typeof t=="string"}function ra(t){return typeof t=="number"}function iy(t){return t instanceof Uint8Array}function R1(t){try{return JSON.parse(t)}catch{return}}const Mi=t=>t();function oL(t){if(t.type==="char_location"&&ce(t.document_title)&&ra(t.start_char_index)&&ra(t.end_char_index)&&ce(t.cited_text)){const{document_title:e,start_char_index:n,end_char_index:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"char",title:e??void 0,startIndex:n,endIndex:a,citedText:s}}if(t.type==="page_location"&&ce(t.document_title)&&ra(t.start_page_number)&&ra(t.end_page_number)&&ce(t.cited_text)){const{document_title:e,start_page_number:n,end_page_number:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"page",title:e??void 0,startIndex:n,endIndex:a,citedText:s}}if(t.type==="content_block_location"&&ce(t.document_title)&&ra(t.start_block_index)&&ra(t.end_block_index)&&ce(t.cited_text)){const{document_title:e,start_block_index:n,end_block_index:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"block",title:e??void 0,startIndex:n,endIndex:a,citedText:s}}if(t.type==="web_search_result_location"&&ce(t.url)&&ce(t.title)&&ce(t.encrypted_index)&&ce(t.cited_text)){const{url:e,title:n,encrypted_index:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"url",url:e,title:n,startIndex:Number(a),endIndex:Number(a),citedText:s}}if(t.type==="search_result_location"&&ce(t.source)&&ce(t.title)&&ra(t.start_block_index)&&ra(t.end_block_index)&&ce(t.cited_text)){const{source:e,title:n,start_block_index:a,end_block_index:s,cited_text:o,...u}=t;return{...u,type:"citation",source:"search",url:e,title:n??void 0,startIndex:a,endIndex:s,citedText:o}}}function mA(t){if(xe(t,"document")&&Oe(t.source)&&"type"in t.source){if(t.source.type==="base64"&&ce(t.source.media_type)&&ce(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&ce(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&ce(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&ce(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(xe(t,"image")&&Oe(t.source)&&"type"in t.source){if(t.source.type==="base64"&&ce(t.source.media_type)&&ce(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&ce(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&ce(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function lL(t){function*e(){for(const n of t){const a=mA(n);a?yield a:yield n}}return Array.from(e())}function k1(t){function*e(){var a;const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n){if(xe(s,"text")&&ce(s.text)){const{text:o,citations:u,...c}=s;if(kn(u)&&u.length){const f=u.reduce((h,m)=>{const y=oL(m);return y?[...h,y]:h},[]);yield{...c,type:"text",text:o,annotations:f};continue}else{yield{...c,type:"text",text:o};continue}}else if(xe(s,"thinking")&&ce(s.thinking)){const{thinking:o,signature:u,...c}=s;yield{...c,type:"reasoning",reasoning:o,signature:u};continue}else if(xe(s,"redacted_thinking")){yield{type:"non_standard",value:s};continue}else if(xe(s,"tool_use")&&ce(s.name)&&ce(s.id)){yield{type:"tool_call",id:s.id,name:s.name,args:s.input};continue}else if(xe(s,"input_json_delta")){if(cL(t)&&((a=t.tool_call_chunks)!=null&&a.length)){const o=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:o.id,name:o.name,args:o.args,index:o.index};continue}}else if(xe(s,"server_tool_use")&&ce(s.name)&&ce(s.id)){const{name:o,id:u}=s;if(o==="web_search"){yield{id:u,type:"server_tool_call",name:"web_search",args:{query:Mi(()=>{if(typeof s.input=="string")return s.input;if(Oe(s.input)&&ce(s.input.query))return s.input.query;if(ce(s.partial_json)){const c=R1(s.partial_json);if(c!=null&&c.query)return c.query}return""})}};continue}else if(s.name==="code_execution"){yield{id:u,type:"server_tool_call",name:"code_execution",args:{code:Mi(()=>{if(typeof s.input=="string")return s.input;if(Oe(s.input)&&ce(s.input.code))return s.input.code;if(ce(s.partial_json)){const c=R1(s.partial_json);if(c!=null&&c.code)return c.code}return""})}};continue}}else if(xe(s,"web_search_tool_result")&&ce(s.tool_use_id)&&kn(s.content)){const{content:o,tool_use_id:u}=s;yield{type:"server_tool_call_result",name:"web_search",toolCallId:u,status:"success",output:{urls:o.reduce((c,f)=>xe(f,"web_search_result")?[...c,f.url]:c,[])}};continue}else if(xe(s,"code_execution_tool_result")&&ce(s.tool_use_id)&&Oe(s.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(xe(s,"mcp_tool_use")){yield{id:s.id,type:"server_tool_call",name:"mcp_tool_use",args:s.input};continue}else if(xe(s,"mcp_tool_result")&&ce(s.tool_use_id)&&Oe(s.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(xe(s,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:s.input};continue}else if(xe(s,"search_result")){yield{id:s.id,type:"non_standard",value:s};continue}else if(xe(s,"tool_result")){yield{id:s.id,type:"non_standard",value:s};continue}else{const o=mA(s);if(o){yield o;continue}}yield{type:"non_standard",value:s}}}return Array.from(e())}const uL={translateContent:k1,translateContentChunk:k1};function cL(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function dL(t){return uA(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:cA(t)?{type:t.type,mimeType:t.mime_type??"application/octet-stream",data:t.data,metadata:t.metadata}:FM(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function fL(t){return t.map(dL)}function hL(t){return!!(xe(t,"image_url")&&Oe(t.image_url)||xe(t,"input_audio")&&Oe(t.input_audio)||xe(t,"file")&&Oe(t.file))}function mL(t){if(xe(t,"image_url")&&Oe(t.image_url)&&ce(t.image_url.url)){const e=Wo({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(xe(t,"input_audio")&&Oe(t.input_audio)&&ce(t.input_audio.data)&&ce(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(xe(t,"file")&&Oe(t.file)&&ce(t.file.data)){const e=Wo({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(ce(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function pL(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...sy(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function gL(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...sy(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function sy(t){const e=[];for(const n of t)hL(n)?e.push(mL(n)):e.push(n);return e}function yL(t){if(t.type==="url_citation"){const{url:e,title:n,start_index:a,end_index:s}=t;return{type:"citation",url:e,title:n,startIndex:a,endIndex:s}}if(t.type==="file_citation"){const{file_id:e,filename:n,index:a}=t;return{type:"citation",title:n,startIndex:a,endIndex:a,fileId:e}}return t}function pA(t){function*e(){var a;Oe((a=t.additional_kwargs)==null?void 0:a.reasoning)&&kn(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((s,o)=>Oe(o)&&ce(o.text)?`${s}${o.text}`:s,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n)if(xe(s,"text")){const{text:o,annotations:u,...c}=s;Array.isArray(u)?yield{...c,type:"text",text:String(o),annotations:u.map(yL)}:yield{...c,type:"text",text:String(o)}}for(const s of t.tool_calls??[])yield{type:"tool_call",id:s.id,name:s.name,args:s.args};if(Oe(t.additional_kwargs)&&kn(t.additional_kwargs.tool_outputs))for(const s of t.additional_kwargs.tool_outputs){if(xe(s,"web_search_call")){const o={};if(Oe(s.action)&&ce(s.action.query)&&(o.query=s.action.query),yield{id:s.id,type:"server_tool_call",name:"web_search",args:o},s.status==="completed"||s.status==="failed"){const u={};Oe(s.action)&&(u.action=s.action),yield{type:"server_tool_call_result",toolCallId:ce(s.id)?s.id:"",status:s.status==="completed"?"success":"error",output:u}}continue}else if(xe(s,"file_search_call")){yield{id:s.id,type:"server_tool_call",name:"file_search",args:{queries:kn(s.queries)?s.queries:[]}},(s.status==="completed"||s.status==="failed")&&(yield{type:"server_tool_call_result",toolCallId:ce(s.id)?s.id:"",status:s.status==="completed"?"success":"error",output:kn(s.results)?{results:s.results}:{}});continue}else if(xe(s,"computer_call")){yield{type:"non_standard",value:s};continue}else if(xe(s,"code_interpreter_call")){if(ce(s.code)&&(yield{id:s.id,type:"server_tool_call",name:"code_interpreter",args:{code:s.code}}),kn(s.outputs)){const o=Mi(()=>{if(s.status!=="in_progress"){if(s.status==="completed")return 0;if(s.status==="incomplete")return 127;if(s.status!=="interpreting"&&s.status==="failed")return 1}});for(const u of s.outputs)if(xe(u,"logs")){yield{type:"server_tool_call_result",toolCallId:s.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:o??0,stderr:[0,void 0].includes(o)?void 0:String(u.logs),stdout:[0,void 0].includes(o)?String(u.logs):void 0}};continue}}continue}else if(xe(s,"mcp_call")){yield{id:s.id,type:"server_tool_call",name:"mcp_call",args:s.input};continue}else if(xe(s,"mcp_list_tools")){yield{id:s.id,type:"server_tool_call",name:"mcp_list_tools",args:s.input};continue}else if(xe(s,"mcp_approval_request")){yield{type:"non_standard",value:s};continue}else if(xe(s,"image_generation_call")){ce(s.result)&&(yield{type:"image",mimeType:"image/png",data:s.result,id:ce(s.id)?s.id:void 0,metadata:{status:ce(s.status)?s.status:void 0}}),yield{type:"non_standard",value:s};continue}Oe(s)&&(yield{type:"non_standard",value:s})}}return Array.from(e())}function vL(t){function*e(){yield*pA(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}const _L={translateContent:t=>typeof t.content=="string"?pL(t):pA(t),translateContentChunk:t=>typeof t.content=="string"?gL(t):vL(t)};function bL(t,e="pretty"){return e==="pretty"?wL(t):JSON.stringify(t)}function wL(t){const e=[],n=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,a=Math.floor((80-n.length)/2),s="=".repeat(a),o=n.length%2===0?s:`${s}=`;if(e.push(`${s}${n}${o}`),t.type==="ai"){const u=t;if(u.tool_calls&&u.tool_calls.length>0){e.push("Tool Calls:");for(const c of u.tool_calls){e.push(`  ${c.name} (${c.id})`),e.push(` Call ID: ${c.id}`),e.push("  Args:");for(const[f,h]of Object.entries(c.args))e.push(`    ${f}: ${typeof h=="object"?JSON.stringify(h):h}`)}}}if(t.type==="tool"){const u=t;u.name&&e.push(`Name: ${u.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}const im=Symbol.for("langchain.message");function xs(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>ws(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Vc(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>ws(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function xL(t,e){function n(a,s){if(typeof a!="object"||a===null||a===void 0)return a;if(s>=e)return Array.isArray(a)?"[Array]":"[Object]";if(Array.isArray(a))return a.map(u=>n(u,s+1));const o={};for(const u of Object.keys(a))o[u]=n(a[u],s+1);return o}return JSON.stringify(n(t,0),null,2)}var sS,Ts=class extends fl{constructor(e){const n=typeof e=="string"||Array.isArray(e)?{content:e}:e;n.additional_kwargs||(n.additional_kwargs={}),n.response_metadata||(n.response_metadata={});super(n);L(this,"lc_namespace",["langchain_core","messages"]);L(this,"lc_serializable",!0);L(this,sS,!0);L(this,"id");L(this,"name");L(this,"content");L(this,"additional_kwargs");L(this,"response_metadata");this.name=n.name,n.content===void 0&&n.contentBlocks!==void 0?(this.content=n.contentBlocks,this.response_metadata={output_version:"v1",...n.response_metadata}):n.content!==void 0?(this.content=n.content??[],this.response_metadata=n.response_metadata):(this.content=[],this.response_metadata=n.response_metadata),this.additional_kwargs=n.additional_kwargs,this.id=n.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[fL,sy,lL].reduce((n,a)=>a(n),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&im in e&&e[im]===!0&&XM(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(sS=im,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=xL(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}toFormattedString(e="pretty"){return bL(this,e)}};const EL=["index","created","timestamp"];function Yn(t,e,n){const a=EL;if(t==null&&e==null)return;if(t==null||e==null)return t??e;const s={...t};for(const[o,u]of Object.entries(e))if(s[o]==null)s[o]=u;else{if(u==null)continue;if(typeof s[o]!=typeof u||Array.isArray(s[o])!==Array.isArray(u))throw new Error(`field[${o}] already exists in the message chunk, but with a different type.`);if(typeof s[o]=="string"){if(o==="type")continue;if(["id","name","output_version","model_provider"].includes(o))u&&(s[o]=u);else{if(a.includes(o))continue;s[o]+=u}}else if(typeof s[o]=="number"){if(a.includes(o))continue;s[o]=s[o]+u}else if(typeof s[o]=="object"&&!Array.isArray(s[o]))s[o]=Yn(s[o],u);else if(Array.isArray(s[o]))s[o]=Vc(s[o],u);else{if(s[o]===u)continue;console.warn(`field[${o}] already exists in this message chunk and value has unsupported type.`)}}return s}function Vc(t,e,n){if(!(t==null&&e==null)){if(t==null||e==null)return t||e;{const a=[...t];for(const s of e)if(typeof s=="object"&&s!==null&&"index"in s&&typeof s.index=="number"){const o=a.findIndex(u=>{const c=typeof u=="object",f="index"in u&&u.index===s.index,h="id"in u&&"id"in s&&(u==null?void 0:u.id)===(s==null?void 0:s.id),m=!("id"in u)||!(u!=null&&u.id)||!("id"in s)||!(s!=null&&s.id);return c&&f&&(h||m)});o!==-1&&typeof a[o]=="object"&&a[o]!==null?a[o]=Yn(a[o],s):a.push(s)}else{if(typeof s=="object"&&s!==null&&"text"in s&&s.text==="")continue;a.push(s)}return a}}}var zr=class gA extends Ts{static isInstance(e){if(!super.isInstance(e))return!1;let n=Object.getPrototypeOf(e);for(;n!==null;){if(n===gA.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function SL(t){return typeof t.role=="string"}function rd(t){return typeof(t==null?void 0:t._getType)=="function"}function TL(t){return zr.isInstance(t)}function AL(t,e){return Yn(t,e)??{}}function yA(t,e){const n={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(n.audio=((t==null?void 0:t.audio)??0)+((e==null?void 0:e.audio)??0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(n.image=((t==null?void 0:t.image)??0)+((e==null?void 0:e.image)??0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(n.video=((t==null?void 0:t.video)??0)+((e==null?void 0:e.video)??0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(n.document=((t==null?void 0:t.document)??0)+((e==null?void 0:e.document)??0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(n.text=((t==null?void 0:t.text)??0)+((e==null?void 0:e.text)??0)),n}function CL(t,e){const n={...yA(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(n.cache_read=((t==null?void 0:t.cache_read)??0)+((e==null?void 0:e.cache_read)??0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(n.cache_creation=((t==null?void 0:t.cache_creation)??0)+((e==null?void 0:e.cache_creation)??0)),n}function NL(t,e){const n={...yA(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(n.reasoning=((t==null?void 0:t.reasoning)??0)+((e==null?void 0:e.reasoning)??0)),n}function vA(t,e){return{input_tokens:((t==null?void 0:t.input_tokens)??0)+((e==null?void 0:e.input_tokens)??0),output_tokens:((t==null?void 0:t.output_tokens)??0)+((e==null?void 0:e.output_tokens)??0),total_tokens:((t==null?void 0:t.total_tokens)??0)+((e==null?void 0:e.total_tokens)??0),input_token_details:CL(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:NL(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var OL=class extends Ts{constructor(e,n,a){const s=typeof e=="string"||Array.isArray(e)?{content:e,name:a,tool_call_id:n}:e;super(s);L(this,"lc_direct_tool_output",!0);L(this,"type","tool");L(this,"status");L(this,"tool_call_id");L(this,"metadata");L(this,"artifact");this.tool_call_id=s.tool_call_id,this.artifact=s.artifact,this.status=s.status,this.metadata=s.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function RL(t){const e=[],n=[];for(const a of t)if(a.function){const s=a.function.name;try{const o=JSON.parse(a.function.arguments);e.push({name:s||"",args:o||{},id:a.id})}catch{n.push({name:s,args:a.function.arguments,id:a.id,error:"Malformed args."})}}else continue;return[e,n]}function kL(t){return typeof t=="object"&&t!==null&&"getType"in t&&typeof t.getType=="function"&&t.getType()==="tool"}function ry(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function IL(t){if(Oe(t.document)&&Oe(t.document.source)){const e=ry(Oe(t.document)&&ce(t.document.format)?t.document.format:"");if(Oe(t.document.source)){if(Oe(t.document.source.s3Location)&&ce(t.document.source.s3Location.uri))return{type:"file",mimeType:e,fileId:t.document.source.s3Location.uri};if(iy(t.document.source.bytes))return{type:"file",mimeType:e,data:t.document.source.bytes};if(ce(t.document.source.text))return{type:"file",mimeType:e,data:Buffer.from(t.document.source.text).toString("base64")};if(kn(t.document.source.content))return{type:"file",mimeType:e,data:t.document.source.content.reduce((n,a)=>Oe(a)&&ce(a.text)?n+a.text:n,"")}}}return{type:"non_standard",value:t}}function jL(t){if(xe(t,"image")&&Oe(t.image)){const e=ry(Oe(t.image)&&ce(t.image.format)?t.image.format:"");if(Oe(t.image.source)){if(Oe(t.image.source.s3Location)&&ce(t.image.source.s3Location.uri))return{type:"image",mimeType:e,fileId:t.image.source.s3Location.uri};if(iy(t.image.source.bytes))return{type:"image",mimeType:e,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function ML(t){if(xe(t,"video")&&Oe(t.video)){const e=ry(Oe(t.video)&&ce(t.video.format)?t.video.format:"");if(Oe(t.video.source)){if(Oe(t.video.source.s3Location)&&ce(t.video.source.s3Location.uri))return{type:"video",mimeType:e,fileId:t.video.source.s3Location.uri};if(iy(t.video.source.bytes))return{type:"video",mimeType:e,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function I1(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const a of n){if(xe(a,"cache_point")){yield{type:"non_standard",value:a};continue}else if(xe(a,"citations_content")&&Oe(a.citationsContent)){yield{type:"text",text:kn(a.citationsContent.content)?a.citationsContent.content.reduce((s,o)=>Oe(o)&&ce(o.text)?s+o.text:s,""):"",annotations:kn(a.citationsContent.citations)?a.citationsContent.citations.reduce((s,o)=>{if(Oe(o)){const u=kn(o.sourceContent)?o.sourceContent.reduce((f,h)=>Oe(h)&&ce(h.text)?f+h.text:f,""):"",c=Mi(()=>{if(Oe(o.location)){const f=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(Oe(f))return{source:ra(f.documentIndex)?f.documentIndex.toString():void 0,startIndex:ra(f.start)?f.start:void 0,endIndex:ra(f.end)?f.end:void 0}}return{}});s.push({type:"citation",citedText:u,...c})}return s},[]):[]};continue}else if(xe(a,"document")&&Oe(a.document)){yield IL(a);continue}else if(xe(a,"guard_content")){yield{type:"non_standard",value:a};continue}else if(xe(a,"image")&&Oe(a.image)){yield jL(a);continue}else if(xe(a,"reasoning_content")&&ce(a.reasoningText)){yield{type:"reasoning",reasoning:a.reasoningText};continue}else if(xe(a,"text")&&ce(a.text)){yield{type:"text",text:a.text};continue}else if(xe(a,"tool_result")){yield{type:"non_standard",value:a};continue}else{if(xe(a,"tool_call"))continue;if(xe(a,"video")&&Oe(a.video)){yield ML(a);continue}}yield{type:"non_standard",value:a}}}return Array.from(e())}const LL={translateContent:I1,translateContentChunk:I1};function j1(t){var a;const e=[],n=(a=t.additional_kwargs)==null?void 0:a.reasoning_content;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const s of t.content)typeof s=="object"&&"type"in s&&s.type==="text"&&"text"in s&&ce(s.text)&&e.push({type:"text",text:s.text});for(const s of t.tool_calls??[])e.push({type:"tool_call",id:s.id,name:s.name,args:s.args});return e}const DL={translateContent:j1,translateContentChunk:j1};function M1(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const a of n){if(xe(a,"text")&&ce(a.text)){yield{type:"text",text:a.text};continue}else if(xe(a,"thinking")&&ce(a.thinking)){yield{type:"reasoning",reasoning:a.thinking,...a.signature?{signature:a.signature}:{}};continue}else if(xe(a,"inlineData")&&Oe(a.inlineData)&&ce(a.inlineData.mimeType)&&ce(a.inlineData.data)){yield{type:"file",mimeType:a.inlineData.mimeType,data:a.inlineData.data};continue}else if(xe(a,"functionCall")&&Oe(a.functionCall)&&ce(a.functionCall.name)&&Oe(a.functionCall.args)){yield{type:"tool_call",id:t.id,name:a.functionCall.name,args:a.functionCall.args};continue}else if(xe(a,"functionResponse")){yield{type:"non_standard",value:a};continue}else if(xe(a,"fileData")&&Oe(a.fileData)&&ce(a.fileData.mimeType)&&ce(a.fileData.fileUri)){yield{type:"file",mimeType:a.fileData.mimeType,fileId:a.fileData.fileUri};continue}else if(xe(a,"executableCode")){yield{type:"non_standard",value:a};continue}else if(xe(a,"codeExecutionResult")){yield{type:"non_standard",value:a};continue}yield{type:"non_standard",value:a}}}return Array.from(e())}const PL={translateContent:M1,translateContentChunk:M1};function L1(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const a of n){if(xe(a,"reasoning")&&ce(a.reasoning)){const s=Mi(()=>{var u;const o=n.indexOf(a);if(kn((u=t.additional_kwargs)==null?void 0:u.signatures)&&o>=0)return t.additional_kwargs.signatures.at(o)});ce(s)?yield{type:"reasoning",reasoning:a.reasoning,signature:s}:yield{type:"reasoning",reasoning:a.reasoning};continue}else if(xe(a,"thinking")&&ce(a.thinking)){yield{type:"reasoning",reasoning:a.thinking,...a.signature?{signature:a.signature}:{}};continue}else if(xe(a,"text")&&ce(a.text)){yield{type:"text",text:a.text};continue}else if(xe(a,"image_url")){if(ce(a.image_url))if(a.image_url.startsWith("data:")){const s=a.image_url.match(/^data:([^;]+);base64,(.+)$/);s?yield{type:"image",data:s[2],mimeType:s[1]}:yield{type:"image",url:a.image_url}}else yield{type:"image",url:a.image_url};continue}else if(xe(a,"media")&&ce(a.mimeType)&&ce(a.data)){yield{type:"file",mimeType:a.mimeType,data:a.data};continue}yield{type:"non_standard",value:a}}}return Array.from(e())}const $L={translateContent:L1,translateContentChunk:L1};function D1(t){var a;const e=[],n=(a=t.additional_kwargs)==null?void 0:a.reasoning;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string"){let s=t.content;const o=s.match(/<think>([\s\S]*?)<\/think>/);if(o){const u=o[1].trim();u.length>0&&e.push({type:"reasoning",reasoning:u}),s=s.replace(/<think>[\s\S]*?<\/think>/,"").trim()}s.length>0&&e.push({type:"text",text:s})}else for(const s of t.content)if(typeof s=="object"&&"type"in s&&s.type==="text"&&"text"in s&&ce(s.text)){let o=s.text;const u=o.match(/<think>([\s\S]*?)<\/think>/);if(u){const c=u[1].trim();c.length>0&&e.push({type:"reasoning",reasoning:c}),o=o.replace(/<think>[\s\S]*?<\/think>/,"").trim()}o.length>0&&e.push({type:"text",text:o})}for(const s of t.tool_calls??[])e.push({type:"tool_call",id:s.id,name:s.name,args:s.args});return e}const UL={translateContent:D1,translateContentChunk:D1};function P1(t){var a;const e=[],n=(a=t.additional_kwargs)==null?void 0:a.reasoning_content;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const s of t.content)typeof s=="object"&&"type"in s&&s.type==="text"&&"text"in s&&ce(s.text)&&e.push({type:"text",text:s.text});for(const s of t.tool_calls??[])e.push({type:"tool_call",id:s.id,name:s.name,args:s.args});return e}const zL={translateContent:P1,translateContentChunk:P1};function $1(t){var a,s;const e=[];if(Oe((a=t.additional_kwargs)==null?void 0:a.reasoning)){const o=t.additional_kwargs.reasoning;if(kn(o.summary)){const u=o.summary.reduce((c,f)=>Oe(f)&&ce(f.text)?`${c}${f.text}`:c,"");u.length>0&&e.push({type:"reasoning",reasoning:u})}}const n=(s=t.additional_kwargs)==null?void 0:s.reasoning_content;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const o of t.content)typeof o=="object"&&"type"in o&&o.type==="text"&&"text"in o&&ce(o.text)&&e.push({type:"text",text:o.text});for(const o of t.tool_calls??[])e.push({type:"tool_call",id:o.id,name:o.name,args:o.args});return e}const BL={translateContent:$1,translateContentChunk:$1};function U1(t){function*e(){const n=Mi(()=>typeof t.content=="string"?t.additional_kwargs.originalTextContentBlock?[{...t.additional_kwargs.originalTextContentBlock,type:"text"}]:[{type:"text",text:t.content}]:t.content);for(const a of n){const s=Mi(()=>xe(a,"text")&&ce(a.text)?{type:"text",text:a.text}:xe(a,"inlineData")&&Oe(a.inlineData)&&ce(a.inlineData.mimeType)&&ce(a.inlineData.data)?{type:"file",mimeType:a.inlineData.mimeType,data:a.inlineData.data}:xe(a,"functionCall")&&Oe(a.functionCall)&&ce(a.functionCall.name)&&Oe(a.functionCall.args)?{type:"tool_call",id:t.id,name:a.functionCall.name,args:a.functionCall.args}:xe(a,"functionResponse")?{type:"non_standard",value:a}:xe(a,"fileData")&&Oe(a.fileData)&&ce(a.fileData.mimeType)&&ce(a.fileData.fileUri)?{type:"file",mimeType:a.fileData.mimeType,fileId:a.fileData.fileUri}:xe(a,"executableCode")?{type:"non_standard",value:a}:xe(a,"codeExecutionResult")?{type:"non_standard",value:a}:{type:"non_standard",value:a}),o=Mi(()=>"thought"in a&&a.thought?{type:"reasoning",reasoning:s.type==="text"?s.text:"",reasoningContentBlock:s}:s),u={thought:a.thought,thoughtSignature:a.thoughtSignature,partMetadata:a.partMetadata,...o};for(const c in u)u[c]===void 0&&delete u[c];yield u}}return Array.from(e())}const VL={translateContent:U1,translateContentChunk:U1};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",uL],["bedrock-converse",LL],["deepseek",DL],["google",VL],["google-genai",PL],["google-vertexai",$L],["groq",UL],["ollama",zL],["openai",_L],["xai",BL]]));function _A(t){return globalThis.lc_block_translators_registry.get(t)}function bA(t){const e=Symbol.for(t);return{brand(n,a){var u,c;const s=a?Symbol.for(`${t}.${a}`):e;class o extends(c=n,u=s,c){constructor(...m){super(...m);L(this,u,!0)}static isInstance(m){return typeof m=="object"&&m!==null&&s in m&&m[s]===!0}}return Object.defineProperty(o,"name",{value:n.name}),o},sub(n){return bA(`${t}.${n}`)},isInstance(n){return typeof n=="object"&&n!==null&&e in n&&n[e]===!0}}}const HL=bA("langchain");function wA(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}const oy=HL.sub("error");var xA=class extends oy.brand(Error){constructor(e){super(e);L(this,"name","LangChainError");Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},z1=class extends oy.brand(xA,"model-abort"){constructor(e,n){super(e);L(this,"name","ModelAbortError");L(this,"partialOutput");this.partialOutput=n}};(class EA extends oy.brand(xA,"context-overflow"){constructor(n){super(n??"Input exceeded the model's context window.");L(this,"name","ContextOverflowError");L(this,"cause")}static fromError(n){const a=new EA(n.message);return a.cause=n,a}});function SA(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}var GL=class extends Error{constructor(e,n){super(e);L(this,"output");this.output=n}};function B1(t,e=TA){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let a=t.substring(n+3);a.startsWith(`json
`)?a=a.substring(5):a.startsWith("json")?a=a.substring(4):a.startsWith(`
`)&&(a=a.substring(1));const s=a.indexOf("```");let o=a;return s!==-1&&(o=a.substring(0,s)),e(o.trim())}function qL(t){try{return JSON.parse(t)}catch{}const e=t.trim();if(e.length===0)throw new Error("Unexpected end of JSON input");let n=0;function a(){for(;n<e.length&&/\s/.test(e[n]);)n+=1}function s(){if(e[n]!=='"')throw new Error(`Expected '"' at position ${n}, got '${e[n]}'`);n+=1;let m="",y=!1;for(;n<e.length;){const v=e[n];if(y){if(v==="n")m+=`
`;else if(v==="t")m+="	";else if(v==="r")m+="\r";else if(v==="\\")m+="\\";else if(v==='"')m+='"';else if(v==="b")m+="\b";else if(v==="f")m+="\f";else if(v==="/")m+="/";else if(v==="u"){const _=e.substring(n+1,n+5);if(/^[0-9A-Fa-f]{0,4}$/.test(_))_.length===4?m+=String.fromCharCode(Number.parseInt(_,16)):m+=`u${_}`,n+=_.length;else throw new Error(`Invalid unicode escape sequence '\\u${_}' at position ${n}`)}else throw new Error(`Invalid escape sequence '\\${v}' at position ${n}`);y=!1}else if(v==="\\")y=!0;else{if(v==='"')return n+=1,m;m+=v}n+=1}return y&&(m+="\\"),m}function o(){const m=n;let y="";if(e[n]==="-"&&(y+="-",n+=1),n<e.length&&e[n]==="0"&&(y+="0",n+=1,e[n]>="0"&&e[n]<="9"))throw new Error(`Invalid number at position ${m}`);if(n<e.length&&e[n]>="1"&&e[n]<="9")for(;n<e.length&&e[n]>="0"&&e[n]<="9";)y+=e[n],n+=1;if(n<e.length&&e[n]===".")for(y+=".",n+=1;n<e.length&&e[n]>="0"&&e[n]<="9";)y+=e[n],n+=1;if(n<e.length&&(e[n]==="e"||e[n]==="E"))for(y+=e[n],n+=1,n<e.length&&(e[n]==="+"||e[n]==="-")&&(y+=e[n],n+=1);n<e.length&&e[n]>="0"&&e[n]<="9";)y+=e[n],n+=1;if(y==="-")return-0;const v=Number.parseFloat(y);if(Number.isNaN(v))throw n=m,new Error(`Invalid number '${y}' at position ${m}`);return v}function u(){if(a(),n>=e.length)throw new Error(`Unexpected end of input at position ${n}`);const m=e[n];if(m==="{")return f();if(m==="[")return c();if(m==='"')return s();if("null".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),null;if("true".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),!0;if("false".startsWith(e.substring(n,n+5)))return n+=Math.min(5,e.length-n),!1;if(m==="-"||m>="0"&&m<="9")return o();throw new Error(`Unexpected character '${m}' at position ${n}`)}function c(){if(e[n]!=="[")throw new Error(`Expected '[' at position ${n}, got '${e[n]}'`);const m=[];if(n+=1,a(),n>=e.length)return m;if(e[n]==="]")return n+=1,m;for(;n<e.length;){if(a(),n>=e.length||(m.push(u()),a(),n>=e.length))return m;if(e[n]==="]")return n+=1,m;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or ']' at position ${n}, got '${e[n]}'`)}return m}function f(){if(e[n]!=="{")throw new Error(`Expected '{' at position ${n}, got '${e[n]}'`);const m={};if(n+=1,a(),n>=e.length)return m;if(e[n]==="}")return n+=1,m;for(;n<e.length;){if(a(),n>=e.length)return m;const y=s();if(a(),n>=e.length)return m;if(e[n]!==":")throw new Error(`Expected ':' at position ${n}, got '${e[n]}'`);if(n+=1,a(),n>=e.length||(m[y]=u(),a(),n>=e.length))return m;if(e[n]==="}")return n+=1,m;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or '}' at position ${n}, got '${e[n]}'`)}return m}const h=u();if(a(),n<e.length)throw new Error(`Unexpected character '${e[n]}' at position ${n}`);return h}function TA(t){try{return typeof t>"u"?null:qL(t)}catch{return null}}var AA=class CA extends Ts{constructor(n,a){(typeof n=="string"||Array.isArray(n))&&(n={content:n,role:a});super(n);L(this,"type","generic");L(this,"role");this.role=n.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return CA}static isInstance(n){return super.isInstance(n)&&n.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},FL=class extends zr{constructor(e,n){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:n});super(e);L(this,"type","generic");L(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},YL=class extends zr{constructor(){super(...arguments);L(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}},hl=class extends Ts{constructor(e){super(e);L(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},ZL=class extends zr{constructor(e){super(e);L(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},XL=class extends Ts{constructor(e){super({...e,content:[]});L(this,"type","remove");L(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}},ag=class xc extends Ts{constructor(n){super(n);L(this,"type","system")}static lc_name(){return"SystemMessage"}concat(n){if(typeof n=="string")return new xc({...this,content:xs(this.content,n)});if(xc.isInstance(n))return new xc({...this,additional_kwargs:{...this.additional_kwargs,...n.additional_kwargs},response_metadata:{...this.response_metadata,...n.response_metadata},content:xs(this.content,n.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(n){return super.isInstance(n)&&n.type==="system"}},KL=class extends zr{constructor(e){super(e);L(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function QL(t){return SA(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function JL(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function sm(t){let e,n;if(JL(t)){const a=t.id.at(-1);a==="HumanMessage"||a==="HumanMessageChunk"?e="user":a==="AIMessage"||a==="AIMessageChunk"?e="assistant":a==="SystemMessage"||a==="SystemMessageChunk"?e="system":a==="FunctionMessage"||a==="FunctionMessageChunk"?e="function":a==="ToolMessage"||a==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:a,...s}=t;e=a,n=s}if(e==="human"||e==="user")return new hl(n);if(e==="ai"||e==="assistant"){const{tool_calls:a,...s}=n;if(!Array.isArray(a))return new Mr(n);const o=a.map(QL);return new Mr({...s,tool_calls:o})}else{if(e==="system")return new ag(n);if(e==="developer")return new ag({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new OL({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new XL({...n,id:n.id});throw wA(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Ec(t){if(typeof t=="string")return new hl(t);if(rd(t))return t;if(Array.isArray(t)){const[e,n]=t;return sm({type:e,content:n})}else if(SL(t)){const{role:e,...n}=t;return sm({...n,type:e})}else return sm(t)}function NA(t,e="Human",n="AI"){const a=[];for(const s of t){let o;if(s.type==="human")o=e;else if(s.type==="ai")o=n;else if(s.type==="system")o="System";else if(s.type==="tool")o="Tool";else if(s.type==="generic")o=s.role;else throw new Error(`Got unsupported message type: ${s.type}`);const u=s.name?`${s.name}, `:"",c=s.text;let f=`${o}: ${u}${c}`;if(s.type==="ai"){const h=s;h.tool_calls&&h.tool_calls.length>0?f+=JSON.stringify(h.tool_calls):h.additional_kwargs&&"function_call"in h.additional_kwargs&&(f+=JSON.stringify(h.additional_kwargs.function_call))}a.push(f)}return a.join(`
`)}function WL(t){var n;const e=t._getType();if(e==="human")return new ZL({...t});if(e==="ai"){let a={...t};return"tool_calls"in a&&(a={...a,tool_call_chunks:(n=a.tool_calls)==null?void 0:n.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new Tl({...a})}else{if(e==="system")return new KL({...t});if(e==="function")return new YL({...t});if(AA.isInstance(t))return new FL({...t});throw new Error("Unknown message type.")}}function eD(t){var s,o;const e=t.reduce((u,c)=>{const f=u.findIndex(([h])=>"id"in c&&c.id&&"index"in c&&c.index!==void 0?c.id===h.id&&c.index===h.index:"id"in c&&c.id?c.id===h.id:"index"in c&&c.index!==void 0?c.index===h.index:!1);return f!==-1?u[f].push(c):u.push([c]),u},[]),n=[],a=[];for(const u of e){let c=null;const f=((s=u[0])==null?void 0:s.name)??"",h=u.map(v=>v.args||"").join("").trim(),m=h.length?h:"{}",y=(o=u[0])==null?void 0:o.id;try{if(c=TA(m),!y||c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");n.push({name:f,args:c,id:y,type:"tool_call"})}catch{a.push({name:f,args:m,id:y,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:t,tool_calls:n,invalid_tool_calls:a}}var Mr=class extends Ts{constructor(e){var a;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{n=e;const s=(a=n.additional_kwargs)==null?void 0:a.tool_calls,o=n.tool_calls;s!=null&&s.length>0&&(o===void 0||o.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(s!=null&&o===void 0){const[u,c]=RL(s);n.tool_calls=u??[],n.invalid_tool_calls=c??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}if(n.response_metadata!==void 0&&"output_version"in n.response_metadata&&n.response_metadata.output_version==="v1"&&(n.contentBlocks=n.content,n.content=void 0),n.contentBlocks!==void 0){n.tool_calls&&n.contentBlocks.push(...n.tool_calls.map(c=>({type:"tool_call",id:c.id,name:c.name,args:c.args})));const u=n.contentBlocks.filter(c=>c.type==="tool_call").filter(c=>{var f;return!((f=n.tool_calls)!=null&&f.some(h=>h.id===c.id&&h.name===c.name))});u.length>0&&(n.tool_calls=u.map(c=>({type:"tool_call",id:c.id,name:c.name,args:c.args})))}}super(n);L(this,"type","ai");L(this,"tool_calls",[]);L(this,"invalid_tool_calls",[]);L(this,"usage_metadata");typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=_A(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const n=this.tool_calls.filter(a=>!e.some(s=>s.id===a.id&&s.name===a.name));e.push(...n.map(a=>({type:"tool_call",id:a.id,name:a.name,args:a.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function ly(t){return t._getType()==="ai"}function V1(t){return t._getType()==="ai"}var Tl=class extends zr{constructor(e){let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const a=eD(e.tool_call_chunks??[]);n={...e,tool_call_chunks:a.tool_call_chunks,tool_calls:a.tool_calls,invalid_tool_calls:a.invalid_tool_calls,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n);L(this,"type","ai");L(this,"tool_calls",[]);L(this,"invalid_tool_calls",[]);L(this,"tool_call_chunks",[]);L(this,"usage_metadata");this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=_A(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const n=this.content.filter(a=>a.type==="tool_call").map(a=>a.id);for(const a of this.tool_calls)a.id&&!n.includes(a.id)&&e.push({...a,type:"tool_call",id:a.id,name:a.name,args:a.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:AL(this.response_metadata,e.response_metadata),tool_call_chunks:[],tool_calls:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const s=Vc(this.tool_call_chunks,e.tool_call_chunks);s!==void 0&&s.length>0&&(n.tool_call_chunks=s)}if(this.tool_calls!==void 0||e.tool_calls!==void 0){const s=Vc(this.tool_calls,e.tool_calls);s!==void 0&&s.length>0&&(n.tool_calls=s)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(n.usage_metadata=vA(this.usage_metadata,e.usage_metadata));const a=this.constructor;return new a(n)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};const OA=Symbol.for("ls:tracing_async_local_storage"),Sc=Symbol.for("lc:context_variables"),tD=t=>{globalThis[OA]=t},ml=()=>globalThis[OA];var rm={};const nD=()=>typeof window<"u"&&typeof window.document<"u",aD=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",iD=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),uy=()=>typeof Deno<"u",sD=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!uy(),rD=()=>{let t;return nD()?t="browser":sD()?t="node":aD()?t="webworker":iD()?t="jsdom":uy()?t="deno":t="other",t};let om;function oD(){return om===void 0&&(om={library:"langchain-js",runtime:rD()}),om}function Li(t){try{return typeof process<"u"?rm==null?void 0:rm[t]:uy()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}const lD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function el(t){return typeof t=="string"&&lD.test(t)}function uD(t){if(!el(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Ft=[];for(var lm=0;lm<256;++lm)Ft.push((lm+256).toString(16).slice(1));function cy(t,e=0){return(Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]).toLowerCase()}var ec,cD=new Uint8Array(16);function RA(){if(!ec&&(ec=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ec))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ec(cD)}function dD(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var fD="6ba7b810-9dad-11d1-80b4-00c04fd430c8",hD="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function mD(t,e,n){function a(s,o,u,c){var f;if(typeof s=="string"&&(s=dD(s)),typeof o=="string"&&(o=uD(o)),((f=o)===null||f===void 0?void 0:f.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(o),h.set(s,o.length),h=n(h),h[6]=h[6]&15|e,h[8]=h[8]&63|128,u){c=c||0;for(var m=0;m<16;++m)u[c+m]=h[m];return u}return cy(h)}try{a.name=t}catch{}return a.DNS=fD,a.URL=hD,a}var pD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const H1={randomUUID:pD};function hs(t,e,n){if(H1.randomUUID&&!t)return H1.randomUUID();t=t||{};var a=t.random||(t.rng||RA)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,cy(a)}function gD(t,e,n,a){switch(t){case 0:return e&n^~e&a;case 1:return e^n^a;case 2:return e&n^e&a^n&a;case 3:return e^n^a}}function um(t,e){return t<<e|t>>>32-e}function yD(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var a=unescape(encodeURIComponent(t));t=[];for(var s=0;s<a.length;++s)t.push(a.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,u=Math.ceil(o/16),c=new Array(u),f=0;f<u;++f){for(var h=new Uint32Array(16),m=0;m<16;++m)h[m]=t[f*64+m*4]<<24|t[f*64+m*4+1]<<16|t[f*64+m*4+2]<<8|t[f*64+m*4+3];c[f]=h}c[u-1][14]=(t.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(t.length-1)*8&4294967295;for(var y=0;y<u;++y){for(var v=new Uint32Array(80),_=0;_<16;++_)v[_]=c[y][_];for(var x=16;x<80;++x)v[x]=um(v[x-3]^v[x-8]^v[x-14]^v[x-16],1);for(var w=n[0],A=n[1],T=n[2],k=n[3],R=n[4],z=0;z<80;++z){var P=Math.floor(z/20),Y=um(w,5)+gD(P,A,T,k)+R+e[P]+v[z]>>>0;R=k,k=T,T=um(A,30)>>>0,A=w,w=Y}n[0]=n[0]+w>>>0,n[1]=n[1]+A>>>0,n[2]=n[2]+T>>>0,n[3]=n[3]+k>>>0,n[4]=n[4]+R>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var vD=mD("v5",80,yD),G1=null,q1=null,na=0;function Ci(t,e,n){t=t||{};var a=0,s=new Uint8Array(16),o=t.random||(t.rng||RA)(),u=t.msecs!==void 0?t.msecs:Date.now(),c=t.seq!==void 0?t.seq:null,f=q1,h=G1;return u>na&&t.msecs===void 0&&(na=u,c!==null&&(f=null,h=null)),c!==null&&(c>2147483647&&(c=2147483647),f=c>>>19&4095,h=c&524287),(f===null||h===null)&&(f=o[6]&127,f=f<<8|o[7],h=o[8]&63,h=h<<8|o[9],h=h<<5|o[10]>>>3),u+1e4>na&&c===null?++h>524287&&(h=0,++f>4095&&(f=0,na++)):na=u,q1=f,G1=h,s[a++]=na/1099511627776&255,s[a++]=na/4294967296&255,s[a++]=na/16777216&255,s[a++]=na/65536&255,s[a++]=na/256&255,s[a++]=na&255,s[a++]=f>>>4&15|112,s[a++]=f&255,s[a++]=h>>>13&63|128,s[a++]=h>>>5&255,s[a++]=h<<3&255|o[10]&7,s[a++]=o[11],s[a++]=o[12],s[a++]=o[13],s[a++]=o[14],s[a++]=o[15],cy(s)}var _D=class{};function bD(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var od=class extends _D{constructor(e){super();L(this,"lc_serializable",!1);L(this,"lc_kwargs");L(this,"ignoreLLM",!1);L(this,"ignoreChain",!1);L(this,"ignoreAgent",!1);L(this,"ignoreRetriever",!1);L(this,"ignoreCustomEvent",!1);L(this,"raiseError",!1);L(this,"awaitHandlers",Li("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,fA(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return fl.prototype.toJSON.call(this)}toJSONNotImplemented(){return fl.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends od{constructor(){super();L(this,"name",Ci());Object.assign(this,e)}}return new n}};const wD=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},xD="gen_ai.operation.name",ED="gen_ai.system",F1="gen_ai.request.model",SD="gen_ai.response.model",Y1="gen_ai.usage.input_tokens",Z1="gen_ai.usage.output_tokens",X1="gen_ai.usage.total_tokens",TD="gen_ai.request.max_tokens",AD="gen_ai.request.temperature",CD="gen_ai.request.top_p",ND="gen_ai.request.frequency_penalty",OD="gen_ai.request.presence_penalty",RD="gen_ai.response.finish_reasons",kD="gen_ai.prompt",ID="gen_ai.completion",jD="gen_ai.request.extra_query",MD="gen_ai.request.extra_body",LD="gen_ai.serialized.name",DD="gen_ai.serialized.signature",PD="gen_ai.serialized.doc",$D="gen_ai.response.id",UD="gen_ai.response.service_tier",zD="gen_ai.response.system_fingerprint",BD="gen_ai.usage.input_token_details",VD="gen_ai.usage.output_token_details",HD="langsmith.trace.session_id",GD="langsmith.trace.session_name",qD="langsmith.span.kind",FD="langsmith.trace.name",YD="langsmith.metadata",K1="langsmith.span.tags",ZD="langsmith.request.streaming",XD="langsmith.request.headers",KD=(...t)=>fetch(...t),kA=Symbol.for("ls:fetch_implementation"),QD=()=>globalThis[kA]===void 0,JD=t=>async(...e)=>{if(t||sn("DEBUG")==="true"){const[a,s]=e;console.log(` ${(s==null?void 0:s.method)||"GET"} ${a}`)}const n=await(globalThis[kA]??KD)(...e);return(t||sn("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},IA=()=>sn("PROJECT")??Ta("LANGCHAIN_SESSION")??"default",Q1={};function Tc(t){Q1[t]||(console.warn(t),Q1[t]=!0)}const se=t=>BigInt(t),jA=se("0x9E3779B1"),MA=se("0x85EBCA77"),WD=se("0xC2B2AE3D"),Bi=se("0x9E3779B185EBCA87"),Es=se("0xC2B2AE3D27D4EB4F"),LA=se("0x165667B19E3779F9"),dy=se("0x85EBCA77C2B2AE63"),e6=se("0x27D4EB2F165667C5"),t6=se("0x165667919E3779F9"),n6=se("0x9FB21C651E98DF25");function a6(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.substring(n,n+2),16);return e}const ba=a6("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),Nr=(se(1)<<se(128))-se(1),Ue=(se(1)<<se(64))-se(1),Hc=(se(1)<<se(32))-se(1),qa=64,DA=qa/8,i6=8,tc=4;function dt(t,e=0){return new Uint8Array(t.buffer,t.byteOffset+e,t.length-e)}function pt(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getBigUint64(0,!0)}function Er(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getUint32(0,!0)}function cm(t,e=0){return t[e]}const s6=t=>(t&se(255))<<se(56)|(t&se(65280))<<se(40)|(t&se(16711680))<<se(24)|(t&se(4278190080))<<se(8)|(t&se(0xff00000000))>>se(8)|(t&se(0xff0000000000))>>se(24)|(t&se(0xff000000000000))>>se(40)|(t&se(0xff00000000000000))>>se(56),r6=t=>(t=(t&se(65535))<<se(16)|(t&se(4294901760))>>se(16),t=(t&se(16711935))<<se(8)|(t&se(4278255360))>>se(8),t),o6=(t,e)=>(t&Hc)*(e&Hc)&Ue,Lr=t=>{if(!t)throw new Error("Assert failed")};function l6(t,e){return(t<<e|t>>se(32)-e)&Hc}function PA(t,e,n){for(let a=0;a<DA;a++){const s=pt(e,a*8),o=s^pt(n,a*8);t[a^1]+=s,t[a]+=o6(o,o>>se(32))}return t}function J1(t,e,n,a){for(let s=0;s<a;s++)PA(t,dt(e,s*qa),dt(n,s*8));return t}function u6(t,e){for(let n=0;n<DA;n++){const a=pt(e,n*8);let s=t[n];s=ig(s,se(47)),s^=a,s*=jA,t[n]=s&Ue}return t}function nc(t,e){return $A(t[0]^pt(e,0),t[1]^pt(e,i6))}function W1(t,e,n){let a=n;return a+=nc(t.slice(0),dt(e,0*tc)),a+=nc(t.slice(2),dt(e,4*tc)),a+=nc(t.slice(4),dt(e,8*tc)),a+=nc(t.slice(6),dt(e,12*tc)),wa(a&Ue)}function c6(t,e,n,a,s){const o=Math.floor((n.byteLength-qa)/8),u=qa*o,c=Math.floor((e.byteLength-1)/u);for(let f=0;f<c;f++)t=J1(t,dt(e,f*u),n,o),t=s(t,dt(n,n.byteLength-qa));{const f=Math.floor((e.byteLength-1-u*c)/qa);t=J1(t,dt(e,c*u),n,f),t=a(t,dt(e,e.byteLength-qa),dt(n,n.byteLength-qa-7))}return t}function d6(t,e,n){let a=new BigUint64Array([WD,Bi,Es,LA,dy,MA,e6,jA]);Lr(t.length>128),a=c6(a,t,e,PA,u6),Lr(a.length*8==64);{const s=W1(a,dt(e,11),se(t.byteLength)*Bi&Ue);return W1(a,dt(e,e.byteLength-qa-11),~(se(t.byteLength)*Es)&Ue)<<se(64)|s}}function $A(t,e){const n=t*e&Nr;return n&Ue^n>>se(64)}function ex(t,e,n){return $A((pt(t,0)^pt(e,0)+n)&Ue,(pt(t,8)^pt(e,8)-n)&Ue)}function Ac(t,e,n,a,s){let o=t&Ue,u=t>>se(64)&Ue;return o+=ex(e,a,s),o^=pt(n,0)+pt(n,8),o&=Ue,u+=ex(n,dt(a,16),s),u^=pt(e,0)+pt(e,8),u&=Ue,u<<se(64)|o}function wa(t){return t^=t>>se(37),t*=t6,t&=Ue,t^=t>>se(32),t}function Gc(t){return t^=t>>se(33),t*=Es,t&=Ue,t^=t>>se(29),t*=LA,t&=Ue,t^=t>>se(32),t}function f6(t,e,n){const a=t.byteLength;Lr(a>0&&a<=3);const s=se(cm(t,a-1))|se(a<<8)|se(cm(t,0)<<16)|se(cm(t,a>>1)<<24),o=(se(Er(e,0))^se(Er(e,4)))+n,u=(s^o)&Ue,c=(se(Er(e,8))^se(Er(e,12)))-n,f=(l6(r6(s),se(13))^c)&Ue;return(Gc(f)&Ue)<<se(64)|Gc(u)}function ig(t,e){return t^t>>e}function h6(t,e,n){const a=t.byteLength;Lr(a>=4&&a<=8);{const s=Er(t,0),o=Er(t,a-4),u=se(s)|se(o)<<se(32),c=(pt(e,16)^pt(e,24))+n&Ue;let h=(u^c)*(Bi+(se(a)<<se(2)))&Nr;return h+=(h&Ue)<<se(65),h&=Nr,h^=h>>se(67),ig(ig(h&Ue,se(35))*n6&Ue,se(28))|wa(h>>se(64))<<se(64)}}function m6(t,e,n){const a=t.byteLength;Lr(a>=9&&a<=16);{const s=(pt(e,32)^pt(e,40))+n&Ue,o=(pt(e,48)^pt(e,56))-n&Ue,u=pt(t);let c=pt(t,a-8),f=(u^c^s)*Bi;const h=(f&Ue)+(se(a-1)<<se(54));f=f&(Nr^Ue)|h,c^=o,f+=c+(c&Hc)*(MA-se(1))<<se(64),f&=Nr,f^=s6(f>>se(64));let m=(f&Ue)*Es;return m+=(f>>se(64))*Es<<se(64),m&=Nr,wa(m&Ue)|wa(m>>se(64))<<se(64)}}function p6(t,e){const n=t.byteLength;return Lr(n<=16),n>8?m6(t,ba,e):n>=4?h6(t,ba,e):n>0?f6(t,ba,e):Gc(e^pt(ba,64)^pt(ba,72))|Gc(e^pt(ba,80)^pt(ba,88))<<se(64)}function sg(t){return~t+se(1)&Ue}function g6(t,e,n){let a=se(t.byteLength)*Bi&Ue,s=se(t.byteLength-1)/se(32);for(;s>=0;){const c=Number(s);a=Ac(a,dt(t,16*c),dt(t,t.byteLength-16*(c+1)),dt(e,32*c),n),s--}let o=a+(a>>se(64))&Ue;o=wa(o);let u=(a&Ue)*Bi+(a>>se(64))*dy+(se(t.byteLength)-n&Ue)*Es;return u&=Ue,u=sg(wa(u)),o|u<<se(64)}function y6(t,e,n){let a=se(t.byteLength)*Bi&Ue;for(let u=32;u<160;u+=32)a=Ac(a,dt(t,u-32),dt(t,u-16),dt(e,u-32),n);a=wa(a&Ue)|wa(a>>se(64))<<se(64);for(let u=160;u<=t.byteLength;u+=32)a=Ac(a,dt(t,u-32),dt(t,u-16),dt(e,3+u-160),n);a=Ac(a,dt(t,t.byteLength-16),dt(t,t.byteLength-32),dt(e,103),sg(n));let s=a+(a>>se(64))&Ue;s=wa(s);let o=(a&Ue)*Bi+(a>>se(64))*dy+(se(t.byteLength)-n&Ue)*Es;return o&=Ue,o=sg(wa(o)),s|o<<se(64)}function v6(t,e=se(0)){const n=t.byteLength;return n<=16?p6(t,e):n<=128?g6(t,ba,e):n<=240?y6(t,ba,e):d6(t,ba)}function _6(t){const e=new Uint8Array(16),n=new DataView(e.buffer),a=t&Ue,s=t>>se(64);return n.setBigUint64(0,s,!1),n.setBigUint64(8,a,!1),e}const UA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Me(t,e){if(!UA.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}function b6(t){const e=typeof t=="string"?Date.parse(t):t;return Ci({msecs:e,seq:0})}function w6(t){if(!UA.test(t))return null;const e=t[14];return parseInt(e,16)}function x6(t){const e=t.replace(/-/g,""),n=new Uint8Array(16);for(let a=0;a<16;a++)n[a]=parseInt(e.slice(a*2,a*2+2),16);return n}function E6(t){const e=Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}const S6=new TextEncoder;function T6(t){const e=S6.encode(t),n=v6(e);return _6(n)}function ac(t,e){const n=`${t}:${e}`,a=T6(n),s=new Uint8Array(16);if(w6(t)===7){const u=x6(t);s.set(u.slice(0,6),0)}else{const u=Date.now();s[0]=u/1099511627776&255,s[1]=u/4294967296&255,s[2]=u/16777216&255,s[3]=u/65536&255,s[4]=u/256&255,s[5]=u&255}return s[6]=112|a[0]&15,s[7]=a[1],s[8]=128|a[2]&63,s.set(a.slice(3,10),9),E6(s)}function A6(t,e){throw new Error("dump() is not supported in browser environments.")}function C6(t){throw new Error("load() is not supported in browser environments.")}function N6(t,e){return e===null?!1:Date.now()-t.createdAt>e*1e3}class O6{constructor(e={}){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ttlSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshIntervalSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_metrics",{enumerable:!0,configurable:!0,writable:!0,value:{hits:0,misses:0,refreshes:0,refreshErrors:0}}),this.configure(e)}get metrics(){return{...this._metrics}}get totalRequests(){return this._metrics.hits+this._metrics.misses}get hitRate(){const e=this.totalRequests;return e>0?this._metrics.hits/e:0}resetMetrics(){this._metrics={hits:0,misses:0,refreshes:0,refreshErrors:0}}get(e,n){if(this.maxSize===0)return;const a=this.cache.get(e);if(!a){this._metrics.misses+=1;return}return this.cache.delete(e),this.cache.set(e,{...a,refreshFunc:n}),this._metrics.hits+=1,a.value}set(e,n,a){if(this.maxSize===0)return;if(this.refreshTimer===void 0&&this.startRefreshLoop(),!this.cache.has(e)&&this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;o!==void 0&&this.cache.delete(o)}const s={value:n,createdAt:Date.now(),refreshFunc:a};this.cache.delete(e),this.cache.set(e,s)}invalidate(e){this.cache.delete(e)}clear(){this.cache.clear()}get size(){return this.cache.size}stop(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=void 0)}dump(e){for(const[n,a]of this.cache.entries())a.value;A6()}load(e){const n=C6();if(!n)return 0;let a=0;const s=Date.now();for(const[o,u]of Object.entries(n)){if(this.cache.size>=this.maxSize)break;const c={value:u,createdAt:s};this.cache.set(o,c),a+=1}return a}startRefreshLoop(){this.stop(),this.ttlSeconds!==null&&(this.refreshTimer=setInterval(()=>{this.refreshStaleEntries().catch(e=>{console.warn("Unexpected error in cache refresh loop:",e)})},this.refreshIntervalSeconds*1e3),this.refreshTimer.unref&&this.refreshTimer.unref())}getStaleEntries(){const e=[];for(const[n,a]of this.cache.entries())N6(a,this.ttlSeconds)&&e.push([n,a]);return e}async refreshStaleEntries(){const e=this.getStaleEntries();if(e.length!==0){for(const[n,a]of e)if(a.refreshFunc!==void 0)try{const s=await a.refreshFunc();this.set(n,s,a.refreshFunc),this._metrics.refreshes+=1}catch(s){this._metrics.refreshErrors+=1,console.warn(`Failed to refresh cache entry ${n}:`,s)}}}configure(e){this.stop(),this.refreshIntervalSeconds=e.refreshIntervalSeconds??60,this.maxSize=e.maxSize??100,this.ttlSeconds=e.ttlSeconds??300}}const tx=new O6,zA="0.5.4";var tl={};let va;const R6=()=>typeof window<"u"&&typeof window.document<"u",k6=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",I6=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),BA=()=>typeof Deno<"u",j6=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!BA(),VA=()=>va||(typeof Bun<"u"?va="bun":R6()?va="browser":j6()?va="node":k6()?va="webworker":I6()?va="jsdom":BA()?va="deno":va="other",va);let dm;function HA(){if(dm===void 0){const t=VA(),e=L6();dm={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:zA,...e}}return dm}function GA(){const t=M6(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[a,s]of Object.entries(t))typeof s=="string"&&!n.includes(a)&&!a.toLowerCase().includes("key")&&!a.toLowerCase().includes("secret")&&!a.toLowerCase().includes("token")&&(a==="LANGCHAIN_REVISION_ID"?e.revision_id=s:e[a]=s);return e}function M6(){const t={};try{if(typeof process<"u"&&tl)for(const[e,n]of Object.entries(tl))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function Ta(t){try{return typeof process<"u"?tl==null?void 0:tl[t]:void 0}catch{return}}function sn(t){return Ta(`LANGSMITH_${t}`)||Ta(`LANGCHAIN_${t}`)}let fm;function L6(){if(fm!==void 0)return fm;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const a=Ta(n);a!==void 0&&(e[n]=a)}return fm=e,e}function qA(){return Ta("OTEL_ENABLED")==="true"||sn("OTEL_ENABLED")==="true"}class D6{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&qA()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let a;if(n.length===1&&typeof n[0]=="function"?a=n[0]:n.length===2&&typeof n[1]=="function"?a=n[1]:n.length===3&&typeof n[2]=="function"&&(a=n[2]),typeof a=="function")return a()}}class P6{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new D6})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class $6{active(){return{}}with(e,n){return n()}}const hm=Symbol.for("ls:otel_trace"),mm=Symbol.for("ls:otel_context"),nx=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),U6=new P6,z6=new $6;class B6{getTraceInstance(){return globalThis[hm]??U6}getContextInstance(){return globalThis[mm]??z6}initializeGlobalInstances(e){globalThis[hm]===void 0&&(globalThis[hm]=e.trace),globalThis[mm]===void 0&&(globalThis[mm]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[nx]=e}getDefaultOTLPTracerComponents(){return globalThis[nx]??void 0}}const fy=new B6;function FA(){return fy.getTraceInstance()}function V6(){return fy.getContextInstance()}function H6(){return fy.getDefaultOTLPTracerComponents()}const G6={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function q6(t){return G6[t]||t}class F6{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const a of e)try{if(!a.run)continue;if(a.operation==="post"){const s=this.createSpanForRun(a,a.run,n.get(a.id));s&&!a.run.end_time&&this.spans.set(a.id,s)}else this.updateSpanForRun(a,a.run)}catch(s){console.error(`Error processing operation ${a.id}:`,s)}}createSpanForRun(e,n,a){const s=a&&FA().getSpan(a);if(s)try{return this.finishSpanSetup(s,n,e)}catch(o){console.error(`Failed to create span for run ${e.id}:`,o);return}}finishSpanSetup(e,n,a){return this.setSpanAttributes(e,n,a),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const a=this.spans.get(e.id);if(!a){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(a,n,e),n.error?(a.setStatus({code:2}),a.recordException(new Error(n.error))):a.setStatus({code:1});const s=n.end_time;s&&(a.end(new Date(s)),this.spans.delete(e.id))}catch(a){console.error(`Failed to update span for run ${e.id}:`,a)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const a=e.extra.metadata;if(a.ls_model_name)return a.ls_model_name;if(a.invocation_params){const s=a.invocation_params;if(s.model)return s.model;if(s.model_name)return s.model_name}}}setSpanAttributes(e,n,a){var c;if("run_type"in n&&n.run_type){e.setAttribute(qD,n.run_type);const f=q6(n.run_type||"chain");e.setAttribute(xD,f)}"name"in n&&n.name&&e.setAttribute(FD,n.name),"session_id"in n&&n.session_id&&e.setAttribute(HD,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(GD,n.session_name),this.setGenAiSystem(e,n);const s=this.extractModelName(n);s&&e.setAttribute(F1,s),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(Y1,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(Z1,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(X1,n.total_tokens),this.setInvocationParameters(e,n);const o=((c=n.extra)==null?void 0:c.metadata)||{};for(const[f,h]of Object.entries(o))h!=null&&e.setAttribute(`${YD}.${f}`,String(h));const u=n.tags;if(u&&Array.isArray(u)?e.setAttribute(K1,u.join(", ")):u&&e.setAttribute(K1,String(u)),"serialized"in n&&typeof n.serialized=="object"){const f=n.serialized;f.name&&e.setAttribute(LD,String(f.name)),f.signature&&e.setAttribute(DD,String(f.signature)),f.doc&&e.setAttribute(PD,String(f.doc))}this.setIOAttributes(e,a)}setGenAiSystem(e,n){let a="langchain";const s=this.extractModelName(n);if(s){const o=s.toLowerCase();o.includes("anthropic")||o.startsWith("claude")?a="anthropic":o.includes("bedrock")?a="aws.bedrock":o.includes("azure")&&o.includes("openai")?a="az.ai.openai":o.includes("azure")&&o.includes("inference")?a="az.ai.inference":o.includes("cohere")?a="cohere":o.includes("deepseek")?a="deepseek":o.includes("gemini")?a="gemini":o.includes("groq")?a="groq":o.includes("watson")||o.includes("ibm")?a="ibm.watsonx.ai":o.includes("mistral")?a="mistral_ai":o.includes("gpt")||o.includes("openai")?a="openai":o.includes("perplexity")||o.includes("sonar")?a="perplexity":o.includes("vertex")?a="vertex_ai":(o.includes("xai")||o.includes("grok"))&&(a="xai")}e.setAttribute(ED,a)}setInvocationParameters(e,n){var s,o;if(!((o=(s=n.extra)==null?void 0:s.metadata)!=null&&o.invocation_params))return;const a=n.extra.metadata.invocation_params;a.max_tokens!==void 0&&e.setAttribute(TD,a.max_tokens),a.temperature!==void 0&&e.setAttribute(AD,a.temperature),a.top_p!==void 0&&e.setAttribute(CD,a.top_p),a.frequency_penalty!==void 0&&e.setAttribute(ND,a.frequency_penalty),a.presence_penalty!==void 0&&e.setAttribute(OD,a.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const a=n.run.inputs;typeof a=="object"&&a!==null&&(a.model&&Array.isArray(a.messages)&&e.setAttribute(F1,a.model),a.stream!==void 0&&e.setAttribute(ZD,a.stream),a.extra_headers&&e.setAttribute(XD,JSON.stringify(a.extra_headers)),a.extra_query&&e.setAttribute(jD,JSON.stringify(a.extra_query)),a.extra_body&&e.setAttribute(MD,JSON.stringify(a.extra_body))),e.setAttribute(kD,JSON.stringify(a))}catch(a){console.debug(`Failed to process inputs for run ${n.id}`,a)}if(n.run.outputs)try{const a=n.run.outputs,s=this.getUnifiedRunTokens(a);if(s&&(e.setAttribute(Y1,s[0]),e.setAttribute(Z1,s[1]),e.setAttribute(X1,s[0]+s[1])),a&&typeof a=="object"){if(a.model&&e.setAttribute(SD,String(a.model)),a.id&&e.setAttribute($D,a.id),a.choices&&Array.isArray(a.choices)){const o=a.choices.map(u=>u.finish_reason).filter(u=>u).map(String);o.length>0&&e.setAttribute(RD,o.join(", "))}if(a.service_tier&&e.setAttribute(UD,a.service_tier),a.system_fingerprint&&e.setAttribute(zD,a.system_fingerprint),a.usage_metadata&&typeof a.usage_metadata=="object"){const o=a.usage_metadata;o.input_token_details&&e.setAttribute(BD,JSON.stringify(o.input_token_details)),o.output_token_details&&e.setAttribute(VD,JSON.stringify(o.output_token_details))}}e.setAttribute(ID,JSON.stringify(a))}catch(a){console.debug(`Failed to process outputs for run ${n.id}`,a)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const a=Object.keys(e);for(const u of a){const c=e[u];if(!(!c||typeof c!="object")&&(n=this.extractUnifiedRunTokens(c.usage_metadata),n||c.lc===1&&c.kwargs&&typeof c.kwargs=="object"&&(n=this.extractUnifiedRunTokens(c.kwargs.usage_metadata),n)))return n}const s=e.generations||[];if(!Array.isArray(s))return null;const o=Array.isArray(s[0])?s.flat():s;for(const u of o)if(typeof u=="object"&&u.message&&typeof u.message=="object"&&u.message.kwargs&&typeof u.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(u.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}const Y6=Object.prototype.toString,Z6=t=>Y6.call(t)==="[object Error]",X6=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function K6(t){if(!(t&&Z6(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:a}=t;return n==="Load failed"?a===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:X6.has(n)}function Q6(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function ic(t,e,{min:n=0,allowInfinity:a=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${a?" or Infinity":""}.`);if(!a&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}let J6=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function W6(t,e){const n=Math.max(1,t+1),a=e.randomize?Math.random()+1:1;let s=Math.round(a*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function ax(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function e8({error:t,attemptNumber:e,retriesConsumed:n,startTime:a,options:s}){var _,x,w;const o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof J6)throw o.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,c=s.maxRetryTime??Number.POSITIVE_INFINITY,f=Object.freeze({error:o,attemptNumber:e,retriesLeft:u,retriesConsumed:n});if(await s.onFailedAttempt(f),ax(a,c)<=0)throw o;const h=await s.shouldConsumeRetry(f),m=ax(a,c);if(m<=0||u<=0)throw o;if(o instanceof TypeError&&!K6(o)){if(h)throw o;return(_=s.signal)==null||_.throwIfAborted(),!1}if(!await s.shouldRetry(f))throw o;if(!h)return(x=s.signal)==null||x.throwIfAborted(),!1;const y=W6(n,s),v=Math.min(y,m);return v>0&&await new Promise((A,T)=>{var z,P;const k=()=>{var Y;clearTimeout(R),(Y=s.signal)==null||Y.removeEventListener("abort",k),T(s.signal.reason)},R=setTimeout(()=>{var Y;(Y=s.signal)==null||Y.removeEventListener("abort",k),A()},v);s.unref&&((z=R.unref)==null||z.call(R)),(P=s.signal)==null||P.addEventListener("abort",k,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function t8(t,e={}){var o,u,c;if(e={...e},Q6(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),ic("factor",e.factor,{min:0,allowInfinity:!1}),ic("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),ic("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),ic("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(o=e.signal)==null||o.throwIfAborted();let n=0,a=0;const s=performance.now();for(;!Number.isFinite(e.retries)||a<=e.retries;){n++;try{(u=e.signal)==null||u.throwIfAborted();const f=await t(n);return(c=e.signal)==null||c.throwIfAborted(),f}catch(f){await e8({error:f,attemptNumber:n,retriesConsumed:a,startTime:s,options:e})&&a++}}throw new Error("Retry attempts exhausted without throwing an error.")}var sc={},pm={exports:{}},ix;function n8(){return ix||(ix=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(f,h,m){this.fn=f,this.context=h,this.once=m||!1}function o(f,h,m,y,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new s(m,y||f,v),x=n?n+h:h;return f._events[x]?f._events[x].fn?f._events[x]=[f._events[x],_]:f._events[x].push(_):(f._events[x]=_,f._eventsCount++),f}function u(f,h){--f._eventsCount===0?f._events=new a:delete f._events[h]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,y;if(this._eventsCount===0)return h;for(y in m=this._events)e.call(m,y)&&h.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=n?n+h:h,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,_=y.length,x=new Array(_);v<_;v++)x[v]=y[v].fn;return x},c.prototype.listenerCount=function(h){var m=n?n+h:h,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(h,m,y,v,_,x){var w=n?n+h:h;if(!this._events[w])return!1;var A=this._events[w],T=arguments.length,k,R;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),T){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,m),!0;case 3:return A.fn.call(A.context,m,y),!0;case 4:return A.fn.call(A.context,m,y,v),!0;case 5:return A.fn.call(A.context,m,y,v,_),!0;case 6:return A.fn.call(A.context,m,y,v,_,x),!0}for(R=1,k=new Array(T-1);R<T;R++)k[R-1]=arguments[R];A.fn.apply(A.context,k)}else{var z=A.length,P;for(R=0;R<z;R++)switch(A[R].once&&this.removeListener(h,A[R].fn,void 0,!0),T){case 1:A[R].fn.call(A[R].context);break;case 2:A[R].fn.call(A[R].context,m);break;case 3:A[R].fn.call(A[R].context,m,y);break;case 4:A[R].fn.call(A[R].context,m,y,v);break;default:if(!k)for(P=1,k=new Array(T-1);P<T;P++)k[P-1]=arguments[P];A[R].fn.apply(A[R].context,k)}}return!0},c.prototype.on=function(h,m,y){return o(this,h,m,y,!1)},c.prototype.once=function(h,m,y){return o(this,h,m,y,!0)},c.prototype.removeListener=function(h,m,y,v){var _=n?n+h:h;if(!this._events[_])return this;if(!m)return u(this,_),this;var x=this._events[_];if(x.fn)x.fn===m&&(!v||x.once)&&(!y||x.context===y)&&u(this,_);else{for(var w=0,A=[],T=x.length;w<T;w++)(x[w].fn!==m||v&&!x[w].once||y&&x[w].context!==y)&&A.push(x[w]);A.length?this._events[_]=A.length===1?A[0]:A:u(this,_)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&u(this,m)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(pm)),pm.exports}var zo={exports:{}},gm,sx;function a8(){return sx||(sx=1,gm=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(a=>{a(e())}).then(()=>n),n=>new Promise(a=>{a(e())}).then(()=>{throw n})))),gm}var rx;function i8(){if(rx)return zo.exports;rx=1;const t=a8();class e extends Error{constructor(s){super(s),this.name="TimeoutError"}}const n=(a,s,o)=>new Promise((u,c)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){u(a);return}const f=setTimeout(()=>{if(typeof o=="function"){try{u(o())}catch(y){c(y)}return}const h=typeof o=="string"?o:`Promise timed out after ${s} milliseconds`,m=o instanceof Error?o:new e(h);typeof a.cancel=="function"&&a.cancel(),c(m)},s);t(a.then(u,c),()=>{clearTimeout(f)})});return zo.exports=n,zo.exports.default=n,zo.exports.TimeoutError=e,zo.exports}var rc={},oc={},ox;function s8(){if(ox)return oc;ox=1,Object.defineProperty(oc,"__esModule",{value:!0});function t(e,n,a){let s=0,o=e.length;for(;o>0;){const u=o/2|0;let c=s+u;a(e[c],n)<=0?(s=++c,o-=u+1):o=u}return s}return oc.default=t,oc}var lx;function r8(){if(lx)return rc;lx=1,Object.defineProperty(rc,"__esModule",{value:!0});const t=s8();class e{constructor(){this._queue=[]}enqueue(a,s){s=Object.assign({priority:0},s);const o={priority:s.priority,run:a};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(o);return}const u=t.default(this._queue,o,(c,f)=>f.priority-c.priority);this._queue.splice(u,0,o)}dequeue(){const a=this._queue.shift();return a==null?void 0:a.run}filter(a){return this._queue.filter(s=>s.priority===a.priority).map(s=>s.run)}get size(){return this._queue.length}}return rc.default=e,rc}var ux;function o8(){if(ux)return sc;ux=1,Object.defineProperty(sc,"__esModule",{value:!0});const t=n8(),e=i8(),n=r8(),a=()=>{},s=new e.TimeoutError;class o extends t{constructor(c){var f,h,m,y;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,c=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},c),!(typeof c.intervalCap=="number"&&c.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(f=c.intervalCap)===null||f===void 0?void 0:f.toString())!==null&&h!==void 0?h:""}\` (${typeof c.intervalCap})`);if(c.interval===void 0||!(Number.isFinite(c.interval)&&c.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(y=(m=c.interval)===null||m===void 0?void 0:m.toString())!==null&&y!==void 0?y:""}\` (${typeof c.interval})`);this._carryoverConcurrencyCount=c.carryoverConcurrencyCount,this._isIntervalIgnored=c.intervalCap===1/0||c.interval===0,this._intervalCap=c.intervalCap,this._interval=c.interval,this._queue=new c.queueClass,this._queueClass=c.queueClass,this.concurrency=c.concurrency,this._timeout=c.timeout,this._throwOnTimeout=c.throwOnTimeout===!0,this._isPaused=c.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const c=Date.now();if(this._intervalId===void 0){const f=this._intervalEnd-c;if(f<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},f)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const c=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const f=this._queue.dequeue();return f?(this.emit("active"),f(),c&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(c){if(!(typeof c=="number"&&c>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${c}\` (${typeof c})`);this._concurrency=c,this._processQueue()}async add(c,f={}){return new Promise((h,m)=>{const y=async()=>{this._pendingCount++,this._intervalCount++;try{const v=this._timeout===void 0&&f.timeout===void 0?c():e.default(Promise.resolve(c()),f.timeout===void 0?this._timeout:f.timeout,()=>{(f.throwOnTimeout===void 0?this._throwOnTimeout:f.throwOnTimeout)&&m(s)});h(await v)}catch(v){m(v)}this._next()};this._queue.enqueue(y,f),this._tryToStartAnother(),this.emit("add")})}async addAll(c,f){return Promise.all(c.map(async h=>this.add(h,f)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(c=>{const f=this._resolveEmpty;this._resolveEmpty=()=>{f(),c()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(c=>{const f=this._resolveIdle;this._resolveIdle=()=>{f(),c()}})}get size(){return this._queue.size}sizeBy(c){return this._queue.filter(c).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(c){this._timeout=c}}return sc.default=o,sc}var l8=o8();const Fa=_g(l8),u8="default"in Fa?Fa.default:Fa,c8=[408,425,429,500,502,503,504];let cx=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,this.queue=new u8({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){return this.callWithOptions({},e,...n)}callWithOptions(e,n,...a){const s=e.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&s>0&&this.queueSizeBytes+s>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${s} bytes.`));s>0&&(this.queueSizeBytes+=s);const o=this.onFailedResponseHook;let u=this.queue.add(()=>t8(()=>n(...a).catch(c=>{throw c instanceof Error?c:new Error(c)}),{async onFailedAttempt({error:c}){if(typeof c!="object"||c==null)throw c;const f="message"in c&&typeof c.message=="string"?c.message:void 0;if(f!=null&&f.startsWith("Cancel")||f!=null&&f.startsWith("TimeoutError")||f!=null&&f.startsWith("AbortError")||"name"in c&&c.name==="TimeoutError"||"code"in c&&c.code==="ECONNABORTED")throw c;const h="response"in c?c.response:void 0;if(o&&await o(h))return;const m=(h==null?void 0:h.status)??("status"in c?c.status:void 0);if(m!=null&&(typeof m=="number"||typeof m=="string")&&!c8.includes(+m))throw c},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return s>0&&(u=u.finally(()=>{this.queueSizeBytes-=s})),e.signal?Promise.race([u,new Promise((c,f)=>{var h;(h=e.signal)==null||h.addEventListener("abort",()=>{f(new Error("AbortError"))})})]):u}};function dx(t){return typeof(t==null?void 0:t._getType)=="function"}function fx(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var lc={exports:{}},ym,hx;function ld(){if(hx)return ym;hx=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,s=e-6;return ym={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ym}var vm,mx;function ud(){if(mx)return vm;mx=1;var t={};return vm=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},vm}var px;function Al(){return px||(px=1,(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:s}=ld(),o=ud();e=t.exports={};const u=e.re=[],c=e.safeRe=[],f=e.src=[],h=e.safeSrc=[],m=e.t={};let y=0;const v="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",s],[v,a]],x=A=>{for(const[T,k]of _)A=A.split(`${T}*`).join(`${T}{0,${k}}`).split(`${T}+`).join(`${T}{1,${k}}`);return A},w=(A,T,k)=>{const R=x(T),z=y++;o(A,z,T),m[A]=z,f[z]=T,h[z]=R,u[z]=new RegExp(T,k?"g":void 0),c[z]=new RegExp(R,k?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),w("MAINVERSION",`(${f[m.NUMERICIDENTIFIER]})\\.(${f[m.NUMERICIDENTIFIER]})\\.(${f[m.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${f[m.NUMERICIDENTIFIERLOOSE]})\\.(${f[m.NUMERICIDENTIFIERLOOSE]})\\.(${f[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${f[m.NONNUMERICIDENTIFIER]}|${f[m.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${f[m.NONNUMERICIDENTIFIER]}|${f[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${f[m.PRERELEASEIDENTIFIER]}(?:\\.${f[m.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${f[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[m.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${v}+`),w("BUILD",`(?:\\+(${f[m.BUILDIDENTIFIER]}(?:\\.${f[m.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${f[m.MAINVERSION]}${f[m.PRERELEASE]}?${f[m.BUILD]}?`),w("FULL",`^${f[m.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${f[m.MAINVERSIONLOOSE]}${f[m.PRERELEASELOOSE]}?${f[m.BUILD]}?`),w("LOOSE",`^${f[m.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${f[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${f[m.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${f[m.XRANGEIDENTIFIER]})(?:\\.(${f[m.XRANGEIDENTIFIER]})(?:\\.(${f[m.XRANGEIDENTIFIER]})(?:${f[m.PRERELEASE]})?${f[m.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${f[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[m.XRANGEIDENTIFIERLOOSE]})(?:${f[m.PRERELEASELOOSE]})?${f[m.BUILD]}?)?)?`),w("XRANGE",`^${f[m.GTLT]}\\s*${f[m.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${f[m.GTLT]}\\s*${f[m.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${f[m.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",f[m.COERCEPLAIN]+`(?:${f[m.PRERELEASE]})?(?:${f[m.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",f[m.COERCE],!0),w("COERCERTLFULL",f[m.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${f[m.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${f[m.LONETILDE]}${f[m.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${f[m.LONETILDE]}${f[m.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${f[m.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${f[m.LONECARET]}${f[m.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${f[m.LONECARET]}${f[m.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${f[m.GTLT]}\\s*(${f[m.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${f[m.GTLT]}\\s*(${f[m.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${f[m.GTLT]}\\s*(${f[m.LOOSEPLAIN]}|${f[m.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${f[m.XRANGEPLAIN]})\\s+-\\s+(${f[m.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${f[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[m.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lc,lc.exports)),lc.exports}var _m,gx;function hy(){if(gx)return _m;gx=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return _m=a=>a?typeof a!="object"?t:a:e,_m}var bm,yx;function YA(){if(yx)return bm;yx=1;const t=/^[0-9]+$/,e=(a,s)=>{if(typeof a=="number"&&typeof s=="number")return a===s?0:a<s?-1:1;const o=t.test(a),u=t.test(s);return o&&u&&(a=+a,s=+s),a===s?0:o&&!u?-1:u&&!o?1:a<s?-1:1};return bm={compareIdentifiers:e,rcompareIdentifiers:(a,s)=>e(s,a)},bm}var wm,vx;function un(){if(vx)return wm;vx=1;const t=ud(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=ld(),{safeRe:a,t:s}=Al(),o=hy(),{compareIdentifiers:u}=YA();class c{constructor(h,m){if(m=o(m),h instanceof c){if(h.loose===!!m.loose&&h.includePrerelease===!!m.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",h,m),this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease;const y=h.trim().match(m.loose?a[s.LOOSE]:a[s.FULL]);if(!y)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+y[1],this.minor=+y[2],this.patch=+y[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");y[4]?this.prerelease=y[4].split(".").map(v=>{if(/^[0-9]+$/.test(v)){const _=+v;if(_>=0&&_<n)return _}return v}):this.prerelease=[],this.build=y[5]?y[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(t("SemVer.compare",this.version,this.options,h),!(h instanceof c)){if(typeof h=="string"&&h===this.version)return 0;h=new c(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof c||(h=new c(h,this.options)),this.major<h.major?-1:this.major>h.major?1:this.minor<h.minor?-1:this.minor>h.minor?1:this.patch<h.patch?-1:this.patch>h.patch?1:0}comparePre(h){if(h instanceof c||(h=new c(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let m=0;do{const y=this.prerelease[m],v=h.prerelease[m];if(t("prerelease compare",m,y,v),y===void 0&&v===void 0)return 0;if(v===void 0)return 1;if(y===void 0)return-1;if(y===v)continue;return u(y,v)}while(++m)}compareBuild(h){h instanceof c||(h=new c(h,this.options));let m=0;do{const y=this.build[m],v=h.build[m];if(t("build compare",m,y,v),y===void 0&&v===void 0)return 0;if(v===void 0)return 1;if(y===void 0)return-1;if(y===v)continue;return u(y,v)}while(++m)}inc(h,m,y){if(h.startsWith("pre")){if(!m&&y===!1)throw new Error("invalid increment argument: identifier is empty");if(m){const v=`-${m}`.match(this.options.loose?a[s.PRERELEASELOOSE]:a[s.PRERELEASE]);if(!v||v[1]!==m)throw new Error(`invalid identifier: ${m}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",m,y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",m,y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",m,y),this.inc("pre",m,y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",m,y),this.inc("pre",m,y);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const v=Number(y)?1:0;if(this.prerelease.length===0)this.prerelease=[v];else{let _=this.prerelease.length;for(;--_>=0;)typeof this.prerelease[_]=="number"&&(this.prerelease[_]++,_=-2);if(_===-1){if(m===this.prerelease.join(".")&&y===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(v)}}if(m){let _=[m,v];y===!1&&(_=[m]),u(this.prerelease[0],m)===0?isNaN(this.prerelease[1])&&(this.prerelease=_):this.prerelease=_}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return wm=c,wm}var xm,_x;function Br(){if(_x)return xm;_x=1;const t=un();return xm=(n,a,s=!1)=>{if(n instanceof t)return n;try{return new t(n,a)}catch(o){if(!s)return null;throw o}},xm}var Em,bx;function d8(){if(bx)return Em;bx=1;const t=Br();return Em=(n,a)=>{const s=t(n,a);return s?s.version:null},Em}var Sm,wx;function f8(){if(wx)return Sm;wx=1;const t=Br();return Sm=(n,a)=>{const s=t(n.trim().replace(/^[=v]+/,""),a);return s?s.version:null},Sm}var Tm,xx;function h8(){if(xx)return Tm;xx=1;const t=un();return Tm=(n,a,s,o,u)=>{typeof s=="string"&&(u=o,o=s,s=void 0);try{return new t(n instanceof t?n.version:n,s).inc(a,o,u).version}catch{return null}},Tm}var Am,Ex;function m8(){if(Ex)return Am;Ex=1;const t=Br();return Am=(n,a)=>{const s=t(n,null,!0),o=t(a,null,!0),u=s.compare(o);if(u===0)return null;const c=u>0,f=c?s:o,h=c?o:s,m=!!f.prerelease.length;if(!!h.prerelease.length&&!m){if(!h.patch&&!h.minor)return"major";if(h.compareMain(f)===0)return h.minor&&!h.patch?"minor":"patch"}const v=m?"pre":"";return s.major!==o.major?v+"major":s.minor!==o.minor?v+"minor":s.patch!==o.patch?v+"patch":"prerelease"},Am}var Cm,Sx;function p8(){if(Sx)return Cm;Sx=1;const t=un();return Cm=(n,a)=>new t(n,a).major,Cm}var Nm,Tx;function g8(){if(Tx)return Nm;Tx=1;const t=un();return Nm=(n,a)=>new t(n,a).minor,Nm}var Om,Ax;function y8(){if(Ax)return Om;Ax=1;const t=un();return Om=(n,a)=>new t(n,a).patch,Om}var Rm,Cx;function v8(){if(Cx)return Rm;Cx=1;const t=Br();return Rm=(n,a)=>{const s=t(n,a);return s&&s.prerelease.length?s.prerelease:null},Rm}var km,Nx;function fa(){if(Nx)return km;Nx=1;const t=un();return km=(n,a,s)=>new t(n,s).compare(new t(a,s)),km}var Im,Ox;function _8(){if(Ox)return Im;Ox=1;const t=fa();return Im=(n,a,s)=>t(a,n,s),Im}var jm,Rx;function b8(){if(Rx)return jm;Rx=1;const t=fa();return jm=(n,a)=>t(n,a,!0),jm}var Mm,kx;function my(){if(kx)return Mm;kx=1;const t=un();return Mm=(n,a,s)=>{const o=new t(n,s),u=new t(a,s);return o.compare(u)||o.compareBuild(u)},Mm}var Lm,Ix;function w8(){if(Ix)return Lm;Ix=1;const t=my();return Lm=(n,a)=>n.sort((s,o)=>t(s,o,a)),Lm}var Dm,jx;function x8(){if(jx)return Dm;jx=1;const t=my();return Dm=(n,a)=>n.sort((s,o)=>t(o,s,a)),Dm}var Pm,Mx;function cd(){if(Mx)return Pm;Mx=1;const t=fa();return Pm=(n,a,s)=>t(n,a,s)>0,Pm}var $m,Lx;function py(){if(Lx)return $m;Lx=1;const t=fa();return $m=(n,a,s)=>t(n,a,s)<0,$m}var Um,Dx;function ZA(){if(Dx)return Um;Dx=1;const t=fa();return Um=(n,a,s)=>t(n,a,s)===0,Um}var zm,Px;function XA(){if(Px)return zm;Px=1;const t=fa();return zm=(n,a,s)=>t(n,a,s)!==0,zm}var Bm,$x;function gy(){if($x)return Bm;$x=1;const t=fa();return Bm=(n,a,s)=>t(n,a,s)>=0,Bm}var Vm,Ux;function yy(){if(Ux)return Vm;Ux=1;const t=fa();return Vm=(n,a,s)=>t(n,a,s)<=0,Vm}var Hm,zx;function KA(){if(zx)return Hm;zx=1;const t=ZA(),e=XA(),n=cd(),a=gy(),s=py(),o=yy();return Hm=(c,f,h,m)=>{switch(f){case"===":return typeof c=="object"&&(c=c.version),typeof h=="object"&&(h=h.version),c===h;case"!==":return typeof c=="object"&&(c=c.version),typeof h=="object"&&(h=h.version),c!==h;case"":case"=":case"==":return t(c,h,m);case"!=":return e(c,h,m);case">":return n(c,h,m);case">=":return a(c,h,m);case"<":return s(c,h,m);case"<=":return o(c,h,m);default:throw new TypeError(`Invalid operator: ${f}`)}},Hm}var Gm,Bx;function E8(){if(Bx)return Gm;Bx=1;const t=un(),e=Br(),{safeRe:n,t:a}=Al();return Gm=(o,u)=>{if(o instanceof t)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;u=u||{};let c=null;if(!u.rtl)c=o.match(u.includePrerelease?n[a.COERCEFULL]:n[a.COERCE]);else{const _=u.includePrerelease?n[a.COERCERTLFULL]:n[a.COERCERTL];let x;for(;(x=_.exec(o))&&(!c||c.index+c[0].length!==o.length);)(!c||x.index+x[0].length!==c.index+c[0].length)&&(c=x),_.lastIndex=x.index+x[1].length+x[2].length;_.lastIndex=-1}if(c===null)return null;const f=c[2],h=c[3]||"0",m=c[4]||"0",y=u.includePrerelease&&c[5]?`-${c[5]}`:"",v=u.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${f}.${h}.${m}${y}${v}`,u)},Gm}var qm,Vx;function S8(){if(Vx)return qm;Vx=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const a=this.map.get(n);if(a!==void 0)return this.map.delete(n),this.map.set(n,a),a}delete(n){return this.map.delete(n)}set(n,a){if(!this.delete(n)&&a!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,a)}return this}}return qm=t,qm}var Fm,Hx;function ha(){if(Hx)return Fm;Hx=1;const t=/\s+/g;class e{constructor(re,j){if(j=s(j),re instanceof e)return re.loose===!!j.loose&&re.includePrerelease===!!j.includePrerelease?re:new e(re.raw,j);if(re instanceof o)return this.raw=re.value,this.set=[[re]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=re.trim().replace(t," "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(Q=>!w(Q[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const Q of this.set)if(Q.length===1&&A(Q[0])){this.set=[Q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let re=0;re<this.set.length;re++){re>0&&(this.formatted+="||");const j=this.set[re];for(let U=0;U<j.length;U++)U>0&&(this.formatted+=" "),this.formatted+=j[U].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(re){const U=((this.options.includePrerelease&&_)|(this.options.loose&&x))+":"+re,Q=a.get(U);if(Q)return Q;const X=this.options.loose,ae=X?f[h.HYPHENRANGELOOSE]:f[h.HYPHENRANGE];re=re.replace(ae,De(this.options.includePrerelease)),u("hyphen replace",re),re=re.replace(f[h.COMPARATORTRIM],m),u("comparator trim",re),re=re.replace(f[h.TILDETRIM],y),u("tilde trim",re),re=re.replace(f[h.CARETTRIM],v),u("caret trim",re);let I=re.split(" ").map(pe=>k(pe,this.options)).join(" ").split(/\s+/).map(pe=>ve(pe,this.options));X&&(I=I.filter(pe=>(u("loose invalid filter",pe,this.options),!!pe.match(f[h.COMPARATORLOOSE])))),u("range list",I);const H=new Map,ie=I.map(pe=>new o(pe,this.options));for(const pe of ie){if(w(pe))return[pe];H.set(pe.value,pe)}H.size>1&&H.has("")&&H.delete("");const le=[...H.values()];return a.set(U,le),le}intersects(re,j){if(!(re instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>T(U,j)&&re.set.some(Q=>T(Q,j)&&U.every(X=>Q.every(ae=>X.intersects(ae,j)))))}test(re){if(!re)return!1;if(typeof re=="string")try{re=new c(re,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(We(this.set[j],re,this.options))return!0;return!1}}Fm=e;const n=S8(),a=new n,s=hy(),o=dd(),u=ud(),c=un(),{safeRe:f,t:h,comparatorTrimReplace:m,tildeTrimReplace:y,caretTrimReplace:v}=Al(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:x}=ld(),w=oe=>oe.value==="<0.0.0-0",A=oe=>oe.value==="",T=(oe,re)=>{let j=!0;const U=oe.slice();let Q=U.pop();for(;j&&U.length;)j=U.every(X=>Q.intersects(X,re)),Q=U.pop();return j},k=(oe,re)=>(oe=oe.replace(f[h.BUILD],""),u("comp",oe,re),oe=Y(oe,re),u("caret",oe),oe=z(oe,re),u("tildes",oe),oe=O(oe,re),u("xrange",oe),oe=Ce(oe,re),u("stars",oe),oe),R=oe=>!oe||oe.toLowerCase()==="x"||oe==="*",z=(oe,re)=>oe.trim().split(/\s+/).map(j=>P(j,re)).join(" "),P=(oe,re)=>{const j=re.loose?f[h.TILDELOOSE]:f[h.TILDE];return oe.replace(j,(U,Q,X,ae,I)=>{u("tilde",oe,U,Q,X,ae,I);let H;return R(Q)?H="":R(X)?H=`>=${Q}.0.0 <${+Q+1}.0.0-0`:R(ae)?H=`>=${Q}.${X}.0 <${Q}.${+X+1}.0-0`:I?(u("replaceTilde pr",I),H=`>=${Q}.${X}.${ae}-${I} <${Q}.${+X+1}.0-0`):H=`>=${Q}.${X}.${ae} <${Q}.${+X+1}.0-0`,u("tilde return",H),H})},Y=(oe,re)=>oe.trim().split(/\s+/).map(j=>W(j,re)).join(" "),W=(oe,re)=>{u("caret",oe,re);const j=re.loose?f[h.CARETLOOSE]:f[h.CARET],U=re.includePrerelease?"-0":"";return oe.replace(j,(Q,X,ae,I,H)=>{u("caret",oe,Q,X,ae,I,H);let ie;return R(X)?ie="":R(ae)?ie=`>=${X}.0.0${U} <${+X+1}.0.0-0`:R(I)?X==="0"?ie=`>=${X}.${ae}.0${U} <${X}.${+ae+1}.0-0`:ie=`>=${X}.${ae}.0${U} <${+X+1}.0.0-0`:H?(u("replaceCaret pr",H),X==="0"?ae==="0"?ie=`>=${X}.${ae}.${I}-${H} <${X}.${ae}.${+I+1}-0`:ie=`>=${X}.${ae}.${I}-${H} <${X}.${+ae+1}.0-0`:ie=`>=${X}.${ae}.${I}-${H} <${+X+1}.0.0-0`):(u("no pr"),X==="0"?ae==="0"?ie=`>=${X}.${ae}.${I}${U} <${X}.${ae}.${+I+1}-0`:ie=`>=${X}.${ae}.${I}${U} <${X}.${+ae+1}.0-0`:ie=`>=${X}.${ae}.${I} <${+X+1}.0.0-0`),u("caret return",ie),ie})},O=(oe,re)=>(u("replaceXRanges",oe,re),oe.split(/\s+/).map(j=>ge(j,re)).join(" ")),ge=(oe,re)=>{oe=oe.trim();const j=re.loose?f[h.XRANGELOOSE]:f[h.XRANGE];return oe.replace(j,(U,Q,X,ae,I,H)=>{u("xRange",oe,U,Q,X,ae,I,H);const ie=R(X),le=ie||R(ae),pe=le||R(I),N=pe;return Q==="="&&N&&(Q=""),H=re.includePrerelease?"-0":"",ie?Q===">"||Q==="<"?U="<0.0.0-0":U="*":Q&&N?(le&&(ae=0),I=0,Q===">"?(Q=">=",le?(X=+X+1,ae=0,I=0):(ae=+ae+1,I=0)):Q==="<="&&(Q="<",le?X=+X+1:ae=+ae+1),Q==="<"&&(H="-0"),U=`${Q+X}.${ae}.${I}${H}`):le?U=`>=${X}.0.0${H} <${+X+1}.0.0-0`:pe&&(U=`>=${X}.${ae}.0${H} <${X}.${+ae+1}.0-0`),u("xRange return",U),U})},Ce=(oe,re)=>(u("replaceStars",oe,re),oe.trim().replace(f[h.STAR],"")),ve=(oe,re)=>(u("replaceGTE0",oe,re),oe.trim().replace(f[re.includePrerelease?h.GTE0PRE:h.GTE0],"")),De=oe=>(re,j,U,Q,X,ae,I,H,ie,le,pe,N)=>(R(U)?j="":R(Q)?j=`>=${U}.0.0${oe?"-0":""}`:R(X)?j=`>=${U}.${Q}.0${oe?"-0":""}`:ae?j=`>=${j}`:j=`>=${j}${oe?"-0":""}`,R(ie)?H="":R(le)?H=`<${+ie+1}.0.0-0`:R(pe)?H=`<${ie}.${+le+1}.0-0`:N?H=`<=${ie}.${le}.${pe}-${N}`:oe?H=`<${ie}.${le}.${+pe+1}-0`:H=`<=${H}`,`${j} ${H}`.trim()),We=(oe,re,j)=>{for(let U=0;U<oe.length;U++)if(!oe[U].test(re))return!1;if(re.prerelease.length&&!j.includePrerelease){for(let U=0;U<oe.length;U++)if(u(oe[U].semver),oe[U].semver!==o.ANY&&oe[U].semver.prerelease.length>0){const Q=oe[U].semver;if(Q.major===re.major&&Q.minor===re.minor&&Q.patch===re.patch)return!0}return!1}return!0};return Fm}var Ym,Gx;function dd(){if(Gx)return Ym;Gx=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(m,y){if(y=n(y),m instanceof e){if(m.loose===!!y.loose)return m;m=m.value}m=m.trim().split(/\s+/).join(" "),u("comparator",m,y),this.options=y,this.loose=!!y.loose,this.parse(m),this.semver===t?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(m){const y=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],v=m.match(y);if(!v)throw new TypeError(`Invalid comparator: ${m}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new c(v[2],this.options.loose):this.semver=t}toString(){return this.value}test(m){if(u("Comparator.test",m,this.options.loose),this.semver===t||m===t)return!0;if(typeof m=="string")try{m=new c(m,this.options)}catch{return!1}return o(m,this.operator,this.semver,this.options)}intersects(m,y){if(!(m instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(m.value,y).test(this.value):m.operator===""?m.value===""?!0:new f(this.value,y).test(m.semver):(y=n(y),y.includePrerelease&&(this.value==="<0.0.0-0"||m.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||m.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&m.operator.startsWith(">")||this.operator.startsWith("<")&&m.operator.startsWith("<")||this.semver.version===m.semver.version&&this.operator.includes("=")&&m.operator.includes("=")||o(this.semver,"<",m.semver,y)&&this.operator.startsWith(">")&&m.operator.startsWith("<")||o(this.semver,">",m.semver,y)&&this.operator.startsWith("<")&&m.operator.startsWith(">")))}}Ym=e;const n=hy(),{safeRe:a,t:s}=Al(),o=KA(),u=ud(),c=un(),f=ha();return Ym}var Zm,qx;function fd(){if(qx)return Zm;qx=1;const t=ha();return Zm=(n,a,s)=>{try{a=new t(a,s)}catch{return!1}return a.test(n)},Zm}var Xm,Fx;function T8(){if(Fx)return Xm;Fx=1;const t=ha();return Xm=(n,a)=>new t(n,a).set.map(s=>s.map(o=>o.value).join(" ").trim().split(" ")),Xm}var Km,Yx;function A8(){if(Yx)return Km;Yx=1;const t=un(),e=ha();return Km=(a,s,o)=>{let u=null,c=null,f=null;try{f=new e(s,o)}catch{return null}return a.forEach(h=>{f.test(h)&&(!u||c.compare(h)===-1)&&(u=h,c=new t(u,o))}),u},Km}var Qm,Zx;function C8(){if(Zx)return Qm;Zx=1;const t=un(),e=ha();return Qm=(a,s,o)=>{let u=null,c=null,f=null;try{f=new e(s,o)}catch{return null}return a.forEach(h=>{f.test(h)&&(!u||c.compare(h)===1)&&(u=h,c=new t(u,o))}),u},Qm}var Jm,Xx;function N8(){if(Xx)return Jm;Xx=1;const t=un(),e=ha(),n=cd();return Jm=(s,o)=>{s=new e(s,o);let u=new t("0.0.0");if(s.test(u)||(u=new t("0.0.0-0"),s.test(u)))return u;u=null;for(let c=0;c<s.set.length;++c){const f=s.set[c];let h=null;f.forEach(m=>{const y=new t(m.semver.version);switch(m.operator){case">":y.prerelease.length===0?y.patch++:y.prerelease.push(0),y.raw=y.format();case"":case">=":(!h||n(y,h))&&(h=y);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${m.operator}`)}}),h&&(!u||n(u,h))&&(u=h)}return u&&s.test(u)?u:null},Jm}var Wm,Kx;function O8(){if(Kx)return Wm;Kx=1;const t=ha();return Wm=(n,a)=>{try{return new t(n,a).range||"*"}catch{return null}},Wm}var ep,Qx;function vy(){if(Qx)return ep;Qx=1;const t=un(),e=dd(),{ANY:n}=e,a=ha(),s=fd(),o=cd(),u=py(),c=yy(),f=gy();return ep=(m,y,v,_)=>{m=new t(m,_),y=new a(y,_);let x,w,A,T,k;switch(v){case">":x=o,w=c,A=u,T=">",k=">=";break;case"<":x=u,w=f,A=o,T="<",k="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(m,y,_))return!1;for(let R=0;R<y.set.length;++R){const z=y.set[R];let P=null,Y=null;if(z.forEach(W=>{W.semver===n&&(W=new e(">=0.0.0")),P=P||W,Y=Y||W,x(W.semver,P.semver,_)?P=W:A(W.semver,Y.semver,_)&&(Y=W)}),P.operator===T||P.operator===k||(!Y.operator||Y.operator===T)&&w(m,Y.semver))return!1;if(Y.operator===k&&A(m,Y.semver))return!1}return!0},ep}var tp,Jx;function R8(){if(Jx)return tp;Jx=1;const t=vy();return tp=(n,a,s)=>t(n,a,">",s),tp}var np,Wx;function k8(){if(Wx)return np;Wx=1;const t=vy();return np=(n,a,s)=>t(n,a,"<",s),np}var ap,eE;function I8(){if(eE)return ap;eE=1;const t=ha();return ap=(n,a,s)=>(n=new t(n,s),a=new t(a,s),n.intersects(a,s)),ap}var ip,tE;function j8(){if(tE)return ip;tE=1;const t=fd(),e=fa();return ip=(n,a,s)=>{const o=[];let u=null,c=null;const f=n.sort((v,_)=>e(v,_,s));for(const v of f)t(v,a,s)?(c=v,u||(u=v)):(c&&o.push([u,c]),c=null,u=null);u&&o.push([u,null]);const h=[];for(const[v,_]of o)v===_?h.push(v):!_&&v===f[0]?h.push("*"):_?v===f[0]?h.push(`<=${_}`):h.push(`${v} - ${_}`):h.push(`>=${v}`);const m=h.join(" || "),y=typeof a.raw=="string"?a.raw:String(a);return m.length<y.length?m:a},ip}var sp,nE;function M8(){if(nE)return sp;nE=1;const t=ha(),e=dd(),{ANY:n}=e,a=fd(),s=fa(),o=(y,v,_={})=>{if(y===v)return!0;y=new t(y,_),v=new t(v,_);let x=!1;e:for(const w of y.set){for(const A of v.set){const T=f(w,A,_);if(x=x||T!==null,T)continue e}if(x)return!1}return!0},u=[new e(">=0.0.0-0")],c=[new e(">=0.0.0")],f=(y,v,_)=>{if(y===v)return!0;if(y.length===1&&y[0].semver===n){if(v.length===1&&v[0].semver===n)return!0;_.includePrerelease?y=u:y=c}if(v.length===1&&v[0].semver===n){if(_.includePrerelease)return!0;v=c}const x=new Set;let w,A;for(const O of y)O.operator===">"||O.operator===">="?w=h(w,O,_):O.operator==="<"||O.operator==="<="?A=m(A,O,_):x.add(O.semver);if(x.size>1)return null;let T;if(w&&A){if(T=s(w.semver,A.semver,_),T>0)return null;if(T===0&&(w.operator!==">="||A.operator!=="<="))return null}for(const O of x){if(w&&!a(O,String(w),_)||A&&!a(O,String(A),_))return null;for(const ge of v)if(!a(O,String(ge),_))return!1;return!0}let k,R,z,P,Y=A&&!_.includePrerelease&&A.semver.prerelease.length?A.semver:!1,W=w&&!_.includePrerelease&&w.semver.prerelease.length?w.semver:!1;Y&&Y.prerelease.length===1&&A.operator==="<"&&Y.prerelease[0]===0&&(Y=!1);for(const O of v){if(P=P||O.operator===">"||O.operator===">=",z=z||O.operator==="<"||O.operator==="<=",w){if(W&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===W.major&&O.semver.minor===W.minor&&O.semver.patch===W.patch&&(W=!1),O.operator===">"||O.operator===">="){if(k=h(w,O,_),k===O&&k!==w)return!1}else if(w.operator===">="&&!a(w.semver,String(O),_))return!1}if(A){if(Y&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===Y.major&&O.semver.minor===Y.minor&&O.semver.patch===Y.patch&&(Y=!1),O.operator==="<"||O.operator==="<="){if(R=m(A,O,_),R===O&&R!==A)return!1}else if(A.operator==="<="&&!a(A.semver,String(O),_))return!1}if(!O.operator&&(A||w)&&T!==0)return!1}return!(w&&z&&!A&&T!==0||A&&P&&!w&&T!==0||W||Y)},h=(y,v,_)=>{if(!y)return v;const x=s(y.semver,v.semver,_);return x>0?y:x<0||v.operator===">"&&y.operator===">="?v:y},m=(y,v,_)=>{if(!y)return v;const x=s(y.semver,v.semver,_);return x<0?y:x>0||v.operator==="<"&&y.operator==="<="?v:y};return sp=o,sp}var rp,aE;function L8(){if(aE)return rp;aE=1;const t=Al(),e=ld(),n=un(),a=YA(),s=Br(),o=d8(),u=f8(),c=h8(),f=m8(),h=p8(),m=g8(),y=y8(),v=v8(),_=fa(),x=_8(),w=b8(),A=my(),T=w8(),k=x8(),R=cd(),z=py(),P=ZA(),Y=XA(),W=gy(),O=yy(),ge=KA(),Ce=E8(),ve=dd(),De=ha(),We=fd(),oe=T8(),re=A8(),j=C8(),U=N8(),Q=O8(),X=vy(),ae=R8(),I=k8(),H=I8(),ie=j8(),le=M8();return rp={parse:s,valid:o,clean:u,inc:c,diff:f,major:h,minor:m,patch:y,prerelease:v,compare:_,rcompare:x,compareLoose:w,compareBuild:A,sort:T,rsort:k,gt:R,lt:z,eq:P,neq:Y,gte:W,lte:O,cmp:ge,coerce:Ce,Comparator:ve,Range:De,satisfies:We,toComparators:oe,maxSatisfying:re,minSatisfying:j,minVersion:U,validRange:Q,outside:X,gtr:ae,ltr:I,intersects:H,simplifyRange:ie,subset:le,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers},rp}L8();function xi(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),a=n||"latest";if(e.includes("/")){const[s,o]=e.split("/",2);if(!s||!o)throw new Error(`Invalid identifier format: ${t}`);return[s,o,a]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,a]}}class D8 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class P8 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function iE(t){return t!=null&&typeof t=="object"&&"name"in t&&(t==null?void 0:t.name)==="LangSmithNotFoundError"}async function Te(t,e,n){let a;if(t.ok){n&&(a=await t.text());return}if(t.status===403)try{const u=await t.json();(u==null?void 0:u.error)==="org_scoped_key_requires_workspace"&&(a="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const c=new Error(`${t.status} ${t.statusText}`);throw c.status=t==null?void 0:t.status,c}if(a===void 0)try{a=await t.text()}catch{a=""}const s=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${a}`;if(t.status===404)throw new P8(s);if(t.status===409)throw new D8(s);const o=new Error(s);throw o.status=t.status,o}const QA="ERR_CONFLICTING_ENDPOINTS";class $8 extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:QA}),this.name="ConflictingEndpointsError"}}function U8(t){return typeof t=="object"&&t!==null&&t.code===QA}var sE="[...]",z8={result:"[Circular]"},qc=[],Sr=[];const B8=new TextEncoder;function V8(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function uc(t){return B8.encode(t)}function JA(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function H8(t){return function(e,n){return JA(n)}}function Rn(t,e,n,a,s){var o;try{const u=JSON.stringify(t,H8(n),a);return uc(u)}catch(u){if(!((o=u.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),uc("[Unserializable]");sn("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof s>"u"&&(s=V8()),rg(t,"",0,[],void 0,0,s);let c;try{Sr.length===0?c=JSON.stringify(t,n,a):c=JSON.stringify(t,G8(n),a)}catch{return uc("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;qc.length!==0;){const f=qc.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return uc(c)}}function op(t,e,n,a){var s=Object.getOwnPropertyDescriptor(a,n);s.get!==void 0?s.configurable?(Object.defineProperty(a,n,{value:t}),qc.push([a,n,e,s])):Sr.push([e,n,t]):(a[n]=t,qc.push([a,n,e]))}function rg(t,e,n,a,s,o,u){o+=1;var c;if(typeof t=="object"&&t!==null){for(c=0;c<a.length;c++)if(a[c]===t){op(z8,t,e,s);return}if(typeof u.depthLimit<"u"&&o>u.depthLimit){op(sE,t,e,s);return}if(typeof u.edgesLimit<"u"&&n+1>u.edgesLimit){op(sE,t,e,s);return}if(a.push(t),Array.isArray(t))for(c=0;c<t.length;c++)rg(t[c],c,c,a,t,o,u);else{t=JA(t);var f=Object.keys(t);for(c=0;c<f.length;c++){var h=f[c];rg(t[h],h,c,a,t,o,u)}}a.pop()}}function G8(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Sr.length>0)for(var a=0;a<Sr.length;a++){var s=Sr[a];if(s[1]===e&&s[0]===n){n=s[2],Sr.splice(a,1);break}}return t.call(this,e,n)}}function rE(t,e,n){if(n)return t;const a=HA(),s=e??GA(),o=t.extra??{},u=o.metadata;return t.extra={...o,runtime:{...a,...o==null?void 0:o.runtime},metadata:{...s,...s.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??s.revision_id}:{},...u}},t}const q8=t=>{const e=(t==null?void 0:t.toString())??sn("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},F8=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function Y8(t){const e=[];for await(const n of t)e.push(n);return e}function cc(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const Z8=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function oE(t){return typeof t=="number"?Number(t.toFixed(4)):t}const X8=24*1024*1024,WA=1024*1024*1024,K8=1e4,Q8=100,lE="https://api.smith.langchain.com";class J8{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??WA}peek(){return this.items[0]}push(e){let n;const a=new Promise(o=>{n=o}),s=Rn(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+s>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${s} bytes.`),n(),a):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:a,size:s}),this.sizeBytes+=s,a)}pop({upToSizeBytes:e,upToSize:n}){var o;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const a=[];let s=0;for(;s+(((o=this.peek())==null?void 0:o.size)??0)<e&&this.items.length>0&&a.length<n;){const u=this.items.shift();u&&(a.push(u),s+=u.size,this.sizeBytes-=u.size)}if(a.length===0&&this.items.length>0){const u=this.items.shift();a.push(u),s+=u.size,this.sizeBytes-=u.size}return[a.map(u=>({action:u.action,item:u.payload,otelContext:u.otelContext,apiKey:u.apiKey,apiUrl:u.apiUrl,size:u.size})),()=>a.forEach(u=>u.itemPromiseResolve())]}}class pl{get _fetch(){return this.fetchImplementation||JD(this.debug)}constructor(e={}){var s;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Ta("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promptCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_multipartDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_runCompressionDisabled",{enumerable:!0,configurable:!0,writable:!0,value:sn("DISABLE_RUN_COMPRESSION")==="true"}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Ta("LANGSMITH_DEBUG")==="true"});const n=pl.getDefaultClientConfig();if(this.tracingSampleRate=q8(e.tracingSamplingRate),this.apiUrl=cc(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=cc(e.apiKey??n.apiKey),this.webUrl=cc(e.webUrl??n.webUrl),(s=this.webUrl)!=null&&s.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=cc(e.workspaceId??sn("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new cx({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;const a=e.maxIngestMemoryBytes??WA;this.batchIngestCaller=new cx({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:a,...e.callerOptions??{},onFailedResponseHook:Z8,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.omitTracedRuntimeInfo=e.omitTracedRuntimeInfo??!1,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new J8(a),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,qA()&&(this.langSmithToOTELTranslator=new F6),this.cachedLSEnvVarsForMetadata=GA(),e.cache!==void 0&&e.disablePromptCache&&Tc("Both 'cache' and 'disablePromptCache' were provided. The 'cache' parameter is deprecated and will be removed in a future version. Using 'cache' parameter value."),e.cache!==void 0?(Tc("The 'cache' parameter is deprecated and will be removed in a future version. Use 'configureGlobalPromptCache()' to configure the global cache, or 'disablePromptCache: true' to disable caching for this client."),e.cache===!1?this._promptCache=void 0:e.cache===!0?this._promptCache=tx:this._promptCache=e.cache):e.disablePromptCache||(this._promptCache=tx)}static getDefaultClientConfig(){const e=sn("API_KEY"),n=sn("ENDPOINT")??lE,a=sn("HIDE_INPUTS")==="true",s=sn("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:a,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:F8(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${zA}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const a=(n==null?void 0:n.toString())??"",s=`${this.apiUrl}${e}?${a}`;return await this.caller.call(async()=>{const u=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,`fetch ${e}`),u})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,a){let s=Number(n.get("offset"))||0;const o=Number(n.get("limit"))||100;for(;;){n.set("offset",String(s)),n.set("limit",String(o));const u=`${this.apiUrl}${e}?${n}`,c=await this.caller.call(async()=>{const h=await this._fetch(u,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(h,`fetch ${e}`),h}),f=a?a(await c.json()):await c.json();if(f.length===0||(yield f,f.length<o))break;s+=f.length}}async*_getCursorPaginatedList(e,n=null,a="POST",s="runs"){const o=n?{...n}:{};for(;;){const u=JSON.stringify(o),f=await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}${e}`,{method:a,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(m,`fetch ${e}`),m})).json();if(!f||!f[s])break;yield f[s];const h=f.cursors;if(!h||!h.next)break;o.cursor=h.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const a=[];for(const s of e)this.filteredPostUuids.has(s.trace_id)?s.id===s.trace_id&&this.filteredPostUuids.delete(s.trace_id):a.push(s);return a}else{const a=[];for(const s of e){const o=s.trace_id??s.id;this.filteredPostUuids.has(o)||(s.id===o?this._shouldSample()?a.push(s):this.filteredPostUuids.add(o):a.push(s))}return a}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??X8}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit)??Q8}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const a=[];for(;this.autoBatchQueue.items.length>0;){const[s,o]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!s.length){o();break}const u=s.reduce((h,m)=>{const y=m.apiUrl??this.apiUrl,v=m.apiKey??this.apiKey,x=m.apiKey===this.apiKey&&m.apiUrl===this.apiUrl?"default":`${y}|${v}`;return h[x]||(h[x]=[]),h[x].push(m),h},{}),c=[];for(const[h,m]of Object.entries(u)){const y=this._processBatch(m,{apiUrl:h==="default"?void 0:h.split("|")[0],apiKey:h==="default"?void 0:h.split("|")[1]});c.push(y)}const f=Promise.all(c).finally(o);a.push(f)}return Promise.all(a)}async _processBatch(e,n){var s,o;if(!e.length)return;const a=e.reduce((u,c)=>u+(c.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const u={runCreates:e.filter(h=>h.action==="create").map(h=>h.item),runUpdates:e.filter(h=>h.action==="update").map(h=>h.item)},c=await this._ensureServerInfo();if(!this._multipartDisabled&&(((s=c==null?void 0:c.batch_ingest_config)==null?void 0:s.use_multipart_endpoint)??!0)){const h=!this._runCompressionDisabled&&((o=c==null?void 0:c.instance_flags)==null?void 0:o.gzip_body_enabled);try{await this.multipartIngestRuns(u,{...n,useGzip:h,sizeBytes:a})}catch(m){if(iE(m))this._multipartDisabled=!0,await this.batchIngestRuns(u,{...n,sizeBytes:a});else throw m}}else await this.batchIngestRuns(u,{...n,sizeBytes:a})}}catch(u){console.error("Error exporting batch:",u)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,a=[];for(const s of e)s.item.id&&s.otelContext&&(n.set(s.item.id,s.otelContext),s.action==="create"?a.push({operation:"post",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}):a.push({operation:"patch",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}));this.langSmithToOTELTranslator.exportBatch(a,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=rE(e.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const a=await this._getBatchSizeLimitBytes(),s=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>a||this.autoBatchQueue.items.length>s)&&this.drainAutoBatchQueue({batchSizeLimitBytes:a,batchSizeLimit:s}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:a,batchSizeLimit:s})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(K8),...this.fetchOptions});return await Te(a,"get server info"),a})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=FA(),n=V6();if(this.langSmithToOTELTranslator!==void 0){const a=e.getActiveSpan();if(a)return e.setSpan(n.active(),a)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const a={...this.headers,"Content-Type":"application/json"},s=e.project_name;delete e.project_name;const o=await this.prepareRunCreateOrUpdateInputs({session_name:s,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){const f=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:o,otelContext:f,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const u=rE(o,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);(n==null?void 0:n.apiKey)!==void 0&&(a["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(a["x-tenant-id"]=n.workspaceId);const c=Rn(u,`Creating run with id: ${u.id}`);await this.caller.call(async()=>{const f=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Te(f,"create run",!0),f})}async batchIngestRuns({runCreates:e,runUpdates:n},a){if(e===void 0&&n===void 0)return;let s=await Promise.all((e==null?void 0:e.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]),o=await Promise.all((n==null?void 0:n.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]);if(s.length>0&&o.length>0){const f=s.reduce((m,y)=>(y.id&&(m[y.id]=y),m),{}),h=[];for(const m of o)m.id!==void 0&&f[m.id]?f[m.id]={...f[m.id],...m}:h.push(m);s=Object.values(f),o=h}const u={post:s,patch:o};if(!u.post.length&&!u.patch.length)return;const c={post:[],patch:[]};for(const f of["post","patch"]){const h=f,m=u[h].reverse();let y=m.pop();for(;y!==void 0;)c[h].push(y),y=m.pop()}if(c.post.length>0||c.patch.length>0){const f=c.post.map(h=>h.id).concat(c.patch.map(h=>h.id)).join(",");await this._postBatchIngestRuns(Rn(c,`Ingesting runs with ids: ${f}`),a)}}async _postBatchIngestRuns(e,n){const a={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(a["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const s=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await Te(s,"batch create run",!0),s})}async multipartIngestRuns({runCreates:e,runUpdates:n},a){if(e===void 0&&n===void 0)return;const s={};let o=[];for(const y of e??[]){const v=await this.prepareRunCreateOrUpdateInputs(y);v.id!==void 0&&v.attachments!==void 0&&(s[v.id]=v.attachments),delete v.attachments,o.push(v)}let u=[];for(const y of n??[])u.push(await this.prepareRunCreateOrUpdateInputs(y));if(o.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(u.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(o.length>0&&u.length>0){const y=o.reduce((_,x)=>(x.id&&(_[x.id]=x),_),{}),v=[];for(const _ of u)_.id!==void 0&&y[_.id]?y[_.id]={...y[_.id],..._}:v.push(_);o=Object.values(y),u=v}if(o.length===0&&u.length===0)return;const h=[],m=[];for(const[y,v]of[["post",o],["patch",u]])for(const _ of v){const{inputs:x,outputs:w,events:A,extra:T,error:k,serialized:R,attachments:z,...P}=_,Y={inputs:x,outputs:w,events:A,extra:T,error:k,serialized:R},W=Rn(P,`Serializing for multipart ingestion of run with id: ${P.id}`);m.push({name:`${y}.${P.id}`,payload:new Blob([W],{type:`application/json; length=${W.length}`})});for(const[O,ge]of Object.entries(Y)){if(ge===void 0)continue;const Ce=Rn(ge,`Serializing ${O} for multipart ingestion of run with id: ${P.id}`);m.push({name:`${y}.${P.id}.${O}`,payload:new Blob([Ce],{type:`application/json; length=${Ce.length}`})})}if(P.id!==void 0){const O=s[P.id];if(O){delete s[P.id];for(const[ge,Ce]of Object.entries(O)){let ve,De;if(Array.isArray(Ce)?[ve,De]=Ce:(ve=Ce.mimeType,De=Ce.data),ge.includes(".")){console.warn(`Skipping attachment '${ge}' for run ${P.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}m.push({name:`attachment.${P.id}.${ge}`,payload:new Blob([De],{type:`${ve}; length=${De.byteLength}`})})}}}h.push(`trace=${P.trace_id},id=${P.id}`)}await this._sendMultipartRequest(m,h.join("; "),a)}async _createNodeFetchBody(e,n){const a=[];for(const u of e)a.push(new Blob([`--${n}\r
`])),a.push(new Blob([`Content-Disposition: form-data; name="${u.name}"\r
`,`Content-Type: ${u.payload.type}\r
\r
`])),a.push(u.payload),a.push(new Blob([`\r
`]));return a.push(new Blob([`--${n}--\r
`])),await new Blob(a).arrayBuffer()}async _createMultipartStream(e,n){const a=new TextEncoder;return new ReadableStream({async start(o){const u=async c=>{typeof c=="string"?o.enqueue(a.encode(c)):o.enqueue(c)};for(const c of e){await u(`--${n}\r
`),await u(`Content-Disposition: form-data; name="${c.name}"\r
`),await u(`Content-Type: ${c.payload.type}\r
\r
`);const h=c.payload.stream().getReader();try{let m;for(;!(m=await h.read()).done;)o.enqueue(m.value)}finally{h.releaseLock()}await u(`\r
`)}await u(`--${n}--\r
`),o.close()}})}async _sendMultipartRequest(e,n,a){const s="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=()=>this._createNodeFetchBody(e,s),u=()=>this._createMultipartStream(e,s),c=async f=>this.batchIngestCaller.callWithOptions({sizeBytes:a==null?void 0:a.sizeBytes},async()=>{const h=await f(),m={...this.headers,"Content-Type":`multipart/form-data; boundary=${s}`};(a==null?void 0:a.apiKey)!==void 0&&(m["x-api-key"]=a.apiKey);let y=h;a!=null&&a.useGzip&&typeof h=="object"&&"pipeThrough"in h&&(y=h.pipeThrough(new CompressionStream("gzip")),m["Content-Encoding"]="gzip");const v=await this._fetch(`${(a==null?void 0:a.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:m,body:y,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(v,"Failed to send multipart request",!0),v});try{let f,h=!1;QD()&&!this.multipartStreamingDisabled&&VA()!=="bun"?(h=!0,f=await c(u)):f=await c(o),(!this.multipartStreamingDisabled||h)&&f.status===422&&((a==null?void 0:a.apiUrl)??this.apiUrl)!==lE&&(console.warn(`Streaming multipart upload to ${(a==null?void 0:a.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,f=await c(o))}catch(f){if(iE(f))throw f;console.warn(`${f.message.trim()}

Context: ${n}`)}}async updateRun(e,n,a){Me(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const s={...n,id:e};if(!this._filterForSampling([s],!0).length)return;if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const c=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&s.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:s,otelContext:c,apiKey:a==null?void 0:a.apiKey,apiUrl:a==null?void 0:a.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:s,otelContext:c,apiKey:a==null?void 0:a.apiKey,apiUrl:a==null?void 0:a.apiUrl}).catch(console.error);return}const o={...this.headers,"Content-Type":"application/json"};(a==null?void 0:a.apiKey)!==void 0&&(o["x-api-key"]=a.apiKey),(a==null?void 0:a.workspaceId)!==void 0&&(o["x-tenant-id"]=a.workspaceId);const u=Rn(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const c=await this._fetch(`${(a==null?void 0:a.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:o,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(c,"update run",!0),c})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){Me(e);let a=await this._get(`/runs/${e}`);return n&&(a=await this._loadChildRuns(a)),a}async getRunUrl({runId:e,run:n,projectOpts:a}){if(n!==void 0){let s;n.session_id?s=n.session_id:a!=null&&a.projectName?s=(await this.readProject({projectName:a==null?void 0:a.projectName})).id:a!=null&&a.projectId?s=a==null?void 0:a.projectId:s=(await this.readProject({projectName:sn("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${s}/r/${n.id}?poll=true`}else if(e!==void 0){const s=await this.readRun(e);if(!s.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var o;const n=await Y8(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),a={},s={};n.sort((u,c)=>((u==null?void 0:u.dotted_order)??"").localeCompare((c==null?void 0:c.dotted_order)??""));for(const u of n){if(u.parent_run_id===null||u.parent_run_id===void 0)throw new Error(`Child run ${u.id} has no parent`);(o=u.dotted_order)!=null&&o.startsWith(e.dotted_order??"")&&u.id!==e.id&&(u.parent_run_id in a||(a[u.parent_run_id]=[]),a[u.parent_run_id].push(u),s[u.id]=u)}e.child_runs=a[e.id]||[];for(const u in a)u!==e.id&&(s[u].child_runs=a[u]);return e}async*listRuns(e){const{projectId:n,projectName:a,parentRunId:s,traceId:o,referenceExampleId:u,startTime:c,executionOrder:f,isRoot:h,runType:m,error:y,id:v,query:_,filter:x,traceFilter:w,treeFilter:A,limit:T,select:k,order:R}=e;let z=[];if(n&&(z=Array.isArray(n)?n:[n]),a){const O=Array.isArray(a)?a:[a],ge=await Promise.all(O.map(Ce=>this.readProject({projectName:Ce}).then(ve=>ve.id)));z.push(...ge)}const P=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],Y={session:z.length?z:null,run_type:m,reference_example:u,query:_,filter:x,trace_filter:w,tree_filter:A,execution_order:f,parent_run:s,start_time:c?c.toISOString():null,error:y,id:v,limit:T,trace:o,select:k||P,is_root:h,order:R};Y.select.includes("child_run_ids")&&Tc("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let W=0;for await(const O of this._getCursorPaginatedList("/runs/query",Y))if(T){if(W>=T)break;if(O.length+W>T){yield*O.slice(0,T-W);break}W+=O.length,yield*O}else yield*O}async*listGroupRuns(e){const{projectId:n,projectName:a,groupBy:s,filter:o,startTime:u,endTime:c,limit:f,offset:h}=e,y={session_id:n||(await this.readProject({projectName:a})).id,group_by:s,filter:o,start_time:u?u.toISOString():null,end_time:c?c.toISOString():null,limit:Number(f)||100};let v=Number(h)||0;const _="/runs/group",x=`${this.apiUrl}${_}`;for(;;){const w={...y,offset:v},A=Object.fromEntries(Object.entries(w).filter(([Y,W])=>W!==void 0)),T=JSON.stringify(A),R=await(await this.caller.call(async()=>{const Y=await this._fetch(x,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:T});return await Te(Y,`Failed to fetch ${_}`),Y})).json(),{groups:z,total:P}=R;if(z.length===0)break;for(const Y of z)yield Y;if(v+=z.length,v>=P)break}}async getRunStats({id:e,trace:n,parentRun:a,runType:s,projectNames:o,projectIds:u,referenceExampleIds:c,startTime:f,endTime:h,error:m,query:y,filter:v,traceFilter:_,treeFilter:x,isRoot:w,dataSourceType:A}){let T=u||[];o&&(T=[...u||[],...await Promise.all(o.map(W=>this.readProject({projectName:W}).then(O=>O.id)))]);const R=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:a,run_type:s,session:T,reference_example:c,start_time:f,end_time:h,error:m,query:y,filter:v,trace_filter:_,tree_filter:x,is_root:w,data_source_type:A}).filter(([W,O])=>O!==void 0)),z=JSON.stringify(R);return await(await this.caller.call(async()=>{const W=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:z});return await Te(W,"get run stats"),W})).json()}async shareRun(e,{shareId:n}={}){const a={run_id:e,share_token:n||hs()};Me(e);const s=JSON.stringify(a),u=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Te(c,"share run"),c})).json();if(u===null||!("share_token"in u))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${u.share_token}/r`}async unshareRun(e){Me(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(n,"unshare run",!0),n})}async readRunSharedLink(e){Me(e);const a=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"read run shared link"),s})).json();if(!(a===null||!("share_token"in a)))return`${this.getHostUrl()}/public/${a.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const a=new URLSearchParams({share_token:e});if(n!==void 0)for(const u of n)a.append("id",u);return Me(e),await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/public/${e}/runs${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,"list shared runs"),u})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),Me(e);const s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(o,"read dataset shared schema"),o})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const a={dataset_id:e};Me(e);const s=JSON.stringify(a),u=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Te(c,"share dataset"),c})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async unshareDataset(e){Me(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(n,"unshare dataset",!0),n})}async readSharedDataset(e){return Me(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"read shared dataset"),s})).json()}async listSharedExamples(e,n){const a={};n!=null&&n.exampleIds&&(a.id=n.exampleIds);const s=new URLSearchParams;Object.entries(a).forEach(([c,f])=>{Array.isArray(f)?f.forEach(h=>s.append(c,h)):s.append(c,f)});const o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/public/${e}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(c,"list shared examples"),c}),u=await o.json();if(!o.ok)throw"detail"in u?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(u.detail)?u.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return u.map(c=>({...c,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:a=null,upsert:s=!1,projectExtra:o=null,referenceDatasetId:u=null}){const c=s?"?upsert=true":"",f=`${this.apiUrl}/sessions${c}`,h=o||{};a&&(h.metadata=a);const m={name:e,extra:h,description:n};u!==null&&(m.reference_dataset_id=u);const y=JSON.stringify(m);return await(await this.caller.call(async()=>{const x=await this._fetch(f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await Te(x,"create project"),x})).json()}async updateProject(e,{name:n=null,description:a=null,metadata:s=null,projectExtra:o=null,endTime:u=null}){const c=`${this.apiUrl}/sessions/${e}`;let f=o;s&&(f={...f||{},metadata:s});const h=JSON.stringify({name:n,extra:f,description:a,end_time:u?new Date(u).toISOString():null});return await(await this.caller.call(async()=>{const v=await this._fetch(c,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(v,"update project"),v})).json()}async hasProject({projectId:e,projectName:n}){let a="/sessions";const s=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),a+=`/${e}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${a}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,"has project"),u});try{const u=await o.json();return o.ok?Array.isArray(u)?u.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:a}){let s="/sessions";const o=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),s+=`/${e}`;else if(n!==void 0)o.append("name",n);else throw new Error("Must provide projectName or projectId");a!==void 0&&o.append("include_stats",a.toString());const u=await this._get(s,o);let c;if(Array.isArray(u)){if(u.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);c=u[0]}else c=u;return c}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const a=await this.readProject({projectId:e,projectName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${a.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const a=await this.readDataset({datasetId:e,datasetName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${a.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:a,referenceDatasetId:s,referenceDatasetName:o,includeStats:u,datasetVersion:c,referenceFree:f,metadata:h}={}){const m=new URLSearchParams;if(e!==void 0)for(const y of e)m.append("id",y);if(n!==void 0&&m.append("name",n),a!==void 0&&m.append("name_contains",a),s!==void 0)m.append("reference_dataset",s);else if(o!==void 0){const y=await this.readDataset({datasetName:o});m.append("reference_dataset",y.id)}u!==void 0&&m.append("include_stats",u.toString()),c!==void 0&&m.append("dataset_version",c),f!==void 0&&m.append("reference_free",f.toString()),h!==void 0&&m.append("metadata",JSON.stringify(h));for await(const y of this._getPaginated("/sessions",m))yield*y}async deleteProject({projectId:e,projectName:n}){let a;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?a=(await this.readProject({projectName:n})).id:a=e,Me(a),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/sessions/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,`delete session ${a} (${n})`,!0),s})}async uploadCsv({csvFile:e,fileName:n,inputKeys:a,outputKeys:s,description:o,dataType:u,name:c}){const f=`${this.apiUrl}/datasets/upload`,h=new FormData,m=new Blob([e],{type:"text/csv"});return h.append("file",m,n),a.forEach(_=>{h.append("input_keys",_)}),s.forEach(_=>{h.append("output_keys",_)}),o&&h.append("description",o),u&&h.append("data_type",u),c&&h.append("name",c),await(await this.caller.call(async()=>{const _=await this._fetch(f,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(_,"upload CSV"),_})).json()}async createDataset(e,{description:n,dataType:a,inputsSchema:s,outputsSchema:o,metadata:u}={}){const c={name:e,description:n,extra:u?{metadata:u}:void 0};a&&(c.data_type=a),s&&(c.inputs_schema_definition=s),o&&(c.outputs_schema_definition=o);const f=JSON.stringify(c);return await(await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(y,"create dataset"),y})).json()}async readDataset({datasetId:e,datasetName:n}){let a="/datasets";const s=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)Me(e),a+=`/${e}`;else if(n)s.append("name",n);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(a,s);let u;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);u=o[0]}else u=o;return u}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(a){if(a instanceof Error&&a.message.toLocaleLowerCase().includes("not found"))return!1;throw a}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:a,toVersion:s}){let o=e;if(o===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:n})).id);const u=new URLSearchParams({from_version:typeof a=="string"?a:a.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,u)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const a="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${a}/${e}/openai_ft`)).text()).trim().split(`
`).map(c=>JSON.parse(c))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:a,datasetName:s,datasetNameContains:o,metadata:u}={}){const c="/datasets",f=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(a!==void 0)for(const h of a)f.append("id",h);s!==void 0&&f.append("name",s),o!==void 0&&f.append("name_contains",o),u!==void 0&&f.append("metadata",JSON.stringify(u));for await(const h of this._getPaginated(c,f))yield*h}async updateDataset(e){const{datasetId:n,datasetName:a,...s}=e;if(!n&&!a)throw new Error("Must provide either datasetName or datasetId");const o=n??(await this.readDataset({datasetName:a})).id;Me(o);const u=JSON.stringify(s);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"update dataset"),f})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:a,asOf:s,tag:o}=e;if(!n&&!a)throw new Error("Must provide either datasetName or datasetId");const u=n??(await this.readDataset({datasetName:a})).id;Me(u);const c=JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:o});await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${u}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Te(f,"update dataset tags",!0),f})}async deleteDataset({datasetId:e,datasetName:n}){let a="/datasets",s=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(s=(await this.readDataset({datasetName:n})).id),s!==void 0)Me(s),a+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const o=await this._fetch(this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(o,`delete ${a}`,!0),o})}async indexDataset({datasetId:e,datasetName:n,tag:a}){let s=e;if(!s&&!n)throw new Error("Must provide either datasetName or datasetId");if(s&&n)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:n})).id),Me(s);const u=JSON.stringify({tag:a});await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"index dataset"),f})).json()}async similarExamples(e,n,a,{filter:s}={}){const o={limit:a,inputs:e};s!==void 0&&(o.filter=s),Me(n);const u=JSON.stringify(o);return(await(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:u});return await Te(h,"fetch similar examples"),h})).json()).examples}async createExample(e,n,a){var m;if(uE(e)&&(n!==void 0||a!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=n?a==null?void 0:a.datasetId:e.dataset_id;const o=n?a==null?void 0:a.datasetName:e.dataset_name;if(s===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:o})).id);const u=(n?a==null?void 0:a.createdAt:e.created_at)||new Date;let c;uE(e)?c=e:c={inputs:e,outputs:n,created_at:u==null?void 0:u.toISOString(),id:a==null?void 0:a.exampleId,metadata:a==null?void 0:a.metadata,split:a==null?void 0:a.split,source_run_id:a==null?void 0:a.sourceRunId,use_source_run_io:a==null?void 0:a.useSourceRunIO,use_source_run_attachments:a==null?void 0:a.useSourceRunAttachments,attachments:a==null?void 0:a.attachments};const f=await this._uploadExamplesMultipart(s,[c]);return await this.readExample(((m=f.example_ids)==null?void 0:m[0])??hs())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const k=e;let R=k[0].dataset_id;const z=k[0].dataset_name;if(R===void 0&&z===void 0)throw new Error("Must provide either datasetName or datasetId");if(R!==void 0&&z!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");R===void 0&&(R=(await this.readDataset({datasetName:z})).id);const P=await this._uploadExamplesMultipart(R,k);return await Promise.all(P.example_ids.map(W=>this.readExample(W)))}const{inputs:n,outputs:a,metadata:s,splits:o,sourceRunIds:u,useSourceRunIOs:c,useSourceRunAttachments:f,attachments:h,exampleIds:m,datasetId:y,datasetName:v}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let _=y;const x=v;if(_===void 0&&x===void 0)throw new Error("Must provide either datasetName or datasetId");if(_!==void 0&&x!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");_===void 0&&(_=(await this.readDataset({datasetName:x})).id);const w=n.map((k,R)=>({dataset_id:_,inputs:k,outputs:a==null?void 0:a[R],metadata:s==null?void 0:s[R],split:o==null?void 0:o[R],id:m==null?void 0:m[R],attachments:h==null?void 0:h[R],source_run_id:u==null?void 0:u[R],use_source_run_io:c==null?void 0:c[R],use_source_run_attachments:f==null?void 0:f[R]})),A=await this._uploadExamplesMultipart(_,w);return await Promise.all(A.example_ids.map(k=>this.readExample(k)))}async createLLMExample(e,n,a){return this.createExample({input:e},{output:n},a)}async createChatExample(e,n,a){const s=e.map(u=>dx(u)?fx(u):u),o=dx(n)?fx(n):n;return this.createExample({input:s},{output:o},a)}async readExample(e){Me(e);const n=`/examples/${e}`,a=await this._get(n),{attachment_urls:s,...o}=a,u=o;return s&&(u.attachments=Object.entries(s).reduce((c,[f,h])=>(c[f.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},c),{})),u}async*listExamples({datasetId:e,datasetName:n,exampleIds:a,asOf:s,splits:o,inlineS3Urls:u,metadata:c,limit:f,offset:h,filter:m,includeAttachments:y}={}){let v;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)v=e;else if(n!==void 0)v=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const _=new URLSearchParams({dataset:v}),x=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;x&&_.append("as_of",x);const w=u??!0;if(_.append("inline_s3_urls",w.toString()),a!==void 0)for(const T of a)_.append("id",T);if(o!==void 0)for(const T of o)_.append("splits",T);if(c!==void 0){const T=JSON.stringify(c);_.append("metadata",T)}f!==void 0&&_.append("limit",f.toString()),h!==void 0&&_.append("offset",h.toString()),m!==void 0&&_.append("filter",m),y===!0&&["attachment_urls","outputs","metadata"].forEach(T=>_.append("select",T));let A=0;for await(const T of this._getPaginated("/examples",_)){for(const k of T){const{attachment_urls:R,...z}=k,P=z;R&&(P.attachments=Object.entries(R).reduce((Y,[W,O])=>(Y[W.slice(11)]={presigned_url:O.presigned_url,mime_type:O.mime_type||void 0},Y),{})),yield P,A++}if(f!==void 0&&A>=f)break}}async deleteExample(e){Me(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,`delete ${n}`,!0),a})}async deleteExamples(e,n){if(e.forEach(a=>Me(a)),n!=null&&n.hardDelete){const a=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:e,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"hard delete examples",!0),s})}else{const a=new URLSearchParams;e.forEach(s=>a.append("example_ids",s)),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/examples?${a.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"delete examples",!0),s})}}async updateExample(e,n){let a;n?a=e:a=e.id,Me(a);let s;n?s={id:a,...n}:s=e;let o;return s.dataset_id!==void 0?o=s.dataset_id:o=(await this.readExample(a)).dataset_id,this._updateExamplesMultipart(o,[s])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:a,tag:s}){let o;if(e?o=e:o=(await this.readDataset({datasetName:n})).id,Me(o),a&&s||!a&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const u=new URLSearchParams;return a!==void 0&&u.append("as_of",typeof a=="string"?a:a.toISOString()),s!==void 0&&u.append("tag",s),await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${o}/version?${u.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(f,"read dataset version"),f})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:a}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,Me(s);const o=new URLSearchParams,u=a?typeof a=="string"?a:a==null?void 0:a.toISOString():void 0;return u&&o.append("as_of",u),await this._get(`/datasets/${s}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:a,exampleIds:s,remove:o=!1}){let u;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?u=(await this.readDataset({datasetName:n})).id:u=e,Me(u);const c={split_name:a,examples:s.map(h=>(Me(h),h)),remove:o},f=JSON.stringify(c);await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets/${u}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(h,"update dataset splits",!0),h})}async createFeedback(e,n,{score:a,value:s,correction:o,comment:u,sourceInfo:c,feedbackSourceType:f="api",sourceRunId:h,feedbackId:m,feedbackConfig:y,projectId:v,comparativeExperimentId:_,sessionId:x,startTime:w}){var z;if(!e&&!v)throw new Error("One of runId or projectId must be provided");if(e&&v)throw new Error("Only one of runId or projectId can be provided");const A={type:f??"api",metadata:c??{}};h!==void 0&&(A==null?void 0:A.metadata)!==void 0&&!A.metadata.__run&&(A.metadata.__run={run_id:h}),(A==null?void 0:A.metadata)!==void 0&&((z=A.metadata.__run)==null?void 0:z.run_id)!==void 0&&Me(A.metadata.__run.run_id);const T={id:m??hs(),run_id:e,key:n,score:oE(a),value:s,correction:o,comment:u,feedback_source:A,comparative_experiment_id:_,feedbackConfig:y,session_id:x??v,start_time:w},k=JSON.stringify(T),R=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const P=await this._fetch(R,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:k});return await Te(P,"create feedback",!0),P}),T}async updateFeedback(e,{score:n,value:a,correction:s,comment:o}){const u={};n!=null&&(u.score=oE(n)),a!=null&&(u.value=a),s!=null&&(u.correction=s),o!=null&&(u.comment=o),Me(e);const c=JSON.stringify(u);await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Te(f,"update feedback",!0),f})}async readFeedback(e){Me(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){Me(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,`delete ${n}`,!0),a})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:a}={}){const s=new URLSearchParams;if(e)for(const o of e)Me(o),s.append("run",o);if(n)for(const o of n)s.append("key",o);if(a)for(const o of a)s.append("source",o);for await(const o of this._getPaginated("/feedback",s))yield*o}async createPresignedFeedbackToken(e,n,{expiration:a,feedbackConfig:s}={}){const o={run_id:e,feedback_key:n,feedback_config:s};a?typeof a=="string"?o.expires_at=a:(a!=null&&a.hours||a!=null&&a.minutes||a!=null&&a.days)&&(o.expires_in=a):o.expires_in={hours:3};const u=JSON.stringify(o);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"create presigned feedback token"),f})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:a,createdAt:s,description:o,metadata:u,id:c}){var y;if(n.length===0)throw new Error("At least one experiment is required");if(a||(a=(await this.readProject({projectId:n[0]})).reference_dataset_id),!a==null)throw new Error("A reference dataset is required");const f={id:c,name:e,experiment_ids:n,reference_dataset_id:a,description:o,created_at:(y=s??new Date)==null?void 0:y.toISOString(),extra:{}};u&&(f.extra.metadata=u);const h=JSON.stringify(f);return(await this.caller.call(async()=>{const v=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(v,"create comparative experiment"),v})).json()}async*listPresignedFeedbackTokens(e){Me(e);const n=new URLSearchParams({run_id:e});for await(const a of this._getPaginated("/feedback/tokens",n))yield*a}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,a){const s=this._selectEvalResults(e),o=[];for(const u of s){let c=a||{};u.evaluatorInfo&&(c={...u.evaluatorInfo,...c});let f=null;u.targetRunId?f=u.targetRunId:n&&(f=n.id),o.push(await this.createFeedback(f,u.key,{score:u.score,value:u.value,comment:u.comment,correction:u.correction,sourceInfo:c,sourceRunId:u.sourceRunId,feedbackConfig:u.feedbackConfig,feedbackSourceType:"model",sessionId:n==null?void 0:n.session_id,startTime:n==null?void 0:n.start_time}))}return[s,o]}async logEvaluationFeedback(e,n,a){const[s]=await this._logEvaluationFeedback(e,n,a);return s}async createFeedbackConfig(e){const{feedbackKey:n,feedbackConfig:a,isLowerScoreBetter:s=!1}=e,o={feedback_key:n,feedback_config:a,is_lower_score_better:s};return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)});return await Te(c,"create feedback config"),c})).json()}async*listFeedbackConfigs(e={}){const{feedbackKeys:n,nameContains:a,limit:s}=e,o=new URLSearchParams;n&&n.forEach(c=>{o.append("key",c)}),a&&o.append("name_contains",a),o.append("limit",(s!==void 0?Math.min(s,100):100).toString());let u=0;for await(const c of this._getPaginated("/feedback-configs",o))if(yield*c,u+=c.length,s!==void 0&&u>=s)break}async updateFeedbackConfig(e,n={}){const{feedbackConfig:a,isLowerScoreBetter:s}=n,o={feedback_key:e};return a!==void 0&&(o.feedback_config=a),s!==void 0&&(o.is_lower_score_better=s),(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)});return await Te(c,"update feedback config"),c})).json()}async deleteFeedbackConfig(e){const n=new URLSearchParams({feedback_key:e});await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/feedback-configs?${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"delete feedback config",!0),a})}async*listAnnotationQueues(e={}){const{queueIds:n,name:a,nameContains:s,limit:o}=e,u=new URLSearchParams;n&&n.forEach((f,h)=>{Me(f,`queueIds[${h}]`),u.append("ids",f)}),a&&u.append("name",a),s&&u.append("name_contains",s),u.append("limit",(o!==void 0?Math.min(o,100):100).toString());let c=0;for await(const f of this._getPaginated("/annotation-queues",u))if(yield*f,c++,o!==void 0&&c>=o)break}async createAnnotationQueue(e){const{name:n,description:a,queueId:s,rubricInstructions:o,rubricItems:u}=e,c={name:n,description:a,id:s||hs(),rubric_instructions:o,rubric_items:u},f=JSON.stringify(Object.fromEntries(Object.entries(c).filter(([m,y])=>y!==void 0)));return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(m,"create annotation queue"),m})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"read annotation queue"),a})).json()}async updateAnnotationQueue(e,n){const{name:a,description:s,rubricInstructions:o,rubricItems:u}=n,c={};a!==void 0&&(c.name=a),s!==void 0&&(c.description=s),o!==void 0&&(c.rubric_instructions=o),u!==void 0&&(c.rubric_items=u);const f=JSON.stringify(c);await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(h,"update annotation queue",!0),h})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const a=JSON.stringify(n.map((s,o)=>Me(s,`runIds[${o}]`).toString()));await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Te(s,"add runs to annotation queue",!0),s})}async getRunFromAnnotationQueue(e,n){const a=`/annotation-queues/${Me(e,"queueId")}/run`;return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${a}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(o,"get run from annotation queue"),o})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/runs/${Me(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"delete run from annotation queue",!0),a})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"get size from annotation queue"),a})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const a=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${a.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const a=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"get latest commit hash"),s})).json();if(a.commits.length!==0)return a.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[a,s,o]=xi(e),u=JSON.stringify({like:n});return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/likes/${a}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,`${n?"like":"unlike"} prompt`),f})).json()}async _getPromptUrl(e){const[n,a,s]=xi(e);if(await this._currentTenantIsOwner(n)){const o=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${a}/${s.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${a}?organizationId=${o.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${n}/${a}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${a}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,a=>a.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const a of this._getPaginated("/repos",n,s=>s.repos))yield*a}async getPrompt(e){const[n,a,s]=xi(e),o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/repos/${n}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(c==null?void 0:c.status)===404?null:(await Te(c,"get prompt"),c)}),u=await(o==null?void 0:o.json());return u!=null&&u.repo?u.repo:null}async createPrompt(e,n){const a=await this._getSettings();if(n!=null&&n.isPublic&&!a.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,o,u]=xi(e);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const c={repo_handle:o,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},f=JSON.stringify(c),h=await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(y,"create prompt"),y}),{repo:m}=await h.json();return m}async createCommit(e,n,a){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[s,o,u]=xi(e),c=(a==null?void 0:a.parentCommitHash)==="latest"||!(a!=null&&a.parentCommitHash)?await this._getLatestCommitHash(`${s}/${o}`):a==null?void 0:a.parentCommitHash,f={manifest:JSON.parse(JSON.stringify(n)),parent_commit:c},h=JSON.stringify(f),y=await(await this.caller.call(async()=>{const v=await this._fetch(`${this.apiUrl}/commits/${s}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(v,"create commit"),v})).json();return this._getPromptUrl(`${s}/${o}${y.commit_hash?`:${y.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var u;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const a=new FormData;for(const c of n){const f=c.id,h={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},m=Rn(h,`Serializing body for example with id: ${f}`),y=new Blob([m],{type:"application/json"});if(a.append(f,y),c.inputs){const v=Rn(c.inputs,`Serializing inputs for example with id: ${f}`),_=new Blob([v],{type:"application/json"});a.append(`${f}.inputs`,_)}if(c.outputs){const v=Rn(c.outputs,`Serializing outputs whle updating example with id: ${f}`),_=new Blob([v],{type:"application/json"});a.append(`${f}.outputs`,_)}if(c.attachments)for(const[v,_]of Object.entries(c.attachments)){let x,w;Array.isArray(_)?[x,w]=_:(x=_.mimeType,w=_.data);const A=new Blob([w],{type:`${x}; length=${w.byteLength}`});a.append(`${f}.attachment.${v}`,A)}if(c.attachments_operations){const v=Rn(c.attachments_operations,`Serializing attachments while updating example with id: ${f}`),_=new Blob([v],{type:"application/json"});a.append(`${f}.attachments_operations`,_)}}const s=e??((u=n[0])==null?void 0:u.dataset_id);return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${s}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Te(c,"update examples"),c})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const a=new FormData;for(const o of n){const u=(o.id??hs()).toString(),c={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},f=Rn(c,`Serializing body for uploaded example with id: ${u}`),h=new Blob([f],{type:"application/json"});if(a.append(u,h),o.inputs){const m=Rn(o.inputs,`Serializing inputs for uploaded example with id: ${u}`),y=new Blob([m],{type:"application/json"});a.append(`${u}.inputs`,y)}if(o.outputs){const m=Rn(o.outputs,`Serializing outputs for uploaded example with id: ${u}`),y=new Blob([m],{type:"application/json"});a.append(`${u}.outputs`,y)}if(o.attachments)for(const[m,y]of Object.entries(o.attachments)){let v,_;Array.isArray(y)?[v,_]=y:(v=y.mimeType,_=y.data);const x=new Blob([_],{type:`${v}; length=${_.byteLength}`});a.append(`${u}.attachment.${m}`,x)}}return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Te(o,"upload examples"),o})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[a,s]=xi(e);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("update a prompt",a);const o={};if((n==null?void 0:n.description)!==void 0&&(o.description=n.description),(n==null?void 0:n.readme)!==void 0&&(o.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(o.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(o.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(o.is_archived=n.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const u=JSON.stringify(o);return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/repos/${a}/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"update prompt"),f})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,a,s]=xi(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/repos/${n}/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,"delete prompt"),u})).json()}_getPromptCacheKey(e,n){return`${e}${n?":with_model":""}`}async _fetchPromptFromApi(e,n){const[a,s,o]=xi(e),c=await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/commits/${a}/${s}/${o}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(f,"pull prompt commit"),f})).json();return{owner:a,repo:s,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async pullPromptCommit(e,n){const a=this._fetchPromptFromApi.bind(this,e,n);if(!(n!=null&&n.skipCache)&&this._promptCache){const s=this._getPromptCacheKey(e,n==null?void 0:n.includeModel),o=this._promptCache.get(s,a);if(o)return o;const u=await a();return this._promptCache.set(s,u,a),u}return this._fetchPromptFromApi(e,n)}async _pullPrompt(e,n){const a=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel,skipCache:n==null?void 0:n.skipCache});return JSON.stringify(a.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(s=>s!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:a=this.apiUrl,datasetName:s}=n,[o,u]=this.parseTokenOrUrl(e,a),c=new pl({apiUrl:o,apiKey:"placeholder"}),f=await c.readSharedDataset(u),h=s||f.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const m=await c.listSharedExamples(u),y=await this.createDataset(h,{description:f.description,dataType:f.data_type||"kv",inputsSchema:f.inputs_schema_definition??void 0,outputsSchema:f.outputs_schema_definition??void 0});try{await this.createExamples({inputs:m.map(v=>v.inputs),outputs:m.flatMap(v=>v.outputs?[v.outputs]:[]),datasetId:y.id})}catch(v){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),v}}parseTokenOrUrl(e,n,a=2,s="dataset"){try{return Me(e),[n,e]}catch{}try{const u=new URL(e).pathname.split("/").filter(c=>c!=="");if(u.length>=a){const c=u[u.length-a];return[n,c]}else throw new Error(`Invalid public ${s} URL: ${e}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${e}`)}}cleanup(){this._promptCache&&this._promptCache.stop()}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await new Promise(a=>setTimeout(a,1)),await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:a})=>a),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=H6())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function uE(t){return"dataset_id"in t||"dataset_name"in t}const W8=t=>!!["TRACING_V2","TRACING"].find(n=>sn(n)==="true"),Di=Symbol.for("lc:context_variables"),lp=Symbol.for("langsmith:replica_trace_roots");function cE(t,e){if(Di in t)return t[Di][e]}function eP(t,e,n){const a=Di in t?t[Di]:{};a[e]=n,t[Di]=a}const tP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function dE(t){const n=Object.keys(t).sort().map(a=>`${a}:${t[a]??""}`).join("|");return vD(n,tP)}function nP(t){return t.replace(/[-:.]/g,"")}function e2(t,e=1){const n=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${n}Z`}function t2(t,e,n=1){const a=e2(t,n);return{dottedOrder:nP(a)+e,microsecondPrecisionDatestring:a}}const aP=new Set(["projectName","updates","reroot"]);function iP(t){const e={};for(const n of Object.keys(t))aP.has(n)&&(e[n]=t[n]);return e}class Fc{constructor(e,n,a,s){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=a,this.replicas=s}static fromHeader(e){const n=e.split(",");let a={},s=[],o,u;for(const c of n){const[f,h]=c.split("="),m=decodeURIComponent(h);f==="langsmith-metadata"?a=JSON.parse(m):f==="langsmith-tags"?s=m.split(","):f==="langsmith-project"?o=m:f==="langsmith-replicas"&&(u=JSON.parse(m).map(v=>Array.isArray(v)?v:iP(v)))}return new Fc(a,s,o,u)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class vn{constructor(e){var c;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),sP(e)){Object.assign(this,{...e});return}const n=vn.getDefaultConfig(),{metadata:a,...s}=e,o=s.client??vn.getSharedClient(),u={...a,...(c=s==null?void 0:s.extra)==null?void 0:c.metadata};if(s.extra={...s.extra,metadata:u},"id"in s&&s.id==null&&delete s.id,Object.assign(this,{...n,...s,client:o}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=e2(this.start_time,this.execution_order)),this.id||(this.id=b6(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=uP(this.replicas),!this.dotted_order){const{dottedOrder:f}=t2(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+f:this.dotted_order=f}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){const e=Date.now();return{run_type:"chain",project_name:IA(),child_runs:[],api_url:Ta("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Ta("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return vn.sharedClient||(vn.sharedClient=new pl),vn.sharedClient}createChild(e){var m,y,v,_,x,w,A;const n=this.child_execution_order+1,a=(m=this.replicas)==null?void 0:m.map(T=>{const{reroot:k,...R}=T;return R}),s=e.replicas??a,o=new vn({...e,parent_run:this,project_name:this.project_name,replicas:s,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});Di in this&&(o[Di]=this[Di]);const u=Symbol.for("lc:child_config"),c=((y=e.extra)==null?void 0:y[u])??this.extra[u];if(oP(c)){const T={...c},k=rP(T.callbacks)?(_=(v=T.callbacks).copy)==null?void 0:_.call(v):void 0;k&&(Object.assign(k,{_parentRunId:o.id}),(A=(w=(x=k.handlers)==null?void 0:x.find(n2))==null?void 0:w.updateFromRunTree)==null||A.call(w,o),T.callbacks=k),o.extra[u]=T}const f=new Set;let h=this;for(;h!=null&&!f.has(h.id);)f.add(h.id),h.child_execution_order=Math.max(h.child_execution_order,n),h=h.parent_run;return this.child_runs.push(o),o}async end(e,n,a=Date.now(),s){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??a,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(e,n,a=!0){var c,f;const s=e.extra??{};if(((c=s==null?void 0:s.runtime)==null?void 0:c.library)===void 0&&(s.runtime||(s.runtime={}),n))for(const[h,m]of Object.entries(n))s.runtime[h]||(s.runtime[h]=m);let o,u;return a?(u=((f=e.parent_run)==null?void 0:f.id)??e.parent_run_id,o=[]):(o=e.child_runs.map(h=>this._convertToCreate(h,n,a)),u=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:s,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:u,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,n){if(n.dotted_order){const a=n.dotted_order.split(".");let s=null;for(let o=0;o<a.length;o++)if(a[o].slice(-36)===e){s=o;break}if(s!==null){const o=a.slice(s+1);n.dotted_order=o.join("."),o.length>0?n.trace_id=o[0].slice(-36):n.trace_id=n.id}}n.parent_run_id===e&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(e,n){const a=cE(this,lp)??{};a[e]=n,eP(this,lp,a);for(const s of this.child_runs)s._setReplicaTraceRoot(e,n)}_remapForProject(e){const{projectName:n,runtimeEnv:a,excludeChildRuns:s=!0,reroot:o=!1,distributedParentId:u,apiUrl:c,apiKey:f,workspaceId:h}=e,m=this._convertToCreate(this,a,s);if(n===this.project_name)return{...m,session_name:n};if(o){if(u)this._sliceParentId(u,m);else if(m.parent_run_id=void 0,m.dotted_order){const k=m.dotted_order.split(".");k.length>0&&(m.dotted_order=k[k.length-1],m.trace_id=m.id)}const T=dE({projectName:n,apiUrl:c,apiKey:f,workspaceId:h});this._setReplicaTraceRoot(T,m.id)}let y;if(!o){const T=cE(this,lp)??{},k=dE({projectName:n,apiUrl:c,apiKey:f,workspaceId:h});if(y=T[k],y&&(m.trace_id=y,m.dotted_order)){const R=m.dotted_order.split(".");let z=null;for(let P=0;P<R.length;P++)if(R[P].slice(-36)===y){z=P;break}if(z!==null){const P=R.slice(z);m.dotted_order=P.join(".")}}}const v=m.id,_=ac(v,n);let x;m.trace_id?x=ac(m.trace_id,n):x=_;let w;m.parent_run_id&&(w=ac(m.parent_run_id,n));let A;return m.dotted_order&&(A=m.dotted_order.split(".").map(R=>{const z=R.slice(-36),P=ac(z,n);return R.slice(0,-36)+P}).join(".")),{...m,id:_,trace_id:x,parent_run_id:w,dotted_order:A,session_name:n}}async postRun(e=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{const n=HA();if(this.replicas&&this.replicas.length>0)for(const{projectName:a,apiKey:s,apiUrl:o,workspaceId:u,reroot:c}of this.replicas){const f=this._remapForProject({projectName:a??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:c,distributedParentId:this.distributedParentId,apiUrl:o,apiKey:s,workspaceId:u});await this.client.createRun(f,{apiKey:s,apiUrl:o,workspaceId:u})}else{const a=this._convertToCreate(this,n,e);await this.client.createRun(a)}if(!e){Tc("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const a of this.child_runs)await a.postRun(!1)}this.child_runs=[]}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:a,apiKey:s,apiUrl:o,workspaceId:u,updates:c,reroot:f}of this.replicas){const h=this._remapForProject({projectName:a??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:f,distributedParentId:this.distributedParentId,apiUrl:o,apiKey:s,workspaceId:u}),m={id:h.id,name:h.name,run_type:h.run_type,start_time:h.start_time,outputs:h.outputs,error:h.error,parent_run_id:h.parent_run_id,session_name:h.session_name,reference_example_id:h.reference_example_id,end_time:h.end_time,dotted_order:h.dotted_order,trace_id:h.trace_id,events:h.events,tags:h.tags,extra:h.extra,attachments:this.attachments,...c};e!=null&&e.excludeInputs||(m.inputs=h.inputs),await this.client.updateRun(h.id,m,{apiKey:s,apiUrl:o,workspaceId:u})}else try{const a={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(a.inputs=this.inputs),await this.client.updateRun(this.id,a)}catch(a){console.error(`Error in patchRun for run ${this.id}`,a)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var h,m,y,v;const a=e==null?void 0:e.callbacks;let s,o,u,c=W8();if(a){const _=((h=a==null?void 0:a.getParentRunId)==null?void 0:h.call(a))??"",x=(m=a==null?void 0:a.handlers)==null?void 0:m.find(w=>(w==null?void 0:w.name)=="langchain_tracer");s=(y=x==null?void 0:x.getRun)==null?void 0:y.call(x,_),o=x==null?void 0:x.projectName,u=x==null?void 0:x.client,c=c||!!x}return s?new vn({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:u,tracingEnabled:c,project_name:o,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(v=s==null?void 0:s.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new vn({...n,client:u,tracingEnabled:c,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var m;const a="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,s=a["langsmith-trace"];if(!s||typeof s!="string")return;const o=s.trim(),u=o.split(".").map(y=>{const[v,_]=y.split("Z");return{strTime:v,time:Date.parse(v+"Z"),uuid:_}}),c=u[0].uuid,f={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(m=u.at(-1))==null?void 0:m.uuid,trace_id:c,dotted_order:o};if(a.baggage&&typeof a.baggage=="string"){const y=Fc.fromHeader(a.baggage);f.metadata=y.metadata,f.tags=y.tags,f.project_name=y.project_name,f.replicas=y.replicas}const h=new vn(f);return h.distributedParentId=h.id,h}toHeaders(e){var a;const n={"langsmith-trace":this.dotted_order,baggage:new Fc((a=this.extra)==null?void 0:a.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[s,o]of Object.entries(n))e.set(s,o);return n}}Object.defineProperty(vn,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function sP(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function n2(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function fE(t){return Array.isArray(t)&&t.some(e=>n2(e))}function rP(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function oP(t){const e=t==null?void 0:t.callbacks;return t!=null&&typeof e=="object"&&(fE(e==null?void 0:e.handlers)||fE(e))}function lP(){const t=Ta("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const a of e){if(typeof a!="object"||a===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof a}`);continue}if(typeof a.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof a.api_url}`);continue}if(typeof a.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof a.api_key}`);continue}n.push({apiUrl:a.api_url.replace(/\/$/,""),apiKey:a.api_key})}return n}else if(typeof e=="object"&&e!==null){cP(e);const n=[];for(const[a,s]of Object.entries(e)){const o=a.replace(/\/$/,"");if(typeof s=="string")n.push({apiUrl:o,apiKey:s});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${a}: expected string, got ${typeof s}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(U8(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function uP(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):lP()}function cP(t){if(Object.keys(t).length>0&&sn("ENDPOINT"))throw new $8}const dP=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function og(t,e){if(t)return new vn({...t,start_time:t._serialized_start_time??t.start_time,parent_run:og(e),child_runs:t.child_runs.map(n=>og(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:oD()},tracingEnabled:!1})}function up(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Bo(t){return typeof t._addRunToRunMap=="function"}var Cl=class extends od{constructor(e){super(...arguments);L(this,"runMap",new Map);L(this,"runTreeMap",new Map);L(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?dP(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:a}=t2(new Date(e.start_time).getTime(),e.id,e.execution_order),s={...e},o=this.getRunById(s.parent_run_id);if(s.parent_run_id!==void 0?o?(this._addChildRun(o,s),o.child_execution_order=Math.max(o.child_execution_order,s.child_execution_order),s.trace_id=o.trace_id,o.dotted_order!==void 0&&(s.dotted_order=[o.dotted_order,n].join("."),s._serialized_start_time=a)):s.parent_run_id=void 0:(s.trace_id=s.id,s.dotted_order=n,s._serialized_start_time=a),this.usesRunTreeMap){const u=og(s,o);u!==void 0&&this.runTreeMap.set(s.id,u)}else this.runMap.set(s.id,s);return s}async _endTrace(e){var a;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((a=this.onRunUpdate)==null?void 0:a.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,a,s,o,u,c,f){const h=this._getExecutionOrder(s),m=Date.now(),y=c?{...o,metadata:c}:o,v={id:a,name:f??e.id[e.id.length-1],parent_run_id:s,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{prompts:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:y??{},tags:u||[]};return this._addRunToRunMap(v)}async handleLLMStart(e,n,a,s,o,u,c,f){var m,y;const h=this.getRunById(a)??this._createRunForLLMStart(e,n,a,s,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}_createRunForChatModelStart(e,n,a,s,o,u,c,f){const h=this._getExecutionOrder(s),m=Date.now(),y=c?{...o,metadata:c}:o,v={id:a,name:f??e.id[e.id.length-1],parent_run_id:s,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{messages:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:y??{},tags:u||[]};return this._addRunToRunMap(v)}async handleChatModelStart(e,n,a,s,o,u,c,f){var m,y;const h=this.getRunById(a)??this._createRunForChatModelStart(e,n,a,s,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}async handleLLMEnd(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.outputs=e,u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...o},await((c=this.onLLMEnd)==null?void 0:c.call(this,u)),await this._endTrace(u),u}async handleLLMError(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...o},await((c=this.onLLMError)==null?void 0:c.call(this,u)),await this._endTrace(u),u}_createRunForChainStart(e,n,a,s,o,u,c,f,h){const m=this._getExecutionOrder(s),y=Date.now(),v={id:a,name:f??e.id[e.id.length-1],parent_run_id:s,start_time:y,serialized:e,events:[{name:"start",time:new Date(y).toISOString()}],inputs:n,execution_order:m,child_execution_order:m,run_type:c??"chain",child_runs:[],extra:u?{...h,metadata:u}:{...h},tags:o||[]};return this._addRunToRunMap(v)}async handleChainStart(e,n,a,s,o,u,c,f){var m,y;const h=this.getRunById(a)??this._createRunForChainStart(e,n,a,s,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((y=this.onChainStart)==null?void 0:y.call(this,h)),h}async handleChainEnd(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.outputs=up(e,"output"),u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(u.inputs=up(o.inputs,"input")),await((c=this.onChainEnd)==null?void 0:c.call(this,u)),await this._endTrace(u),u}async handleChainError(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(u.inputs=up(o.inputs,"input")),await((c=this.onChainError)==null?void 0:c.call(this,u)),await this._endTrace(u),u}_createRunForToolStart(e,n,a,s,o,u,c){const f=this._getExecutionOrder(s),h=Date.now(),m={id:a,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{input:n},execution_order:f,child_execution_order:f,run_type:"tool",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleToolStart(e,n,a,s,o,u,c){var h,m;const f=this.getRunById(a)??this._createRunForToolStart(e,n,a,s,o,u,c);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onToolStart)==null?void 0:m.call(this,f)),f}async handleToolEnd(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.outputs={output:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleToolError(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleAgentAction(e,n){var o;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="chain")return;const s=a;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,a))}async handleAgentEnd(e,n){var s;const a=this.getRunById(n);!a||(a==null?void 0:a.run_type)!=="chain"||(a.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,a)))}_createRunForRetrieverStart(e,n,a,s,o,u,c){const f=this._getExecutionOrder(s),h=Date.now(),m={id:a,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{query:n},execution_order:f,child_execution_order:f,run_type:"retriever",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleRetrieverStart(e,n,a,s,o,u,c){var h,m;const f=this.getRunById(a)??this._createRunForRetrieverStart(e,n,a,s,o,u,c);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onRetrieverStart)==null?void 0:m.call(this,f)),f}async handleRetrieverEnd(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.outputs={documents:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleRetrieverError(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleText(e,n){var s;const a=this.getRunById(n);!a||(a==null?void 0:a.run_type)!=="chain"||(a.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,a)))}async handleLLMNewToken(e,n,a,s,o,u){var f;const c=this.getRunById(a);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return c.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:u==null?void 0:u.chunk}}),await((f=this.onLLMNewToken)==null?void 0:f.call(this,c,e,{chunk:u==null?void 0:u.chunk})),c}};const cp=10,hE=(t=0)=>e=>`\x1B[${e+t}m`,mE=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,pE=(t=0)=>(e,n,a)=>`\x1B[${38+t};2;${e};${n};${a}m`,_t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(_t.modifier);const fP=Object.keys(_t.color),hP=Object.keys(_t.bgColor);[...fP,...hP];function mP(){const t=new Map;for(const[e,n]of Object.entries(_t)){for(const[a,s]of Object.entries(n))_t[a]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[a]=_t[a],t.set(s[0],s[1]);Object.defineProperty(_t,e,{value:n,enumerable:!1})}return Object.defineProperty(_t,"codes",{value:t,enumerable:!1}),_t.color.close="\x1B[39m",_t.bgColor.close="\x1B[49m",_t.color.ansi=hE(),_t.color.ansi256=mE(),_t.color.ansi16m=pE(),_t.bgColor.ansi=hE(cp),_t.bgColor.ansi256=mE(cp),_t.bgColor.ansi16m=pE(cp),Object.defineProperties(_t,{rgbToAnsi256:{value(e,n,a){return e===n&&n===a?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(a/255*5)},enumerable:!1},hexToRgb:{value(e){const n=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!n)return[0,0,0];let[a]=n;a.length===3&&(a=[...a].map(o=>o+o).join(""));const s=Number.parseInt(a,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:e=>_t.rgbToAnsi256(..._t.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let n,a,s;if(e>=232)n=((e-232)*10+8)/255,a=n,s=n;else{e-=16;const c=e%36;n=Math.floor(e/36)/5,a=Math.floor(c/6)/5,s=c%6/5}const o=Math.max(n,a,s)*2;if(o===0)return 30;let u=30+(Math.round(s)<<2|Math.round(a)<<1|Math.round(n));return o===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(e,n,a)=>_t.ansi256ToAnsi(_t.rgbToAnsi256(e,n,a)),enumerable:!1},hexToAnsi:{value:e=>_t.ansi256ToAnsi(_t.hexToAnsi256(e)),enumerable:!1}}),_t}const a2=mP();function tn(t,e){return`${t.open}${e}${t.close}`}function Gn(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function gE(t){return typeof t=="string"?t.trim():t==null?t:Gn(t,t.toString())}function Ei(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:yn}=a2;var yE=class extends Cl{constructor(){super(...arguments);L(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let a=e;for(;a.parent_run_id;){const s=this.runMap.get(a.parent_run_id);if(s)n.push(s),a=s;else break}return n}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((a,s,o)=>{const u=`${a.execution_order}:${a.run_type}:${a.name}`;return s===o.length-1?tn(a2.bold,u):u}).join(" > ");return tn(yn.grey,n)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.green,"[chain/start]")} [${n}] Entering Chain run with input: ${Gn(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.cyan,"[chain/end]")} [${n}] [${Ei(e)}] Exiting Chain run with output: ${Gn(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.red,"[chain/error]")} [${n}] [${Ei(e)}] Chain run errored with error: ${Gn(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),a="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${tn(yn.green,"[llm/start]")} [${n}] Entering LLM run with input: ${Gn(a,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.cyan,"[llm/end]")} [${n}] [${Ei(e)}] Exiting LLM run with output: ${Gn(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.red,"[llm/error]")} [${n}] [${Ei(e)}] LLM run errored with error: ${Gn(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.green,"[tool/start]")} [${n}] Entering Tool run with input: "${gE(e.inputs.input)}"`)}onToolEnd(e){var a;const n=this.getBreadcrumbs(e);console.log(`${tn(yn.cyan,"[tool/end]")} [${n}] [${Ei(e)}] Exiting Tool run with output: "${gE((a=e.outputs)==null?void 0:a.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.red,"[tool/error]")} [${n}] [${Ei(e)}] Tool run errored with error: ${Gn(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${Gn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.cyan,"[retriever/end]")} [${n}] [${Ei(e)}] Exiting Retriever run with output: ${Gn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(yn.red,"[retriever/error]")} [${n}] [${Ei(e)}] Retriever run errored with error: ${Gn(e.error,"[error]")}`)}onAgentAction(e){const n=e,a=this.getBreadcrumbs(e);console.log(`${tn(yn.blue,"[agent/action]")} [${a}] Agent selected action: ${Gn(n.actions[n.actions.length-1],"[action]")}`)}};let dp;const pP=()=>(dp===void 0&&(dp=new pl(Li("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{})),dp);let gP=class{getStore(){}run(e,n){return n()}};const fp=Symbol.for("ls:tracing_async_local_storage"),yP=new gP;let vP=class{getInstance(){return globalThis[fp]??yP}initializeGlobalInstance(e){globalThis[fp]===void 0&&(globalThis[fp]=e)}};const _P=new vP;function bP(t=!1){const e=_P.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function _y(t){return typeof t=="function"&&"langsmith:traceable"in t}function wP(t){let e;for(const n of t)for(const a of n)Mr.isInstance(a.message)&&a.message.usage_metadata!==void 0&&(e=vA(e,a.message.usage_metadata));return e}var hp=class i2 extends Cl{constructor(n={}){super(n);L(this,"name","langchain_tracer");L(this,"projectName");L(this,"exampleId");L(this,"client");L(this,"replicas");L(this,"usesRunTreeMap",!0);const{exampleId:a,projectName:s,client:o,replicas:u}=n;this.projectName=s??IA(),this.replicas=u,this.exampleId=a,this.client=o??pP();const c=i2.getTraceableRunTree();c&&this.updateFromRunTree(c)}async persistRun(n){}async onRunCreate(n){var a,s;(a=n.extra)!=null&&a.lc_defers_inputs||await((s=this.getRunTreeWithTracingConfig(n.id))==null?void 0:s.postRun())}async onRunUpdate(n){var s;const a=this.getRunTreeWithTracingConfig(n.id);(s=n.extra)!=null&&s.lc_defers_inputs?await(a==null?void 0:a.postRun()):await(a==null?void 0:a.patchRun())}onLLMEnd(n){const a=n.outputs;if(a!=null&&a.generations){const s=wP(a.generations);if(s!==void 0){n.extra=n.extra??{};const o=n.extra.metadata??{};o.usage_metadata=s,n.extra.metadata=o}}}getRun(n){return this.runTreeMap.get(n)}updateFromRunTree(n){this.runTreeMap.set(n.id,n);let a=n;const s=new Set;for(;a.parent_run&&!(s.has(a.id)||(s.add(a.id),!a.parent_run));)a=a.parent_run;s.clear();const o=[a];for(;o.length>0;){const u=o.shift();!u||s.has(u.id)||(s.add(u.id),this.runTreeMap.set(u.id,u),u.child_runs&&o.push(...u.child_runs))}this.client=n.client??this.client,this.replicas=n.replicas??this.replicas,this.projectName=n.project_name??this.projectName,this.exampleId=n.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(n){const a=this.runTreeMap.get(n);if(a)return new vn({...a,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return bP(!0)}catch{return}}};let nl;function xP(){return new("default"in Fa?Fa.default:Fa)({autoStart:!0,concurrency:1})}function EP(){return typeof nl>"u"&&(nl=xP()),nl}async function Dt(t,e){if(e===!0){const n=ml();n!==void 0?await n.run(void 0,async()=>t()):await t()}else nl=EP(),nl.add(async()=>{const n=ml();n!==void 0?await n.run(void 0,async()=>t()):await t()})}const SP=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>Li(e)==="true");function s2(t){var n,a;const e=ml();if(e!==void 0)return(a=(n=e.getStore())==null?void 0:n[Sc])==null?void 0:a[t]}const TP=Symbol("lc:configure_hooks"),AP=()=>s2(TP)||[];var CP=class{setHandler(t){return this.setHandlers([t])}},hd=class{constructor(t,e,n,a,s,o,u,c){this.runId=t,this.handlers=e,this.inheritableHandlers=n,this.tags=a,this.inheritableTags=s,this.metadata=o,this.inheritableMetadata=u,this._parentRunId=c}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;try{await((n=e.handleText)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}async handleCustomEvent(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;try{await((u=o.handleCustomEvent)==null?void 0:u.call(o,t,e,this.runId,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}},NP=class extends hd{getChild(t){const e=new Ya(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw a}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${a}`),e.raiseError)throw t}},e.awaitHandlers)))}},vE=class extends hd{async handleLLMNewToken(t,e,n,a,s,o){await Promise.all(this.handlers.map(u=>Dt(async()=>{var c;if(!u.ignoreLLM)try{await((c=u.handleLLMNewToken)==null?void 0:c.call(u,t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMNewToken: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}async handleLLMError(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreLLM)try{await((u=o.handleLLMError)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleLLMEnd(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreLLM)try{await((u=o.handleLLMEnd)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}},OP=class extends hd{getChild(t){const e=new Ya(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreChain)try{await((u=o.handleChainError)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleChainEnd(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreChain)try{await((u=o.handleChainEnd)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentAction)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}},RP=class extends hd{getChild(t){const e=new Ya(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}},Ya=class Fo extends CP{constructor(n,a){super();L(this,"handlers",[]);L(this,"inheritableHandlers",[]);L(this,"tags",[]);L(this,"inheritableTags",[]);L(this,"metadata",{});L(this,"inheritableMetadata",{});L(this,"name","callback_manager");L(this,"_parentRunId");this.handlers=(a==null?void 0:a.handlers)??this.handlers,this.inheritableHandlers=(a==null?void 0:a.inheritableHandlers)??this.inheritableHandlers,this.tags=(a==null?void 0:a.tags)??this.tags,this.inheritableTags=(a==null?void 0:a.inheritableTags)??this.inheritableTags,this.metadata=(a==null?void 0:a.metadata)??this.metadata,this.inheritableMetadata=(a==null?void 0:a.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=n}getParentRunId(){return this._parentRunId}async handleLLMStart(n,a,s=void 0,o=void 0,u=void 0,c=void 0,f=void 0,h=void 0){return Promise.all(a.map(async(m,y)=>{const v=y===0&&s?s:Ci();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return Bo(_)&&_._createRunForLLMStart(n,[m],v,this._parentRunId,u,this.tags,this.metadata,h),Dt(async()=>{var x;try{await((x=_.handleLLMStart)==null?void 0:x.call(_,n,[m],v,this._parentRunId,u,this.tags,this.metadata,h))}catch(w){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${w}`),_.raiseError)throw w}},_.awaitHandlers)})),new vE(v,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(n,a,s=void 0,o=void 0,u=void 0,c=void 0,f=void 0,h=void 0){return Promise.all(a.map(async(m,y)=>{const v=y===0&&s?s:Ci();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return Bo(_)&&_._createRunForChatModelStart(n,[m],v,this._parentRunId,u,this.tags,this.metadata,h),Dt(async()=>{var x,w;try{if(_.handleChatModelStart)await((x=_.handleChatModelStart)==null?void 0:x.call(_,n,[m],v,this._parentRunId,u,this.tags,this.metadata,h));else if(_.handleLLMStart){const A=NA(m);await((w=_.handleLLMStart)==null?void 0:w.call(_,n,[A],v,this._parentRunId,u,this.tags,this.metadata,h))}}catch(A){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${A}`),_.raiseError)throw A}},_.awaitHandlers)})),new vE(v,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(n,a,s=Ci(),o=void 0,u=void 0,c=void 0,f=void 0,h=void 0,m=void 0){return await Promise.all(this.handlers.map(y=>{if(!y.ignoreChain)return Bo(y)&&y._createRunForChainStart(n,a,s,this._parentRunId,this.tags,this.metadata,o,f,m),Dt(async()=>{var v;try{await((v=y.handleChainStart)==null?void 0:v.call(y,n,a,s,this._parentRunId,this.tags,this.metadata,o,f,m))}catch(_){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleChainStart: ${_}`),y.raiseError)throw _}},y.awaitHandlers)})),new OP(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(n,a,s=Ci(),o=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreAgent)return Bo(h)&&h._createRunForToolStart(n,a,s,this._parentRunId,this.tags,this.metadata,f),Dt(async()=>{var m;try{await((m=h.handleToolStart)==null?void 0:m.call(h,n,a,s,this._parentRunId,this.tags,this.metadata,f))}catch(y){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleToolStart: ${y}`),h.raiseError)throw y}},h.awaitHandlers)})),new RP(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(n,a,s=Ci(),o=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreRetriever)return Bo(h)&&h._createRunForRetrieverStart(n,a,s,this._parentRunId,this.tags,this.metadata,f),Dt(async()=>{var m;try{await((m=h.handleRetrieverStart)==null?void 0:m.call(h,n,a,s,this._parentRunId,this.tags,this.metadata,f))}catch(y){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleRetrieverStart: ${y}`),h.raiseError)throw y}},h.awaitHandlers)})),new NP(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(n,a,s,o,u){await Promise.all(this.handlers.map(c=>Dt(async()=>{var f;if(!c.ignoreCustomEvent)try{await((f=c.handleCustomEvent)==null?void 0:f.call(c,n,a,s,this.tags,this.metadata))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}addHandler(n,a=!0){this.handlers.push(n),a&&this.inheritableHandlers.push(n)}removeHandler(n){this.handlers=this.handlers.filter(a=>a!==n),this.inheritableHandlers=this.inheritableHandlers.filter(a=>a!==n)}setHandlers(n,a=!0){this.handlers=[],this.inheritableHandlers=[];for(const s of n)this.addHandler(s,a)}addTags(n,a=!0){this.removeTags(n),this.tags.push(...n),a&&this.inheritableTags.push(...n)}removeTags(n){this.tags=this.tags.filter(a=>!n.includes(a)),this.inheritableTags=this.inheritableTags.filter(a=>!n.includes(a))}addMetadata(n,a=!0){this.metadata={...this.metadata,...n},a&&(this.inheritableMetadata={...this.inheritableMetadata,...n})}removeMetadata(n){for(const a of Object.keys(n))delete this.metadata[a],delete this.inheritableMetadata[a]}copy(n=[],a=!0){const s=new Fo(this._parentRunId);for(const o of this.handlers){const u=this.inheritableHandlers.includes(o);s.addHandler(o,u)}for(const o of this.tags){const u=this.inheritableTags.includes(o);s.addTags([o],u)}for(const o of Object.keys(this.metadata)){const u=Object.keys(this.inheritableMetadata).includes(o);s.addMetadata({[o]:this.metadata[o]},u)}for(const o of n)s.handlers.filter(u=>u.name==="console_callback_handler").some(u=>u.name===o.name)||s.addHandler(o,a);return s}static fromHandlers(n){class a extends od{constructor(){super();L(this,"name",Ci());Object.assign(this,n)}}const s=new this;return s.addHandler(new a),s}static configure(n,a,s,o,u,c,f){return this._configureSync(n,a,s,o,u,c,f)}static _configureSync(n,a,s,o,u,c,f){var _,x;let h;(n||a)&&(Array.isArray(n)||!n?(h=new Fo,h.setHandlers((n==null?void 0:n.map(Yc))??[],!0)):h=n,h=h.copy(Array.isArray(a)?a.map(Yc):a==null?void 0:a.handlers,!1));const m=Li("LANGCHAIN_VERBOSE")==="true"||(f==null?void 0:f.verbose),y=((_=hp.getTraceableRunTree())==null?void 0:_.tracingEnabled)??SP(),v=y||(Li("LANGCHAIN_TRACING")??!1);if(m||v){if(h||(h=new Fo),m&&!h.handlers.some(w=>w.name===yE.prototype.name)){const w=new yE;h.addHandler(w,!0)}if(v&&!h.handlers.some(w=>w.name==="langchain_tracer")&&y){const w=new hp;h.addHandler(w,!0)}if(y){const w=hp.getTraceableRunTree();w&&h._parentRunId===void 0&&(h._parentRunId=w.id,(x=h.handlers.find(A=>A.name==="langchain_tracer"))==null||x.updateFromRunTree(w))}}for(const{contextVar:w,inheritable:A=!0,handlerClass:T,envVar:k}of AP()){const R=k&&Li(k)==="true"&&T;let z;const P=w!==void 0?s2(w):void 0;P&&wD(P)?z=P:R&&(z=new T({})),z!==void 0&&(h||(h=new Fo),h.handlers.some(Y=>Y.name===z.name)||h.addHandler(z,A))}return(s||o)&&h&&(h.addTags(s??[]),h.addTags(o??[],!1)),(u||c)&&h&&(h.addMetadata(u??{}),h.addMetadata(c??{},!1)),h}};function Yc(t){return"name"in t?t:od.fromMethods(t)}var kP=class{getStore(){}run(t,e){return e()}enterWith(t){}};const IP=new kP,_E=Symbol.for("lc:child_config");var jP=class{getInstance(){return ml()??IP}getRunnableConfig(){var t,e;return(e=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:e[_E]}runWithConfig(t,e,n){var h;const a=Ya._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),s=this.getInstance(),o=s.getStore(),u=a==null?void 0:a.getParentRunId(),c=(h=a==null?void 0:a.handlers)==null?void 0:h.find(m=>(m==null?void 0:m.name)==="langchain_tracer");let f;return c&&u?f=c.getRunTreeWithTracingConfig(u):n||(f=new vn({name:"<runnable_lambda>",tracingEnabled:!1})),f&&(f.extra={...f.extra,[_E]:t}),o!==void 0&&o[Sc]!==void 0&&(f===void 0&&(f={}),f[Sc]=o[Sc]),s.run(f,e)}initializeGlobalInstance(t){ml()===void 0&&tD(t)}};const Vi=new jP,mp=25;async function ca(t){return Ya._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function bE(...t){const e={};for(const n of t.filter(a=>!!a))for(const a of Object.keys(n))if(a==="metadata")e[a]={...e[a],...n[a]};else if(a==="tags"){const s=e[a]??[];e[a]=[...new Set(s.concat(n[a]??[]))]}else if(a==="configurable")e[a]={...e[a],...n[a]};else if(a==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(a==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(a==="callbacks"){const s=e.callbacks,o=n.callbacks;if(Array.isArray(o))if(!s)e.callbacks=o;else if(Array.isArray(s))e.callbacks=s.concat(o);else{const u=s.copy();for(const c of o)u.addHandler(Yc(c),!0);e.callbacks=u}else if(o)if(!s)e.callbacks=o;else if(Array.isArray(s)){const u=o.copy();for(const c of s)u.addHandler(Yc(c),!0);e.callbacks=u}else e.callbacks=new Ya(o._parentRunId,{handlers:s.handlers.concat(o.handlers),inheritableHandlers:s.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(o.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(o.inheritableTags))),metadata:{...s.metadata,...o.metadata}})}else{const s=a;e[s]=n[s]??e[s]}return e}const MP=new Set(["string","number","boolean"]);function it(t){var a;const e=Vi.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:s,runName:o,...u}=e;n=Object.entries(u).reduce((c,[f,h])=>(h!==void 0&&(c[f]=h),c),n)}if(t&&(n=Object.entries(t).reduce((s,[o,u])=>(u!==void 0&&(s[o]=u),s),n)),n!=null&&n.configurable)for(const s of Object.keys(n.configurable))MP.has(typeof n.configurable[s])&&!((a=n.metadata)!=null&&a[s])&&(n.metadata||(n.metadata={}),n.metadata[s]=n.configurable[s]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const s=n.timeout,o=AbortSignal.timeout(s);n.metadata||(n.metadata={}),n.metadata.timeoutMs===void 0&&(n.metadata.timeoutMs=s),n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,o])):n.signal=o,delete n.timeout}return n}function rn(t={},{callbacks:e,maxConcurrency:n,recursionLimit:a,runName:s,configurable:o,runId:u}={}){const c=it(t);return e!==void 0&&(delete c.runName,c.callbacks=e),a!==void 0&&(c.recursionLimit=a),n!==void 0&&(c.maxConcurrency=n),s!==void 0&&(c.runName=s),o!==void 0&&(c.configurable={...c.configurable,...o}),u!==void 0&&delete c.runId,c}function Dr(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function Hi(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(a=>{if(!(e!=null&&e.aborted))throw a}),new Promise((a,s)=>{n=()=>{s(Zc(e))},e.addEventListener("abort",n,{once:!0}),e.aborted&&s(Zc(e))})]).finally(()=>e.removeEventListener("abort",n))}function Zc(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var Aa=class lg extends ReadableStream{constructor(){super(...arguments);L(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const n=await this.reader.read();return n.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:n.value}}catch(n){throw this.reader.releaseLock(),n}}async return(){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}return{done:!0,value:void 0}}async throw(n){if(this.ensureReader(),this.locked){const a=this.reader.cancel();this.reader.releaseLock(),await a}throw n}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(n){const a=n.getReader();return new lg({start(s){return o();function o(){return a.read().then(({done:u,value:c})=>{if(u){s.close();return}return s.enqueue(c),o()})}},cancel(){a.releaseLock()}})}static fromAsyncGenerator(n){return new lg({async pull(a){const{value:s,done:o}=await n.next();o&&a.close(),a.enqueue(s)},async cancel(a){await n.return(a)}})}};function r2(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(s){for(;;)if(s.length===0){const o=await t.next();for(const u of n)u.push(o)}else{if(s[0].done)return;yield s.shift().value}})}function md(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[a,s]of Object.entries(e))a in n&&!Array.isArray(n[a])?n[a]=md(n[a],s):n[a]=s;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var Vr=class{constructor(t){L(this,"generator");L(this,"setup");L(this,"config");L(this,"signal");L(this,"firstResult");L(this,"firstResultUsed",!1);var e;this.generator=t.generator,this.config=t.config,this.signal=t.signal??((e=this.config)==null?void 0:e.signal),this.setup=new Promise((n,a)=>{Vi.runWithConfig(Dr(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,a):this.firstResult.then(s=>n(void 0),a)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?Vi.runWithConfig(Dr(this.config),this.signal?async()=>Hi(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function LP(t,e,n,a,...s){const o=new Vr({generator:e,startSetup:n,signal:a}),u=await o.setup;return{output:t(o,u,...s),setup:u}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const DP=Object.prototype.hasOwnProperty;function ug(t,e){return DP.call(t,e)}function cg(t){if(Array.isArray(t)){const n=new Array(t.length);for(let a=0;a<n.length;a++)n[a]=""+a;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)ug(t,n)&&e.push(n);return e}function oa(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function dg(t){let e=0;const n=t.length;let a;for(;e<n;){if(a=t.charCodeAt(e),a>=48&&a<=57){e++;continue}return!1}return!0}function fr(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function PP(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function fg(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,a=t.length;n<a;n++)if(fg(t[n]))return!0}else if(typeof t=="object"){const n=cg(t),a=n.length;for(var e=0;e<a;e++)if(fg(t[n[e]]))return!0}}return!1}function wE(t,e){const n=[t];for(const a in e){const s=typeof e[a]=="object"?JSON.stringify(e[a],null,2):e[a];typeof s<"u"&&n.push(`${a}: ${s}`)}return n.join(`
`)}var $P=class extends Error{constructor(t,e,n,a,s){super(wE(t,{name:e,index:n,operation:a,tree:s})),this.name=e,this.index=n,this.operation=a,this.tree=s,Object.setPrototypeOf(this,new.target.prototype),this.message=wE(t,{name:e,index:n,operation:a,tree:s})}},UP=_3({JsonPatchError:()=>St,_areEquals:()=>yl,applyOperation:()=>vs,applyPatch:()=>gl,applyReducer:()=>VP,deepClone:()=>zP,getValueByPointer:()=>Xc,validate:()=>o2,validator:()=>Kc});const St=$P,zP=oa,Tr={add:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var a=t[e];return delete t[e],{newDocument:n,removed:a}},replace:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var a=t[e];return t[e]=this.value,{newDocument:n,removed:a}},move:function(t,e,n){let a=Xc(n,this.path);a&&(a=oa(a));const s=vs(n,{op:"remove",path:this.from}).removed;return vs(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:a}},copy:function(t,e,n){const a=Xc(n,this.from);return vs(n,{op:"add",path:this.path,value:oa(a)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:yl(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var BP={add:function(t,e,n){return dg(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var a=t[e];return t[e]=this.value,{newDocument:n,removed:a}},move:Tr.move,copy:Tr.copy,test:Tr.test,_get:Tr._get};function Xc(t,e){if(e=="")return t;var n={op:"_get",path:e};return vs(t,n),n.value}function vs(t,e,n=!1,a=!0,s=!0,o=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):Kc(e,0)),e.path===""){let u={newDocument:t};if(e.op==="add")return u.newDocument=e.value,u;if(e.op==="replace")return u.newDocument=e.value,u.removed=t,u;if(e.op==="move"||e.op==="copy")return u.newDocument=Xc(t,e.from),e.op==="move"&&(u.removed=t),u;if(e.op==="test"){if(u.test=yl(t,e.value),u.test===!1)throw new St("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return u.newDocument=t,u}else{if(e.op==="remove")return u.removed=t,u.newDocument=null,u;if(e.op==="_get")return e.value=t,u;if(n)throw new St("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return u}}else{a||(t=oa(t));const u=(e.path||"").split("/");let c=t,f=1,h=u.length,m,y,v;for(typeof n=="function"?v=n:v=Kc;;){if(y=u[f],y&&y.indexOf("~")!=-1&&(y=PP(y)),s&&(y=="__proto__"||y=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&m===void 0&&(c[y]===void 0?m=u.slice(0,f).join("/"):f==h-1&&(m=e.path),m!==void 0&&v(e,0,t,m)),f++,Array.isArray(c)){if(y==="-")y=c.length;else{if(n&&!dg(y))throw new St("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);dg(y)&&(y=~~y)}if(f>=h){if(n&&e.op==="add"&&y>c.length)throw new St("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);const _=BP[e.op].call(e,c,y,t);if(_.test===!1)throw new St("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return _}}else if(f>=h){const _=Tr[e.op].call(e,c,y,t);if(_.test===!1)throw new St("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return _}if(c=c[y],n&&f<h&&(!c||typeof c!="object"))throw new St("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}}function gl(t,e,n,a=!0,s=!0){if(n&&!Array.isArray(e))throw new St("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");a||(t=oa(t));const o=new Array(e.length);for(let u=0,c=e.length;u<c;u++)o[u]=vs(t,e[u],n,!0,s,u),t=o[u].newDocument;return o.newDocument=t,o}function VP(t,e,n){const a=vs(t,e);if(a.test===!1)throw new St("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return a.newDocument}function Kc(t,e,n,a){if(typeof t!="object"||t===null||Array.isArray(t))throw new St("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Tr[t.op]){if(typeof t.path!="string")throw new St("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new St('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new St("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new St("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&fg(t.value))throw new St("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,o=a.split("/").length;if(s!==o+1&&s!==o)throw new St("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==a)throw new St("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var u=o2([{op:"_get",path:t.from,value:void 0}],n);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new St("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new St("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function o2(t,e,n){try{if(!Array.isArray(t))throw new St("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)gl(oa(e),oa(t),n||!0);else{n=n||Kc;for(var a=0;a<t.length;a++)n(t[a],a,e,void 0)}}catch(s){if(s instanceof St)return s;throw s}}function yl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),a=Array.isArray(e),s,o,u;if(n&&a){if(o=t.length,o!=e.length)return!1;for(s=o;s--!==0;)if(!yl(t[s],e[s]))return!1;return!0}if(n!=a)return!1;var c=Object.keys(t);if(o=c.length,o!==Object.keys(e).length)return!1;for(s=o;s--!==0;)if(!e.hasOwnProperty(c[s]))return!1;for(s=o;s--!==0;)if(u=c[s],!yl(t[u],e[u]))return!1;return!0}return t!==t&&e!==e}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2013-2021 Joachim Wester
* MIT license
*/function l2(t,e,n,a,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=cg(e),u=cg(t),c=!1,f=u.length-1;f>=0;f--){var h=u[f],m=t[h];if(ug(e,h)&&!(e[h]===void 0&&m!==void 0&&Array.isArray(e)===!1)){var y=e[h];typeof m=="object"&&m!=null&&typeof y=="object"&&y!=null&&Array.isArray(m)===Array.isArray(y)?l2(m,y,n,a+"/"+fr(h),s):m!==y&&(s&&n.push({op:"test",path:a+"/"+fr(h),value:oa(m)}),n.push({op:"replace",path:a+"/"+fr(h),value:oa(y)}))}else Array.isArray(t)===Array.isArray(e)?(s&&n.push({op:"test",path:a+"/"+fr(h),value:oa(m)}),n.push({op:"remove",path:a+"/"+fr(h)}),c=!0):(s&&n.push({op:"test",path:a,value:t}),n.push({op:"replace",path:a,value:e}))}if(!(!c&&o.length==u.length))for(var f=0;f<o.length;f++){var h=o[f];!ug(t,h)&&e[h]!==void 0&&n.push({op:"add",path:a+"/"+fr(h),value:oa(e[h])})}}}function HP(t,e,n=!1){var a=[];return l2(t,e,a,"",n),a}({...UP});var Ni=class{constructor(t){L(this,"ops");this.ops=t.ops??[]}concat(t){const e=this.ops.concat(t.ops),n=gl({},e);return new u2({ops:e,state:n[n.length-1].newDocument})}},u2=class hg extends Ni{constructor(n){super(n);L(this,"state");this.state=n.state}concat(n){const a=this.ops.concat(n.ops),s=gl(this.state,n.ops);return new hg({ops:a,state:s[s.length-1].newDocument})}static fromRunLogPatch(n){const a=gl({},n.ops);return new hg({ops:n.ops,state:a[a.length-1].newDocument})}};const GP=t=>t.name==="log_stream_tracer";async function xE(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function EE(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function qP(t){return t!==void 0&&t.message!==void 0}var SE=class extends Cl{constructor(e){super({_awaitHandler:!0,...e});L(this,"autoClose",!0);L(this,"includeNames");L(this,"includeTypes");L(this,"includeTags");L(this,"excludeNames");L(this,"excludeTypes");L(this,"excludeTags");L(this,"_schemaFormat","original");L(this,"rootId");L(this,"keyMapByRunId",{});L(this,"counterMapByRunName",{});L(this,"transformStream");L(this,"writer");L(this,"receiveStream");L(this,"name","log_stream_tracer");L(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Aa.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(a=a||n.find(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(a=a&&n.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),a}async*tapOutputIterable(e,n){for await(const a of n){if(e!==this.rootId){const s=this.keyMapByRunId[e];s&&await this.writer.write(new Ni({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:a}]}))}yield a}}async onRunCreate(e){var s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Ni({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const a={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(a.inputs=await xE(e,this._schemaFormat)),await this.writer.write(new Ni({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:a}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const a=[];this._schemaFormat==="streaming_events"&&a.push({op:"replace",path:`/logs/${n}/inputs`,value:await xE(e,this._schemaFormat)}),a.push({op:"add",path:`/logs/${n}/final_output`,value:await EE(e,this._schemaFormat)}),e.end_time!==void 0&&a.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const s=new Ni({ops:a});await this.writer.write(s)}finally{if(e.id===this.rootId){const n=new Ni({ops:[{op:"replace",path:"/final_output",value:await EE(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,a){const s=this.keyMapByRunId[e.id];if(s===void 0)return;const o=e.inputs.messages!==void 0;let u;o?qP(a==null?void 0:a.chunk)?u=a==null?void 0:a.chunk:u=new Tl({id:`run-${e.id}`,content:n}):u=n;const c=new Ni({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${s}/streamed_output/-`,value:u}]});await this.writer.write(c)}};const TE="__run";var Qc=class c2{constructor(e){L(this,"text");L(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new c2({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},mg=class d2 extends Qc{constructor(n){super(n);L(this,"message");this.message=n.message}concat(n){return new d2({text:this.text+n.text,generationInfo:{...this.generationInfo,...n.generationInfo},message:this.message.concat(n.message)})}};function dc({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const FP=t=>t.name==="event_stream_tracer";var YP=class extends Cl{constructor(e){super({_awaitHandler:!0,...e});L(this,"autoClose",!0);L(this,"includeNames");L(this,"includeTypes");L(this,"includeTags");L(this,"excludeNames");L(this,"excludeTypes");L(this,"excludeTags");L(this,"runInfoMap",new Map);L(this,"tappedPromises",new Map);L(this,"transformStream");L(this,"writer");L(this,"receiveStream");L(this,"readableStreamClosed",!1);L(this,"name","event_stream_tracer");L(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Aa.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(a=a||n.find(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(a=a&&n.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),a}async*tapOutputIterable(e,n){const a=await n.next();if(a.done)return;const s=this.runInfoMap.get(e);if(s===void 0){yield a.value;return}function o(c,f){return c==="llm"&&typeof f=="string"?new Qc({text:f}):f}let u=this.tappedPromises.get(e);if(u===void 0){let c;u=new Promise(f=>{c=f}),this.tappedPromises.set(e,u);try{const f={event:`on_${s.runType}_stream`,run_id:e,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...f,data:{chunk:o(s.runType,a.value)}},s),yield a.value;for await(const h of n)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...f,data:{chunk:o(s.runType,h)}},s),yield h}finally{c==null||c()}}else{yield a.value;for await(const c of n)yield c}}async send(e,n){this.readableStreamClosed||this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const a=this.tappedPromises.get(e.run_id);a!==void 0?a.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var u,c;const n=dc(e),a=e.inputs.messages!==void 0?"chat_model":"llm",s={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:n,runType:a,inputs:e.inputs};this.runInfoMap.set(e.id,s);const o=`on_${a}_start`;await this.send({event:o,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},s)}async onLLMNewToken(e,n,a){const s=this.runInfoMap.get(e.id);let o,u;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")u="on_chat_model_stream",(a==null?void 0:a.chunk)===void 0?o=new Tl({content:n,id:`run-${e.id}`}):o=a.chunk.message;else if(s.runType==="llm")u="on_llm_stream",(a==null?void 0:a.chunk)===void 0?o=new Qc({text:n}):o=a.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:u,data:{chunk:o},run_id:e.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(e){var u,c,f;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let a;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const s=(u=e.outputs)==null?void 0:u.generations;let o;if(n.runType==="chat_model"){for(const h of s??[]){if(o!==void 0)break;o=(c=h[0])==null?void 0:c.message}a="on_chat_model_end"}else if(n.runType==="llm")o={generations:s==null?void 0:s.map(h=>h.map(m=>({text:m.text,generationInfo:m.generationInfo}))),llmOutput:((f=e.outputs)==null?void 0:f.llmOutput)??{}},a="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:a,data:{output:o,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var u,c;const n=dc(e),a=e.run_type??"chain",s={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:n,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},s.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,s.inputs=e.inputs.input):(o.input=e.inputs,s.inputs=e.inputs),this.runInfoMap.set(e.id,s),await this.send({event:`on_${a}_start`,data:o,name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},s)}async onChainEnd(e){var u;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const a=`on_${e.run_type}_end`,s=e.inputs??n.inputs??{},o={output:((u=e.outputs)==null?void 0:u.output)??e.outputs,input:s};s.input&&Object.keys(s).length===1&&(o.input=s.input,n.inputs=s.input),await this.sendEndEvent({event:a,data:o,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var s,o;const n=dc(e),a={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,a),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},a)}async onToolEnd(e){var s;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const a=((s=e.outputs)==null?void 0:s.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:a,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onToolError(e){const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);await this.sendEndEvent({event:"on_tool_error",data:{input:n.inputs,error:e.error},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var s,o;const n=dc(e),a={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,a),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},a)}async onRetrieverEnd(e){var a;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((a=e.outputs)==null?void 0:a.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,a){const s=this.runInfoMap.get(a);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${a} not found in run map.`);await this.send({event:"on_custom_event",run_id:a,name:e,tags:s.tags,metadata:s.metadata,data:n},s)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const ZP=Object.prototype.toString,XP=t=>ZP.call(t)==="[object Error]",KP=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function QP(t){if(!(t&&XP(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:e,stack:n}=t;return e==="Load failed"?n===void 0||"__sentry_captured__"in t:e.startsWith("error sending request for url")?!0:KP.has(e)}function JP(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function fc(t,e,{min:n=0,allowInfinity:a=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${a?" or Infinity":""}.`);if(!a&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}var WP=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function e$(t,e){const n=Math.max(1,t+1),a=e.randomize?Math.random()+1:1;let s=Math.round(a*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function AE(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function t$({error:t,attemptNumber:e,retriesConsumed:n,startTime:a,options:s}){var _,x,w;const o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof WP)throw o.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,c=s.maxRetryTime??Number.POSITIVE_INFINITY,f=Object.freeze({error:o,attemptNumber:e,retriesLeft:u,retriesConsumed:n});if(await s.onFailedAttempt(f),AE(a,c)<=0)throw o;const h=await s.shouldConsumeRetry(f),m=AE(a,c);if(m<=0||u<=0)throw o;if(o instanceof TypeError&&!QP(o)){if(h)throw o;return(_=s.signal)==null||_.throwIfAborted(),!1}if(!await s.shouldRetry(f))throw o;if(!h)return(x=s.signal)==null||x.throwIfAborted(),!1;const y=e$(n,s),v=Math.min(y,m);return v>0&&await new Promise((A,T)=>{var z,P;const k=()=>{var Y;clearTimeout(R),(Y=s.signal)==null||Y.removeEventListener("abort",k),T(s.signal.reason)},R=setTimeout(()=>{var Y;(Y=s.signal)==null||Y.removeEventListener("abort",k),A()},v);s.unref&&((z=R.unref)==null||z.call(R)),(P=s.signal)==null||P.addEventListener("abort",k,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function pg(t,e={}){var o,u,c;if(e={...e},JP(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),fc("factor",e.factor,{min:0,allowInfinity:!1}),fc("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),fc("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),fc("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(o=e.signal)==null||o.throwIfAborted();let n=0,a=0;const s=performance.now();for(;!Number.isFinite(e.retries)||a<=e.retries;){n++;try{(u=e.signal)==null||u.throwIfAborted();const f=await t(n);return(c=e.signal)==null||c.throwIfAborted(),f}catch(f){await t$({error:f,attemptNumber:n,retriesConsumed:a,startTime:s,options:e})&&a++}}throw new Error("Retry attempts exhausted without throwing an error.")}const n$=[400,401,402,403,404,405,406,407,409],a$=t=>{if(typeof t!="object"||t===null)return;if("message"in t&&typeof t.message=="string"&&(t.message.startsWith("Cancel")||t.message.startsWith("AbortError"))||"name"in t&&typeof t.name=="string"&&t.name==="AbortError"||"code"in t&&typeof t.code=="string"&&t.code==="ECONNABORTED")throw t;const e="response"in t&&typeof t.response=="object"&&t.response!==null&&"status"in t.response&&typeof t.response.status=="number"?t.response.status:void 0,n="status"in t&&typeof t.status=="number"?t.status:void 0,a=e??n;if(a&&n$.includes(+a))throw t;if(("error"in t&&typeof t.error=="object"&&t.error!==null&&"code"in t.error&&typeof t.error.code=="string"?t.error.code:void 0)==="insufficient_quota"){const s=new Error("message"in t&&typeof t.message=="string"?t.message:"Insufficient quota");throw s.name="InsufficientQuotaError",s}};var by=class{constructor(t){L(this,"maxConcurrency");L(this,"maxRetries");L(this,"onFailedAttempt");L(this,"queue");this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??a$,this.queue=new("default"in Fa?Fa.default:Fa)({concurrency:this.maxConcurrency})}async call(t,...e){return this.queue.add(()=>pg(()=>t(...e).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>{var a;return(a=this.onFailedAttempt)==null?void 0:a.call(this,n)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...n){if(t.signal){let a;return Promise.race([this.call(e,...n),new Promise((s,o)=>{var u;a=()=>{o(Zc(t.signal))},(u=t.signal)==null||u.addEventListener("abort",a,{once:!0})})]).finally(()=>{t.signal&&a&&t.signal.removeEventListener("abort",a)})}return this.call(e,...n)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}},f2=class extends Cl{constructor({config:e,onStart:n,onEnd:a,onError:s}){super({_awaitHandler:!0});L(this,"name","RootListenersTracer");L(this,"rootId");L(this,"config");L(this,"argOnStart");L(this,"argOnEnd");L(this,"argOnError");this.config=e,this.argOnStart=n,this.argOnEnd=a,this.argOnError=s}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function wy(t){return t?t.lc_runnable:!1}var i$=class{constructor(t){L(this,"includeNames");L(this,"includeTypes");L(this,"includeTags");L(this,"excludeNames");L(this,"excludeTypes");L(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const a=t.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e)),this.includeTags!==void 0&&(n=n||a.some(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(n=n&&a.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),n}};const s$=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");function pp(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const r$=["*","_","`"];function o$(t){let e="";for(const[n,a]of Object.entries(t))e+=`	classDef ${n} ${a};
`;return e}function l$(t,e,n){const{firstNode:a,lastNode:s,nodeColors:o,withStyles:u=!0,curveStyle:c="linear",wrapLabelNWords:f=9}=n??{};let h=u?`%%{init: {'flowchart': {'curve': '${c}'}}}%%
graph TD;
`:`graph TD;
`;if(u){const x="default",w={[x]:"{0}({1})"};a!==void 0&&(w[a]="{0}([{1}]):::first"),s!==void 0&&(w[s]="{0}([{1}]):::last");for(const[A,T]of Object.entries(t)){const k=T.name.split(":").pop()??"";let R=r$.some(P=>k.startsWith(P)&&k.endsWith(P))?`<p>${k}</p>`:k;Object.keys(T.metadata??{}).length&&(R+=`<hr/><small><em>${Object.entries(T.metadata??{}).map(([P,Y])=>`${P} = ${Y}`).join(`
`)}</em></small>`);const z=(w[A]??w[x]).replace("{0}",pp(A)).replace("{1}",R);h+=`	${z}
`}}const m={};for(const x of e){const w=x.source.split(":"),A=x.target.split(":"),T=w.filter((k,R)=>k===A[R]).join(":");m[T]||(m[T]=[]),m[T].push(x)}const y=new Set;function v(x){return[...x].sort((w,A)=>w.split(":").length-A.split(":").length)}function _(x,w){const A=x.length===1&&x[0].source===x[0].target;if(w&&!A){const k=w.split(":").pop();if(y.has(w))throw new Error(`Found duplicate subgraph '${k}' at '${w} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(w),h+=`	subgraph ${k}
`}const T=v(Object.keys(m).filter(k=>k.startsWith(`${w}:`)&&k!==w&&k.split(":").length===w.split(":").length+1));for(const k of T)_(m[k],k);for(const k of x){const{source:R,target:z,data:P,conditional:Y}=k;let W="";if(P!==void 0){let O=P;const ge=O.split(" ");ge.length>f&&(O=Array.from({length:Math.ceil(ge.length/f)},(Ce,ve)=>ge.slice(ve*f,(ve+1)*f).join(" ")).join("&nbsp;<br>&nbsp;")),W=Y?` -. &nbsp;${O}&nbsp; .-> `:` -- &nbsp;${O}&nbsp; --> `}else W=Y?" -.-> ":" --> ";h+=`	${pp(R)}${W}${pp(z)};
`}w&&!A&&(h+=`	end
`)}_(m[""]??[],"");for(const x in m)!x.includes(":")&&x!==""&&_(m[x],x);return u&&(h+=o$(o??{})),h}async function u$(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const a=(e==null?void 0:e.imageType)??"png",s=s$(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const o=`https://mermaid.ink/img/${s}?bgColor=${n}&type=${a}`,u=await fetch(o);if(!u.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${u.status}`,`Status text: ${u.statusText}`].join(`
`));return await u.blob()}function c$(t,e){if(t!==void 0&&!el(t))return t;if(wy(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function d$(t){return wy(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...ay(t.data.schema),title:t.data.name}}}var h2=class m2{constructor(e){L(this,"nodes",{});L(this,"edges",[]);this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,a)=>{e[n.id]=el(n.id)?a:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...d$(n)})),edges:this.edges.map(n=>{const a={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(a.data=n.data),typeof n.conditional<"u"&&(a.conditional=n.conditional),a})}}addNode(e,n,a){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const s=n??hs(),o={id:s,data:e,name:c$(n,e),metadata:a};return this.nodes[s]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,a,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const o={source:e.id,target:n.id,data:a,conditional:s};return this.edges.push(o),o}firstNode(){return CE(this)}lastNode(){return NE(this)}extend(e,n=""){let a=n;Object.values(e.nodes).map(f=>f.id).every(el)&&(a="");const s=f=>a?`${a}:${f}`:f;Object.entries(e.nodes).forEach(([f,h])=>{this.nodes[s(f)]={...h,id:s(f)}});const o=e.edges.map(f=>({...f,source:s(f.source),target:s(f.target)}));this.edges=[...this.edges,...o];const u=e.firstNode(),c=e.lastNode();return[u?{id:s(u.id),data:u.data}:void 0,c?{id:s(c.id),data:c.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&CE(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&NE(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),n=new Map;Object.values(e).forEach(s=>{n.set(s,(n.get(s)||0)+1)});const a=s=>{const o=e[s];return el(s)&&n.get(o)===1?o:s};return new m2({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,o])=>[a(s),{...o,id:a(s)}])),edges:this.edges.map(s=>({...s,source:a(s.source),target:a(s.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:a,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},u=this.reid(),c=u.firstNode(),f=u.lastNode();return l$(u.nodes,u.edges,{firstNode:c==null?void 0:c.id,lastNode:f==null?void 0:f.id,withStyles:n,curveStyle:a,nodeColors:s,wrapLabelNWords:o})}async drawMermaidPng(e){return u$(this.drawMermaid(e),{backgroundColor:e==null?void 0:e.backgroundColor})}};function CE(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.source)).map(s=>s.target)),a=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&a.push(s);return a.length===1?a[0]:void 0}function NE(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.target)).map(s=>s.source)),a=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&a.push(s);return a.length===1?a[0]:void 0}function f$(t){const e=new TextEncoder,n=new ReadableStream({async start(a){for await(const s of t)a.enqueue(e.encode(`event: data
data: ${JSON.stringify(s)}

`));a.enqueue(e.encode(`event: end

`)),a.close()}});return Aa.fromReadableStream(n)}function OE(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const h$=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function gg(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*RE(t,e){for(;;){const{value:n,done:a}=Vi.runWithConfig(Dr(t),e.next.bind(e),!0);if(a)break;yield n}}async function*yg(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:a,done:s}=await Vi.runWithConfig(Dr(t),n.next.bind(e),!0);if(s)break;yield a}}function zt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var Xt=class extends fl{constructor(){super(...arguments);L(this,"lc_runnable",!0);L(this,"name")}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}withRetry(e){return new g2({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Jc({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new g$({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(it);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const a=Object.fromEntries(Object.entries(e).filter(([s])=>s!=="runId"));return Array.from({length:n},(s,o)=>it(o===0?e:a))}return Array.from({length:n},()=>it(e))}async batch(e,n,a){var c;const s=this._getOptionsList(n??{},e.length),o=new by({maxConcurrency:((c=s[0])==null?void 0:c.maxConcurrency)??(a==null?void 0:a.maxConcurrency),onFailedAttempt:f=>{throw f}}),u=e.map((f,h)=>o.call(async()=>{try{return await this.invoke(f,s[h])}catch(m){if(a!=null&&a.returnExceptions)return m;throw m}}));return Promise.all(u)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const a=it(n),s=new Vr({generator:this._streamIterator(e,a),config:a});return await s.setup,Aa.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=it(e):n=it({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const a={...e};return delete a.callbacks,delete a.tags,delete a.metadata,delete a.runName,delete a.configurable,delete a.recursionLimit,delete a.maxConcurrency,delete a.runId,delete a.timeout,delete a.signal,[n,a]}async _callWithConfig(e,n,a){var c;const s=it(a),o=await((c=await ca(s))==null?void 0:c.handleChainStart(this.toJSON(),zt(n,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let u;try{u=await Hi(e.call(this,n,s,o),a==null?void 0:a.signal)}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}return await(o==null?void 0:o.handleChainEnd(zt(u,"output"))),u}async _batchWithConfig(e,n,a,s){var h;const o=this._getOptionsList(a??{},n.length),u=await Promise.all(o.map(ca)),c=await Promise.all(u.map(async(m,y)=>{const v=await(m==null?void 0:m.handleChainStart(this.toJSON(),zt(n[y],"input"),o[y].runId,o[y].runType,void 0,void 0,o[y].runName??this.getName()));return delete o[y].runId,v}));let f;try{f=await Hi(e.call(this,n,o,c,s),(h=o==null?void 0:o[0])==null?void 0:h.signal)}catch(m){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(zt(f,"output")))),f}_concatOutputChunks(e,n){return md(e,n)}async*_transformStreamWithConfig(e,n,a){let s,o=!0,u,c=!0;const f=it(a),h=await ca(f),m=this;async function*y(){for await(const _ of e){if(o)if(s===void 0)s=_;else try{s=m._concatOutputChunks(s,_)}catch{s=void 0,o=!1}yield _}}let v;try{const _=await LP(n.bind(this),y(),async()=>h==null?void 0:h.handleChainStart(this.toJSON(),{input:""},f.runId,f.runType,void 0,void 0,f.runName??this.getName(),void 0,{lc_defers_inputs:!0}),a==null?void 0:a.signal,f);delete f.runId,v=_.setup;const x=v==null?void 0:v.handlers.find(FP);let w=_.output;x!==void 0&&v!==void 0&&(w=x.tapOutputIterable(v.runId,w));const A=v==null?void 0:v.handlers.find(GP);A!==void 0&&v!==void 0&&(w=A.tapOutputIterable(v.runId,w));for await(const T of w)if(yield T,c)if(u===void 0)u=T;else try{u=this._concatOutputChunks(u,T)}catch{u=void 0,c=!1}}catch(_){throw await(v==null?void 0:v.handleChainError(_,void 0,void 0,void 0,{inputs:zt(s,"input")})),_}await(v==null?void 0:v.handleChainEnd(u??{},void 0,void 0,void 0,{inputs:zt(s,"input")}))}getGraph(e){const n=new h2,a=n.addNode({name:`${this.getName()}Input`,schema:S1()}),s=n.addNode(this),o=n.addNode({name:`${this.getName()}Output`,schema:S1()});return n.addEdge(a,s),n.addEdge(s,o),n}pipe(e){return new pd({first:this,last:gs(e)})}pick(e){return this.pipe(new y$(e))}assign(e){return this.pipe(new b2(new gd({steps:e})))}async*transform(e,n){let a;for await(const s of e)a===void 0?a=s:a=this._concatOutputChunks(a,s);yield*this._streamIterator(a,it(n))}async*streamLog(e,n,a){const s=new SE({...a,autoClose:!1,_schemaFormat:"original"}),o=it(n);yield*this._streamLog(e,s,o)}async*_streamLog(e,n,a){const{callbacks:s}=a;if(s===void 0)a.callbacks=[n];else if(Array.isArray(s))a.callbacks=s.concat([n]);else{const f=s.copy();f.addHandler(n,!0),a.callbacks=f}const o=this.stream(e,a);async function u(){try{const f=await o;for await(const h of f){const m=new Ni({ops:[{op:"add",path:"/streamed_output/-",value:h}]});await n.writer.write(m)}}finally{await n.writer.close()}}const c=u();try{for await(const f of n)yield f}finally{await c}}streamEvents(e,n,a){let s;if(n.version==="v1")s=this._streamEventsV1(e,n,a);else if(n.version==="v2")s=this._streamEventsV2(e,n,a);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?f$(s):Aa.fromAsyncGenerator(s)}async*_streamEventsV2(e,n,a){var x;const s=new YP({...a,autoClose:!1}),o=it(n),u=o.runId??hs();o.runId=u;const c=o.callbacks;if(c===void 0)o.callbacks=[s];else if(Array.isArray(c))o.callbacks=c.concat(s);else{const w=c.copy();w.addHandler(s,!0),o.callbacks=w}const f=new AbortController,h=this;async function m(){let w,A=null;try{n!=null&&n.signal?"any"in AbortSignal?w=AbortSignal.any([f.signal,n.signal]):(w=n.signal,A=()=>{f.abort()},n.signal.addEventListener("abort",A,{once:!0})):w=f.signal;const T=await h.stream(e,{...o,signal:w}),k=s.tapOutputIterable(u,T);for await(const R of k)if(f.signal.aborted)break}finally{await s.finish(),w&&A&&w.removeEventListener("abort",A)}}const y=m();let v=!1,_;try{for await(const w of s){if(!v){w.data.input=e,v=!0,_=w.run_id,yield w;continue}w.run_id===_&&w.event.endsWith("_end")&&(x=w.data)!=null&&x.input&&delete w.data.input,yield w}}finally{f.abort(),await y}}async*_streamEventsV1(e,n,a){let s,o=!1;const u=it(n),c=u.tags??[],f=u.metadata??{},h=u.runName??this.getName(),m=new SE({...a,autoClose:!1,_schemaFormat:"streaming_events"}),y=new i$({...a}),v=this._streamLog(e,m,u);for await(const x of v){if(s?s=s.concat(x):s=u2.fromRunLogPatch(x),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const k={...s.state},R={run_id:k.id,event:`on_${k.type}_start`,name:h,tags:c,metadata:f,data:{input:e}};y.includeEvent(R,k.type)&&(yield R)}const w=x.ops.filter(k=>k.path.startsWith("/logs/")).map(k=>k.path.split("/")[2]),A=[...new Set(w)];for(const k of A){let R,z={};const P=s.state.logs[k];if(P.end_time===void 0?P.streamed_output.length>0?R="stream":R="start":R="end",R==="start")P.inputs!==void 0&&(z.input=P.inputs);else if(R==="end")P.inputs!==void 0&&(z.input=P.inputs),z.output=P.final_output;else if(R==="stream"){const Y=P.streamed_output.length;if(Y!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${Y} instead. Encountered in: "${P.name}"`);z={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${R}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:z}}const{state:T}=s;if(T.streamed_output.length>0){const k=T.streamed_output.length;if(k!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${k} instead. Encountered in: "${T.name}"`);const R={chunk:T.streamed_output[0]};T.streamed_output=[];const z={event:`on_${T.type}_stream`,run_id:T.id,tags:c,metadata:f,name:h,data:R};y.includeEvent(z,T.type)&&(yield z)}}const _=s==null?void 0:s.state;if(_!==void 0){const x={event:`on_${_.type}_end`,name:h,run_id:_.id,tags:c,metadata:f,data:{output:_.final_output}};y.includeEvent(x,_.type)&&(yield x)}}static isRunnable(e){return wy(e)}withListeners({onStart:e,onEnd:n,onError:a}){return new Jc({bound:this,config:{},configFactories:[s=>({callbacks:[new f2({config:s,onStart:e,onEnd:n,onError:a})]})]})}asTool(e){return v$(this,e)}},Jc=class p2 extends Xt{constructor(n){super(n);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"bound");L(this,"config");L(this,"kwargs");L(this,"configFactories");this.bound=n.bound,this.kwargs=n.kwargs,this.config=n.config,this.configFactories=n.configFactories}static lc_name(){return"RunnableBinding"}getName(n){return this.bound.getName(n)}async _mergeConfig(...n){const a=bE(this.config,...n);return bE(a,...this.configFactories?await Promise.all(this.configFactories.map(async s=>await s(a))):[])}withConfig(n){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...n}})}withRetry(n){return new g2({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:n==null?void 0:n.stopAfterAttempt,...n})}async invoke(n,a){return this.bound.invoke(n,await this._mergeConfig(a,this.kwargs))}async batch(n,a,s){const o=Array.isArray(a)?await Promise.all(a.map(async u=>this._mergeConfig(it(u),this.kwargs))):await this._mergeConfig(it(a),this.kwargs);return this.bound.batch(n,o,s)}_concatOutputChunks(n,a){return this.bound._concatOutputChunks(n,a)}async*_streamIterator(n,a){yield*this.bound._streamIterator(n,await this._mergeConfig(it(a),this.kwargs))}async stream(n,a){return this.bound.stream(n,await this._mergeConfig(it(a),this.kwargs))}async*transform(n,a){yield*this.bound.transform(n,await this._mergeConfig(it(a),this.kwargs))}streamEvents(n,a,s){const o=this,u=async function*(){yield*o.bound.streamEvents(n,{...await o._mergeConfig(it(a),o.kwargs),version:a.version},s)};return Aa.fromAsyncGenerator(u())}static isRunnableBinding(n){return n.bound&&Xt.isRunnable(n.bound)}withListeners({onStart:n,onEnd:a,onError:s}){return new p2({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[o=>({callbacks:[new f2({config:o,onStart:n,onEnd:a,onError:s})]})]})}},g2=class extends Jc{constructor(e){super(e);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"maxAttemptNumber",3);L(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,n,a){const s=e>1?`retry:attempt:${e}`:void 0;return rn(n,{callbacks:a==null?void 0:a.getChild(s)})}async _invoke(e,n,a){return pg(s=>super.invoke(e,this._patchConfigForRetry(s,n,a)),{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,a,s){const o={};try{await pg(async u=>{const c=e.map((v,_)=>_).filter(v=>o[v.toString()]===void 0||o[v.toString()]instanceof Error),f=c.map(v=>e[v]),h=c.map(v=>this._patchConfigForRetry(u,n==null?void 0:n[v],a==null?void 0:a[v])),m=await super.batch(f,h,{...s,returnExceptions:!0});let y;for(let v=0;v<m.length;v+=1){const _=m[v],x=c[v];_ instanceof Error&&y===void 0&&(y=_,y.input=f[v]),o[x.toString()]=_}if(y)throw y;return m},{onFailedAttempt:({error:u})=>this.onFailedAttempt(u,u.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(u){if((s==null?void 0:s.returnExceptions)!==!0)throw u}return Object.keys(o).sort((u,c)=>parseInt(u,10)-parseInt(c,10)).map(u=>o[parseInt(u,10)])}async batch(e,n,a){return this._batchWithConfig(this._batch.bind(this),e,n,a)}},pd=class Yo extends Xt{constructor(n){super(n);L(this,"first");L(this,"middle",[]);L(this,"last");L(this,"omitSequenceTags",!1);L(this,"lc_serializable",!0);L(this,"lc_namespace",["langchain_core","runnables"]);this.first=n.first,this.middle=n.middle??this.middle,this.last=n.last,this.name=n.name,this.omitSequenceTags=n.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(n,a){var f,h;const s=it(a),o=await((f=await ca(s))==null?void 0:f.handleChainStart(this.toJSON(),zt(n,"input"),s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;let u=n,c;try{const m=[this.first,...this.middle];for(let y=0;y<m.length;y+=1)u=await Hi(m[y].invoke(u,rn(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)})),a==null?void 0:a.signal);if((h=a==null?void 0:a.signal)!=null&&h.aborted)throw Zc(a.signal);c=await this.last.invoke(u,rn(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(m){throw await(o==null?void 0:o.handleChainError(m)),m}return await(o==null?void 0:o.handleChainEnd(zt(c,"output"))),c}async batch(n,a,s){var h;const o=this._getOptionsList(a??{},n.length),u=await Promise.all(o.map(ca)),c=await Promise.all(u.map(async(m,y)=>{const v=await(m==null?void 0:m.handleChainStart(this.toJSON(),zt(n[y],"input"),o[y].runId,void 0,void 0,void 0,o[y].runName));return delete o[y].runId,v}));let f=n;try{for(let m=0;m<this.steps.length;m+=1)f=await Hi(this.steps[m].batch(f,c.map((y,v)=>{const _=y==null?void 0:y.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`);return rn(o[v],{callbacks:_})}),s),(h=o[0])==null?void 0:h.signal)}catch(m){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(zt(f,"output")))),f}_concatOutputChunks(n,a){return this.last._concatOutputChunks(n,a)}async*_streamIterator(n,a){var v;const s=await ca(a),{runId:o,...u}=a??{},c=await(s==null?void 0:s.handleChainStart(this.toJSON(),zt(n,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName)),f=[this.first,...this.middle,this.last];let h=!0,m;async function*y(){yield n}try{let _=f[0].transform(y(),rn(u,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let x=1;x<f.length;x+=1)_=await f[x].transform(_,rn(u,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${x+1}`)}));for await(const x of _)if((v=a==null?void 0:a.signal)==null||v.throwIfAborted(),yield x,h)if(m===void 0)m=x;else try{m=this._concatOutputChunks(m,x)}catch{m=void 0,h=!1}}catch(_){throw await(c==null?void 0:c.handleChainError(_)),_}await(c==null?void 0:c.handleChainEnd(zt(m,"output")))}getGraph(n){const a=new h2;let s=null;return this.steps.forEach((o,u)=>{const c=o.getGraph(n);u!==0&&c.trimFirstNode(),u!==this.steps.length-1&&c.trimLastNode(),a.extend(c);const f=c.firstNode();if(!f)throw new Error(`Runnable ${o} has no first node`);s&&a.addEdge(s,f),s=c.lastNode()}),a}pipe(n){return Yo.isRunnableSequence(n)?new Yo({first:this.first,middle:this.middle.concat([this.last,n.first,...n.middle]),last:n.last,name:this.name??n.name}):new Yo({first:this.first,middle:[...this.middle,this.last],last:gs(n),name:this.name})}static isRunnableSequence(n){return Array.isArray(n.middle)&&Xt.isRunnable(n)}static from([n,...a],s){let o={};return typeof s=="string"?o.name=s:s!==void 0&&(o=s),new Yo({...o,first:gs(n),middle:a.slice(0,-1).map(gs),last:gs(a[a.length-1])})}},gd=class y2 extends Xt{constructor(n){super(n);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"steps");this.steps={};for(const[a,s]of Object.entries(n.steps))this.steps[a]=gs(s)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(n){return new y2({steps:n})}async invoke(n,a){var c;const s=it(a),o=await((c=await ca(s))==null?void 0:c.handleChainStart(this.toJSON(),{input:n},s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;const u={};try{const f=Object.entries(this.steps).map(async([h,m])=>{u[h]=await m.invoke(n,rn(s,{callbacks:o==null?void 0:o.getChild(`map:key:${h}`)}))});await Hi(Promise.all(f),a==null?void 0:a.signal)}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}return await(o==null?void 0:o.handleChainEnd(u)),u}async*_transform(n,a,s){const o={...this.steps},u=r2(n,Object.keys(o).length),c=new Map(Object.entries(o).map(([f,h],m)=>{const y=h.transform(u[m],rn(s,{callbacks:a==null?void 0:a.getChild(`map:key:${f}`)}));return[f,y.next().then(v=>({key:f,gen:y,result:v}))]}));for(;c.size;){const{key:f,result:h,gen:m}=await Hi(Promise.race(c.values()),s==null?void 0:s.signal);c.delete(f),h.done||(yield{[f]:h.value},c.set(f,m.next().then(y=>({key:f,gen:m,result:y}))))}}transform(n,a){return this._transformStreamWithConfig(n,this._transform.bind(this),a)}async stream(n,a){async function*s(){yield n}const o=it(a),u=new Vr({generator:this.transform(s(),o),config:o});return await u.setup,Aa.fromAsyncGenerator(u)}},m$=class v2 extends Xt{constructor(n){super(n);L(this,"lc_serializable",!1);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"func");if(!_y(n.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=n.func}async invoke(n,a){const[s]=this._getOptionsList(a??{},1),o=await ca(s);return Hi(this.func(rn(s,{callbacks:o}),n),s==null?void 0:s.signal)}async*_streamIterator(n,a){var u,c;const[s]=this._getOptionsList(a??{},1),o=await this.invoke(n,a);if(gg(o)){for await(const f of o)(u=s==null?void 0:s.signal)==null||u.throwIfAborted(),yield f;return}if(h$(o)){for(;;){(c=s==null?void 0:s.signal)==null||c.throwIfAborted();const f=o.next();if(f.done)break;yield f.value}return}yield o}static from(n){return new v2({func:n})}};function p$(t){if(_y(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var xy=class _2 extends Xt{constructor(n){if(_y(n.func))return m$.from(n.func);super(n);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"func");p$(n.func),this.func=n.func}static lc_name(){return"RunnableLambda"}static from(n){return new _2({func:n})}async _invoke(n,a,s){return new Promise((o,u)=>{const c=rn(a,{callbacks:s==null?void 0:s.getChild(),recursionLimit:((a==null?void 0:a.recursionLimit)??mp)-1});Vi.runWithConfig(Dr(c),async()=>{var f,h;try{let m=await this.func(n,{...c});if(m&&Xt.isRunnable(m)){if((a==null?void 0:a.recursionLimit)===0)throw new Error("Recursion limit reached.");m=await m.invoke(n,{...c,recursionLimit:(c.recursionLimit??mp)-1})}else if(gg(m)){let y;for await(const v of yg(c,m))if((f=a==null?void 0:a.signal)==null||f.throwIfAborted(),y===void 0)y=v;else try{y=this._concatOutputChunks(y,v)}catch{y=v}m=y}else if(OE(m)){let y;for(const v of RE(c,m))if((h=a==null?void 0:a.signal)==null||h.throwIfAborted(),y===void 0)y=v;else try{y=this._concatOutputChunks(y,v)}catch{y=v}m=y}o(m)}catch(m){u(m)}})})}async invoke(n,a){return this._callWithConfig(this._invoke.bind(this),n,a)}async*_transform(n,a,s){var f,h;let o;for await(const m of n)if(o===void 0)o=m;else try{o=this._concatOutputChunks(o,m)}catch{o=m}const u=rn(s,{callbacks:a==null?void 0:a.getChild(),recursionLimit:((s==null?void 0:s.recursionLimit)??mp)-1}),c=await new Promise((m,y)=>{Vi.runWithConfig(Dr(u),async()=>{try{m(await this.func(o,{...u,config:u}))}catch(v){y(v)}})});if(c&&Xt.isRunnable(c)){if((s==null?void 0:s.recursionLimit)===0)throw new Error("Recursion limit reached.");const m=await c.stream(o,u);for await(const y of m)yield y}else if(gg(c))for await(const m of yg(u,c))(f=s==null?void 0:s.signal)==null||f.throwIfAborted(),yield m;else if(OE(c))for(const m of RE(u,c))(h=s==null?void 0:s.signal)==null||h.throwIfAborted(),yield m;else yield c}transform(n,a){return this._transformStreamWithConfig(n,this._transform.bind(this),a)}async stream(n,a){async function*s(){yield n}const o=it(a),u=new Vr({generator:this.transform(s(),o),config:o});return await u.setup,Aa.fromAsyncGenerator(u)}},g$=class extends Xt{constructor(e){super(e);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"runnable");L(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const a=it(n),s=await ca(a),{runId:o,...u}=a,c=await(s==null?void 0:s.handleChainStart(this.toJSON(),zt(e,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName)),f=rn(u,{callbacks:c==null?void 0:c.getChild()});return await Vi.runWithConfig(f,async()=>{var m;let h;for(const y of this.runnables()){(m=a==null?void 0:a.signal)==null||m.throwIfAborted();try{const v=await y.invoke(e,f);return await(c==null?void 0:c.handleChainEnd(zt(v,"output"))),v}catch(v){h===void 0&&(h=v)}}throw h===void 0?new Error("No error stored at end of fallback."):(await(c==null?void 0:c.handleChainError(h)),h)})}async*_streamIterator(e,n){var y;const a=it(n),s=await ca(a),{runId:o,...u}=a,c=await(s==null?void 0:s.handleChainStart(this.toJSON(),zt(e,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName));let f,h;for(const v of this.runnables()){(y=a==null?void 0:a.signal)==null||y.throwIfAborted();const _=rn(u,{callbacks:c==null?void 0:c.getChild()});try{h=yg(_,await v.stream(e,_));break}catch(x){f===void 0&&(f=x)}}if(h===void 0){const v=f??new Error("No error stored at end of fallback.");throw await(c==null?void 0:c.handleChainError(v)),v}let m;try{for await(const v of h){yield v;try{m=m===void 0?m:this._concatOutputChunks(m,v)}catch{m=void 0}}}catch(v){throw await(c==null?void 0:c.handleChainError(v)),v}await(c==null?void 0:c.handleChainEnd(zt(m,"output")))}async batch(e,n,a){var f;if(a!=null&&a.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(n??{},e.length),o=await Promise.all(s.map(h=>ca(h))),u=await Promise.all(o.map(async(h,m)=>{const y=await(h==null?void 0:h.handleChainStart(this.toJSON(),zt(e[m],"input"),s[m].runId,void 0,void 0,void 0,s[m].runName));return delete s[m].runId,y}));let c;for(const h of this.runnables()){(f=s[0].signal)==null||f.throwIfAborted();try{const m=await h.batch(e,u.map((y,v)=>rn(s[v],{callbacks:y==null?void 0:y.getChild()})),a);return await Promise.all(u.map((y,v)=>y==null?void 0:y.handleChainEnd(zt(m[v],"output")))),m}catch(m){c===void 0&&(c=m)}}throw c?(await Promise.all(u.map(h=>h==null?void 0:h.handleChainError(c))),c):new Error("No error stored at end of fallbacks.")}};function gs(t){if(typeof t=="function")return new xy({func:t});if(Xt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,a]of Object.entries(t))e[n]=gs(a);return new gd({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var b2=class extends Xt{constructor(e){e instanceof gd&&(e={mapper:e});super(e);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,n){const a=await this.mapper.invoke(e,n);return{...e,...a}}async*_transform(e,n,a){const s=this.mapper.getStepsKeys(),[o,u]=r2(e),c=this.mapper.transform(u,rn(a,{callbacks:n==null?void 0:n.getChild()})),f=c.next();for await(const h of o){if(typeof h!="object"||Array.isArray(h))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof h}`);const m=Object.fromEntries(Object.entries(h).filter(([y])=>!s.includes(y)));Object.keys(m).length>0&&(yield m)}yield(await f).value;for await(const h of c)yield h}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*a(){yield e}const s=it(n),o=new Vr({generator:this.transform(a(),s),config:s});return await o.setup,Aa.fromAsyncGenerator(o)}},y$=class extends Xt{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(a=>[a,e[a]]).filter(a=>a[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const a=await this._pick(n);a!==void 0&&(yield a)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*a(){yield e}const s=it(n),o=new Vr({generator:this.transform(a(),s),config:s});return await o.setup,Aa.fromAsyncGenerator(o)}},kE=class extends Jc{constructor(e){const n=pd.from([xy.from(async a=>{let s;if(SA(a))try{s=await T5(this.schema,a.args)}catch{throw new GL("Received tool input did not match expected schema",JSON.stringify(a.args))}else s=a;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}});L(this,"name");L(this,"description");L(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function v$(t,e){const n=e.name??t.getName(),a=e.description??JT(e.schema);return A5(e.schema)?new kE({name:n,description:a,schema:uM({input:lM()}).transform(s=>s.input),bound:t}):new kE({name:n,description:a,schema:e.schema,bound:t})}function _$(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function b$(t){return t!==void 0&&Xt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function w$(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(Sl(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function w2(t){return w$(t)||b$(t)||_$(t)}/**
* [js-sha256]{@link https://github.com/emn178/js-sha256}
*
* @version 0.11.1
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2014-2025
* @license MIT
*/var be="0123456789abcdef".split(""),x$=[-2147483648,8388608,32768,128],aa=[24,16,8,0],hc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ut=[];function da(t,e){e?(Ut[0]=Ut[16]=Ut[1]=Ut[2]=Ut[3]=Ut[4]=Ut[5]=Ut[6]=Ut[7]=Ut[8]=Ut[9]=Ut[10]=Ut[11]=Ut[12]=Ut[13]=Ut[14]=Ut[15]=0,this.blocks=Ut):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}da.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var a,s=0,o,u=t.length,c=this.blocks;s<u;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,this.block=c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(o=this.start;s<u&&o<64;++s)c[o>>>2]|=t[s]<<aa[o++&3];else for(o=this.start;s<u&&o<64;++s)a=t.charCodeAt(s),a<128?c[o>>>2]|=a<<aa[o++&3]:a<2048?(c[o>>>2]|=(192|a>>>6)<<aa[o++&3],c[o>>>2]|=(128|a&63)<<aa[o++&3]):a<55296||a>=57344?(c[o>>>2]|=(224|a>>>12)<<aa[o++&3],c[o>>>2]|=(128|a>>>6&63)<<aa[o++&3],c[o>>>2]|=(128|a&63)<<aa[o++&3]):(a=65536+((a&1023)<<10|t.charCodeAt(++s)&1023),c[o>>>2]|=(240|a>>>18)<<aa[o++&3],c[o>>>2]|=(128|a>>>12&63)<<aa[o++&3],c[o>>>2]|=(128|a>>>6&63)<<aa[o++&3],c[o>>>2]|=(128|a&63)<<aa[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};da.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=x$[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};da.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.h5,u=this.h6,c=this.h7,f=this.blocks,h,m,y,v,_,x,w,A,T,k,R;for(h=16;h<64;++h)_=f[h-15],m=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,_=f[h-2],y=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,f[h]=f[h-16]+m+f[h-7]+y<<0;for(R=e&n,h=0;h<64;h+=4)this.first?(this.is224?(A=300032,_=f[0]-1413257819,c=_-150054599<<0,a=_+24177077<<0):(A=704751109,_=f[0]-210244248,c=_-1521486534<<0,a=_+143694565<<0),this.first=!1):(m=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),A=t&e,v=A^t&n^R,w=s&o^~s&u,_=c+y+w+hc[h]+f[h],x=m+v,c=a+_<<0,a=_+x<<0),m=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),y=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),T=a&t,v=T^a&e^A,w=u&c^~u&s,_=o+y+w+hc[h+1]+f[h+1],x=m+v,u=n+_<<0,n=_+x<<0,m=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),y=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),k=n&a,v=k^n&t^T,w=o&u^~o&c,_=s+y+w+hc[h+2]+f[h+2],x=m+v,o=e+_<<0,e=_+x<<0,m=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),y=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),R=e&n,v=R^e&a^k,w=o&u^~o&c,_=s+y+w+hc[h+3]+f[h+3],x=m+v,s=t+_<<0,t=_+x<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+a<<0,this.h4=this.h4+s<<0,this.h5=this.h5+o<<0,this.h6=this.h6+u<<0,this.h7=this.h7+c<<0};da.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.h5,u=this.h6,c=this.h7,f=be[t>>>28&15]+be[t>>>24&15]+be[t>>>20&15]+be[t>>>16&15]+be[t>>>12&15]+be[t>>>8&15]+be[t>>>4&15]+be[t&15]+be[e>>>28&15]+be[e>>>24&15]+be[e>>>20&15]+be[e>>>16&15]+be[e>>>12&15]+be[e>>>8&15]+be[e>>>4&15]+be[e&15]+be[n>>>28&15]+be[n>>>24&15]+be[n>>>20&15]+be[n>>>16&15]+be[n>>>12&15]+be[n>>>8&15]+be[n>>>4&15]+be[n&15]+be[a>>>28&15]+be[a>>>24&15]+be[a>>>20&15]+be[a>>>16&15]+be[a>>>12&15]+be[a>>>8&15]+be[a>>>4&15]+be[a&15]+be[s>>>28&15]+be[s>>>24&15]+be[s>>>20&15]+be[s>>>16&15]+be[s>>>12&15]+be[s>>>8&15]+be[s>>>4&15]+be[s&15]+be[o>>>28&15]+be[o>>>24&15]+be[o>>>20&15]+be[o>>>16&15]+be[o>>>12&15]+be[o>>>8&15]+be[o>>>4&15]+be[o&15]+be[u>>>28&15]+be[u>>>24&15]+be[u>>>20&15]+be[u>>>16&15]+be[u>>>12&15]+be[u>>>8&15]+be[u>>>4&15]+be[u&15];return this.is224||(f+=be[c>>>28&15]+be[c>>>24&15]+be[c>>>20&15]+be[c>>>16&15]+be[c>>>12&15]+be[c>>>8&15]+be[c>>>4&15]+be[c&15]),f};da.prototype.toString=da.prototype.hex;da.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.h5,u=this.h6,c=this.h7,f=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255];return this.is224||f.push(c>>>24&255,c>>>16&255,c>>>8&255,c&255),f};da.prototype.array=da.prototype.digest;da.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};const E$=(...t)=>new da(!1,!0).update(t.join("")).hex(),S$=(...t)=>E$(t.join("_"));var T$=class{constructor(){L(this,"keyEncoder",S$)}makeDefaultKeyEncoder(t){this.keyEncoder=t}};const A$=new Map;var C$=class x2 extends T${constructor(n){super();L(this,"cache");this.cache=n??new Map}lookup(n,a){return Promise.resolve(this.cache.get(this.keyEncoder(n,a))??null)}async update(n,a,s){this.cache.set(this.keyEncoder(n,a),s)}static global(){return new x2(A$)}},E2=class extends fl{},N$=class extends E2{constructor(e){super({value:e});L(this,"lc_namespace",["langchain_core","prompt_values"]);L(this,"lc_serializable",!0);L(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new hl(this.value)]}},O$=class extends E2{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);L(this,"lc_namespace",["langchain_core","prompt_values"]);L(this,"lc_serializable",!0);L(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return NA(this.messages)}toChatMessages(){return this.messages}},Vo={},IE;function R$(){if(IE)return Vo;IE=1,Vo.byteLength=c,Vo.toByteArray=h,Vo.fromByteArray=v;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)t[s]=a[s],e[a.charCodeAt(s)]=s;e[45]=62,e[95]=63;function u(_){var x=_.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=_.indexOf("=");w===-1&&(w=x);var A=w===x?0:4-w%4;return[w,A]}function c(_){var x=u(_),w=x[0],A=x[1];return(w+A)*3/4-A}function f(_,x,w){return(x+w)*3/4-w}function h(_){var x,w=u(_),A=w[0],T=w[1],k=new n(f(_,A,T)),R=0,z=T>0?A-4:A,P;for(P=0;P<z;P+=4)x=e[_.charCodeAt(P)]<<18|e[_.charCodeAt(P+1)]<<12|e[_.charCodeAt(P+2)]<<6|e[_.charCodeAt(P+3)],k[R++]=x>>16&255,k[R++]=x>>8&255,k[R++]=x&255;return T===2&&(x=e[_.charCodeAt(P)]<<2|e[_.charCodeAt(P+1)]>>4,k[R++]=x&255),T===1&&(x=e[_.charCodeAt(P)]<<10|e[_.charCodeAt(P+1)]<<4|e[_.charCodeAt(P+2)]>>2,k[R++]=x>>8&255,k[R++]=x&255),k}function m(_){return t[_>>18&63]+t[_>>12&63]+t[_>>6&63]+t[_&63]}function y(_,x,w){for(var A,T=[],k=x;k<w;k+=3)A=(_[k]<<16&16711680)+(_[k+1]<<8&65280)+(_[k+2]&255),T.push(m(A));return T.join("")}function v(_){for(var x,w=_.length,A=w%3,T=[],k=16383,R=0,z=w-A;R<z;R+=k)T.push(y(_,R,R+k>z?z:R+k));return A===1?(x=_[w-1],T.push(t[x>>2]+t[x<<4&63]+"==")):A===2&&(x=(_[w-2]<<8)+_[w-1],T.push(t[x>>10]+t[x>>4&63]+t[x<<2&63]+"=")),T.join("")}return Vo}var k$=R$();const I$=_g(k$);var j$=Object.defineProperty,M$=(t,e,n)=>e in t?j$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L$=(t,e,n)=>(M$(t,e+"",n),n);function D$(t,e){let n=Array.from({length:t.length},(a,s)=>({start:s,end:s+1}));for(;n.length>1;){let a=null;for(let s=0;s<n.length-1;s++){const o=t.slice(n[s].start,n[s+1].end),u=e.get(o.join(","));u!=null&&(a==null||u<a[0])&&(a=[u,s])}if(a!=null){const s=a[1];n[s]={start:n[s].start,end:n[s+1].end},n.splice(s+1,1)}else break}return n}function P$(t,e){return t.length===1?[e.get(t.join(","))]:D$(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function $$(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var vg=class{constructor(t,e){L(this,"specialTokens");L(this,"inverseSpecialTokens");L(this,"patStr");L(this,"textEncoder",new TextEncoder);L(this,"textDecoder",new TextDecoder("utf-8"));L(this,"rankMap",new Map);L(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((a,s)=>{const[o,u,...c]=s.split(" "),f=Number.parseInt(u,10);return c.forEach((h,m)=>a[h]=f+m),a},{});for(const[a,s]of Object.entries(n)){const o=I$.toByteArray(a);this.rankMap.set(o.join(","),s),this.textMap.set(s,o)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((a,[s,o])=>(a[o]=this.textEncoder.encode(s),a),{})}encode(t,e=[],n="all"){const a=new RegExp(this.patStr,"ug"),s=vg.specialTokenRegex(Object.keys(this.specialTokens)),o=[],u=new Set(e==="all"?Object.keys(this.specialTokens):e),c=new Set(n==="all"?Object.keys(this.specialTokens).filter(h=>!u.has(h)):n);if(c.size>0){const h=vg.specialTokenRegex([...c]),m=t.match(h);if(m!=null)throw new Error(`The text contains a special token that is not allowed: ${m[0]}`)}let f=0;for(;;){let h=null,m=f;for(;s.lastIndex=m,h=s.exec(t),!(h==null||u.has(h[0]));)m=h.index+1;const y=(h==null?void 0:h.index)??t.length;for(const _ of t.substring(f,y).matchAll(a)){const x=this.textEncoder.encode(_[0]),w=this.rankMap.get(x.join(","));if(w!=null){o.push(w);continue}o.push(...P$(x,this.rankMap))}if(h==null)break;let v=this.specialTokens[h[0]];o.push(v),f=h.index+h[0].length}return o}decode(t){const e=[];let n=0;for(let o=0;o<t.length;++o){const u=t[o],c=this.textMap.get(u)??this.inverseSpecialTokens[u];c!=null&&(e.push(c),n+=c.length)}const a=new Uint8Array(n);let s=0;for(const o of e)a.set(o,s),s+=o.length;return this.textDecoder.decode(a)}},S2=vg;L$(S2,"specialTokenRegex",t=>new RegExp(t.map(e=>$$(e)).join("|"),"g"));function U$(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const mc={},z$=new by({});async function B$(t){return t in mc||(mc[t]=z$.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new S2(e)).catch(e=>{throw delete mc[t],e})),await mc[t]}async function V$(t){return B$(U$(t))}const H$=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function T2(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const G$=()=>!1;var q$=class extends Xt{constructor(e){super(e);L(this,"verbose");L(this,"callbacks");L(this,"tags");L(this,"metadata");this.verbose=e.verbose??G$(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},F$=class extends q${constructor({callbacks:e,callbackManager:n,...a}){const{cache:s,...o}=a;super({callbacks:e??n,...o});L(this,"caller");L(this,"cache");L(this,"_encoding");typeof s=="object"?this.cache=s:s?this.cache=C$.global():this.cache=void 0,this.caller=new by(a??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(s=>typeof s=="string"?s:s.type==="text"&&"text"in s?s.text:"").join("");let a=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await V$("modelName"in this?H$(this.modelName):"gpt2")}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}if(this._encoding)try{a=this._encoding.encode(n).length}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}return a}static _convertInputToPromptValue(e){return typeof e=="string"?new N$(e):Array.isArray(e)?new O$(e.map(Ec)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const a={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(a).filter(([s,o])=>o!==void 0).map(([s,o])=>`${s}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}};const Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));function Y$(t,e=0){return(Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]).toLowerCase()}let gp;const Z$=new Uint8Array(16);function X$(){if(!gp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gp=crypto.getRandomValues.bind(crypto)}return gp(Z$)}const K$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jE={randomUUID:K$};function A2(t,e,n){var s;if(jE.randomUUID&&!t)return jE.randomUUID();t=t||{};const a=t.random??((s=t.rng)==null?void 0:s.call(t))??X$();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Y$(a)}const Ey="__gemini_function_call_thought_signatures__",Q$="ErYCCrMCAdHtim9kOoOkrPiCNVsmlpMIKd7ZMxgiFbVQOkgp7nlLcDMzVsZwIzvuT7nQROivoXA72ccC2lSDvR0Gh7dkWaGuj7ctv6t7ZceHnecx0QYa+ix8tYpRfjhyWozQ49lWiws6+YGjCt10KRTyWsZ2h6O7iHTYJwKIRwGUHRKy/qK/6kFxJm5ML00gLq4D8s5Z6DBpp2ZlR+uF4G8jJgeWQgyHWVdx2wGYElaceVAc66tZdPQRdOHpWtgYSI1YdaXgVI8KHY3/EfNc2YqqMIulvkDBAnuMhkAjV9xmBa54Tq+ih3Im4+r3DzqhGqYdsSkhS0kZMwte4Hjs65dZzCw9lANxIqYi1DJ639WNPYihp/DCJCos7o+/EeSPJaio5sgWDyUnMGkY1atsJZ+m7pj7DD5tvQ==",J$=t=>t();function W$(t){return AA.isInstance(t)?t.role:t.type}function e9(t){switch(t){case"supervisor":case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${t}`)}}function t9(t){if("mimeType"in t&&"data"in t)return{inlineData:{mimeType:t.mimeType,data:t.data}};if("mimeType"in t&&"fileUri"in t)return{fileData:{mimeType:t.mimeType,fileUri:t.fileUri}};throw new Error("Invalid media content")}function n9(t,e){var n;return(n=e.map(a=>ly(a)?a.tool_calls??[]:[]).flat().find(a=>a.id===t.tool_call_id))==null?void 0:n.name}function a9(t){return{providerName:"Google Gemini",fromStandardTextBlock(e){return{text:e.text}},fromStandardImageBlock(e){if(!t)throw new Error("This model does not support images");if(e.source_type==="url"){const n=Wo({dataUrl:e.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:e.mime_type??"",fileUri:e.url}}}if(e.source_type==="base64")return{inlineData:{mimeType:e.mime_type??"",data:e.data}};throw new Error(`Unsupported source type: ${e.source_type}`)},fromStandardAudioBlock(e){if(!t)throw new Error("This model does not support audio");if(e.source_type==="url"){const n=Wo({dataUrl:e.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:e.mime_type??"",fileUri:e.url}}}if(e.source_type==="base64")return{inlineData:{mimeType:e.mime_type??"",data:e.data}};throw new Error(`Unsupported source type: ${e.source_type}`)},fromStandardFileBlock(e){if(!t)throw new Error("This model does not support files");if(e.source_type==="text")return{text:e.text};if(e.source_type==="url"){const n=Wo({dataUrl:e.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:e.mime_type??"",fileUri:e.url}}}if(e.source_type==="base64")return{inlineData:{mimeType:e.mime_type??"",data:e.data}};throw new Error(`Unsupported source type: ${e.source_type}`)}}}function ME(t,e){var n;if(ws(t))return ZM(t,a9(e));if(t.type==="text")return{text:t.text};if(t.type==="executableCode")return{executableCode:t.executableCode};if(t.type==="codeExecutionResult")return{codeExecutionResult:t.codeExecutionResult};if(t.type==="image_url"){if(!e)throw new Error("This model does not support images");let a;if(typeof t.image_url=="string")a=t.image_url;else if(typeof t.image_url=="object"&&"url"in t.image_url)a=t.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[s,o]=a.split(",");if(!s.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[u,c]=s.replace(/^data:/,"").split(";");if(c!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:o,mimeType:u}}}else{if(t.type==="media")return t9(t);if(t.type==="tool_use")return{functionCall:{name:t.name,args:t.input}};if(t.type==="tool_call")return{functionCall:{name:t.name,args:t.args}};if((n=t.type)!=null&&n.includes("/")&&t.type.split("/").length===2&&"data"in t&&typeof t.data=="string")return{inlineData:{mimeType:t.type,data:t.data}};if("functionCall"in t)return;throw"type"in t?new Error(`Unknown content type ${t.type}`):new Error(`Unknown content ${JSON.stringify(t)}`)}}function i9(t,e,n,a){var c,f;if(kL(t)){const h=t.name??n9(t,n);if(h===void 0)throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage "${t.id}" from your passed messages. Please populate a "name" field on that ToolMessage explicitly.`);const m=Array.isArray(t.content)?t.content.map(y=>ME(y,e)).filter(y=>y!==void 0):t.content;return t.status==="error"?[{functionResponse:{name:h,response:{error:{details:m}}}}]:[{functionResponse:{name:h,response:{result:m}}}]}let s=[];const o=[];typeof t.content=="string"&&t.content&&o.push({text:t.content}),Array.isArray(t.content)&&o.push(...t.content.map(h=>ME(h,e)).filter(h=>h!==void 0));const u=(c=t.additional_kwargs)==null?void 0:c[Ey];return ly(t)&&((f=t.tool_calls)!=null&&f.length)&&(s=t.tool_calls.map(h=>{const m=J$(()=>{if(h.id){const y=u==null?void 0:u[h.id];if(y)return y}return a!=null&&a.includes("gemini-3")?Q$:""});return{functionCall:{name:h.name,args:h.args},...m?{thoughtSignature:m}:{}}})),[...o,...s]}function LE(t,e,n=!1,a){return t.reduce((s,o,u)=>{if(!rd(o))throw new Error("Unsupported message input");const c=W$(o);if(c==="system"&&u!==0)throw new Error("System message should be the first one");const f=e9(c),h=s.content[s.content.length];if(!s.mergeWithPreviousContent&&h&&h.role===f)throw new Error("Google Generative AI requires alternate messages between authors");const m=i9(o,e,t.slice(0,u),a);if(s.mergeWithPreviousContent){const _=s.content[s.content.length-1];if(!_)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return _.parts.push(...m),{mergeWithPreviousContent:!1,content:s.content}}let y=f;(y==="function"||y==="system"&&!n)&&(y="user");const v={role:y,parts:m};return{mergeWithPreviousContent:c==="system"&&!n,content:[...s.content,v]}},{content:[],mergeWithPreviousContent:!1}).content}function s9(t,e){var m,y,v,_,x;if(!t.candidates||t.candidates.length===0||!t.candidates[0])return{generations:[],llmOutput:{filters:t.promptFeedback}};const[n]=t.candidates,{content:a,...s}=n,o=(m=a.parts)==null?void 0:m.reduce((w,A)=>("functionCall"in A&&A.functionCall&&w.push({...A,id:"id"in A.functionCall&&typeof A.functionCall.id=="string"?A.functionCall.id:A2()}),w),[]);let u;const c=a==null?void 0:a.parts;Array.isArray(c)&&c.length===1&&"text"in c[0]&&c[0].text&&!c[0].thought?u=c[0].text:Array.isArray(c)&&c.length>0?u=c.map(w=>w.thought&&"text"in w&&w.text?{type:"thinking",thinking:w.text,...w.thoughtSignature?{signature:w.thoughtSignature}:{}}:"text"in w?{type:"text",text:w.text}:"inlineData"in w?{type:"inlineData",inlineData:w.inlineData}:"functionCall"in w?{type:"functionCall",functionCall:w.functionCall}:"functionResponse"in w?{type:"functionResponse",functionResponse:w.functionResponse}:"fileData"in w?{type:"fileData",fileData:w.fileData}:"executableCode"in w?{type:"executableCode",executableCode:w.executableCode}:"codeExecutionResult"in w?{type:"codeExecutionResult",codeExecutionResult:w.codeExecutionResult}:w):u=[];const f=o==null?void 0:o.reduce((w,A)=>("thoughtSignature"in A&&typeof A.thoughtSignature=="string"&&(w[A.id]=A.thoughtSignature),w),{});let h="";return typeof u=="string"?h=u:Array.isArray(u)&&u.length>0&&(h=((y=u.find(w=>"text"in w))==null?void 0:y.text)??h),{generations:[{text:h,message:new Mr({content:u??"",tool_calls:o==null?void 0:o.map(w=>({type:"tool_call",id:w.id,name:w.functionCall.name,args:w.functionCall.args})),additional_kwargs:{...s,[Ey]:f},usage_metadata:e==null?void 0:e.usageMetadata}),generationInfo:s}],llmOutput:{tokenUsage:{promptTokens:(v=e==null?void 0:e.usageMetadata)==null?void 0:v.input_tokens,completionTokens:(_=e==null?void 0:e.usageMetadata)==null?void 0:_.output_tokens,totalTokens:(x=e==null?void 0:e.usageMetadata)==null?void 0:x.total_tokens}}}}function r9(t,e){var y,v;if(!t.candidates||t.candidates.length===0)return null;const[n]=t.candidates,{content:a,...s}=n,o=(y=a.parts)==null?void 0:y.reduce((_,x)=>("functionCall"in x&&x.functionCall&&_.push({...x,id:"id"in x.functionCall&&typeof x.functionCall.id=="string"?x.functionCall.id:A2()}),_),[]);let u;const c=a==null?void 0:a.parts;Array.isArray(c)&&c.every(_=>"text"in _&&!_.thought)?u=c.map(_=>_.text).join(""):Array.isArray(c)?u=c.map(_=>_.thought&&"text"in _&&_.text?{type:"thinking",thinking:_.text,..._.thoughtSignature?{signature:_.thoughtSignature}:{}}:"text"in _?{type:"text",text:_.text}:"inlineData"in _?{type:"inlineData",inlineData:_.inlineData}:"functionCall"in _?{type:"functionCall",functionCall:_.functionCall}:"functionResponse"in _?{type:"functionResponse",functionResponse:_.functionResponse}:"fileData"in _?{type:"fileData",fileData:_.fileData}:"executableCode"in _?{type:"executableCode",executableCode:_.executableCode}:"codeExecutionResult"in _?{type:"codeExecutionResult",codeExecutionResult:_.codeExecutionResult}:_):u=[];let f="";u&&typeof u=="string"?f=u:Array.isArray(u)&&(f=((v=u.find(_=>"text"in _))==null?void 0:v.text)??"");const h=[];o&&h.push(...o.map(_=>({type:"tool_call_chunk",id:_.id,name:_.functionCall.name,args:JSON.stringify(_.functionCall.args)})));const m=o==null?void 0:o.reduce((_,x)=>("thoughtSignature"in x&&typeof x.thoughtSignature=="string"&&(_[x.id]=x.thoughtSignature),_),{});return new mg({text:f,message:new Tl({content:u||"",name:a?a.role:void 0,tool_call_chunks:h,additional_kwargs:{[Ey]:m},response_metadata:{model_provider:"google-genai"},usage_metadata:e.usageMetadata}),generationInfo:s})}function o9(t){return t.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?t:[{functionDeclarations:t.map(e=>{if(w2(e)){const n=tg(e.schema);return n.type==="object"&&"properties"in n&&Object.keys(n.properties).length===0?{name:e.name,description:e.description}:(xr(n,e.name),{name:e.name,description:e.description,parameters:n})}if(T2(e)){const n=qM(e.function.parameters);return xr(n,e.function.name),{name:e.function.name,description:e.function.description??"A function available to call.",parameters:n}}return e})}]}function DE(t,e){const n={input_tokens:(t==null?void 0:t.promptTokenCount)??0,output_tokens:(t==null?void 0:t.candidatesTokenCount)??0,total_tokens:(t==null?void 0:t.totalTokenCount)??0};if(t!=null&&t.cachedContentTokenCount&&(n.input_token_details??(n.input_token_details={}),n.input_token_details.cache_read=t.cachedContentTokenCount),e==="gemini-3-pro-preview"){const a=Math.max(0,(t==null?void 0:t.promptTokenCount)??-2e5),s=Math.max(0,(t==null?void 0:t.cachedContentTokenCount)??-2e5);a&&(n.input_token_details={...n.input_token_details,over_200k:a}),s&&(n.input_token_details={...n.input_token_details,cache_read_over_200k:s})}return n}var Wc=class extends Xt{constructor(e){super(e);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,n){const a=it(n);return this.func&&await this.func(e,a),this._callWithConfig(s=>Promise.resolve(s),e,a)}async*transform(e,n){const a=it(n);let s,o=!0;for await(const u of this._transformStreamWithConfig(e,c=>c,a))if(yield u,o)if(s===void 0)s=u;else try{s=md(s,u)}catch{s=void 0,o=!1}this.func&&s!==void 0&&await this.func(s,a)}static assign(e){return new b2(new gd({steps:e}))}},C2=class extends Xt{parseResultWithPrompt(t,e,n){return this.parseResult(t,n)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(n,a)=>this.parseResult([{text:n}],a==null?void 0:a.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(n,a)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],a==null?void 0:a.callbacks),t,{...e,runType:"parser"})}},l9=class extends C2{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,n){return this.parse(t,n)}_type(){throw new Error("_type not implemented")}},u9=class extends Error{constructor(e,n,a,s=!1){super(e);L(this,"llmOutput");L(this,"observation");L(this,"sendToLLM");if(this.llmOutput=n,this.observation=a,this.sendToLLM=s,s&&(a===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");wA(this,"OUTPUT_PARSING_FAILURE")}},c9=class extends l9{async*_transform(t){for await(const e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},d9=class extends c9{constructor(e){super(e);L(this,"diff",!1);this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,a;for await(const s of e){if(typeof s!="string"&&typeof s.content!="string")throw new Error("Cannot handle non-string output.");let o;if(TL(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");o=new mg({message:s,text:s.content})}else if(rd(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");o=new mg({message:WL(s),text:s.content})}else o=new Qc({text:s});a===void 0?a=o:a=a.concat(o);const u=await this.parsePartialResult([a]);u!=null&&!eg(u,n)&&(this.diff?yield this._diff(n,u):yield u,n=u)}}getFormatInstructions(){return""}},f9=class extends d9{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers"]);L(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?HP(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return B1(e[0].text)}async parse(e){return B1(e,JSON.parse)}getFormatInstructions(){return""}_baseMessageToString(e){return e.text}};const h9=function(){const t={};t.parser=function(N,S){return new n(N,S)},t.SAXParser=n,t.SAXStream=h,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;const e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(N,S){if(!(this instanceof n))return new n(N,S);var V=this;s(V),V.q=V.c="",V.bufferCheckPosition=t.MAX_BUFFER_LENGTH,V.opt=S||{},V.opt.lowercase=V.opt.lowercase||V.opt.lowercasetags,V.looseCase=V.opt.lowercase?"toLowerCase":"toUpperCase",V.tags=[],V.closed=V.closedRoot=V.sawRoot=!1,V.tag=V.error=null,V.strict=!!N,V.noscript=!!(N||V.opt.noscript),V.state=O.BEGIN,V.strictEntities=V.opt.strictEntities,V.ENTITIES=V.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),V.attribList=[],V.opt.xmlns&&(V.ns=Object.create(x)),V.trackPosition=V.opt.position!==!1,V.trackPosition&&(V.position=V.line=V.column=0),Ce(V,"onready")}Object.create||(Object.create=function(N){function S(){}return S.prototype=N,new S}),Object.keys||(Object.keys=function(N){var S=[];for(var V in N)N.hasOwnProperty(V)&&S.push(V);return S});function a(N){for(var S=Math.max(t.MAX_BUFFER_LENGTH,10),V=0,$=0,me=e.length;$<me;$++){var Ie=N[e[$]].length;if(Ie>S)switch(e[$]){case"textNode":De(N);break;case"cdata":ve(N,"oncdata",N.cdata),N.cdata="";break;case"script":ve(N,"onscript",N.script),N.script="";break;default:oe(N,"Max buffer length exceeded: "+e[$])}V=Math.max(V,Ie)}N.bufferCheckPosition=t.MAX_BUFFER_LENGTH-V+N.position}function s(N){for(var S=0,V=e.length;S<V;S++)N[e[S]]=""}function o(N){De(N),N.cdata!==""&&(ve(N,"oncdata",N.cdata),N.cdata=""),N.script!==""&&(ve(N,"onscript",N.script),N.script="")}n.prototype={end:function(){re(this)},write:pe,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var u=ReadableStream;u||(u=function(){});var c=t.EVENTS.filter(function(N){return N!=="error"&&N!=="end"});function f(N,S){return new h(N,S)}function h(N,S){if(!(this instanceof h))return new h(N,S);u.apply(this),this._parser=new n(N,S),this.writable=!0,this.readable=!0;var V=this;this._parser.onend=function(){V.emit("end")},this._parser.onerror=function($){V.emit("error",$),V._parser.error=null},this._decoder=null,c.forEach(function($){Object.defineProperty(V,"on"+$,{get:function(){return V._parser["on"+$]},set:function(me){if(!me)return V.removeAllListeners($),V._parser["on"+$]=me,me;V.on($,me)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(u.prototype,{constructor:{value:h}}),h.prototype.write=function(N){return this._parser.write(N.toString()),this.emit("data",N),!0},h.prototype.end=function(N){return N&&N.length&&this.write(N),this._parser.end(),!0},h.prototype.on=function(N,S){var V=this;return!V._parser["on"+N]&&c.indexOf(N)!==-1&&(V._parser["on"+N]=function(){var $=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);$.splice(0,0,N),V.emit.apply(V,$)}),u.prototype.on.call(V,N,S)};var m="[CDATA[",y="DOCTYPE",v="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",x={xml:v,xmlns:_},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function R(N){return N===" "||N===`
`||N==="\r"||N==="	"}function z(N){return N==='"'||N==="'"}function P(N){return N===">"||R(N)}function Y(N,S){return N.test(S)}function W(N,S){return!Y(N,S)}var O=0;t.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(N){var S=t.ENTITIES[N],V=typeof S=="number"?String.fromCharCode(S):S;t.ENTITIES[N]=V});for(var ge in t.STATE)t.STATE[t.STATE[ge]]=ge;O=t.STATE;function Ce(N,S,V){N[S]&&N[S](V)}function ve(N,S,V){N.textNode&&De(N),Ce(N,S,V)}function De(N){N.textNode=We(N.opt,N.textNode),N.textNode&&Ce(N,"ontext",N.textNode),N.textNode=""}function We(N,S){return N.trim&&(S=S.trim()),N.normalize&&(S=S.replace(/\s+/g," ")),S}function oe(N,S){return De(N),N.trackPosition&&(S+=`
Line: `+N.line+`
Column: `+N.column+`
Char: `+N.c),S=new Error(S),N.error=S,Ce(N,"onerror",S),N}function re(N){return N.sawRoot&&!N.closedRoot&&j(N,"Unclosed root tag"),N.state!==O.BEGIN&&N.state!==O.BEGIN_WHITESPACE&&N.state!==O.TEXT&&oe(N,"Unexpected end"),De(N),N.c="",N.closed=!0,Ce(N,"onend"),n.call(N,N.strict,N.opt),N}function j(N,S){if(typeof N!="object"||!(N instanceof n))throw new Error("bad call to strictFail");N.strict&&oe(N,S)}function U(N){N.strict||(N.tagName=N.tagName[N.looseCase]());var S=N.tags[N.tags.length-1]||N,V=N.tag={name:N.tagName,attributes:{}};N.opt.xmlns&&(V.ns=S.ns),N.attribList.length=0,ve(N,"onopentagstart",V)}function Q(N,S){var V=N.indexOf(":")<0?["",N]:N.split(":"),$=V[0],me=V[1];return S&&N==="xmlns"&&($="xmlns",me=""),{prefix:$,local:me}}function X(N){if(N.strict||(N.attribName=N.attribName[N.looseCase]()),N.attribList.indexOf(N.attribName)!==-1||N.tag.attributes.hasOwnProperty(N.attribName)){N.attribName=N.attribValue="";return}if(N.opt.xmlns){var S=Q(N.attribName,!0),V=S.prefix,$=S.local;if(V==="xmlns")if($==="xml"&&N.attribValue!==v)j(N,"xml: prefix must be bound to "+v+`
Actual: `+N.attribValue);else if($==="xmlns"&&N.attribValue!==_)j(N,"xmlns: prefix must be bound to "+_+`
Actual: `+N.attribValue);else{var me=N.tag,Ie=N.tags[N.tags.length-1]||N;me.ns===Ie.ns&&(me.ns=Object.create(Ie.ns)),me.ns[$]=N.attribValue}N.attribList.push([N.attribName,N.attribValue])}else N.tag.attributes[N.attribName]=N.attribValue,ve(N,"onattribute",{name:N.attribName,value:N.attribValue});N.attribName=N.attribValue=""}function ae(N,S){if(N.opt.xmlns){var V=N.tag,$=Q(N.tagName);V.prefix=$.prefix,V.local=$.local,V.uri=V.ns[$.prefix]||"",V.prefix&&!V.uri&&(j(N,"Unbound namespace prefix: "+JSON.stringify(N.tagName)),V.uri=$.prefix);var me=N.tags[N.tags.length-1]||N;V.ns&&me.ns!==V.ns&&Object.keys(V.ns).forEach(function(As){ve(N,"onopennamespace",{prefix:As,uri:V.ns[As]})});for(var Ie=0,Qe=N.attribList.length;Ie<Qe;Ie++){var ct=N.attribList[Ie],yt=ct[0],_n=ct[1],J=Q(yt,!0),ue=J.prefix,ke=J.local,tt=ue===""?"":V.ns[ue]||"",Ct={name:yt,value:_n,prefix:ue,local:ke,uri:tt};ue&&ue!=="xmlns"&&!tt&&(j(N,"Unbound namespace prefix: "+JSON.stringify(ue)),Ct.uri=ue),N.tag.attributes[yt]=Ct,ve(N,"onattribute",Ct)}N.attribList.length=0}N.tag.isSelfClosing=!!S,N.sawRoot=!0,N.tags.push(N.tag),ve(N,"onopentag",N.tag),S||(!N.noscript&&N.tagName.toLowerCase()==="script"?N.state=O.SCRIPT:N.state=O.TEXT,N.tag=null,N.tagName=""),N.attribName=N.attribValue="",N.attribList.length=0}function I(N){if(!N.tagName){j(N,"Weird empty close tag."),N.textNode+="</>",N.state=O.TEXT;return}if(N.script){if(N.tagName!=="script"){N.script+="</"+N.tagName+">",N.tagName="",N.state=O.SCRIPT;return}ve(N,"onscript",N.script),N.script=""}var S=N.tags.length,V=N.tagName;N.strict||(V=V[N.looseCase]());for(var $=V;S--&&N.tags[S].name!==$;)j(N,"Unexpected close tag");if(S<0){j(N,"Unmatched closing tag: "+N.tagName),N.textNode+="</"+N.tagName+">",N.state=O.TEXT;return}N.tagName=V;for(var me=N.tags.length;me-- >S;){var Ie=N.tag=N.tags.pop();N.tagName=N.tag.name,ve(N,"onclosetag",N.tagName);var Qe={};for(var ct in Ie.ns)Qe[ct]=Ie.ns[ct];var yt=N.tags[N.tags.length-1]||N;N.opt.xmlns&&Ie.ns!==yt.ns&&Object.keys(Ie.ns).forEach(function(_n){var J=Ie.ns[_n];ve(N,"onclosenamespace",{prefix:_n,uri:J})})}S===0&&(N.closedRoot=!0),N.tagName=N.attribValue=N.attribName="",N.attribList.length=0,N.state=O.TEXT}function H(N){var S=N.entity,V=S.toLowerCase(),$,me="";return N.ENTITIES[S]?N.ENTITIES[S]:N.ENTITIES[V]?N.ENTITIES[V]:(S=V,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),$=parseInt(S,16),me=$.toString(16)):(S=S.slice(1),$=parseInt(S,10),me=$.toString(10))),S=S.replace(/^0+/,""),isNaN($)||me.toLowerCase()!==S?(j(N,"Invalid character entity"),"&"+N.entity+";"):String.fromCodePoint($))}function ie(N,S){S==="<"?(N.state=O.OPEN_WAKA,N.startTagPosition=N.position):R(S)||(j(N,"Non-whitespace before first tag."),N.textNode=S,N.state=O.TEXT)}function le(N,S){var V="";return S<N.length&&(V=N.charAt(S)),V}function pe(N){var S=this;if(this.error)throw this.error;if(S.closed)return oe(S,"Cannot write after close. Assign an onready handler.");if(N===null)return re(S);typeof N=="object"&&(N=N.toString());for(var V=0,$="";$=le(N,V++),S.c=$,!!$;)switch(S.trackPosition&&(S.position++,$===`
`?(S.line++,S.column=0):S.column++),S.state){case O.BEGIN:if(S.state=O.BEGIN_WHITESPACE,$==="\uFEFF")continue;ie(S,$);continue;case O.BEGIN_WHITESPACE:ie(S,$);continue;case O.TEXT:if(S.sawRoot&&!S.closedRoot){for(var me=V-1;$&&$!=="<"&&$!=="&";)$=le(N,V++),$&&S.trackPosition&&(S.position++,$===`
`?(S.line++,S.column=0):S.column++);S.textNode+=N.substring(me,V-1)}$==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=O.OPEN_WAKA,S.startTagPosition=S.position):(!R($)&&(!S.sawRoot||S.closedRoot)&&j(S,"Text data outside of root node."),$==="&"?S.state=O.TEXT_ENTITY:S.textNode+=$);continue;case O.SCRIPT:$==="<"?S.state=O.SCRIPT_ENDING:S.script+=$;continue;case O.SCRIPT_ENDING:$==="/"?S.state=O.CLOSE_TAG:(S.script+="<"+$,S.state=O.SCRIPT);continue;case O.OPEN_WAKA:if($==="!")S.state=O.SGML_DECL,S.sgmlDecl="";else if(!R($))if(Y(w,$))S.state=O.OPEN_TAG,S.tagName=$;else if($==="/")S.state=O.CLOSE_TAG,S.tagName="";else if($==="?")S.state=O.PROC_INST,S.procInstName=S.procInstBody="";else{if(j(S,"Unencoded <"),S.startTagPosition+1<S.position){var Ie=S.position-S.startTagPosition;$=new Array(Ie).join(" ")+$}S.textNode+="<"+$,S.state=O.TEXT}continue;case O.SGML_DECL:(S.sgmlDecl+$).toUpperCase()===m?(ve(S,"onopencdata"),S.state=O.CDATA,S.sgmlDecl="",S.cdata=""):S.sgmlDecl+$==="--"?(S.state=O.COMMENT,S.comment="",S.sgmlDecl=""):(S.sgmlDecl+$).toUpperCase()===y?(S.state=O.DOCTYPE,(S.doctype||S.sawRoot)&&j(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):$===">"?(ve(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=O.TEXT):(z($)&&(S.state=O.SGML_DECL_QUOTED),S.sgmlDecl+=$);continue;case O.SGML_DECL_QUOTED:$===S.q&&(S.state=O.SGML_DECL,S.q=""),S.sgmlDecl+=$;continue;case O.DOCTYPE:$===">"?(S.state=O.TEXT,ve(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=$,$==="["?S.state=O.DOCTYPE_DTD:z($)&&(S.state=O.DOCTYPE_QUOTED,S.q=$));continue;case O.DOCTYPE_QUOTED:S.doctype+=$,$===S.q&&(S.q="",S.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:S.doctype+=$,$==="]"?S.state=O.DOCTYPE:z($)&&(S.state=O.DOCTYPE_DTD_QUOTED,S.q=$);continue;case O.DOCTYPE_DTD_QUOTED:S.doctype+=$,$===S.q&&(S.state=O.DOCTYPE_DTD,S.q="");continue;case O.COMMENT:$==="-"?S.state=O.COMMENT_ENDING:S.comment+=$;continue;case O.COMMENT_ENDING:$==="-"?(S.state=O.COMMENT_ENDED,S.comment=We(S.opt,S.comment),S.comment&&ve(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+$,S.state=O.COMMENT);continue;case O.COMMENT_ENDED:$!==">"?(j(S,"Malformed comment"),S.comment+="--"+$,S.state=O.COMMENT):S.state=O.TEXT;continue;case O.CDATA:$==="]"?S.state=O.CDATA_ENDING:S.cdata+=$;continue;case O.CDATA_ENDING:$==="]"?S.state=O.CDATA_ENDING_2:(S.cdata+="]"+$,S.state=O.CDATA);continue;case O.CDATA_ENDING_2:$===">"?(S.cdata&&ve(S,"oncdata",S.cdata),ve(S,"onclosecdata"),S.cdata="",S.state=O.TEXT):$==="]"?S.cdata+="]":(S.cdata+="]]"+$,S.state=O.CDATA);continue;case O.PROC_INST:$==="?"?S.state=O.PROC_INST_ENDING:R($)?S.state=O.PROC_INST_BODY:S.procInstName+=$;continue;case O.PROC_INST_BODY:if(!S.procInstBody&&R($))continue;$==="?"?S.state=O.PROC_INST_ENDING:S.procInstBody+=$;continue;case O.PROC_INST_ENDING:$===">"?(ve(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=O.TEXT):(S.procInstBody+="?"+$,S.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:Y(A,$)?S.tagName+=$:(U(S),$===">"?ae(S):$==="/"?S.state=O.OPEN_TAG_SLASH:(R($)||j(S,"Invalid character in tag name"),S.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:$===">"?(ae(S,!0),I(S)):(j(S,"Forward-slash in opening tag not followed by >"),S.state=O.ATTRIB);continue;case O.ATTRIB:if(R($))continue;$===">"?ae(S):$==="/"?S.state=O.OPEN_TAG_SLASH:Y(w,$)?(S.attribName=$,S.attribValue="",S.state=O.ATTRIB_NAME):j(S,"Invalid attribute name");continue;case O.ATTRIB_NAME:$==="="?S.state=O.ATTRIB_VALUE:$===">"?(j(S,"Attribute without value"),S.attribValue=S.attribName,X(S),ae(S)):R($)?S.state=O.ATTRIB_NAME_SAW_WHITE:Y(A,$)?S.attribName+=$:j(S,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if($==="=")S.state=O.ATTRIB_VALUE;else{if(R($))continue;j(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",ve(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",$===">"?ae(S):Y(w,$)?(S.attribName=$,S.state=O.ATTRIB_NAME):(j(S,"Invalid attribute name"),S.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(R($))continue;z($)?(S.q=$,S.state=O.ATTRIB_VALUE_QUOTED):(j(S,"Unquoted attribute value"),S.state=O.ATTRIB_VALUE_UNQUOTED,S.attribValue=$);continue;case O.ATTRIB_VALUE_QUOTED:if($!==S.q){$==="&"?S.state=O.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=$;continue}X(S),S.q="",S.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:R($)?S.state=O.ATTRIB:$===">"?ae(S):$==="/"?S.state=O.OPEN_TAG_SLASH:Y(w,$)?(j(S,"No whitespace between attributes"),S.attribName=$,S.attribValue="",S.state=O.ATTRIB_NAME):j(S,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(!P($)){$==="&"?S.state=O.ATTRIB_VALUE_ENTITY_U:S.attribValue+=$;continue}X(S),$===">"?ae(S):S.state=O.ATTRIB;continue;case O.CLOSE_TAG:if(S.tagName)$===">"?I(S):Y(A,$)?S.tagName+=$:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=O.SCRIPT):(R($)||j(S,"Invalid tagname in closing tag"),S.state=O.CLOSE_TAG_SAW_WHITE);else{if(R($))continue;W(w,$)?S.script?(S.script+="</"+$,S.state=O.SCRIPT):j(S,"Invalid tagname in closing tag."):S.tagName=$}continue;case O.CLOSE_TAG_SAW_WHITE:if(R($))continue;$===">"?I(S):j(S,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var Qe,ct;switch(S.state){case O.TEXT_ENTITY:Qe=O.TEXT,ct="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:Qe=O.ATTRIB_VALUE_QUOTED,ct="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:Qe=O.ATTRIB_VALUE_UNQUOTED,ct="attribValue";break}if($===";")if(S.opt.unparsedEntities){var yt=H(S);S.entity="",S.state=Qe,S.write(yt)}else S[ct]+=H(S),S.entity="",S.state=Qe;else Y(S.entity.length?k:T,$)?S.entity+=$:(j(S,"Invalid character in entity name"),S[ct]+="&"+S.entity+$,S.entity="",S.state=Qe);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&a(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||(function(){var N=String.fromCharCode,S=Math.floor,V=function(){var $=16384,me=[],Ie,Qe,ct=-1,yt=arguments.length;if(!yt)return"";for(var _n="";++ct<yt;){var J=Number(arguments[ct]);if(!isFinite(J)||J<0||J>1114111||S(J)!==J)throw RangeError("Invalid code point: "+J);J<=65535?me.push(J):(J-=65536,Ie=(J>>10)+55296,Qe=J%1024+56320,me.push(Ie,Qe)),(ct+1===yt||me.length>$)&&(_n+=N.apply(null,me),me.length=0)}return _n};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:V,configurable:!0,writable:!0}):String.fromCodePoint=V})(),t};h9();var PE=class extends C2{constructor(e){super(e);L(this,"lc_namespace",["langchain","google_genai","output_parsers"]);L(this,"returnId",!1);L(this,"keyName");L(this,"returnSingle",!1);L(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await S5(this.zodSchema,e);if(n.success)return n.data;throw new u9(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.issues)}`,JSON.stringify(e,null,2))}async parseResult(e){const n=e.flatMap(s=>{const{message:o}=s;return!("tool_calls"in o)||!Array.isArray(o.tool_calls)?[]:o.tool_calls});if(n[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[a]=n;return await this._validateResult(a.args)}},$E;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})($E||($E={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UE;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(UE||(UE={}));var zE;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(zE||(zE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=["user","model","function","system"];var VE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(VE||(VE={}));var HE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HE||(HE={}));var GE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(GE||(GE={}));var qE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(qE||(qE={}));var al;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(al||(al={}));var FE;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(FE||(FE={}));var Ar;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Ar||(Ar={}));var YE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(YE||(YE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class hr extends Qt{constructor(e,n){super(e),this.response=n}}class N2 extends Qt{constructor(e,n,a,s){super(e),this.status=n,this.statusText=a,this.errorDetails=s}}class Pi extends Qt{}class O2 extends Qt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="https://generativelanguage.googleapis.com",p9="v1beta",g9="0.24.1",y9="genai-js";var Ss;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ss||(Ss={}));class v9{constructor(e,n,a,s,o){this.model=e,this.task=n,this.apiKey=a,this.stream=s,this.requestOptions=o}toString(){var e,n;const a=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||p9;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||m9}/${a}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function _9(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${y9}/${g9}`),e.join(" ")}async function b9(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",_9(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let a=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(s){throw new Pi(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${s.message}`)}for(const[s,o]of a.entries()){if(s==="x-goog-api-key")throw new Pi(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Pi(`Header name ${s} can only be set using the apiClient field`);n.append(s,o)}}return n}async function w9(t,e,n,a,s,o){const u=new v9(t,e,n,a,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},T9(o)),{method:"POST",headers:await b9(u),body:s})}}async function Nl(t,e,n,a,s,o={},u=fetch){const{url:c,fetchOptions:f}=await w9(t,e,n,a,s,o);return x9(c,f,u)}async function x9(t,e,n=fetch){let a;try{a=await n(t,e)}catch(s){E9(s,t)}return a.ok||await S9(a,t),a}function E9(t,e){let n=t;throw n.name==="AbortError"?(n=new O2(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof N2||t instanceof Pi||(n=new Qt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function S9(t,e){let n="",a;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,a=s.error.details)}catch{}throw new N2(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,a)}function T9(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Cc(t.candidates[0]))throw new hr(`${Oi(t)}`,t);return A9(t)}else if(t.promptFeedback)throw new hr(`Text not available. ${Oi(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Cc(t.candidates[0]))throw new hr(`${Oi(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ZE(t)[0]}else if(t.promptFeedback)throw new hr(`Function call not available. ${Oi(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Cc(t.candidates[0]))throw new hr(`${Oi(t)}`,t);return ZE(t)}else if(t.promptFeedback)throw new hr(`Function call not available. ${Oi(t)}`,t)},t}function A9(t){var e,n,a,s;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(s=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||s===void 0?void 0:s.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function ZE(t){var e,n,a,s;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(s=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||s===void 0?void 0:s.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}const C9=[al.RECITATION,al.SAFETY,al.LANGUAGE];function Cc(t){return!!t.finishReason&&C9.includes(t.finishReason)}function Oi(t){var e,n,a;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((a=t.candidates)===null||a===void 0)&&a[0]){const o=t.candidates[0];Cc(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function vl(t){return this instanceof vl?(this.v=t,this):new vl(t)}function N9(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),s,o=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(v){a[v]&&(s[v]=function(_){return new Promise(function(x,w){o.push([v,_,x,w])>1||c(v,_)})})}function c(v,_){try{f(a[v](_))}catch(x){y(o[0][3],x)}}function f(v){v.value instanceof vl?Promise.resolve(v.value.v).then(h,m):y(o[0][2],v)}function h(v){c("next",v)}function m(v){c("throw",v)}function y(v,_){v(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function O9(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=I9(e),[a,s]=n.tee();return{stream:k9(a),response:R9(s)}}async function R9(t){const e=[],n=t.getReader();for(;;){const{done:a,value:s}=await n.read();if(a)return Sy(j9(e));e.push(s)}}function k9(t){return N9(this,arguments,function*(){const n=t.getReader();for(;;){const{value:a,done:s}=yield vl(n.read());if(s)break;yield yield vl(Sy(a))}})}function I9(t){const e=t.getReader();return new ReadableStream({start(a){let s="";return o();function o(){return e.read().then(({value:u,done:c})=>{if(c){if(s.trim()){a.error(new Qt("Failed to parse stream"));return}a.close();return}s+=u;let f=s.match(XE),h;for(;f;){try{h=JSON.parse(f[1])}catch{a.error(new Qt(`Error parsing JSON response: "${f[1]}"`));return}a.enqueue(h),s=s.substring(f[0].length),f=s.match(XE)}return o()}).catch(u=>{let c=u;throw c.stack=u.stack,c.name==="AbortError"?c=new O2("Request aborted when reading from the stream"):c=new Qt("Error reading from the stream"),c})}}})}function j9(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const a of t){if(a.candidates){let s=0;for(const o of a.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=o.citationMetadata,n.candidates[s].groundingMetadata=o.groundingMetadata,n.candidates[s].finishReason=o.finishReason,n.candidates[s].finishMessage=o.finishMessage,n.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[s].content||(n.candidates[s].content={role:o.content.role||"user",parts:[]});const u={};for(const c of o.content.parts)c.text&&(u.text=c.text),c.functionCall&&(u.functionCall=c.functionCall),c.executableCode&&(u.executableCode=c.executableCode),c.codeExecutionResult&&(u.codeExecutionResult=c.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[s].content.parts.push(u)}s++}a.usageMetadata&&(n.usageMetadata=a.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(t,e,n,a){const s=await Nl(e,Ss.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),a);return O9(s)}async function k2(t,e,n,a){const o=await(await Nl(e,Ss.GENERATE_CONTENT,t,!1,JSON.stringify(n),a)).json();return{response:Sy(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function _l(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return M9(e)}function M9(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let a=!1,s=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),s=!0):(e.parts.push(o),a=!0);if(a&&s)throw new Qt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!s)throw new Qt("No content is provided for sending chat message.");return a?e:n}function L9(t,e){var n;let a={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new Pi("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=t.contents}else if(s)a=Object.assign(Object.assign({},a),t.generateContentRequest);else{const o=_l(t);a.contents=[o]}return{generateContentRequest:a}}function KE(t){let e;return t.contents?e=t:e={contents:[_l(t)]},t.systemInstruction&&(e.systemInstruction=I2(t.systemInstruction)),e}function D9(t){return typeof t=="string"||Array.isArray(t)?{content:_l(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],P9={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function $9(t){let e=!1;for(const n of t){const{role:a,parts:s}=n;if(!e&&a!=="user")throw new Qt(`First content should be with role 'user', got ${a}`);if(!BE.includes(a))throw new Qt(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(BE)}`);if(!Array.isArray(s))throw new Qt("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Qt("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of s)for(const f of QE)f in c&&(o[f]+=1);const u=P9[a];for(const c of QE)if(!u.includes(c)&&o[c]>0)throw new Qt(`Content with role '${a}' can't contain '${c}' part`);e=!0}}function JE(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const a of n.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="SILENT_ERROR";class U9{constructor(e,n,a,s={}){this.model=n,this.params=a,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,a!=null&&a.history&&($9(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var a,s,o,u,c,f;await this._sendPromise;const h=_l(e),m={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,h]},y=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>k2(this._apiKey,this.model,m,y)).then(_=>{var x;if(JE(_.response)){this._history.push(h);const w=Object.assign({parts:[],role:"model"},(x=_.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(w)}else{const w=Oi(_.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}v=_}).catch(_=>{throw this._sendPromise=Promise.resolve(),_}),await this._sendPromise,v}async sendMessageStream(e,n={}){var a,s,o,u,c,f;await this._sendPromise;const h=_l(e),m={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,h]},y=Object.assign(Object.assign({},this._requestOptions),n),v=R2(this._apiKey,this.model,m,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(_=>{throw new Error(WE)}).then(_=>_.response).then(_=>{if(JE(_)){this._history.push(h);const x=Object.assign({},_.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Oi(_);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(_=>{_.message!==WE&&console.error(_)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(t,e,n,a){return(await Nl(e,Ss.COUNT_TOKENS,t,!1,JSON.stringify(n),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(t,e,n,a){return(await Nl(e,Ss.EMBED_CONTENT,t,!1,JSON.stringify(n),a)).json()}async function V9(t,e,n,a){const s=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await Nl(e,Ss.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,a={}){this.apiKey=e,this._requestOptions=a,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=I2(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var a;const s=KE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return k2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},s),o)}async generateContentStream(e,n={}){var a;const s=KE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return R2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},s),o)}startChat(e){var n;return new U9(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const a=L9(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return z9(this.apiKey,this.model,a,s)}async embedContent(e,n={}){const a=D9(e),s=Object.assign(Object.assign({},this._requestOptions),n);return B9(this.apiKey,this.model,a,s)}async batchEmbedContents(e,n={}){const a=Object.assign(Object.assign({},this._requestOptions),n);return V9(this.apiKey,this.model,e,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Qt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new eS(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,a){if(!e.name)throw new Pi("Cached content must contain a `name` field.");if(!e.model)throw new Pi("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const u of s)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){const c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(c===f)continue}throw new Pi(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new eS(this.apiKey,o,a)}}function nS(t,e){const n=H9(t);return{tools:n,toolConfig:q9(n,e)}}function H9(t){let e=[];const n=[];return t.forEach(a=>{if(w2(a)){const[s]=o9([a]);s.functionDeclarations&&e.push(...s.functionDeclarations)}else if(T2(a)){const{functionDeclarations:s}=G9(a);if(s)e.push(...s);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else n.push(a)}),n.find(a=>"functionDeclarations"in a)?n.map(a=>{if((e==null?void 0:e.length)>0&&"functionDeclarations"in a){const s={functionDeclarations:[...a.functionDeclarations||[],...e]};return e=[],s}return a}):[...n,...e.length>0?[{functionDeclarations:e}]:[]]}function G9(t){return{functionDeclarations:[{name:t.function.name,description:t.function.description,parameters:bs(t.function.parameters)}]}}function q9(t,e){if(!t.length||!e)return;const{toolChoice:n,allowedFunctionNames:a}=e,s={any:Ar.ANY,auto:Ar.AUTO,none:Ar.NONE};if(n&&["any","auto","none"].includes(n))return{functionCallingConfig:{mode:s[n]??"MODE_UNSPECIFIED",allowedFunctionNames:a}};if(typeof n=="string"||a)return{functionCallingConfig:{mode:Ar.ANY,allowedFunctionNames:[...a??[],...n&&typeof n=="string"?[n]:[]]}}}const F9={"gemini-embedding-001":{maxInputTokens:2048,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-lite-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-06-05":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-04-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-05-06":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-05-20":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-3-flash-preview":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash-preview-native-audio":{maxInputTokens:131072,imageInputs:!1,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-flash-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-lite-preview-06-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-image":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-pro-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-image-preview":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-1.5-flash-8b":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-3-pro-preview":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.0-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-flash":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-flash-lite-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.0-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-pro":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1}},Y9=t=>t();function yp(t){const e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}function vp(t){const e=[];for(const n of t){let a=n;if(Array.isArray(n.content))for(let s=0;s<n.content.length;s++){const o=n.content[s];(uA(o)||cA(o))&&a===n&&(a=new n.constructor({...a,content:[...n.content.slice(0,s),YM(o),...n.content.slice(s+1)]}))}e.push(a)}return e}var Z9=class fs extends F${constructor(n){super(n);L(this,"lc_namespace",["langchain","chat_models",this._llmType()]);L(this,"disableStreaming",!1);L(this,"outputVersion");this.outputVersion=Y9(()=>{const a=n.outputVersion??Li("LC_OUTPUT_VERSION");return a&&["v0","v1"].includes(a)?a:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(n){const[a,s]=super._separateRunnableConfigFromCallOptions(n);return s.signal=a.signal,[a,s]}async invoke(n,a){const s=fs._convertInputToPromptValue(n);return(await this.generatePrompt([s],a,a==null?void 0:a.callbacks)).generations[0][0].message}async*_streamResponseChunks(n,a,s){throw new Error("Not implemented.")}async*_streamIterator(n,a){var s,o,u;if(this._streamResponseChunks===fs.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(n,a);else{const c=fs._convertInputToPromptValue(n).toChatMessages(),[f,h]=this._separateRunnableConfigFromCallOptionsCompat(a),m={...f.metadata,...this.getLsParams(h)},y=await Ya.configure(f.callbacks,this.callbacks,f.tags,this.tags,m,this.metadata,{verbose:this.verbose}),v={options:h,invocation_params:this==null?void 0:this.invocationParams(h),batch_size:1},_=h.outputVersion??this.outputVersion,x=await(y==null?void 0:y.handleChatModelStart(this.toJSON(),[vp(c)],f.runId,void 0,v,void 0,void 0,f.runName));let w,A;try{for await(const T of this._streamResponseChunks(c,h,x==null?void 0:x[0])){if((s=h.signal)==null||s.throwIfAborted(),T.message.id==null){const k=(o=x==null?void 0:x.at(0))==null?void 0:o.runId;k!=null&&T.message._updateId(`run-${k}`)}T.message.response_metadata={...T.generationInfo,...T.message.response_metadata},_==="v1"?yield yp(T.message):yield T.message,w?w=w.concat(T):w=T,V1(T.message)&&T.message.usage_metadata!==void 0&&(A={tokenUsage:{promptTokens:T.message.usage_metadata.input_tokens,completionTokens:T.message.usage_metadata.output_tokens,totalTokens:T.message.usage_metadata.total_tokens}})}(u=h.signal)==null||u.throwIfAborted()}catch(T){throw await Promise.all((x??[]).map(k=>k==null?void 0:k.handleLLMError(T))),T}await Promise.all((x??[]).map(T=>T==null?void 0:T.handleLLMEnd({generations:[[w]],llmOutput:A})))}}getLsParams(n){const a=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:n.stop,ls_provider:a}}async _generateUncached(n,a,s,o){var v,_,x,w;const u=n.map(A=>A.map(Ec));let c;if(o!==void 0&&o.length===u.length)c=o;else{const A={...s.metadata,...this.getLsParams(a)},T=await Ya.configure(s.callbacks,this.callbacks,s.tags,this.tags,A,this.metadata,{verbose:this.verbose}),k={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1};c=await(T==null?void 0:T.handleChatModelStart(this.toJSON(),u.map(vp),s.runId,void 0,k,void 0,void 0,s.runName))}const f=a.outputVersion??this.outputVersion,h=[],m=[];if(c!=null&&c[0].handlers.find(bD)&&!this.disableStreaming&&u.length===1&&this._streamResponseChunks!==fs.prototype._streamResponseChunks)try{const A=await this._streamResponseChunks(u[0],a,c==null?void 0:c[0]);let T,k;for await(const R of A){if((v=a.signal)!=null&&v.aborted){const z=T==null?void 0:T.message;throw new z1("Model invocation was aborted.",z)}if(R.message.id==null){const z=(_=c==null?void 0:c.at(0))==null?void 0:_.runId;z!=null&&R.message._updateId(`run-${z}`)}T===void 0?T=R:T=md(T,R),V1(R.message)&&R.message.usage_metadata!==void 0&&(k={tokenUsage:{promptTokens:R.message.usage_metadata.input_tokens,completionTokens:R.message.usage_metadata.output_tokens,totalTokens:R.message.usage_metadata.total_tokens}})}if((x=a.signal)!=null&&x.aborted){const R=T==null?void 0:T.message;throw new z1("Model invocation was aborted.",R)}if(T===void 0)throw new Error("Received empty response from chat model call.");h.push([T]),await(c==null?void 0:c[0].handleLLMEnd({generations:h,llmOutput:k}))}catch(A){throw await(c==null?void 0:c[0].handleLLMError(A)),A}else{const A=await Promise.allSettled(u.map(async(T,k)=>{const R=await this._generate(T,{...a,promptIndex:k},c==null?void 0:c[k]);if(f==="v1")for(const z of R.generations)z.message=yp(z.message);return R}));await Promise.all(A.map(async(T,k)=>{var R,z,P;if(T.status==="fulfilled"){const Y=T.value;for(const W of Y.generations){if(W.message.id==null){const O=(R=c==null?void 0:c.at(0))==null?void 0:R.runId;O!=null&&W.message._updateId(`run-${O}`)}W.message.response_metadata={...W.generationInfo,...W.message.response_metadata}}return Y.generations.length===1&&(Y.generations[0].message.response_metadata={...Y.llmOutput,...Y.generations[0].message.response_metadata}),h[k]=Y.generations,m[k]=Y.llmOutput,(z=c==null?void 0:c[k])==null?void 0:z.handleLLMEnd({generations:[Y.generations],llmOutput:Y.llmOutput})}else return await((P=c==null?void 0:c[k])==null?void 0:P.handleLLMError(T.reason)),Promise.reject(T.reason)}))}const y={generations:h,llmOutput:m.length?(w=this._combineLLMOutput)==null?void 0:w.call(this,...m):void 0};return Object.defineProperty(y,TE,{value:c?{runIds:c==null?void 0:c.map(A=>A.runId)}:void 0,configurable:!0}),y}async _generateCached({messages:n,cache:a,llmStringKey:s,parsedOptions:o,handledOptions:u}){const c=n.map(T=>T.map(Ec)),f={...u.metadata,...this.getLsParams(o)},h=await Ya.configure(u.callbacks,this.callbacks,u.tags,this.tags,f,this.metadata,{verbose:this.verbose}),m={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},y=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),c.map(vp),u.runId,void 0,m,void 0,void 0,u.runName)),v=[],_=(await Promise.allSettled(c.map(async(T,k)=>{const R=fs._convertInputToPromptValue(T).toString(),z=await a.lookup(R,s);return z==null&&v.push(k),z}))).map((T,k)=>({result:T,runManager:y==null?void 0:y[k]})).filter(({result:T})=>T.status==="fulfilled"&&T.value!=null||T.status==="rejected"),x=o.outputVersion??this.outputVersion,w=[];await Promise.all(_.map(async({result:T,runManager:k},R)=>{if(T.status==="fulfilled"){const z=T.value;return w[R]=z.map(P=>("message"in P&&rd(P.message)&&ly(P.message)&&(P.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},x==="v1"&&(P.message=yp(P.message))),P.generationInfo={...P.generationInfo,tokenUsage:{}},P)),z.length&&await(k==null?void 0:k.handleLLMNewToken(z[0].text)),k==null?void 0:k.handleLLMEnd({generations:[z]},void 0,void 0,void 0,{cached:!0})}else return await(k==null?void 0:k.handleLLMError(T.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(T.reason)}));const A={generations:w,missingPromptIndices:v,startedRunManagers:y};return Object.defineProperty(A,TE,{value:y?{runIds:y==null?void 0:y.map(T=>T.runId)}:void 0,configurable:!0}),A}async generate(n,a,s){let o;Array.isArray(a)?o={stop:a}:o=a;const u=n.map(w=>w.map(Ec)),[c,f]=this._separateRunnableConfigFromCallOptionsCompat(o);if(c.callbacks=c.callbacks??s,!this.cache)return this._generateUncached(u,f,c);const{cache:h}=this,m=this._getSerializedCacheKeyParametersForCall(f),{generations:y,missingPromptIndices:v,startedRunManagers:_}=await this._generateCached({messages:u,cache:h,llmStringKey:m,parsedOptions:f,handledOptions:c});let x={};if(v.length>0){const w=await this._generateUncached(v.map(A=>u[A]),f,c,_!==void 0?v.map(A=>_==null?void 0:_[A]):void 0);await Promise.all(w.generations.map(async(A,T)=>{const k=v[T];y[k]=A;const R=fs._convertInputToPromptValue(u[k]).toString();return h.update(R,m,A)})),x=w.llmOutput??{}}return{generations:y,llmOutput:x}}invocationParams(n){return{}}_modelType(){return"base_chat_model"}async generatePrompt(n,a,s){const o=n.map(u=>u.toChatMessages());return this.generate(o,a,s)}withStructuredOutput(n,a){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(a!=null&&a.strict)throw new Error('"strict" mode is not supported for this model by default.');const s=n,o=a==null?void 0:a.name,u=JT(s)??"A function available to call.",c=a==null?void 0:a.method,f=a==null?void 0:a.includeRaw;if(c==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let h=o??"extract",m;Sl(s)?m=[{type:"function",function:{name:h,description:u,parameters:ay(s)}}]:("name"in s&&(h=s.name),m=[{type:"function",function:{name:h,description:u,parameters:s}}]);const y=this.bindTools(m),v=xy.from(A=>{if(!Tl.isInstance(A))throw new Error("Input is not an AIMessageChunk.");if(!A.tool_calls||A.tool_calls.length===0)throw new Error("No tool calls found in the response.");const T=A.tool_calls.find(k=>k.name===h);if(!T)throw new Error(`No tool call found with name ${h}.`);return T.args});if(!f)return y.pipe(v).withConfig({runName:"StructuredOutput"});const _=Wc.assign({parsed:(A,T)=>v.invoke(A.raw,T)}),x=Wc.assign({parsed:()=>null}),w=_.withFallbacks({fallbacks:[x]});return pd.from([{raw:y},w]).withConfig({runName:"StructuredOutputRunnable"})}},X9=class extends Z9{constructor(e){super(e);L(this,"lc_serializable",!0);L(this,"lc_namespace",["langchain","chat_models","google_genai"]);L(this,"model");L(this,"temperature");L(this,"maxOutputTokens");L(this,"topP");L(this,"topK");L(this,"stopSequences",[]);L(this,"safetySettings");L(this,"apiKey");L(this,"streaming",!1);L(this,"json");L(this,"streamUsage",!0);L(this,"convertSystemMessageToHumanContent");L(this,"thinkingConfig");L(this,"client");if(this.model=e.model.replace(/^models\//,""),this.maxOutputTokens=e.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=e.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=e.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=e.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=e.stopSequences??this.stopSequences,this.apiKey=e.apiKey??Li("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=e.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(n=>n.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=e.streaming??this.streaming,this.json=e.json,this.thinkingConfig=e.thinkingConfig??this.thinkingConfig,this.client=new tS(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...this.json?{responseMimeType:"application/json"}:{},...this.thinkingConfig?{thinkingConfig:this.thinkingConfig}:{}}},{apiVersion:e.apiVersion,baseUrl:e.baseUrl,customHeaders:e.customHeaders}),this.streamUsage=e.streamUsage??this.streamUsage}static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")||this.model.startsWith("gemma-3-")&&!this.model.startsWith("gemma-3-1b")||this.model.startsWith("gemini-3")}useCachedContent(e,n,a){this.apiKey&&(this.client=new tS(this.apiKey).getGenerativeModelFromCachedContent(e,n,a))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.model==="gemini-1.0-pro-001"||this.model.startsWith("gemini-pro-vision")||this.model.startsWith("gemini-1.0-pro-vision")?!1:this.model!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,n){var a;return this.withConfig({tools:(a=nS(e))==null?void 0:a.tools,...n})}invocationParams(e){var a;const n=(a=e==null?void 0:e.tools)!=null&&a.length?nS(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return e!=null&&e.responseSchema?(this.client.generationConfig.responseSchema=e.responseSchema,this.client.generationConfig.responseMimeType="application/json"):(this.client.generationConfig.responseSchema=void 0,this.client.generationConfig.responseMimeType=this.json?"application/json":void 0),{...n!=null&&n.tools?{tools:n.tools}:{},...n!=null&&n.toolConfig?{toolConfig:n.toolConfig}:{}}}async _generate(e,n,a){var m,y,v,_;(m=n.signal)==null||m.throwIfAborted();const s=LE(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let o=s;if(s[0].role==="system"){const[x]=s;this.client.systemInstruction=x,o=s.slice(1)}const u=this.invocationParams(n);if(this.streaming){const x={},w=this._streamResponseChunks(e,n,a),A=[];for await(const T of w){const k=((y=T.generationInfo)==null?void 0:y.completion)??0;A[k]===void 0?A[k]=T:A[k]=A[k].concat(T)}return{generations:A.filter(T=>T!==void 0),llmOutput:{estimatedTokenUsage:x}}}const c=await this.completionWithRetry({...u,contents:o});let f;"usageMetadata"in c.response&&(f=DE(c.response.usageMetadata,this.model));const h=s9(c.response,{usageMetadata:f});return((v=h.generations)==null?void 0:v.length)>0&&await(a==null?void 0:a.handleLLMNewToken(((_=h.generations[0])==null?void 0:_.text)??"")),h}async*_streamResponseChunks(e,n,a){var v;const s=LE(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let o=s;if(s[0].role==="system"){const[_]=s;this.client.systemInstruction=_,o=s.slice(1)}const u={...this.invocationParams(n),contents:o},c=await this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{const{stream:_}=await this.client.generateContentStream(u,{signal:n==null?void 0:n.signal});return _});let f,h=0,m=0,y=0;for await(const _ of c){if((v=n.signal)!=null&&v.aborted)return;if("usageMetadata"in _&&_.usageMetadata!==void 0&&this.streamUsage!==!1&&n.streamUsage!==!1){f=DE(_.usageMetadata,this.model);const w=_.usageMetadata.promptTokenCount??0;f.input_tokens=Math.max(0,w-h),h=w;const A=_.usageMetadata.candidatesTokenCount??0;f.output_tokens=Math.max(0,A-m),m=A;const T=_.usageMetadata.totalTokenCount??0;f.total_tokens=Math.max(0,T-y),y=T}const x=r9(_,{usageMetadata:f});x&&(yield x,await(a==null?void 0:a.handleLLMNewToken(x.text??"")))}}async completionWithRetry(e,n){return this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{var a;try{return await this.client.generateContent(e,{signal:n==null?void 0:n.signal})}catch(s){throw(a=s.message)!=null&&a.includes("400 Bad Request")&&(s.status=400),s}})}get profile(){return F9[this.model]??{}}withStructuredOutput(e,n){const a=e,s=n==null?void 0:n.name,o=n==null?void 0:n.method,u=n==null?void 0:n.includeRaw;if(o==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "jsonSchema" or "functionCalling" as a method.');let c,f;if(o==="functionCalling"){let v=s??"extract",_;if(Sl(a)){const x=tg(a);_=[{functionDeclarations:[{name:v,description:x.description??"A function available to call.",parameters:x}]}],f=new PE({returnSingle:!0,keyName:v,zodSchema:a})}else{let x;typeof a.name=="string"&&typeof a.parameters=="object"&&a.parameters!=null?(x=a,x.parameters=bs(a.parameters),v=a.name):x={name:v,description:a.description??"",parameters:bs(a)},_=[{functionDeclarations:[x]}],f=new PE({returnSingle:!0,keyName:v})}c=this.bindTools(_).withConfig({allowedFunctionNames:[v]})}else{const v=tg(a);c=this.withConfig({responseSchema:v}),f=new f9}if(!u)return c.pipe(f).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const h=Wc.assign({parsed:(v,_)=>f.invoke(v.raw,_)}),m=Wc.assign({parsed:()=>null}),y=h.withFallbacks({fallbacks:[m]});return pd.from([{raw:c},y]).withConfig({runName:"StructuredOutputRunnable"})}};const K9=()=>{const t="AIzaSyB_iOynqhuYf6SP7041cO_SfGBywBQbN50";return new X9({model:"gemini-pro",apiKey:t,temperature:.7,maxOutputTokens:150})};class Q9{constructor(e,n){this.model=K9(),this.conversationHistory=[],this.state={concept:e,formula:n,studentAnswers:[],questionsAsked:0},this.conversationHistory.push(new ag(`You are a friendly, patient teacher helping an 8-12 year old child DEEPLY understand: ${e}.

The formula is: ${n}

Your role:
- Check if they understand WHY the formula works, not just WHAT it is
- Ask questions that reveal their thinking process
- If they just repeat the formula, ask them to explain it differently
- If they give a shallow answer, dig deeper with "Why?" or "How?"
- After 3 answers that show TRUE understanding, congratulate them
- Keep responses SHORT (1-2 sentences max)
- Use simple but precise language
- Be enthusiastic and supportive!

Question progression (ask in this order):
1. "Can you explain the formula in your own words?" (tests basic recall)
2. "WHY does this formula work? What's the logic behind it?" (tests understanding)
3. "If I change [a number], what happens and WHY?" (tests application)

Red flags (means they DON'T understand yet):
- Just repeating the formula word-for-word
- Saying "I don't know" or very short answers
- Can't explain WHY, only WHAT
- Can't apply it to a different example

Green flags (means they DO understand):
- Explains in their own words
- Can say WHY it works
- Can predict what happens if numbers change
- Uses examples to explain`))}async askQuestion(){if(!this.model)return["Can you explain the formula to me in your own words?","Great! Now tell me WHY this formula works. What's the logic?","Perfect! If I change one of the numbers, what happens and why?"][Math.min(this.state.questionsAsked,2)];try{let e="";this.state.questionsAsked===0?e="Ask the student to explain the formula in their own words. Keep it simple and friendly!":this.state.questionsAsked===1?e="Now ask them WHY the formula works. What's the logic behind it? Push them to think deeper!":e="Ask them to apply it: What happens if we change a number? Make them predict and explain!",this.conversationHistory.push(new hl(e));const a=(await this.model.invoke(this.conversationHistory)).content.toString();return this.conversationHistory.push(new Mr(a)),this.state.questionsAsked++,a}catch(e){return console.error("AI Teacher error:",e),"Can you tell me more about what you learned?"}}async evaluateAnswer(e){if(this.state.studentAnswers.push(e),!this.model){const n=e.length>30,s=(e.toLowerCase().includes("multiply")||e.toLowerCase().includes("")||e.toLowerCase().includes("add")||e.toLowerCase().includes("subtract")||e.toLowerCase().includes("because")||e.toLowerCase().includes("why"))&&n;return{isGood:s,feedback:s?"Great explanation! I can see you really understand!":"Can you explain it a bit more? Tell me WHY it works, not just WHAT it is.",shouldContinue:this.state.studentAnswers.length<3}}try{this.conversationHistory.push(new hl(`Student answered: "${e}"
        
Evaluate if this shows DEEP understanding (not just memorization). Then:
- If they show TRUE understanding (explains WHY, uses own words, gives examples): Give brief praise (1 sentence)
- If they just repeated the formula or gave shallow answer: Ask them to explain WHY or HOW (1 sentence)
- If they say "I don't know": Give a hint and ask again (1 sentence)

Keep it SHORT and encouraging!`));const a=(await this.model.invoke(this.conversationHistory)).content.toString();this.conversationHistory.push(new Mr(a));const s=(a.toLowerCase().includes("great")||a.toLowerCase().includes("good")||a.toLowerCase().includes("excellent")||a.toLowerCase().includes("perfect")||a.toLowerCase().includes("correct")||a.toLowerCase().includes("understand"))&&!a.toLowerCase().includes("but")&&!a.toLowerCase().includes("however"),o=this.state.studentAnswers.length<3&&s;return{isGood:s,feedback:a,shouldContinue:o}}catch(n){return console.error("AI evaluation error:",n),{isGood:!0,feedback:"Good effort! Let's continue.",shouldContinue:this.state.studentAnswers.length<3}}}getProgress(){return{current:this.state.studentAnswers.filter((e,n)=>n<this.state.questionsAsked).length,total:3}}isComplete(){return this.state.studentAnswers.length>=3}}const aS={exam:{title:{english:"How to Solve: Rush to Exam",hindi:"  :   "},codechefLink:"https://www.codechef.com/problems/RUSHTOEXAM",steps:[{english:"1. Read the problem: We have N hours, need M pages, can collect A pages per hour",hindi:"1.  :   N  , M  , A       "},{english:"2. The formula we learned: Total Pages = Pages per Hour  Hours",hindi:"2.    :   =     ",code:"total_pages = A  N"},{english:"3. Compare: Is total_pages >= M (pages needed)?",hindi:"3.  :  total_pages >= M ( )?",code:`if total_pages >= M:
    print("YES")
else:
    print("NO")`},{english:"4. Example: N=3 hours, M=6 pages needed, A=2 pages/hour",hindi:"4. : N=3 , M=6  , A=2 /"},{english:"5. Calculate: 2  3 = 6 pages. 6 >= 6? YES! ",hindi:"5. : 2  3 = 6  6 >= 6? ! "}],fullCode:`# Read input
n, m, a = map(int, input().split())

# Calculate total pages we can collect
total_pages = a * n

# Check if we have enough
if total_pages >= m:
    print("YES")
else:
    print("NO")`},snail:{title:{english:"How to Solve: Snail Escape",hindi:"  :   "},codechefLink:"https://www.codechef.com/problems/SUBAADDB",steps:[{english:"1. Read: N meters deep hole, climbs A meters up, slides B meters down",hindi:"1. : N   , A    , B    "},{english:"2. Key insight: On the LAST day, snail reaches top and doesn't slide!",hindi:"2.  :  ,       !"},{english:"3. Net progress per day = A - B meters",hindi:"3.     = A - B ",code:"net_progress = A - B"},{english:"4. Days needed = (N - A)  net_progress + 1",hindi:"4.   = (N - A)  _ + 1",code:"days = ((N - A) // (A - B)) + 1"},{english:"5. Example: N=10m, A=3m, B=2m  Net=1m/day  8 days",hindi:"5. : N=10m, A=3m, B=2m  =1m/  8 "}],fullCode:`# Read input
n, a, b = map(int, input().split())

# Special cases
if n <= a:
    print(1)  # Reaches top on first day
elif a <= b:
    print(-1)  # Never escapes
else:
    # Calculate days needed
    days = ((n - a) // (a - b)) + 1
    print(days)`},icecream:{title:{english:"How to Solve: Melting Ice Cream",hindi:"  :  "},codechefLink:"https://www.codechef.com/problems/ICECREAMCONES",steps:[{english:"1. Read: X grams start, Y grams melt per minute, N minutes pass",hindi:"1. : X  , Y     , N   "},{english:"2. Formula: Total melted = Melt rate  Time",hindi:"2. :   =     ",code:"melted = Y  N"},{english:"3. Remaining = Start - Melted",hindi:"3.   =  - ",code:"remaining = X - melted"},{english:"4. Important: Can't be negative! Use max(0, remaining)",hindi:"4. :    ! max(0, _)  "},{english:"5. Example: X=5g, Y=1g/min, N=2min  5 - (12) = 3g left",hindi:"5. : X=5g, Y=1g/min, N=2min  5 - (12) = 3g "}],fullCode:`# Read input
x, y, n = map(int, input().split())

# Calculate melted amount
melted = y * n

# Calculate remaining (can't be negative)
remaining = max(0, x - melted)

print(remaining)`}};function J9({problemId:t,language:e,onComplete:n}){const[a,s]=ne.useState(0),[o,u]=ne.useState(!1),c=aS[t]||aS.exam,f=a>=c.steps.length-1,h=()=>{f?u(!0):s(y=>y+1)},m=()=>{navigator.clipboard.writeText(c.fullCode),alert(e==="hindi"?"   !":"Code copied!")};return E.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs(fe.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},exit:{scale:.8,y:20},className:"bg-gradient-to-br from-green-50 to-blue-50 rounded-3xl shadow-2xl border-8 border-green-400 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[E.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 p-6 text-white",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[E.jsx(Vj,{className:"w-10 h-10"}),E.jsx("h2",{className:"text-3xl font-black",children:e==="hindi"?"  !":" Learn Solution!"})]}),E.jsx("p",{className:"text-sm opacity-90",children:e==="hindi"?c.title.hindi:c.title.english})]}),E.jsx("div",{className:"flex-1 p-8 overflow-auto",children:o?E.jsxs(fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg border-4 border-green-200",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("h3",{className:"text-2xl font-black text-gray-900 flex items-center gap-2",children:[E.jsx(Ww,{className:"w-6 h-6"}),e==="hindi"?" ":"Complete Code"]}),E.jsxs("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition-all flex items-center gap-2",children:[E.jsx(Jw,{className:"w-4 h-4"}),e==="hindi"?" ":"Copy"]})]}),E.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 overflow-x-auto",children:E.jsx("pre",{className:"text-green-400 font-mono text-sm leading-relaxed",children:c.fullCode})})]}),E.jsxs("div",{className:"bg-yellow-50 rounded-3xl p-6 border-4 border-yellow-200",children:[E.jsx("p",{className:"text-lg font-bold text-yellow-900 mb-4",children:e==="hindi"?"  CodeChef    !":" Now submit on CodeChef!"}),E.jsxs("a",{href:c.codechefLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-orange-500 text-white rounded-2xl font-black hover:bg-orange-600 transition-all shadow-lg",children:[E.jsx(YT,{className:"w-5 h-5"}),e==="hindi"?"CodeChef  ":"Open on CodeChef"]})]})]}):E.jsx(an,{mode:"wait",children:E.jsxs(fe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[E.jsx("div",{className:"flex gap-2 mb-6",children:c.steps.map((y,v)=>E.jsx("div",{className:`h-2 flex-1 rounded-full transition-all ${v<=a?"bg-green-500":"bg-gray-300"}`},v))}),E.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-lg border-4 border-green-200",children:[E.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 text-white flex items-center justify-center font-black text-xl shrink-0",children:a+1}),E.jsx("p",{className:"text-xl font-bold text-gray-800 leading-relaxed",children:e==="hindi"?c.steps[a].hindi:c.steps[a].english})]}),c.steps[a].code&&E.jsx(fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 bg-gray-900 rounded-2xl p-6 overflow-x-auto",children:E.jsx("pre",{className:"text-green-400 font-mono text-sm",children:c.steps[a].code})})]}),E.jsx("div",{className:"text-center",children:E.jsxs(fe.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"inline-block text-6xl",children:[a===0&&"",a===1&&"",a===2&&"",a===3&&"",a===4&&""]})})]},a)})}),E.jsxs("div",{className:"bg-white border-t-4 border-green-200 p-4 flex justify-between gap-4",children:[E.jsx("div",{className:"text-sm font-bold text-gray-600",children:!o&&E.jsxs(E.Fragment,{children:[e==="hindi"?"":"Step"," ",a+1," / ",c.steps.length]})}),E.jsx("div",{className:"flex gap-3",children:o?E.jsxs("button",{onClick:n,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl font-black shadow-lg hover:from-green-600 hover:to-green-700 transition-all border-b-4 border-green-700 flex items-center gap-2",children:[E.jsx(Jw,{className:"w-5 h-5"}),e==="hindi"?" !":"Got it!"]}):E.jsx("button",{onClick:h,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl font-black shadow-lg hover:from-blue-600 hover:to-blue-700 transition-all border-b-4 border-blue-700 flex items-center gap-2",children:f?E.jsxs(E.Fragment,{children:[E.jsx(Ww,{className:"w-5 h-5"}),e==="hindi"?" ":"Show Code"]}):E.jsxs(E.Fragment,{children:[e==="hindi"?"":"Next",E.jsx(yj,{className:"w-5 h-5"})]})})})]})]})})}const iS={exam:{title:"The Student's Exam Rush",characters:{teacher:{name:"Professor Owl",emoji:"",position:"left",voice:{pitch:1,rate:.95}},student:{name:"Student Sam",emoji:"",position:"right",voice:{pitch:1.05,rate:1}}},dialogue:[{character:"student",text:"Oh no! My exam is in 3 hours and I need 6 pages of notes!",emotion:"confused"},{character:"teacher",text:"Don't panic, Sam! Let's think about this step by step.",emotion:"thinking"},{character:"student",text:"But how do I know if I have enough time?",emotion:"confused"},{character:"teacher",text:"Well, how many pages can you collect per hour?",emotion:"thinking"},{character:"student",text:"I can collect 2 pages every hour!",emotion:"happy"},{character:"teacher",text:"Perfect! This is called 'Repeated Addition'. We're grouping pages by hour.",emotion:"excited",quiz:{question:"What is 2 pages  3 hours?",answer:"6",hint:"Multiply pages per hour by number of hours"}},{character:"student",text:"So... 2 pages times 3 hours?",emotion:"thinking"},{character:"teacher",text:"Exactly! 2  3 = 6 pages. You'll have exactly what you need!",emotion:"excited"},{character:"student",text:"Wow! Math saved my exam! Thanks Professor!",emotion:"excited"},{character:"teacher",text:"Remember: Pages per Hour  Hours = Total Pages. That's the formula!",emotion:"happy"}],hindi:{title:"    ",dialogue:[{text:" !   3      6   !"},{text:" , !       "},{text:"          ?"},{text:",         ?"},{text:"   2     !"},{text:"!  '- '           "},{text:"... 2   3 ?"},{text:" ! 2  3 = 6        !"},{text:"!      !  !"},{text:" :      =     !"}]}},snail:{title:"The Snail's Great Escape",characters:{teacher:{name:"Wise Turtle",emoji:"",position:"left",voice:{pitch:.95,rate:.9}},student:{name:"Snail Sam",emoji:"",position:"right",voice:{pitch:1.05,rate:1}}},dialogue:[{character:"student",text:"Help! I'm stuck in a 10-meter deep hole!",emotion:"confused"},{character:"teacher",text:"Stay calm, Sam. Tell me, how far can you climb each day?",emotion:"thinking"},{character:"student",text:"I can climb up 3 meters during the day!",emotion:"happy"},{character:"teacher",text:"That's good! But what happens at night?",emotion:"thinking"},{character:"student",text:"Oh no... I slide back down 2 meters while I sleep.",emotion:"confused"},{character:"teacher",text:"Interesting! So your 'Net Progress' each day is 3 minus 2, which equals 1 meter.",emotion:"excited",quiz:{question:"What is 3 - 2?",answer:"1",hint:"Subtract the slide distance from climb distance"}},{character:"student",text:"So I only make 1 meter of real progress per day?",emotion:"thinking"},{character:"teacher",text:"Exactly! But here's the trick: on the last day, you reach the top and don't slide back!",emotion:"excited"},{character:"student",text:"Ohhh! So I need to think about when I'll reach the top during the day!",emotion:"excited"},{character:"teacher",text:"Right! After 7 days you're at 7 meters. On day 8, you climb 3 more and escape!",emotion:"happy"}],hindi:{title:"   ",dialogue:[{text:"!  10       !"},{text:" ,  ,       ?"},{text:"   3    !"},{text:" !      ?"},{text:" ...    2     "},{text:"!   ' '   3  2,  1  "},{text:"     1      ?"},{text:"!    :  ,         !"},{text:"!            !"},{text:"! 7     7    8 ,  3       !"}]}},icecream:{title:"The Melting Ice Cream Mystery",characters:{teacher:{name:"Chef Bear",emoji:"",position:"left",voice:{pitch:1,rate:.95}},student:{name:"Little Fox",emoji:"",position:"right",voice:{pitch:1.1,rate:1}}},dialogue:[{character:"student",text:"Chef! My ice cream is melting in the sun!",emotion:"confused"},{character:"teacher",text:"Oh dear! How much ice cream do you have?",emotion:"thinking"},{character:"student",text:"I started with 5 grams!",emotion:"happy"},{character:"teacher",text:"And how fast is it melting?",emotion:"thinking"},{character:"student",text:"About 1 gram per minute...",emotion:"confused"},{character:"teacher",text:"This is 'Repeated Subtraction'! Every minute, we take away 1 gram.",emotion:"excited"},{character:"student",text:"So after 2 minutes, I'll have... 5 minus 2?",emotion:"thinking"},{character:"teacher",text:"Close! It's 5 minus (1  2). That's 5 - 2 = 3 grams left!",emotion:"excited",quiz:{question:"What is 5 - 2?",answer:"3",hint:"Start amount minus melted amount"}},{character:"student",text:"I better eat it fast before it all melts!",emotion:"excited"},{character:"teacher",text:"Good idea! The formula is: Start - (Melt Rate  Minutes) = Leftover",emotion:"happy"}],hindi:{title:"   ",dialogue:[{text:"!       !"},{text:"!     ?"},{text:" 5     !"},{text:"       ?"},{text:" 1   ..."},{text:" '- ' !  ,  1    "},{text:" 2   ,  ... 5  2?"},{text:"-!  5  (1  2)   5 - 2 = 3  !"},{text:"             !"},{text:" !  :  - (    ) =  "}]}}};function W9({problemId:t,soundEnabled:e}){var $;const[n,a]=ne.useState(0),[s,o]=ne.useState(!1),[u,c]=ne.useState(!1),[f,h]=ne.useState("english"),[m,y]=ne.useState(!1),[v,_]=ne.useState(""),[x,w]=ne.useState(null),[A,T]=ne.useState(!1),[k,R]=ne.useState(!1),[z,P]=ne.useState(""),[Y,W]=ne.useState(""),[O,ge]=ne.useState(!1),[Ce,ve]=ne.useState(""),[De,We]=ne.useState(0),oe=ne.useRef(null),re=ne.useRef(null),j=ne.useRef(null),U=iS[t]||iS.exam,Q=me=>{var Ie;return f==="hindi"&&U.hindi&&((Ie=U.hindi.dialogue[me])==null?void 0:Ie.text)||U.dialogue[me].text},X=()=>f==="hindi"&&U.hindi?U.hindi.title:U.title,ae=(me,Ie)=>{if(!e||!window.speechSynthesis)return;window.speechSynthesis.cancel();const Qe=new SpeechSynthesisUtterance(me),ct=U.characters[Ie];return Qe.pitch=ct.voice.pitch,Qe.rate=ct.voice.rate,Qe.volume=.8,re.current=Qe,window.speechSynthesis.speak(Qe),new Promise(yt=>{Qe.onend=()=>yt(),Qe.onerror=()=>yt()})},I=async()=>{if(n>=U.dialogue.length){o(!1),H();return}const me=U.dialogue[n],Ie=Q(n);c(!0),e&&await ae(Ie,me.character),me.quiz?oe.current=setTimeout(()=>{c(!1),y(!0),o(!1)},e?800:2e3):oe.current=setTimeout(()=>{c(!1),setTimeout(()=>{a(Qe=>Qe+1)},300)},e?800:2800)},H=()=>{T(!0),We(0);const me={exam:{concept:"Repeated Addition (Multiplication)",formula:"Pages per Hour  Hours = Total Pages"},snail:{concept:"Net Progress (Subtraction)",formula:"Climb - Slide = Net Progress per Day"},icecream:{concept:"Repeated Subtraction",formula:"Start - (Melt Rate  Minutes) = Leftover"}},Ie=me[t]||me.exam;j.current=new Q9(Ie.concept,Ie.formula),ie()},ie=async()=>{if(j.current)try{const me=await j.current.askQuestion();P(me),e&&await ae(me,"teacher")}catch(me){console.error("Error asking question:",me),P("Can you explain what you learned?")}},le=async()=>{if(!(!Y.trim()||!j.current)){ge(!0);try{const me=await j.current.evaluateAnswer(Y);ve(me.feedback),e&&await ae(me.feedback,"teacher"),me.isGood&&We(Ie=>Ie+1),j.current.isComplete()&&me.isGood?setTimeout(()=>{T(!1),R(!0)},3e3):me.shouldContinue&&me.isGood?setTimeout(()=>{ve(""),W(""),ie()},2500):setTimeout(()=>{ve(""),W("")},2500)}catch(me){console.error("Error evaluating answer:",me),ve("Good effort! Let's continue."),setTimeout(()=>{ve(""),W("")},2e3)}ge(!1)}},pe=()=>{const me=U.dialogue[n].quiz;if(!me)return;const Ie=v.trim().toLowerCase()===me.answer.toLowerCase();w(Ie?"correct":"incorrect"),Ie&&setTimeout(()=>{y(!1),w(null),_(""),a(Qe=>Qe+1),o(!0)},1500)};ne.useEffect(()=>(s&&I(),()=>{oe.current&&clearTimeout(oe.current)}),[s,n]);const N=()=>{var me;s?(o(!1),(me=window.speechSynthesis)==null||me.cancel(),oe.current&&clearTimeout(oe.current)):(n>=U.dialogue.length&&a(0),o(!0))},S=()=>{var me;o(!1),a(0),c(!1),y(!1),_(""),w(null),(me=window.speechSynthesis)==null||me.cancel(),oe.current&&clearTimeout(oe.current)};ne.useEffect(()=>{S()},[f]);const V=U.dialogue[n];return V&&U.characters[V.character],E.jsxs("div",{className:"w-full h-full flex flex-col bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-6 relative overflow-hidden",children:[E.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[E.jsx("div",{className:"absolute top-10 left-10 text-6xl",children:""}),E.jsx("div",{className:"absolute top-20 right-20 text-6xl",children:""}),E.jsx("div",{className:"absolute bottom-10 left-20 text-6xl",children:""}),E.jsx("div",{className:"absolute bottom-20 right-10 text-6xl",children:""})]}),E.jsxs(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-4 relative z-10 shrink-0",children:[E.jsxs("div",{className:"flex items-center justify-center gap-4 mb-3",children:[E.jsx("button",{onClick:()=>h("english"),className:`px-5 py-2 rounded-full font-black text-sm transition-all ${f==="english"?"bg-purple-600 text-white shadow-lg scale-110":"bg-white text-purple-600 hover:bg-purple-50"}`,children:"English"}),E.jsx("button",{onClick:()=>h("hindi"),className:`px-5 py-2 rounded-full font-black text-sm transition-all ${f==="hindi"?"bg-purple-600 text-white shadow-lg scale-110":"bg-white text-purple-600 hover:bg-purple-50"}`,children:""})]}),E.jsx("h2",{className:"text-2xl md:text-3xl font-black text-purple-900 mb-1",children:X()}),E.jsx("p",{className:"text-xs text-purple-600 font-bold",children:f==="hindi"?"   ":"A Learning Story"})]}),E.jsx("div",{className:"flex-1 flex items-center justify-center relative min-h-[400px] py-8 overflow-visible",children:E.jsxs("div",{className:"w-full max-w-5xl h-full flex items-end justify-between px-4 md:px-12 relative pt-32 gap-8",children:[E.jsxs(fe.div,{animate:{scale:(V==null?void 0:V.character)==="teacher"?1.1:1,y:(V==null?void 0:V.character)==="teacher"?-10:0},className:"flex flex-col items-center relative h-full justify-end pb-4",children:[E.jsx(an,{children:(V==null?void 0:V.character)==="teacher"&&u&&E.jsxs(fe.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.3},className:"absolute bottom-full mb-6 bg-white rounded-3xl px-6 py-4 shadow-2xl border-4 border-blue-200 max-w-sm z-50",children:[E.jsx("p",{className:"text-sm font-bold text-gray-800 leading-relaxed whitespace-normal break-words hyphens-auto",children:Q(n)}),E.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white border-r-4 border-b-4 border-blue-200 rotate-45"}),V.emotion&&E.jsxs(fe.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},className:"absolute -top-2 -right-2 text-2xl",children:[V.emotion==="happy"&&"",V.emotion==="thinking"&&"",V.emotion==="excited"&&"",V.emotion==="confused"&&""]})]},n)}),E.jsx(fe.div,{animate:{rotate:(V==null?void 0:V.character)==="teacher"?[-2,2,-2]:0},transition:{duration:.5,repeat:(V==null?void 0:V.character)==="teacher"?1/0:0},className:"text-7xl md:text-9xl drop-shadow-xl",children:U.characters.teacher.emoji}),E.jsx("div",{className:"mt-3 bg-blue-100 px-3 py-1 rounded-full border-2 border-blue-200",children:E.jsx("p",{className:"text-[10px] md:text-xs font-black text-blue-900",children:U.characters.teacher.name})})]}),E.jsxs(fe.div,{animate:{scale:(V==null?void 0:V.character)==="student"?1.1:1,y:(V==null?void 0:V.character)==="student"?-10:0},className:"flex flex-col items-center relative h-full justify-end pb-4",children:[E.jsx(an,{children:(V==null?void 0:V.character)==="student"&&u&&E.jsxs(fe.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.3},className:"absolute bottom-full mb-6 bg-white rounded-3xl px-6 py-4 shadow-2xl border-4 border-purple-200 max-w-sm z-50",children:[E.jsx("p",{className:"text-sm font-bold text-gray-800 leading-relaxed whitespace-normal break-words hyphens-auto",children:Q(n)}),E.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white border-r-4 border-b-4 border-purple-200 rotate-45"}),V.emotion&&E.jsxs(fe.div,{animate:{rotate:[0,-10,10,0]},transition:{duration:.5,repeat:1/0},className:"absolute -top-2 -right-2 text-2xl",children:[V.emotion==="happy"&&"",V.emotion==="thinking"&&"",V.emotion==="excited"&&"",V.emotion==="confused"&&""]})]},n)}),E.jsx(fe.div,{animate:{rotate:(V==null?void 0:V.character)==="student"?[2,-2,2]:0},transition:{duration:.5,repeat:(V==null?void 0:V.character)==="student"?1/0:0},className:"text-7xl md:text-9xl drop-shadow-xl",children:U.characters.student.emoji}),E.jsx("div",{className:"mt-3 bg-purple-100 px-3 py-1 rounded-full border-2 border-purple-200",children:E.jsx("p",{className:"text-[10px] md:text-xs font-black text-purple-900",children:U.characters.student.name})})]})]})}),E.jsxs("div",{className:"mb-4 relative z-10 shrink-0",children:[E.jsx("div",{className:"flex justify-center gap-2",children:U.dialogue.map((me,Ie)=>E.jsx(fe.div,{animate:{scale:Ie===n?1.2:1,backgroundColor:Ie<n?"#10b981":Ie===n?"#8b5cf6":"#e5e7eb"},className:"w-3 h-3 rounded-full"},Ie))}),E.jsx("p",{className:"text-center mt-2 text-xs font-bold text-gray-600",children:f==="hindi"?` ${Math.min(n+1,U.dialogue.length)} / ${U.dialogue.length}`:`Line ${Math.min(n+1,U.dialogue.length)} of ${U.dialogue.length}`})]}),E.jsxs("div",{className:"flex items-center justify-center gap-3 md:gap-4 relative z-10 shrink-0",children:[E.jsxs(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:N,className:`flex items-center gap-2 md:gap-3 px-6 md:px-8 py-3 md:py-4 rounded-full font-black text-sm md:text-base text-white shadow-xl border-b-4 ${s?"bg-red-500 border-red-700":"bg-green-500 border-green-700"}`,children:[s?E.jsx(Jj,{className:"w-5 h-5 md:w-6 md:h-6"}):E.jsx(ZT,{className:"w-5 h-5 md:w-6 md:h-6"}),s?f==="hindi"?"":"Pause":n>=U.dialogue.length?f==="hindi"?"  ":"Replay":f==="hindi"?"":"Play"]}),E.jsx(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,className:"p-3 md:p-4 rounded-full bg-white border-4 border-gray-200 text-gray-600 shadow-lg",children:E.jsx(XT,{className:"w-5 h-5 md:w-6 md:h-6"})})]}),E.jsx(an,{children:m&&(($=U.dialogue[n])==null?void 0:$.quiz)&&E.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4",children:E.jsxs(fe.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},exit:{scale:.8,y:20},className:"bg-white rounded-3xl p-8 shadow-2xl border-8 border-purple-400 max-w-md w-full",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("div",{className:"text-5xl mb-4",children:""}),E.jsx("h3",{className:"text-2xl font-black text-purple-900 mb-2",children:f==="hindi"?" !":"Quiz Time!"}),E.jsx("p",{className:"text-lg font-bold text-gray-700",children:U.dialogue[n].quiz.question})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("input",{type:"text",value:v,onChange:me=>_(me.target.value),onKeyPress:me=>me.key==="Enter"&&pe(),placeholder:f==="hindi"?"    ...":"Type your answer here...",className:"w-full px-6 py-4 rounded-2xl border-4 border-purple-200 text-lg font-bold text-center focus:outline-none focus:border-purple-500 transition-colors",autoFocus:!0}),U.dialogue[n].quiz.hint&&E.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl border-2 border-blue-200",children:E.jsxs("p",{className:"text-sm font-bold text-blue-800",children:[" ",f==="hindi"?": ":"Hint: ",U.dialogue[n].quiz.hint]})}),E.jsx("button",{onClick:pe,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-black text-lg shadow-lg hover:from-purple-600 hover:to-purple-700 transition-all border-b-4 border-purple-700",children:f==="hindi"?" ":"Submit"})]}),x&&E.jsx(fe.div,{initial:{scale:0},animate:{scale:1},className:`mt-6 p-4 rounded-2xl text-center font-black text-lg ${x==="correct"?"bg-green-100 text-green-800 border-4 border-green-300":"bg-red-100 text-red-800 border-4 border-red-300"}`,children:x==="correct"?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"text-4xl mb-2",children:""}),f==="hindi"?" !":"Correct!"]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"text-4xl mb-2",children:""}),f==="hindi"?"   !":"Try again!"]})})]})})}),E.jsx(an,{children:A&&E.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4",children:E.jsxs(fe.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},exit:{scale:.8,y:20},className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-8 shadow-2xl border-8 border-purple-400 max-w-2xl w-full",children:[E.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[E.jsx("div",{className:"text-6xl",children:U.characters.teacher.emoji}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"bg-white rounded-3xl px-6 py-4 shadow-lg border-4 border-blue-200",children:E.jsx("p",{className:"text-lg font-bold text-gray-800 leading-relaxed",children:z})}),E.jsx("p",{className:"text-xs font-black text-blue-600 mt-2 ml-2",children:U.characters.teacher.name})]})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:"text-6xl",children:U.characters.student.emoji}),E.jsxs("div",{className:"flex-1",children:[E.jsx("textarea",{value:Y,onChange:me=>W(me.target.value),placeholder:f==="hindi"?"   ...":"Type your answer here...",className:"w-full px-6 py-4 rounded-2xl border-4 border-purple-200 text-base font-bold resize-none focus:outline-none focus:border-purple-500 transition-colors",rows:3,disabled:O}),E.jsx("p",{className:"text-xs font-black text-purple-600 mt-2 ml-2",children:U.characters.student.name})]})]}),Ce&&E.jsx(fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-2xl border-4 ${Ce.includes("Great")||Ce.includes("Perfect")||Ce.includes("Wonderful")?"bg-green-50 border-green-300 text-green-800":"bg-yellow-50 border-yellow-300 text-yellow-800"}`,children:E.jsx("p",{className:"font-bold text-center",children:Ce})}),E.jsx("button",{onClick:le,disabled:O||!Y.trim(),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-black text-lg shadow-lg hover:from-purple-600 hover:to-purple-700 transition-all border-b-4 border-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:O?" Checking...":f==="hindi"?" ":"Answer!"}),E.jsx("button",{onClick:()=>T(!1),className:"w-full py-3 bg-gray-100 text-gray-600 rounded-2xl font-bold text-sm hover:bg-gray-200 transition-all border-2 border-gray-200",children:f==="hindi"?"    ":" I'll Answer Later"}),E.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2].map(me=>E.jsx("div",{className:`w-3 h-3 rounded-full ${me<De?"bg-green-500":"bg-gray-300"}`},me))}),E.jsx("p",{className:"text-xs text-center text-gray-600 font-bold",children:f==="hindi"?` ${De+1} / 3`:`Question ${De+1} of 3`})]})]})})}),E.jsx(an,{children:n>=U.dialogue.length&&!s&&!A&&De>=3&&E.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50",children:E.jsxs("div",{className:"bg-white rounded-3xl p-12 shadow-2xl border-8 border-yellow-400 text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-2",children:f==="hindi"?"  !":"Story Complete!"}),E.jsx("p",{className:"text-gray-600 font-bold mb-6",children:f==="hindi"?"   !":"You've learned the concept!"}),E.jsx("button",{onClick:S,className:"px-6 py-3 bg-purple-600 text-white rounded-full font-black hover:bg-purple-700 transition-colors",children:f==="hindi"?"  ":"Watch Again"})]})})}),E.jsx(an,{children:k&&E.jsx(J9,{problemId:t,language:f,onComplete:()=>R(!1)})})]})}const Ho=[{id:"exam",level:1,title:"Rush to Exam",emoji:"",description:"Can the Student collect enough pages for the exam?",link:"https://www.codechef.com/problems/RUSHTOEXAM",concept:"Repeated Addition (Grouping)",given:["Time we have (Hours)","Pages per Hour"],find:"Total pages collected vs Goal",rule:"Every hour, we add the same number of pages.",formula:"Pages per Hour  Hours = Total Pages",theme:{bg:"bg-[#F3E5F5]",text:"text-purple-900",border:"border-purple-100",accent:"bg-purple-600"},inputs:[{key:"n",label:"How many hours?",default:"3",color:"blue",unit:"h"},{key:"m",label:"Goal (Pages needed)?",default:"6",color:"purple",unit:"p"},{key:"a",label:"Pages per hour?",default:"2",color:"green",unit:"p/h"}]},{id:"icecream",level:2,title:"IceCream Cones",emoji:"",description:"How much ice cream is left after melting?",link:"https://www.codechef.com/problems/ICECREAMCONES",concept:"Repeated Subtraction",given:["Starting amount","Melt rate per minute"],find:"How much is left after some time",rule:"Every minute, we take away some ice cream.",formula:"Start - (Melt Rate  Minutes) = Leftover",theme:{bg:"bg-[#FFF3E0]",text:"text-orange-900",border:"border-orange-100",accent:"bg-orange-600"},inputs:[{key:"x",label:"Starting grams?",default:"5",color:"blue",unit:"g"},{key:"y",label:"Melt rate?",default:"1",color:"red",unit:"g/m"},{key:"n",label:"Minutes passed?",default:"2",color:"orange",unit:"m"}]},{id:"snail",level:3,title:"Sub A Add B",emoji:"",description:"Help the snail climb out of the deep hole!",link:"https://www.codechef.com/problems/SUBAADDB",concept:"Net Progress (Step-by-Step)",given:["Depth of hole","Climb up distance","Slide down distance"],find:"Number of days to reach the top",rule:"Each day: Go up, then slide down. Check if we reached the top!",formula:"Total = (Up - Down) per day (until the last day)",theme:{bg:"bg-[#E0F7FA]",text:"text-blue-900",border:"border-blue-100",accent:"bg-blue-600"},inputs:[{key:"n",label:"Hole depth?",default:"10",color:"blue",unit:"m"},{key:"a",label:"Climb up?",default:"3",color:"green",unit:"m"},{key:"b",label:"Slide down?",default:"2",color:"red",unit:"m"}]},{id:"mindist",level:4,title:"Minimum Distinct",emoji:"",description:"Make all items in the tray unique!",link:"https://www.codechef.com/problems/MINDIST",concept:"Frequency & Swapping",given:["List of items"],find:"Minimum unique items after swaps",rule:"If we have duplicates, try to swap them with something else.",formula:"Unique Count = Total - Duplicates",theme:{bg:"bg-[#E8F5E9]",text:"text-green-900",border:"border-green-100",accent:"bg-green-600"},inputs:[{key:"arr",label:"Items (comma separated)",default:"1,2,2,3,1",color:"green",unit:"items"}]},{id:"maxmin",level:5,title:"Max Minus Min",emoji:"",description:"Find the biggest height difference!",link:"https://www.codechef.com/problems/MAXMIN",concept:"Range (Max - Min)",given:["List of heights"],find:"The gap between the tallest and shortest",rule:"Find the biggest number and the smallest number, then subtract.",formula:"Max - Min = Range",theme:{bg:"bg-[#FFEBEE]",text:"text-red-900",border:"border-red-100",accent:"bg-red-600"},inputs:[{key:"arr",label:"Heights (comma separated)",default:"10,2,5,15,8",color:"red",unit:"m"}]},{id:"goodsub",level:6,title:"Good Subarrays",emoji:"",description:"Count subarrays where sum equals length!",link:"https://www.codechef.com/problems/GOODSUB",concept:"Prefix Sums & Counting",given:["Array of digits"],find:"Subarrays where Sum == Length",rule:"Check every possible slice of the array.",formula:"Count(Subarray) where Sum(Subarray) == Length(Subarray)",theme:{bg:"bg-[#E1F5FE]",text:"text-sky-900",border:"border-sky-100",accent:"bg-sky-600"},inputs:[{key:"arr",label:"Train weights (comma separated)",default:"1,0,2",color:"sky",unit:"cars"}]},{id:"graph",level:7,title:"Array Graph",emoji:"",description:"Connect the dots with shared factors!",link:"https://www.codechef.com/problems/ARRAYGRAPH",concept:"Connectivity & GCD",given:["Array of node values"],find:"Are all nodes connected?",rule:"Nodes are connected if they share a common factor.",formula:"Connectivity = Path exists between all pairs",theme:{bg:"bg-[#F5F5F5]",text:"text-zinc-900",border:"border-zinc-200",accent:"bg-zinc-800"},inputs:[{key:"arr",label:"Node values (comma separated)",default:"2,3,4,6",color:"zinc",unit:"nodes"}]},{id:"atleast",level:8,title:"At least One",emoji:"",description:"Find the hidden target in the array!",link:"https://www.codechef.com/problems/ATLEASTONE",concept:"Linear Search",given:["Array of values","Target value"],find:"Is the target in the array?",rule:"Look at every item until you find the target.",formula:"Result = Target in Array",theme:{bg:"bg-[#FFFDE7]",text:"text-yellow-900",border:"border-yellow-100",accent:"bg-yellow-600"},inputs:[{key:"arr",label:"Search area (comma separated)",default:"5,10,15,20",color:"yellow",unit:"targets"},{key:"k",label:"Target value?",default:"15",color:"orange",unit:"val"}]}],ia=t=>{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const n=new e,a=n.createOscillator(),s=n.createGain();a.connect(s),s.connect(n.destination);const o=n.currentTime;t==="climb"?(a.type="sine",a.frequency.setValueAtTime(200,o),a.frequency.exponentialRampToValueAtTime(800,o+.2),s.gain.setValueAtTime(.3,o),s.gain.exponentialRampToValueAtTime(.01,o+.2),a.start(o),a.stop(o+.2)):t==="slide"?(a.type="triangle",a.frequency.setValueAtTime(600,o),a.frequency.exponentialRampToValueAtTime(100,o+.4),s.gain.setValueAtTime(.2,o),s.gain.exponentialRampToValueAtTime(.01,o+.4),a.start(o),a.stop(o+.4)):t==="win"?[440,554.37,659.25,880].forEach((c,f)=>{const h=n.createOscillator(),m=n.createGain();h.connect(m),m.connect(n.destination),h.type="square",h.frequency.setValueAtTime(c,o+f*.1),m.gain.setValueAtTime(.1,o+f*.1),m.gain.exponentialRampToValueAtTime(.01,o+f*.1+.3),h.start(o+f*.1),h.stop(o+f*.1+.3)}):t==="click"&&(a.type="sine",a.frequency.setValueAtTime(400,o),s.gain.setValueAtTime(.1,o),s.gain.exponentialRampToValueAtTime(.01,o+.05),a.start(o),a.stop(o+.05))};function eU(){const[t,e]=ne.useState("exam"),[n,a]=ne.useState(()=>{const J=localStorage.getItem("unlockedLevel");return J?parseInt(J):1}),[s,o]=ne.useState({n:"10",a:"3",b:"2",m:"6",x:"5",y:"1",arr:"1,2,2,3,1",k:"15"}),[u,c]=ne.useState(!1),[f,h]=ne.useState(0),[m,y]=ne.useState(0),[v,_]=ne.useState("idle"),[x,w]=ne.useState(""),[A,T]=ne.useState(""),[k,R]=ne.useState(!1),[z,P]=ne.useState(!0),[Y,W]=ne.useState(!1),[O,ge]=ne.useState(!1),[Ce,ve]=ne.useState(!1),[De,We]=ne.useState(!1),[oe,re]=ne.useState(""),j=lj(),U=()=>{W(!Y),Y||(ge(!0),setTimeout(()=>ge(!1),2e3))},Q=ne.useRef(null),X=ne.useMemo(()=>Ho.find(J=>J.id===t)||Ho[0],[t]),ae=ne.useMemo(()=>{if(t==="snail"){const J=Number(s.n),ue=Number(s.a),ke=Number(s.b);return isNaN(J)||isNaN(ue)||isNaN(ke)?null:ue<=0?{error:"The snail needs to climb at least a little bit!"}:J<=0?{operations:0}:J<ue?{operations:1}:ue<=ke?{error:"Oh no! The snail is sliding back too much. It will never get out!"}:{operations:Math.floor((J-ue)/(ue-ke))+1}}else if(t==="exam"){const J=Number(s.n),ue=Number(s.m),ke=Number(s.a);return isNaN(J)||isNaN(ue)||isNaN(ke)?null:{success:ke*J>=ue}}else if(t==="icecream"){const J=Number(s.x),ue=Number(s.y),ke=Number(s.n);return isNaN(J)||isNaN(ue)||isNaN(ke)?null:{left:Math.max(0,J-ue*ke)}}else if(t==="mindist"){const J=s.arr.split(",").map(Number).filter(ke=>!isNaN(ke)),ue=new Set(J).size;return{ops:J.length-ue}}else if(t==="maxmin"){const J=s.arr.split(",").map(Number).filter(ue=>!isNaN(ue));return J.length===0?{diff:0}:{diff:Math.max(...J)-Math.min(...J)}}else if(t==="goodsub"){const J=s.arr.split(",").map(Number).filter(ke=>!isNaN(ke));let ue=0;for(let ke=0;ke<J.length;ke++){let tt=0;for(let Ct=ke;Ct<J.length;Ct++)tt+=J[Ct],tt===Ct-ke+1&&ue++}return{count:ue}}else if(t==="graph"){const J=s.arr.split(",").map(Number).filter(tt=>!isNaN(tt)),ue=(tt,Ct)=>Ct===0?tt:ue(Ct,tt%Ct);let ke=0;for(let tt=0;tt<J.length;tt++)for(let Ct=tt+1;Ct<J.length;Ct++)ue(J[tt],J[Ct])>1&&ke++;return{edges:ke}}else if(t==="atleast"){const J=s.arr.split(",").map(Number).filter(ke=>!isNaN(ke)),ue=Number(s.k);return{found:J.includes(ue)}}return null},[t,s]),I=()=>{c(!1),Q.current&&clearTimeout(Q.current)},H=()=>{z&&ia("click"),I(),y(0),_("idle"),ve(!1),We(!1),re(""),w("Ready to learn? Press Start!"),T("We will solve this step-by-step to understand the logic."),t==="snail"?(h(Number(s.n)),j.set({y:"100%",rotate:0,scale:1})):t==="exam"?(h(0),j.set({scale:1,y:0})):t==="icecream"?(h(Number(s.x)),j.set({scale:1,opacity:1})):(h(0),j.set({scale:1,opacity:1,x:0,y:0}))},ie=async J=>{De&&(We(!1),z&&ia("click"),t==="snail"?me():t==="exam"?Ie():t==="icecream"&&Qe())};let le=0,pe=0,N=0,S=0,V=0,$=0;const me=async()=>{const J=Number(s.n),ue=Number(s.a),ke=Number(s.b);if(pe++,y(pe),z&&ia("climb"),w(`Day ${pe}: You helped the snail climb ${ue}m!`),T(`Great job! The snail climbed ${ue}m up.`),le=Math.max(0,le-ue),h(le),await j.start({y:`${le/J*100}%`,rotate:-15,scale:1.2}),le<=0){w(` YOU WON! Snail escaped in ${pe} days!`),T("Amazing! You helped the snail reach the top!"),_("finished"),c(!1),ve(!1),z&&ia("win"),ct(),await j.start({scale:[1.2,2,1.5],rotate:[0,20,-20,0]});return}await new Promise(tt=>setTimeout(tt,1e3)),z&&ia("slide"),w(`Oh no! Snail slides back ${ke}m at night...`),T(`The snail needs to rest. It slides back ${ke}m.`),le=le+ke,h(le),await j.start({y:`${le/J*100}%`,rotate:15,scale:.9}),await new Promise(tt=>setTimeout(tt,1e3)),w(`Day ${pe} complete! Net progress: ${ue-ke}m`),T('Click "Help Climb!" to continue the next day!'),re("Click to help the snail climb again!"),We(!0)},Ie=async()=>{const J=Number(s.n),ue=Number(s.m),ke=Number(s.a);if(S++,y(S),w(`Hour ${S}: You collected ${ke} pages!`),T("Great! You're working hard to collect pages."),N+=ke,h(N),z&&ia("climb"),await j.start({x:(S-1)*20,scale:[1,1.2,1],transition:{duration:.5}}),w(`Total in bag: ${N} pages`),T(`You have ${N} pages. Need ${ue} pages total.`),N>=ue){w(" YOU WIN! You have enough pages for the exam!"),T(`Success! ${N} pages is enough!`),_("finished"),c(!1),ve(!1),z&&ia("win"),ct();return}if(S>=J){w(` Time's up! Only ${N} pages. Need ${ue}.`),T("Not enough time. Try adjusting the numbers!"),_("finished"),c(!1),ve(!1);return}await new Promise(tt=>setTimeout(tt,1e3)),re("Click to collect more pages!"),We(!0)},Qe=async()=>{const J=Number(s.x),ue=Number(s.y),ke=Number(s.n);if($++,y($),w(`Minute ${$}: ${ue}g melted...`),T("The sun is hot! Ice cream is melting."),V=Math.max(0,V-ue),h(V),z&&ia("slide"),await j.start({scale:V/J,opacity:.5+V/J*.5}),w(`Remaining: ${V.toFixed(0)}g`),T(`You have ${V}g left.`),V<=0){w(" All melted! 0g left."),T("The ice cream is gone! Try eating it faster next time!"),_("finished"),c(!1),ve(!1),z&&ia("win"),ct();return}if($>=ke){w(` You saved ${V}g of ice cream!`),T("Good job! You still have some ice cream left!"),_("finished"),c(!1),ve(!1),z&&ia("win"),ct();return}await new Promise(tt=>setTimeout(tt,1e3)),re("Click to see the next minute!"),We(!0)},ct=()=>{const J=X.level+1;J>n&&J<=Ho.length&&(a(J),localStorage.setItem("unlockedLevel",J.toString()))},yt=async()=>{if(z&&ia("click"),Ce){H();return}if(ve(!0),c(!0),_("active"),t==="snail"){const J=Number(s.n),ue=Number(s.a),ke=Number(s.b);if(isNaN(J)||isNaN(ue)||isNaN(ke)||ue<=ke)return;le=J,pe=0,w(`Help the snail escape from a ${J}m deep hole!`),T(`The snail can climb ${ue}m up but slides ${ke}m down each night.`),re('Click "Help Climb!" to start!'),We(!0)}else if(t==="exam"){const J=Number(s.n),ue=Number(s.m),ke=Number(s.a);if(isNaN(J)||isNaN(ue)||isNaN(ke))return;N=0,S=0,w(`Collect ${ue} pages in ${J} hours for the exam!`),T(`You can collect ${ke} pages per hour. Let's start!`),re('Click "Collect Pages!" to begin!'),We(!0)}else if(t==="icecream"){const J=Number(s.x),ue=Number(s.y),ke=Number(s.n);if(isNaN(J)||isNaN(ue)||isNaN(ke))return;V=J,$=0,w(`You have ${J}g of ice cream! It melts ${ue}g per minute.`),T(`Watch your ice cream for ${ke} minutes. Will it survive?`),re('Click "Next Minute!" to start!'),We(!0)}};ne.useEffect(()=>{H()},[t,s]);const _n=(J,ue)=>{o(ke=>({...ke,[J]:ue}))};return E.jsxs("div",{className:`min-h-screen ${X.theme.bg} ${X.theme.text} font-sans selection:bg-yellow-200 overflow-hidden relative transition-colors duration-700`,children:[E.jsx(an,{children:O&&E.jsx(fe.div,{initial:{opacity:0,scale:.5,y:-50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,y:-50},transition:{type:"spring",stiffness:300,damping:20},className:"fixed top-24 left-1/2 -translate-x-1/2 z-[100] bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full shadow-2xl border-4 border-white",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(fe.div,{animate:{rotate:[0,360]},transition:{duration:.5},children:""}),E.jsx("span",{className:"font-black text-lg",children:"Story Mode Activated!"}),E.jsx(fe.div,{animate:{scale:[1,1.3,1]},transition:{duration:.5,repeat:2},children:""})]})})}),E.jsxs(an,{mode:"wait",children:[t==="snail"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-white/40 animate-bounce duration-[3000ms]",children:E.jsx(Wh,{className:"w-20 h-20"})}),E.jsx("div",{className:"absolute top-20 right-20 text-yellow-400 animate-pulse",children:E.jsx(n1,{className:"w-24 h-24"})}),E.jsx("div",{className:"absolute bottom-10 right-10 text-white/40 animate-bounce duration-[4000ms]",children:E.jsx(Wh,{className:"w-16 h-16"})})]},"snail-bg"),t==="exam"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-purple-300/40 animate-pulse duration-[2000ms]",children:E.jsx(dr,{className:"w-12 h-12 fill-current"})}),E.jsx("div",{className:"absolute top-20 right-20 text-yellow-200 animate-pulse",children:E.jsx(Kj,{className:"w-24 h-24 fill-current"})}),E.jsx("div",{className:"absolute bottom-20 left-1/4 text-purple-300/20 animate-bounce duration-[5000ms]",children:E.jsx(dr,{className:"w-8 h-8 fill-current"})})]},"exam-bg"),t==="icecream"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-orange-300/40 animate-bounce duration-[3000ms]",children:E.jsx(n1,{className:"w-20 h-20"})}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 text-blue-400/20",children:E.jsx(y3,{className:"w-full h-32"})}),E.jsx("div",{className:"absolute top-40 right-10 text-orange-200/40 animate-pulse",children:E.jsx(Uo,{className:"w-16 h-16"})})]},"icecream-bg"),t==="mindist"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-green-300/20 animate-pulse",children:E.jsx(zj,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-20 right-10 text-green-300/20 animate-bounce",children:E.jsx(dr,{className:"w-16 h-16"})})]},"mindist-bg"),t==="maxmin"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-20 right-20 text-red-300/20 animate-pulse",children:E.jsx(pj,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-10 left-10 text-red-300/20 animate-bounce",children:E.jsx(Qw,{className:"w-16 h-16"})})]},"maxmin-bg"),t==="goodsub"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 right-10 text-sky-300/20 animate-pulse",children:E.jsx(Ku,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-20 left-20 text-sky-300/20 animate-bounce",children:E.jsx(Wh,{className:"w-24 h-24"})})]},"goodsub-bg"),t==="graph"&&E.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:E.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-zinc-300/10",children:E.jsx(t1,{className:"w-[40rem] h-[40rem]"})})},"graph-bg"),t==="atleast"&&E.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-20 left-1/4 text-yellow-300/20 animate-pulse",children:E.jsx(e1,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-20 right-1/4 text-yellow-300/20 animate-bounce",children:E.jsx(dr,{className:"w-24 h-24"})})]},"atleast-bg")]}),E.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10 relative z-10",children:[E.jsx(fe.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.5},className:"fixed bottom-8 right-8 z-[60]",children:E.jsxs(fe.button,{onClick:U,whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},animate:{y:[0,-10,0],boxShadow:Y?["0 20px 40px rgba(168, 85, 247, 0.5)","0 25px 50px rgba(236, 72, 153, 0.6)","0 20px 40px rgba(168, 85, 247, 0.5)"]:["0 15px 30px rgba(147, 51, 234, 0.3)","0 20px 40px rgba(147, 51, 234, 0.4)","0 15px 30px rgba(147, 51, 234, 0.3)"]},transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},boxShadow:{duration:2,repeat:1/0}},className:`relative px-6 py-5 rounded-full border-4 shadow-2xl transition-all duration-300 flex items-center gap-3 ${Y?"bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 border-purple-300":"bg-gradient-to-r from-purple-600 to-pink-600 border-purple-400"}`,children:[E.jsx(fe.div,{animate:{rotate:[0,-15,15,-15,0],scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatDelay:1},children:E.jsx(Zj,{className:"w-10 h-10 text-white drop-shadow-lg",strokeWidth:2.5})}),E.jsxs("div",{className:"hidden md:block text-left",children:[E.jsx("div",{className:"text-lg font-black text-white drop-shadow-md",children:Y?"Story ON":"Story Mode"}),E.jsx("div",{className:"text-xs font-bold text-white/90",children:Y?"Tap to exit":"Tap to start!"})]}),!Y&&E.jsx(fe.div,{animate:{scale:[1,1.3,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0},className:"absolute -top-2 -right-2 text-3xl drop-shadow-lg",children:""}),Y&&E.jsx(fe.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"absolute -top-2 -right-2 w-8 h-8 bg-green-400 rounded-full border-4 border-white shadow-lg flex items-center justify-center",children:E.jsx("span",{className:"text-lg font-black text-white",children:""})}),E.jsx(fe.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full border-4 ${Y?"border-purple-300":"border-pink-400"}`})]})}),E.jsxs("header",{className:"mb-10 text-center relative",children:[E.jsx(fe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"absolute top-0 right-0",children:E.jsx(fe.button,{onClick:()=>P(!z),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-4 rounded-2xl bg-white border-4 border-purple-100 shadow-lg hover:border-purple-300 hover:shadow-xl transition-all duration-300",children:z?E.jsx(h3,{className:"w-6 h-6 text-purple-600"}):E.jsx(p3,{className:"w-6 h-6 text-zinc-400"})})}),E.jsxs(fe.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center gap-3 px-6 py-2 rounded-full bg-yellow-400 border-4 border-yellow-500 shadow-lg mb-6",children:[E.jsx(Ij,{className:"w-6 h-6 text-yellow-900"}),E.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-yellow-900",children:"CodeChef Learning Games!"})]}),E.jsxs("h1",{className:`text-5xl md:text-7xl font-black tracking-tight ${X.theme.text} mb-4 drop-shadow-sm`,children:[X.title," ",X.emoji]}),E.jsx("p",{className:`text-xl ${X.theme.text} opacity-70 font-bold max-w-2xl mx-auto`,children:X.description})]}),E.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:Ho.map(J=>{const ue=J.level>n;return E.jsxs(fe.button,{whileHover:ue?{}:{scale:1.05},whileTap:ue?{}:{scale:.95},onClick:()=>{ue||(e(J.id),H())},className:`px-6 py-4 rounded-[2rem] border-4 font-black uppercase tracking-widest transition-all shadow-lg flex items-center gap-3 ${ue?"bg-zinc-200 text-zinc-400 border-zinc-300 cursor-not-allowed grayscale":t===J.id?`${J.theme.accent} text-white border-white/20`:"bg-white text-zinc-600 border-zinc-100 hover:border-zinc-300"}`,children:[E.jsx("span",{className:"text-2xl",children:ue?E.jsx(Fj,{className:"w-6 h-6"}):J.emoji}),E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsxs("span",{className:"text-[10px] opacity-50",children:["Level ",J.level]}),E.jsx("span",{children:J.title})]})]},J.id)})}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch",children:[E.jsx("div",{className:"lg:col-span-8 flex flex-col gap-6",children:E.jsx(an,{mode:"wait",children:Y?E.jsx(fe.section,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.4,type:"spring",stiffness:200,damping:20},className:`bg-white rounded-[3rem] p-8 shadow-2xl border-8 ${X.theme.border} relative overflow-hidden flex-1 min-h-[650px]`,children:E.jsx(W9,{problemId:t,soundEnabled:z})},"story-mode"):E.jsxs(fe.section,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.4,type:"spring",stiffness:200,damping:20},className:`bg-white rounded-[3rem] p-8 shadow-2xl border-8 ${X.theme.border} relative overflow-hidden flex-1 flex flex-col gap-10 min-h-[650px]`,children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border-2 border-blue-100",children:[E.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-blue-400 mb-2 flex items-center gap-2",children:[E.jsx(Tj,{className:"w-4 h-4"})," What is GIVEN?"]}),E.jsx("ul",{className:"space-y-1",children:X.given.map((J,ue)=>E.jsxs("li",{className:"text-sm font-bold text-blue-900 flex items-center gap-2",children:[E.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"})," ",J]},ue))})]}),E.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl border-2 border-purple-100",children:[E.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-purple-400 mb-2 flex items-center gap-2",children:[E.jsx(e1,{className:"w-4 h-4"})," What to FIND?"]}),E.jsx("p",{className:"text-sm font-bold text-purple-900",children:X.find})]})]}),E.jsxs("div",{className:"flex flex-col md:flex-row gap-10 flex-1",children:[E.jsxs("div",{className:"relative w-full md:w-64 h-64 md:h-full bg-stone-100 rounded-[2rem] border-x-[16px] border-stone-200 overflow-hidden shrink-0 shadow-inner flex flex-col items-center transition-colors duration-500",children:[t==="snail"&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#5D4037 2px, transparent 0)",backgroundSize:"30px 30px"}}),E.jsx("div",{className:"absolute top-0 left-0 right-0 h-10 bg-gradient-to-b from-green-500 to-transparent z-20 flex items-center justify-center",children:E.jsx(Uo,{className:"w-6 h-6 text-white/50 animate-pulse"})}),E.jsx(fe.div,{animate:j,initial:{y:"100%"},className:"absolute left-1/2 -translate-x-1/2 w-20 h-20 flex items-center justify-center z-30",style:{bottom:0},children:E.jsxs("div",{className:"relative",children:[E.jsx(an,{mode:"wait",children:v==="active"&&E.jsxs(fe.div,{initial:{opacity:0,y:10,scale:.8},animate:{opacity:1,y:-60,scale:1},exit:{opacity:0,scale:.8},className:"absolute left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-2xl shadow-xl border-2 border-blue-100 whitespace-nowrap z-50",children:[E.jsxs("span",{className:"text-xs font-black text-blue-600",children:["Day ",m,": Up ",s.a,"m, Down ",s.b,"m!"]}),E.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white border-b-2 border-r-2 border-blue-100 rotate-45"})]})}),E.jsx(fe.span,{className:"text-7xl drop-shadow-2xl block",animate:v==="idle"?{y:[0,-8,0],rotate:[0,3,-3,0]}:{},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:""})]})}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-stone-300 z-20 flex items-center justify-center",children:E.jsx("p",{className:"text-[10px] font-black text-stone-600 uppercase tracking-tight px-2 text-center",children:x})})]}),t==="exam"&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"20px 20px"}}),E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-between py-6 px-4 relative z-10",children:[E.jsx("div",{className:"w-full flex justify-center gap-1",children:[...Array(Number(s.n))].map((J,ue)=>E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-[10px] font-black ${ue<m?"bg-purple-500 border-purple-600 text-white":"bg-white border-zinc-200 text-zinc-300"}`,children:ue+1}),E.jsx("div",{className:"w-0.5 h-2 bg-zinc-200"})]},ue))}),E.jsxs("div",{className:"relative flex flex-col items-center",children:[E.jsxs(fe.div,{animate:j,className:"text-7xl drop-shadow-xl relative",children:["",E.jsxs(fe.div,{animate:{scale:1+f*.05},className:"absolute -right-4 bottom-0 w-12 h-12 bg-amber-700 rounded-b-2xl rounded-t-lg border-2 border-amber-900 flex flex-wrap gap-0.5 p-1 items-end justify-center overflow-hidden shadow-lg",children:[[...Array(Math.min(15,f))].map((J,ue)=>E.jsx("div",{className:"w-2 h-3 bg-white border border-zinc-300 rounded-sm"},ue)),f>15&&E.jsxs("span",{className:"text-[8px] text-white font-black",children:["+",f-15]})]})]}),E.jsx("span",{className:"mt-4 text-[10px] font-black text-purple-900/40 uppercase tracking-widest",children:"Collecting Pages..."})]}),E.jsxs("div",{className:"w-full space-y-4",children:[E.jsxs("div",{className:"bg-white/90 p-4 rounded-[2rem] border-4 border-purple-100 shadow-xl relative",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase",children:["In the Bag: ",f]}),E.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase",children:["Need: ",s.m]})]}),E.jsxs("div",{className:"h-6 w-full bg-zinc-100 rounded-full overflow-hidden border-2 border-zinc-200 relative",children:[E.jsx(fe.div,{animate:{width:`${Math.min(100,f/Number(s.m)*100)}%`},className:`h-full transition-colors duration-500 ${f>=Number(s.m)?"bg-green-500":"bg-purple-500"}`}),E.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-red-500 left-[100%] -translate-x-full shadow-sm"})]}),E.jsx("div",{className:"mt-4 text-center",children:E.jsx("p",{className:"text-xs font-black text-purple-600 uppercase leading-tight",children:x})})]}),E.jsxs("div",{className:"flex justify-center gap-2",children:[[...Array(Number(s.n))].map((J,ue)=>E.jsx("div",{className:`px-2 py-1 rounded-md text-[10px] font-black ${ue<m?"bg-purple-100 text-purple-600":"bg-zinc-50 text-zinc-300"}`,children:ue<m?`+${s.a}`:"?"},ue)),E.jsxs("span",{className:"text-[10px] font-black text-zinc-400",children:["= ",f]})]})]})]})]}),t==="icecream"&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-50 to-orange-100 opacity-50"}),E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-between py-6 px-4 relative z-10",children:[E.jsxs("div",{className:"flex flex-col items-center gap-1",children:[E.jsx("span",{className:"text-[10px] font-black text-orange-900/40 uppercase tracking-widest",children:"Ice Cream Pot"}),E.jsxs("div",{className:"flex gap-1 flex-wrap justify-center max-w-[140px] bg-white/40 p-2 rounded-xl border-2 border-orange-100",children:[[...Array(Math.max(0,Math.floor(f)))].map((J,ue)=>E.jsx(fe.div,{layout:!0,className:"w-4 h-4 bg-orange-200 rounded-full border border-orange-300 shadow-sm"},ue)),f<=0&&E.jsx("span",{className:"text-[10px] font-black text-red-400",children:"EMPTY!"})]})]}),E.jsxs(fe.div,{animate:j,className:"relative",children:[E.jsx("span",{className:"text-9xl drop-shadow-xl",children:""}),E.jsx(an,{children:v==="active"&&E.jsx(fe.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,y:[0,50]},exit:{opacity:0},transition:{duration:.8,repeat:1/0},className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-blue-400 text-4xl",children:""})})]}),E.jsxs("div",{className:"w-full space-y-4",children:[E.jsxs("div",{className:"h-8 w-full bg-zinc-100 rounded-xl overflow-hidden border-2 border-zinc-200 relative",children:[E.jsx(fe.div,{animate:{width:`${f/Number(s.x)*100}%`},className:"h-full bg-orange-500 shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)]"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsxs("span",{className:"text-[10px] font-black text-white mix-blend-difference uppercase tracking-widest",children:["Left: ",f.toFixed(0),"g / ",s.x,"g"]})})]}),E.jsx("div",{className:"bg-white/80 p-3 rounded-2xl border-2 border-orange-100 text-center shadow-sm",children:E.jsx("p",{className:"text-xs font-black text-orange-600 uppercase tracking-tight",children:x})})]})]})]}),t==="mindist"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-4",children:[E.jsx(fe.div,{animate:j,className:"text-8xl",children:""}),E.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:s.arr.split(",").map((J,ue)=>E.jsx(fe.div,{animate:v==="active"?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},className:"w-8 h-8 bg-green-200 rounded-lg flex items-center justify-center font-black text-green-800 border-2 border-green-400",children:J},ue))})]}),t==="maxmin"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-4",children:[E.jsx(fe.div,{animate:j,className:"text-8xl",children:""}),E.jsx("div",{className:"w-full h-32 flex items-end justify-center gap-1",children:s.arr.split(",").map((J,ue)=>E.jsx(fe.div,{initial:{height:0},animate:{height:`${Number(J)/Math.max(...s.arr.split(",").map(Number),1)*100}%`},className:"flex-1 bg-red-400 rounded-t-lg border-x-2 border-red-600"},ue))})]}),t==="goodsub"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-4",children:[E.jsx(fe.div,{animate:j,className:"text-8xl",children:""}),E.jsx("div",{className:"flex gap-2",children:s.arr.split(",").map((J,ue)=>E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-10 h-8 bg-sky-400 rounded-lg border-2 border-sky-600 flex items-center justify-center font-black text-white text-xs",children:J}),E.jsx("div",{className:"w-1 h-2 bg-zinc-400"})]},ue))})]}),t==="graph"&&E.jsx("div",{className:"h-full w-full flex flex-col items-center justify-center p-4",children:E.jsxs(fe.div,{animate:j,className:"relative w-full h-full flex items-center justify-center",children:[E.jsx(t1,{className:"w-32 h-32 text-zinc-300"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsx("div",{className:"grid grid-cols-2 gap-8",children:s.arr.split(",").map((J,ue)=>E.jsx("div",{className:"w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center text-white font-black text-xs",children:J},ue))})})]})}),t==="atleast"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-8",children:[E.jsxs(fe.div,{animate:j,className:"text-8xl relative",children:["",E.jsx(fe.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 border-4 border-yellow-400 rounded-full"})]}),E.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:s.arr.split(",").map((J,ue)=>E.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-black border-2 ${J===s.k?"bg-yellow-400 border-yellow-600 text-yellow-900":"bg-zinc-100 border-zinc-200 text-zinc-400"}`,children:J},ue))})]})]}),E.jsxs("div",{className:"flex-1 flex flex-col justify-between py-4",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsxs(fe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-amber-50 p-6 rounded-[2rem] border-4 border-amber-100 shadow-sm relative",children:[E.jsx("div",{className:"absolute -left-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-amber-50 border-l-4 border-b-4 border-amber-100 rotate-45 hidden md:block"}),E.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-amber-500 mb-2 flex items-center gap-2",children:[E.jsx(Ku,{className:"w-4 h-4"})," Thinking Box"]}),E.jsxs("p",{className:"text-sm font-bold text-amber-900 leading-relaxed italic",children:['"',A||"Ready to start the thinking process?",'"']}),E.jsx("div",{className:"mt-4 pt-4 border-t border-amber-100",children:E.jsxs("span",{className:"text-[10px] font-black uppercase text-amber-400",children:["Concept: ",X.concept]})})]}),v==="finished"&&E.jsxs(fe.div,{initial:{scale:0,rotate:-20,y:-20},animate:{scale:1,rotate:0,y:0},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-8 py-6 rounded-3xl font-black text-xl shadow-2xl border-4 border-yellow-500 text-center mb-6",children:[E.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[E.jsx(Uo,{className:"w-8 h-8"}),E.jsx("span",{children:"Concept Mastered!"}),E.jsx(Uo,{className:"w-8 h-8"})]}),E.jsx("div",{className:"text-sm font-bold opacity-90",children:t==="exam"?ae!=null&&ae.success?" Ready for the exam!":" Keep practicing!":" You got it!"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs(fe.div,{whileHover:{scale:1.05,y:-5},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl p-6 shadow-xl relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -mr-8 -mt-8"}),E.jsxs("div",{className:"relative z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsx(u3,{className:"w-8 h-8 text-white/80"}),u&&E.jsx(fe.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-green-400 rounded-full"})]}),E.jsx("div",{className:"text-5xl font-black text-white mb-1",children:m}),E.jsx("div",{className:"text-xs font-bold text-white/70 uppercase tracking-wider",children:t==="snail"?"Days":t==="exam"?"Hours":t==="icecream"?"Minutes":"Steps"})]})]}),E.jsxs(fe.div,{whileHover:{scale:1.05,y:-5},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-3xl p-6 shadow-xl relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -mr-8 -mt-8"}),E.jsxs("div",{className:"relative z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t==="snail"?E.jsx(Qw,{className:"w-8 h-8 text-white/80"}):t==="exam"?E.jsx(bj,{className:"w-8 h-8 text-white/80"}):t==="icecream"?E.jsx($j,{className:"w-8 h-8 text-white/80"}):E.jsx(Ku,{className:"w-8 h-8 text-white/80"}),v==="finished"&&E.jsx(fe.div,{initial:{scale:0},animate:{scale:1,rotate:360},className:"text-2xl",children:""})]}),E.jsx("div",{className:"text-5xl font-black text-white mb-1",children:t==="snail"?Math.max(0,Number(s.n)-f).toFixed(0):t==="mindist"||t==="maxmin"||t==="goodsub"||t==="graph"||t==="atleast"?"?":f.toFixed(0)}),E.jsx("div",{className:"text-xs font-bold text-white/70 uppercase tracking-wider",children:t==="snail"?"Height":t==="exam"?"Pages":t==="icecream"?"Grams":"Value"})]})]})]}),E.jsx("div",{className:`p-6 rounded-[2rem] border-4 transition-all duration-500 ${v==="active"?"bg-green-100 border-green-200":v==="finished"?"bg-yellow-100 border-yellow-200":"bg-zinc-50 border-zinc-100"}`,children:E.jsx("p",{className:`text-lg font-black ${X.theme.text} text-center`,children:v==="idle"?" Ready to Play?":v==="active"?" Watch it happen!":" Level Complete!"})})]}),E.jsxs("div",{className:"flex flex-col gap-4 mt-8",children:[E.jsx(an,{children:De&&E.jsxs(fe.button,{initial:{scale:0,y:20},animate:{scale:1,y:0},exit:{scale:0,y:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ie(),className:"w-full flex items-center justify-center gap-3 py-8 rounded-[2rem] text-2xl font-black uppercase tracking-widest bg-gradient-to-r from-yellow-400 to-orange-400 text-white shadow-2xl border-b-8 border-orange-600 hover:from-yellow-500 hover:to-orange-500 animate-pulse",children:[E.jsx(Ku,{className:"w-8 h-8"}),t==="snail"?" Help Climb!":t==="exam"?" Collect Pages!":t==="icecream"?" Next Minute!":"Continue!"]})}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:yt,disabled:!!ae&&"error"in ae,className:`flex-1 flex items-center justify-center gap-3 py-6 rounded-[2rem] text-xl font-black uppercase tracking-widest transition-all shadow-xl border-b-8 ${Ce?"bg-red-500 text-white border-red-700 hover:bg-red-400":"bg-green-500 text-white border-green-700 hover:bg-green-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[Ce?E.jsx(XT,{className:"w-6 h-6"}):E.jsx(ZT,{className:"w-6 h-6"}),Ce?" Restart":" Start Game!"]}),Ce&&E.jsx(fe.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:H,className:"p-6 rounded-[2rem] bg-white border-4 border-zinc-100 text-zinc-300 hover:text-zinc-500 hover:border-zinc-300 transition-all shadow-lg",children:E.jsx(Cj,{className:"w-8 h-8"})})]})]})]})]})]},"game-mode")})}),E.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[E.jsx(an,{mode:"wait",children:ae&&E.jsxs(fe.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},className:"bg-gradient-to-br from-yellow-400 via-orange-400 to-yellow-500 rounded-[3rem] p-10 border-8 border-yellow-500 shadow-2xl relative overflow-hidden flex-1 flex flex-col justify-center text-center",children:[E.jsxs(fe.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-0 opacity-10",children:[E.jsx(Uo,{className:"absolute top-10 right-10 w-24 h-24"}),E.jsx(dr,{className:"absolute bottom-10 left-10 w-32 h-32"}),E.jsx(d3,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-40 h-40"})]}),"error"in ae?E.jsxs("div",{className:"text-yellow-900 relative z-10",children:[E.jsx(fe.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:E.jsx(xj,{className:"w-20 h-20 mx-auto mb-6"})}),E.jsx("h3",{className:"text-3xl font-black mb-4",children:"Oops!"}),E.jsx("p",{className:"font-bold leading-relaxed text-lg",children:ae.error})]}):E.jsxs("div",{className:"relative z-10 space-y-6",children:[E.jsxs(fe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5},children:[E.jsx("div",{className:"text-7xl mb-4",children:t==="exam"&&ae.success?"":t==="exam"&&!ae.success?"":t==="snail"?"":t==="icecream"?"":""}),E.jsx("div",{className:"text-6xl font-black leading-none text-white drop-shadow-2xl mb-2",children:t==="snail"?ae.operations:t==="exam"?ae.success?"READY!":"TRY AGAIN":t==="icecream"?`${ae.left}g`:t==="mindist"?ae.ops:t==="maxmin"?ae.diff:t==="goodsub"?ae.count:t==="graph"?ae.edges:ae.found?"FOUND!":"KEEP LOOKING"}),E.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] text-white/80",children:t==="snail"?"Days to Escape":t==="exam"?"Exam Status":t==="icecream"?"Remaining":t==="mindist"?"Swaps Needed":t==="maxmin"?"Range":t==="goodsub"?"Good Subarrays":t==="graph"?"Connections":"Search Result"})]}),v==="finished"&&E.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-center gap-2",children:[...Array(5)].map((J,ue)=>E.jsx(fe.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.5+ue*.1,type:"spring"},children:E.jsx(dr,{className:"w-10 h-10 text-white fill-white drop-shadow-lg"})},ue))}),E.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"bg-white/20 backdrop-blur-sm rounded-3xl p-6 border-4 border-white/30",children:E.jsx("div",{className:"text-base font-bold text-white leading-relaxed",children:t==="snail"?`Climbs ${s.a}m, slides ${s.b}m = ${Number(s.a)-Number(s.b)}m progress per day!`:t==="exam"?ae.success?`${s.a}  ${s.n} = ${Number(s.a)*Number(s.n)} pages. You're ready! `:`${s.a}  ${s.n} = ${Number(s.a)*Number(s.n)} pages. Need ${s.m}!`:t==="icecream"?`Started with ${s.x}g, melted ${s.y}g  ${s.n} minutes!`:"Great job! "})}),v==="finished"&&X.level<Ho.length&&E.jsxs(fe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:1.2},className:"bg-green-500 text-white px-6 py-4 rounded-2xl font-black text-lg shadow-xl border-4 border-green-600",children:[E.jsx(Gj,{className:"w-6 h-6 inline-block mr-2"}),"Next Level Unlocked!"]})]})]},JSON.stringify(ae)+t)}),E.jsxs(fe.div,{whileHover:{scale:1.02},className:`bg-white rounded-[2rem] p-6 border-4 ${X.theme.border} shadow-lg`,children:[E.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[E.jsx(Mj,{className:`w-6 h-6 ${X.theme.text.replace("text-","text-")}`}),E.jsx("h3",{className:`font-black ${X.theme.text} uppercase tracking-widest`,children:"Learn This Problem"})]}),E.jsx("p",{className:`text-xs ${X.theme.text} opacity-60 font-bold mb-4`,children:"This game is based on a real CodeChef challenge. Want to see the problem statement?"}),E.jsxs("a",{href:X.link,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center gap-2 w-full py-3 ${X.theme.accent} text-white rounded-xl font-black text-xs uppercase tracking-widest hover:opacity-80 transition-all shadow-md border-b-4 border-black/20`,children:["CodeChef Challenge ",E.jsx(YT,{className:"w-3 h-3"})]})]}),E.jsxs(fe.button,{whileHover:{scale:1.02},onClick:()=>R(!k),className:`bg-white rounded-[2rem] p-6 border-4 ${X.theme.border} shadow-lg flex items-center justify-between group`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(a3,{className:`w-6 h-6 ${X.theme.text.replace("text-","text-")} opacity-40 group-hover:rotate-90 transition-transform duration-500`}),E.jsx("span",{className:`font-black ${X.theme.text} uppercase tracking-widest`,children:"Change the Game"})]}),E.jsx("div",{className:`w-4 h-4 rounded-full ${k?"bg-green-400":"bg-zinc-100"}`})]}),E.jsx(an,{children:k&&E.jsx(fe.section,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:`bg-white rounded-[3rem] p-8 border-4 ${X.theme.border} shadow-xl space-y-6 overflow-hidden`,children:E.jsx("div",{className:"space-y-4",children:X.inputs.map(J=>E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:`text-xs font-black uppercase tracking-widest text-${J.color}-400 ml-2`,children:J.label}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:J.key==="arr"?"text":"number",value:s[J.key]||J.default,onChange:ue=>_n(J.key,ue.target.value),className:`w-full px-6 py-4 bg-${J.color}-50 border-4 border-${J.color}-100 rounded-2xl focus:outline-none focus:border-${J.color}-400 transition-all font-black text-2xl text-${J.color}-900`}),E.jsx("span",{className:`absolute right-4 top-1/2 -translate-y-1/2 font-black text-${J.color}-300`,children:J.unit})]})]},J.key))})})})]})]}),E.jsxs("footer",{className:`mt-16 pt-12 border-t ${X.theme.border} flex flex-col items-center gap-10`,children:[E.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 w-full justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4 px-6 py-3 rounded-full bg-white/50 border-4 border-white shadow-sm",children:[E.jsx(Dj,{className:"w-5 h-5 text-red-400 fill-red-400"}),E.jsx("span",{className:`text-sm font-black ${X.theme.text} opacity-50 uppercase tracking-widest`,children:"Made for Fun!"})]}),E.jsxs("div",{className:"flex flex-col items-center md:items-end gap-4",children:[E.jsxs("div",{className:"flex flex-col items-center md:items-end gap-1",children:[E.jsx("span",{className:`text-[10px] font-black ${X.theme.text} opacity-40 uppercase tracking-[0.2em]`,children:"A Project by"}),E.jsx("span",{className:`text-xs font-black ${X.theme.text} opacity-70 uppercase tracking-widest`,children:"AI Learning Labs @ Navgurukul"})]}),E.jsxs("div",{className:"flex flex-col items-center md:items-end gap-1",children:[E.jsx("span",{className:`text-[10px] font-black ${X.theme.text} opacity-40 uppercase tracking-[0.2em]`,children:"In Partnership with"}),E.jsx("span",{className:`text-xs font-black ${X.theme.text} opacity-70 uppercase tracking-widest`,children:"Anish Jadav Memorial Foundation"})]})]})]}),E.jsx("p",{className:`text-[10px] font-black ${X.theme.text} opacity-20 uppercase tracking-[0.4em] pb-10`,children:" 2026 Navgurukul"})]})]})]})}fO.createRoot(document.getElementById("root")).render(E.jsx(ne.StrictMode,{children:E.jsx(eU,{})}));
