var QN=Object.defineProperty;var JN=(t,e,n)=>e in t?QN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M=(t,e,n)=>JN(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function _g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rh={exports:{}},Do={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function WN(){if(Tb)return Do;Tb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:a,key:u,ref:s!==void 0?s:null,props:o}}return Do.Fragment=e,Do.jsx=n,Do.jsxs=n,Do}var Sb;function eO(){return Sb||(Sb=1,Rh.exports=WN()),Rh.exports}var E=eO(),Ih={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function tO(){if(Ab)return je;Ab=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function _(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function A(k,V,se){this.props=k,this.context=V,this.refs=C,this.updater=se||x}A.prototype.isReactComponent={},A.prototype.setState=function(k,V){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,V,"setState")},A.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function I(){}I.prototype=A.prototype;function R(k,V,se){this.props=k,this.context=V,this.refs=C,this.updater=se||x}var U=R.prototype=new I;U.constructor=R,w(U,A.prototype),U.isPureReactComponent=!0;var P=Array.isArray;function Y(){}var te={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function pe(k,V,se){var oe=se.ref;return{$$typeof:t,type:k,key:V,ref:oe!==void 0?oe:null,props:se}}function Ae(k,V){return pe(k.type,V,k.props)}function ye(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function ke(k){var V={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(se){return V[se]})}var We=/\/+/g;function ue(k,V){return typeof k=="object"&&k!==null&&k.key!=null?ke(""+k.key):V.toString(36)}function X(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Y,Y):(k.status="pending",k.then(function(V){k.status==="pending"&&(k.status="fulfilled",k.value=V)},function(V){k.status==="pending"&&(k.status="rejected",k.reason=V)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function L(k,V,se,oe,me){var S=typeof k;(S==="undefined"||S==="boolean")&&(k=null);var T=!1;if(k===null)T=!0;else switch(S){case"bigint":case"string":case"number":T=!0;break;case"object":switch(k.$$typeof){case t:case e:T=!0;break;case m:return T=k._init,L(T(k._payload),V,se,oe,me)}}if(T)return me=me(k),T=oe===""?"."+ue(k,0):oe,P(me)?(se="",T!=null&&(se=T.replace(We,"$&/")+"/"),L(me,V,se,"",function(Ie){return Ie})):me!=null&&(ye(me)&&(me=Ae(me,se+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(We,"$&/")+"/")+T)),V.push(me)),1;T=0;var B=oe===""?".":oe+":";if(P(k))for(var D=0;D<k.length;D++)oe=k[D],S=B+ue(oe,D),T+=L(oe,V,se,S,me);else if(D=_(k),typeof D=="function")for(k=D.call(k),D=0;!(oe=k.next()).done;)oe=oe.value,S=B+ue(oe,D++),T+=L(oe,V,se,S,me);else if(S==="object"){if(typeof k.then=="function")return L(X(k),V,se,oe,me);throw V=String(k),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return T}function q(k,V,se){if(k==null)return k;var oe=[],me=0;return L(k,oe,"","",function(S){return V.call(se,S,me++)}),oe}function J(k){if(k._status===-1){var V=k._result;V=V(),V.then(function(se){(k._status===0||k._status===-1)&&(k._status=1,k._result=se)},function(se){(k._status===0||k._status===-1)&&(k._status=2,k._result=se)}),k._status===-1&&(k._status=0,k._result=V)}if(k._status===1)return k._result.default;throw k._result}var K=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},ie={map:q,forEach:function(k,V,se){q(k,function(){V.apply(this,arguments)},se)},count:function(k){var V=0;return q(k,function(){V++}),V},toArray:function(k){return q(k,function(V){return V})||[]},only:function(k){if(!ye(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return je.Activity=y,je.Children=ie,je.Component=A,je.Fragment=n,je.Profiler=s,je.PureComponent=R,je.StrictMode=a,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,je.__COMPILER_RUNTIME={__proto__:null,c:function(k){return te.H.useMemoCache(k)}},je.cache=function(k){return function(){return k.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(k,V,se){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var oe=w({},k.props),me=k.key;if(V!=null)for(S in V.key!==void 0&&(me=""+V.key),V)!O.call(V,S)||S==="key"||S==="__self"||S==="__source"||S==="ref"&&V.ref===void 0||(oe[S]=V[S]);var S=arguments.length-2;if(S===1)oe.children=se;else if(1<S){for(var T=Array(S),B=0;B<S;B++)T[B]=arguments[B+2];oe.children=T}return pe(k.type,me,oe)},je.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:o,_context:k},k},je.createElement=function(k,V,se){var oe,me={},S=null;if(V!=null)for(oe in V.key!==void 0&&(S=""+V.key),V)O.call(V,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(me[oe]=V[oe]);var T=arguments.length-2;if(T===1)me.children=se;else if(1<T){for(var B=Array(T),D=0;D<T;D++)B[D]=arguments[D+2];me.children=B}if(k&&k.defaultProps)for(oe in T=k.defaultProps,T)me[oe]===void 0&&(me[oe]=T[oe]);return pe(k,S,me)},je.createRef=function(){return{current:null}},je.forwardRef=function(k){return{$$typeof:c,render:k}},je.isValidElement=ye,je.lazy=function(k){return{$$typeof:m,_payload:{_status:-1,_result:k},_init:J}},je.memo=function(k,V){return{$$typeof:h,type:k,compare:V===void 0?null:V}},je.startTransition=function(k){var V=te.T,se={};te.T=se;try{var oe=k(),me=te.S;me!==null&&me(se,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Y,K)}catch(S){K(S)}finally{V!==null&&se.types!==null&&(V.types=se.types),te.T=V}},je.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},je.use=function(k){return te.H.use(k)},je.useActionState=function(k,V,se){return te.H.useActionState(k,V,se)},je.useCallback=function(k,V){return te.H.useCallback(k,V)},je.useContext=function(k){return te.H.useContext(k)},je.useDebugValue=function(){},je.useDeferredValue=function(k,V){return te.H.useDeferredValue(k,V)},je.useEffect=function(k,V){return te.H.useEffect(k,V)},je.useEffectEvent=function(k){return te.H.useEffectEvent(k)},je.useId=function(){return te.H.useId()},je.useImperativeHandle=function(k,V,se){return te.H.useImperativeHandle(k,V,se)},je.useInsertionEffect=function(k,V){return te.H.useInsertionEffect(k,V)},je.useLayoutEffect=function(k,V){return te.H.useLayoutEffect(k,V)},je.useMemo=function(k,V){return te.H.useMemo(k,V)},je.useOptimistic=function(k,V){return te.H.useOptimistic(k,V)},je.useReducer=function(k,V,se){return te.H.useReducer(k,V,se)},je.useRef=function(k){return te.H.useRef(k)},je.useState=function(k){return te.H.useState(k)},je.useSyncExternalStore=function(k,V,se){return te.H.useSyncExternalStore(k,V,se)},je.useTransition=function(){return te.H.useTransition()},je.version="19.2.4",je}var Cb;function bg(){return Cb||(Cb=1,Ih.exports=tO()),Ih.exports}var ae=bg(),kh={exports:{}},Po={},jh={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function nO(){return Nb||(Nb=1,(function(t){function e(L,q){var J=L.length;L.push(q);e:for(;0<J;){var K=J-1>>>1,ie=L[K];if(0<s(ie,q))L[K]=q,L[J]=ie,J=K;else break e}}function n(L){return L.length===0?null:L[0]}function a(L){if(L.length===0)return null;var q=L[0],J=L.pop();if(J!==q){L[0]=J;e:for(var K=0,ie=L.length,k=ie>>>1;K<k;){var V=2*(K+1)-1,se=L[V],oe=V+1,me=L[oe];if(0>s(se,J))oe<ie&&0>s(me,se)?(L[K]=me,L[oe]=J,K=oe):(L[K]=se,L[V]=J,K=V);else if(oe<ie&&0>s(me,J))L[K]=me,L[oe]=J,K=oe;else break e}}return q}function s(L,q){var J=L.sortIndex-q.sortIndex;return J!==0?J:L.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],h=[],m=1,y=null,v=3,_=!1,x=!1,w=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function U(L){for(var q=n(h);q!==null;){if(q.callback===null)a(h);else if(q.startTime<=L)a(h),q.sortIndex=q.expirationTime,e(f,q);else break;q=n(h)}}function P(L){if(w=!1,U(L),!x)if(n(f)!==null)x=!0,Y||(Y=!0,ke());else{var q=n(h);q!==null&&X(P,q.startTime-L)}}var Y=!1,te=-1,O=5,pe=-1;function Ae(){return C?!0:!(t.unstable_now()-pe<O)}function ye(){if(C=!1,Y){var L=t.unstable_now();pe=L;var q=!0;try{e:{x=!1,w&&(w=!1,I(te),te=-1),_=!0;var J=v;try{t:{for(U(L),y=n(f);y!==null&&!(y.expirationTime>L&&Ae());){var K=y.callback;if(typeof K=="function"){y.callback=null,v=y.priorityLevel;var ie=K(y.expirationTime<=L);if(L=t.unstable_now(),typeof ie=="function"){y.callback=ie,U(L),q=!0;break t}y===n(f)&&a(f),U(L)}else a(f);y=n(f)}if(y!==null)q=!0;else{var k=n(h);k!==null&&X(P,k.startTime-L),q=!1}}break e}finally{y=null,v=J,_=!1}q=void 0}}finally{q?ke():Y=!1}}}var ke;if(typeof R=="function")ke=function(){R(ye)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,ue=We.port2;We.port1.onmessage=ye,ke=function(){ue.postMessage(null)}}else ke=function(){A(ye,0)};function X(L,q){te=A(function(){L(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(L){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var J=v;v=q;try{return L()}finally{v=J}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var J=v;v=L;try{return q()}finally{v=J}},t.unstable_scheduleCallback=function(L,q,J){var K=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?K+J:K):J=K,L){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=J+ie,L={id:m++,callback:q,priorityLevel:L,startTime:J,expirationTime:ie,sortIndex:-1},J>K?(L.sortIndex=J,e(h,L),n(f)===null&&L===n(h)&&(w?(I(te),te=-1):w=!0,X(P,J-K))):(L.sortIndex=ie,e(f,L),x||_||(x=!0,Y||(Y=!0,ke()))),L},t.unstable_shouldYield=Ae,t.unstable_wrapCallback=function(L){var q=v;return function(){var J=v;v=q;try{return L.apply(this,arguments)}finally{v=J}}}})(Mh)),Mh}var Ob;function aO(){return Ob||(Ob=1,jh.exports=nO()),jh.exports}var Lh={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function iO(){if(Rb)return Kt;Rb=1;var t=bg();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:f,containerInfo:h,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Kt.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,m)},Kt.flushSync=function(f){var h=u.T,m=a.p;try{if(u.T=null,a.p=2,f)return f()}finally{u.T=h,a.p=m,a.d.f()}},Kt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(f,h))},Kt.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},Kt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,y=c(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?a.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&a.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Kt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);a.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(f)},Kt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=c(m,h.crossOrigin);a.d.L(f,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Kt.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=c(h.as,h.crossOrigin);a.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(f)},Kt.requestFormReset=function(f){a.d.r(f)},Kt.unstable_batchedUpdates=function(f,h){return f(h)},Kt.useFormState=function(f,h,m){return u.H.useFormState(f,h,m)},Kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Kt.version="19.2.4",Kt}var Ib;function sO(){if(Ib)return Lh.exports;Ib=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lh.exports=iO(),Lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function rO(){if(kb)return Po;kb=1;var t=aO(),e=bg(),n=sO();function a(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(a(188))}function h(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(a(188));return r!==i?null:i}for(var l=i,d=r;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return f(p),i;if(g===d)return f(p),r;g=g.sibling}throw Error(a(188))}if(l.return!==d.return)l=p,d=g;else{for(var b=!1,N=p.child;N;){if(N===l){b=!0,l=p,d=g;break}if(N===d){b=!0,d=p,l=g;break}N=N.sibling}if(!b){for(N=g.child;N;){if(N===l){b=!0,l=g,d=p;break}if(N===d){b=!0,d=g,l=p;break}N=N.sibling}if(!b)throw Error(a(189))}}if(l.alternate!==d)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?i:r}function m(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=m(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function ke(i){return i===null||typeof i!="object"?null:(i=ye&&i[ye]||i["@@iterator"],typeof i=="function"?i:null)}var We=Symbol.for("react.client.reference");function ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===We?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case Y:return"SuspenseList";case pe:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case R:return i.displayName||"Context";case I:return(i._context.displayName||"Context")+".Consumer";case U:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case te:return r=i.displayName||null,r!==null?r:ue(i.type)||"Memo";case O:r=i._payload,i=i._init;try{return ue(i(r))}catch{}}return null}var X=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},K=[],ie=-1;function k(i){return{current:i}}function V(i){0>ie||(i.current=K[ie],K[ie]=null,ie--)}function se(i,r){ie++,K[ie]=i.current,i.current=r}var oe=k(null),me=k(null),S=k(null),T=k(null);function B(i,r){switch(se(S,r),se(me,i),se(oe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Y_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Y_(r),i=Z_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(oe),se(oe,i)}function D(){V(oe),V(me),V(S)}function Ie(i){i.memoizedState!==null&&se(T,i);var r=oe.current,l=Z_(r,i.type);r!==l&&(se(me,i),se(oe,l))}function Qe(i){me.current===i&&(V(oe),V(me)),T.current===i&&(V(T),ko._currentValue=J)}var _t,yt;function Tt(i){if(_t===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);_t=r&&r[1]||"",yt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_t+i+yt}var vn=!1;function W(i,r){if(!i||vn)return"";vn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Z){var F=Z}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(Z){F=Z}i.call(ne.prototype)}}else{try{throw Error()}catch(Z){F=Z}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Z){if(Z&&F&&typeof Z.stack=="string")return[Z.stack,F.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=d.DetermineComponentFrameRoot(),b=g[0],N=g[1];if(b&&N){var j=b.split(`
`),G=N.split(`
`);for(p=d=0;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;for(;p<G.length&&!G[p].includes("DetermineComponentFrameRoot");)p++;if(d===j.length||p===G.length)for(d=j.length-1,p=G.length-1;1<=d&&0<=p&&j[d]!==G[p];)p--;for(;1<=d&&0<=p;d--,p--)if(j[d]!==G[p]){if(d!==1||p!==1)do if(d--,p--,0>p||j[d]!==G[p]){var Q=`
`+j[d].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=d&&0<=p);break}}}finally{vn=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Tt(l):""}function le(i,r){switch(i.tag){case 26:case 27:case 5:return Tt(i.type);case 16:return Tt("Lazy");case 13:return i.child!==r&&r!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return W(i.type,!1);case 11:return W(i.type.render,!1);case 1:return W(i.type,!0);case 31:return Tt("Activity");default:return""}}function Re(i){try{var r="",l=null;do r+=le(i,l),l=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var et=Object.prototype.hasOwnProperty,Ct=t.unstable_scheduleCallback,As=t.unstable_cancelCallback,O2=t.unstable_shouldYield,R2=t.unstable_requestPaint,_n=t.unstable_now,I2=t.unstable_getCurrentPriorityLevel,Sy=t.unstable_ImmediatePriority,Ay=t.unstable_UserBlockingPriority,Ol=t.unstable_NormalPriority,k2=t.unstable_LowPriority,Cy=t.unstable_IdlePriority,j2=t.log,M2=t.unstable_setDisableYieldValue,Hr=null,bn=null;function Qa(i){if(typeof j2=="function"&&M2(i),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(Hr,i)}catch{}}var wn=Math.clz32?Math.clz32:P2,L2=Math.log,D2=Math.LN2;function P2(i){return i>>>=0,i===0?32:31-(L2(i)/D2|0)|0}var Rl=256,Il=262144,kl=4194304;function qi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jl(i,r,l){var d=i.pendingLanes;if(d===0)return 0;var p=0,g=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var N=d&134217727;return N!==0?(d=N&~g,d!==0?p=qi(d):(b&=N,b!==0?p=qi(b):l||(l=N&~i,l!==0&&(p=qi(l))))):(N=d&~g,N!==0?p=qi(N):b!==0?p=qi(b):l||(l=d&~i,l!==0&&(p=qi(l)))),p===0?0:r!==0&&r!==p&&(r&g)===0&&(g=p&-p,l=r&-r,g>=l||g===32&&(l&4194048)!==0)?r:p}function Gr(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function $2(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ny(){var i=kl;return kl<<=1,(kl&62914560)===0&&(kl=4194304),i}function yd(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function qr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function U2(i,r,l,d,p,g){var b=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var N=i.entanglements,j=i.expirationTimes,G=i.hiddenUpdates;for(l=b&~l;0<l;){var Q=31-wn(l),ne=1<<Q;N[Q]=0,j[Q]=-1;var F=G[Q];if(F!==null)for(G[Q]=null,Q=0;Q<F.length;Q++){var Z=F[Q];Z!==null&&(Z.lane&=-536870913)}l&=~ne}d!==0&&Oy(i,d,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~r))}function Oy(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-wn(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function Ry(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var d=31-wn(l),p=1<<d;p&r|i[d]&r&&(i[d]|=r),l&=~p}}function Iy(i,r){var l=r&-r;return l=(l&42)!==0?1:vd(l),(l&(i.suspendedLanes|r))!==0?0:l}function vd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function _d(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ky(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:yb(i.type))}function jy(i,r){var l=q.p;try{return q.p=i,r()}finally{q.p=l}}var Ja=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ja,un="__reactProps$"+Ja,Cs="__reactContainer$"+Ja,bd="__reactEvents$"+Ja,z2="__reactListeners$"+Ja,B2="__reactHandles$"+Ja,My="__reactResources$"+Ja,Fr="__reactMarker$"+Ja;function wd(i){delete i[Bt],delete i[un],delete i[bd],delete i[z2],delete i[B2]}function Ns(i){var r=i[Bt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Cs]||l[Bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=tb(i);i!==null;){if(l=i[Bt])return l;i=tb(i)}return r}i=l,l=i.parentNode}return null}function Os(i){if(i=i[Bt]||i[Cs]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Yr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(a(33))}function Rs(i){var r=i[My];return r||(r=i[My]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(i){i[Fr]=!0}var Ly=new Set,Dy={};function Fi(i,r){Is(i,r),Is(i+"Capture",r)}function Is(i,r){for(Dy[i]=r,i=0;i<r.length;i++)Ly.add(r[i])}var V2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Py={},$y={};function H2(i){return et.call($y,i)?!0:et.call(Py,i)?!1:V2.test(i)?$y[i]=!0:(Py[i]=!0,!1)}function Ml(i,r,l){if(H2(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Ll(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function Ca(i,r,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+d)}}function Mn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Uy(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function G2(i,r,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,g=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return p.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function xd(i){if(!i._valueTracker){var r=Uy(i)?"checked":"value";i._valueTracker=G2(i,r,""+i[r])}}function zy(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return i&&(d=Uy(i)?i.checked?"true":"false":i.value),i=d,i!==l?(r.setValue(i),!0):!1}function Dl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var q2=/[\n"\\]/g;function Ln(i){return i.replace(q2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ed(i,r,l,d,p,g,b,N){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Mn(r)):i.value!==""+Mn(r)&&(i.value=""+Mn(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?Td(i,b,Mn(r)):l!=null?Td(i,b,Mn(l)):d!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.name=""+Mn(N):i.removeAttribute("name")}function By(i,r,l,d,p,g,b,N){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),r!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){xd(i);return}l=l!=null?""+Mn(l):"",r=r!=null?""+Mn(r):l,N||r===i.value||(i.value=r),i.defaultValue=r}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=N?i.checked:!!d,i.defaultChecked=!!d,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),xd(i)}function Td(i,r,l){r==="number"&&Dl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ks(i,r,l,d){if(i=i.options,r){r={};for(var p=0;p<l.length;p++)r["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=r.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Mn(l),r=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}r!==null||i[p].disabled||(r=i[p])}r!==null&&(r.selected=!0)}}function Vy(i,r,l){if(r!=null&&(r=""+Mn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+Mn(l):""}function Hy(i,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(a(92));if(X(d)){if(1<d.length)throw Error(a(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=Mn(r),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),xd(i)}function js(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var F2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gy(i,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,l):typeof l!="number"||l===0||F2.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function qy(i,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var p in r)d=r[p],r.hasOwnProperty(p)&&l[p]!==d&&Gy(i,p,d)}else for(var g in r)r.hasOwnProperty(g)&&Gy(i,g,r[g])}function Sd(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Z2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(i){return Z2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Na(){}var Ad=null;function Cd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ms=null,Ls=null;function Fy(i){var r=Os(i);if(r&&(i=r.stateNode)){var l=i[un]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ed(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ln(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==i&&d.form===i.form){var p=d[un]||null;if(!p)throw Error(a(90));Ed(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===i.form&&zy(d)}break e;case"textarea":Vy(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&ks(i,!!l.multiple,r,!1)}}}var Nd=!1;function Yy(i,r,l){if(Nd)return i(r,l);Nd=!0;try{var d=i(r);return d}finally{if(Nd=!1,(Ms!==null||Ls!==null)&&(Tu(),Ms&&(r=Ms,i=Ls,Ls=Ms=null,Fy(r),i)))for(r=0;r<i.length;r++)Fy(i[r])}}function Zr(i,r){var l=i.stateNode;if(l===null)return null;var d=l[un]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(Oa)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Od=!1}var Wa=null,Rd=null,$l=null;function Zy(){if($l)return $l;var i,r=Rd,l=r.length,d,p="value"in Wa?Wa.value:Wa.textContent,g=p.length;for(i=0;i<l&&r[i]===p[i];i++);var b=l-i;for(d=1;d<=b&&r[l-d]===p[g-d];d++);return $l=p.slice(i,1<d?1-d:void 0)}function Ul(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function zl(){return!0}function Xy(){return!1}function cn(i){function r(l,d,p,g,b){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(l=i[N],this[N]=l?l(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?zl:Xy,this.isPropagationStopped=Xy,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=cn(Yi),Kr=y({},Yi,{view:0,detail:0}),X2=cn(Kr),Id,kd,Qr,Vl=y({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Md,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qr&&(Qr&&i.type==="mousemove"?(Id=i.screenX-Qr.screenX,kd=i.screenY-Qr.screenY):kd=Id=0,Qr=i),Id)},movementY:function(i){return"movementY"in i?i.movementY:kd}}),Ky=cn(Vl),K2=y({},Vl,{dataTransfer:0}),Q2=cn(K2),J2=y({},Kr,{relatedTarget:0}),jd=cn(J2),W2=y({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),eC=cn(W2),tC=y({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nC=cn(tC),aC=y({},Yi,{data:0}),Qy=cn(aC),iC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oC(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=rC[i])?!!r[i]:!1}function Md(){return oC}var lC=y({},Kr,{key:function(i){if(i.key){var r=iC[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ul(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Md,charCode:function(i){return i.type==="keypress"?Ul(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ul(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),uC=cn(lC),cC=y({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=cn(cC),dC=y({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Md}),fC=cn(dC),hC=y({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),mC=cn(hC),pC=y({},Vl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gC=cn(pC),yC=y({},Yi,{newState:0,oldState:0}),vC=cn(yC),_C=[9,13,27,32],Ld=Oa&&"CompositionEvent"in window,Jr=null;Oa&&"documentMode"in document&&(Jr=document.documentMode);var bC=Oa&&"TextEvent"in window&&!Jr,Wy=Oa&&(!Ld||Jr&&8<Jr&&11>=Jr),e0=" ",t0=!1;function n0(i,r){switch(i){case"keyup":return _C.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ds=!1;function wC(i,r){switch(i){case"compositionend":return a0(r);case"keypress":return r.which!==32?null:(t0=!0,e0);case"textInput":return i=r.data,i===e0&&t0?null:i;default:return null}}function xC(i,r){if(Ds)return i==="compositionend"||!Ld&&n0(i,r)?(i=Zy(),$l=Rd=Wa=null,Ds=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wy&&r.locale!=="ko"?null:r.data;default:return null}}var EC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!EC[i.type]:r==="textarea"}function s0(i,r,l,d){Ms?Ls?Ls.push(d):Ls=[d]:Ms=d,r=Iu(r,"onChange"),0<r.length&&(l=new Bl("onChange","change",null,l,d),i.push({event:l,listeners:r}))}var Wr=null,eo=null;function TC(i){B_(i,0)}function Hl(i){var r=Yr(i);if(zy(r))return i}function r0(i,r){if(i==="change")return r}var o0=!1;if(Oa){var Dd;if(Oa){var Pd="oninput"in document;if(!Pd){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Pd=typeof l0.oninput=="function"}Dd=Pd}else Dd=!1;o0=Dd&&(!document.documentMode||9<document.documentMode)}function u0(){Wr&&(Wr.detachEvent("onpropertychange",c0),eo=Wr=null)}function c0(i){if(i.propertyName==="value"&&Hl(eo)){var r=[];s0(r,eo,i,Cd(i)),Yy(TC,r)}}function SC(i,r,l){i==="focusin"?(u0(),Wr=r,eo=l,Wr.attachEvent("onpropertychange",c0)):i==="focusout"&&u0()}function AC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hl(eo)}function CC(i,r){if(i==="click")return Hl(r)}function NC(i,r){if(i==="input"||i==="change")return Hl(r)}function OC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var xn=typeof Object.is=="function"?Object.is:OC;function to(i,r){if(xn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!et.call(r,p)||!xn(i[p],r[p]))return!1}return!0}function d0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function f0(i,r){var l=d0(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=r&&d>=r)return{node:l,offset:r-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=d0(l)}}function h0(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?h0(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function m0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Dl(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Dl(i.document)}return r}function $d(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var RC=Oa&&"documentMode"in document&&11>=document.documentMode,Ps=null,Ud=null,no=null,zd=!1;function p0(i,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zd||Ps==null||Ps!==Dl(d)||(d=Ps,"selectionStart"in d&&$d(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),no&&to(no,d)||(no=d,d=Iu(Ud,"onSelect"),0<d.length&&(r=new Bl("onSelect","select",null,r,l),i.push({event:r,listeners:d}),r.target=Ps)))}function Zi(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var $s={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Bd={},g0={};Oa&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Xi(i){if(Bd[i])return Bd[i];if(!$s[i])return i;var r=$s[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in g0)return Bd[i]=r[l];return i}var y0=Xi("animationend"),v0=Xi("animationiteration"),_0=Xi("animationstart"),IC=Xi("transitionrun"),kC=Xi("transitionstart"),jC=Xi("transitioncancel"),b0=Xi("transitionend"),w0=new Map,Vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vd.push("scrollEnd");function Kn(i,r){w0.set(i,r),Fi(r,[i])}var Gl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Dn=[],Us=0,Hd=0;function ql(){for(var i=Us,r=Hd=Us=0;r<i;){var l=Dn[r];Dn[r++]=null;var d=Dn[r];Dn[r++]=null;var p=Dn[r];Dn[r++]=null;var g=Dn[r];if(Dn[r++]=null,d!==null&&p!==null){var b=d.pending;b===null?p.next=p:(p.next=b.next,b.next=p),d.pending=p}g!==0&&x0(l,p,g)}}function Fl(i,r,l,d){Dn[Us++]=i,Dn[Us++]=r,Dn[Us++]=l,Dn[Us++]=d,Hd|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Gd(i,r,l,d){return Fl(i,r,l,d),Yl(i)}function Ki(i,r){return Fl(i,null,null,r),Yl(i)}function x0(i,r,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var p=!1,g=i.return;g!==null;)g.childLanes|=l,d=g.alternate,d!==null&&(d.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,p&&r!==null&&(p=31-wn(l),i=g.hiddenUpdates,d=i[p],d===null?i[p]=[r]:d.push(r),r.lane=l|536870912),g):null}function Yl(i){if(50<So)throw So=0,eh=null,Error(a(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var zs={};function MC(i,r,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,r,l,d){return new MC(i,r,l,d)}function qd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ra(i,r){var l=i.alternate;return l===null?(l=En(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function E0(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Zl(i,r,l,d,p,g){var b=0;if(d=i,typeof i=="function")qd(i)&&(b=1);else if(typeof i=="string")b=UN(i,l,oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case pe:return i=En(31,l,r,p),i.elementType=pe,i.lanes=g,i;case w:return Qi(l.children,p,g,r);case C:b=8,p|=24;break;case A:return i=En(12,l,r,p|2),i.elementType=A,i.lanes=g,i;case P:return i=En(13,l,r,p),i.elementType=P,i.lanes=g,i;case Y:return i=En(19,l,r,p),i.elementType=Y,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:b=10;break e;case I:b=9;break e;case U:b=11;break e;case te:b=14;break e;case O:b=16,d=null;break e}b=29,l=Error(a(130,i===null?"null":typeof i,"")),d=null}return r=En(b,l,r,p),r.elementType=i,r.type=d,r.lanes=g,r}function Qi(i,r,l,d){return i=En(7,i,d,r),i.lanes=l,i}function Fd(i,r,l){return i=En(6,i,null,r),i.lanes=l,i}function T0(i){var r=En(18,null,null,0);return r.stateNode=i,r}function Yd(i,r,l){return r=En(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var S0=new WeakMap;function Pn(i,r){if(typeof i=="object"&&i!==null){var l=S0.get(i);return l!==void 0?l:(r={value:i,source:r,stack:Re(r)},S0.set(i,r),r)}return{value:i,source:r,stack:Re(r)}}var Bs=[],Vs=0,Xl=null,ao=0,$n=[],Un=0,ei=null,ma=1,pa="";function Ia(i,r){Bs[Vs++]=ao,Bs[Vs++]=Xl,Xl=i,ao=r}function A0(i,r,l){$n[Un++]=ma,$n[Un++]=pa,$n[Un++]=ei,ei=i;var d=ma;i=pa;var p=32-wn(d)-1;d&=~(1<<p),l+=1;var g=32-wn(r)+p;if(30<g){var b=p-p%5;g=(d&(1<<b)-1).toString(32),d>>=b,p-=b,ma=1<<32-wn(r)+p|l<<p|d,pa=g+i}else ma=1<<g|l<<p|d,pa=i}function Zd(i){i.return!==null&&(Ia(i,1),A0(i,1,0))}function Xd(i){for(;i===Xl;)Xl=Bs[--Vs],Bs[Vs]=null,ao=Bs[--Vs],Bs[Vs]=null;for(;i===ei;)ei=$n[--Un],$n[Un]=null,pa=$n[--Un],$n[Un]=null,ma=$n[--Un],$n[Un]=null}function C0(i,r){$n[Un++]=ma,$n[Un++]=pa,$n[Un++]=ei,ma=r.id,pa=r.overflow,ei=i}var Vt=null,dt=null,Ge=!1,ti=null,zn=!1,Kd=Error(a(519));function ni(i){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw io(Pn(r,i)),Kd}function N0(i){var r=i.stateNode,l=i.type,d=i.memoizedProps;switch(r[Bt]=i,r[un]=d,l){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(l=0;l<Co.length;l++)Be(Co[l],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),By(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),Hy(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||q_(r.textContent,l)?(d.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),d.onScroll!=null&&Be("scroll",r),d.onScrollEnd!=null&&Be("scrollend",r),d.onClick!=null&&(r.onclick=Na),r=!0):r=!1,r||ni(i,!0)}function O0(i){for(Vt=i.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Vt=Vt.return}}function Hs(i){if(i!==Vt)return!1;if(!Ge)return O0(i),Ge=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||ph(i.type,i.memoizedProps)),l=!l),l&&dt&&ni(i),O0(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));dt=eb(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));dt=eb(i)}else r===27?(r=dt,gi(i.type)?(i=bh,bh=null,dt=i):dt=r):dt=Vt?Vn(i.stateNode.nextSibling):null;return!0}function Ji(){dt=Vt=null,Ge=!1}function Qd(){var i=ti;return i!==null&&(mn===null?mn=i:mn.push.apply(mn,i),ti=null),i}function io(i){ti===null?ti=[i]:ti.push(i)}var Jd=k(null),Wi=null,ka=null;function ai(i,r,l){se(Jd,r._currentValue),r._currentValue=l}function ja(i){i._currentValue=Jd.current,V(Jd)}function Wd(i,r,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===l)break;i=i.return}}function ef(i,r,l,d){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var b=p.child;g=g.firstContext;e:for(;g!==null;){var N=g;g=p;for(var j=0;j<r.length;j++)if(N.context===r[j]){g.lanes|=l,N=g.alternate,N!==null&&(N.lanes|=l),Wd(g.return,l,i),d||(b=null);break e}g=N.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(a(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),Wd(b,l,i),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===i){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function Gs(i,r,l,d){i=null;for(var p=r,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var N=p.type;xn(p.pendingProps.value,b.value)||(i!==null?i.push(N):i=[N])}}else if(p===T.current){if(b=p.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(ko):i=[ko])}p=p.return}i!==null&&ef(r,i,l,d),r.flags|=262144}function Kl(i){for(i=i.firstContext;i!==null;){if(!xn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function es(i){Wi=i,ka=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ht(i){return R0(Wi,i)}function Ql(i,r){return Wi===null&&es(i),R0(i,r)}function R0(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ka===null){if(i===null)throw Error(a(308));ka=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ka=ka.next=r;return l}var LC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},DC=t.unstable_scheduleCallback,PC=t.unstable_NormalPriority,Nt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tf(){return{controller:new LC,data:new Map,refCount:0}}function so(i){i.refCount--,i.refCount===0&&DC(PC,function(){i.controller.abort()})}var ro=null,nf=0,qs=0,Fs=null;function $C(i,r){if(ro===null){var l=ro=[];nf=0,qs=rh(),Fs={status:"pending",value:void 0,then:function(d){l.push(d)}}}return nf++,r.then(I0,I0),r}function I0(){if(--nf===0&&ro!==null){Fs!==null&&(Fs.status="fulfilled");var i=ro;ro=null,qs=0,Fs=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function UC(i,r){var l=[],d={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var p=0;p<l.length;p++)(0,l[p])(r)},function(p){for(d.status="rejected",d.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),d}var k0=L.S;L.S=function(i,r){p_=_n(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&$C(i,r),k0!==null&&k0(i,r)};var ts=k(null);function af(){var i=ts.current;return i!==null?i:lt.pooledCache}function Jl(i,r){r===null?se(ts,ts.current):se(ts,r.pool)}function j0(){var i=af();return i===null?null:{parent:Nt._currentValue,pool:i}}var Ys=Error(a(460)),sf=Error(a(474)),Wl=Error(a(542)),eu={then:function(){}};function M0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function L0(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(Na,Na),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,P0(i),i;default:if(typeof r.status=="string")r.then(Na,Na);else{if(i=lt,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=d}},function(d){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,P0(i),i}throw as=r,Ys}}function ns(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(as=l,Ys):l}}var as=null;function D0(){if(as===null)throw Error(a(459));var i=as;return as=null,i}function P0(i){if(i===Ys||i===Wl)throw Error(a(483))}var Zs=null,oo=0;function tu(i){var r=oo;return oo+=1,Zs===null&&(Zs=[]),L0(Zs,i,r)}function lo(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function nu(i,r){throw r.$$typeof===v?Error(a(525)):(i=Object.prototype.toString.call(r),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function $0(i){function r(z,$){if(i){var H=z.deletions;H===null?(z.deletions=[$],z.flags|=16):H.push($)}}function l(z,$){if(!i)return null;for(;$!==null;)r(z,$),$=$.sibling;return null}function d(z){for(var $=new Map;z!==null;)z.key!==null?$.set(z.key,z):$.set(z.index,z),z=z.sibling;return $}function p(z,$){return z=Ra(z,$),z.index=0,z.sibling=null,z}function g(z,$,H){return z.index=H,i?(H=z.alternate,H!==null?(H=H.index,H<$?(z.flags|=67108866,$):H):(z.flags|=67108866,$)):(z.flags|=1048576,$)}function b(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function N(z,$,H,ee){return $===null||$.tag!==6?($=Fd(H,z.mode,ee),$.return=z,$):($=p($,H),$.return=z,$)}function j(z,$,H,ee){var Ce=H.type;return Ce===w?Q(z,$,H.props.children,ee,H.key):$!==null&&($.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===O&&ns(Ce)===$.type)?($=p($,H.props),lo($,H),$.return=z,$):($=Zl(H.type,H.key,H.props,null,z.mode,ee),lo($,H),$.return=z,$)}function G(z,$,H,ee){return $===null||$.tag!==4||$.stateNode.containerInfo!==H.containerInfo||$.stateNode.implementation!==H.implementation?($=Yd(H,z.mode,ee),$.return=z,$):($=p($,H.children||[]),$.return=z,$)}function Q(z,$,H,ee,Ce){return $===null||$.tag!==7?($=Qi(H,z.mode,ee,Ce),$.return=z,$):($=p($,H),$.return=z,$)}function ne(z,$,H){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Fd(""+$,z.mode,H),$.return=z,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return H=Zl($.type,$.key,$.props,null,z.mode,H),lo(H,$),H.return=z,H;case x:return $=Yd($,z.mode,H),$.return=z,$;case O:return $=ns($),ne(z,$,H)}if(X($)||ke($))return $=Qi($,z.mode,H,null),$.return=z,$;if(typeof $.then=="function")return ne(z,tu($),H);if($.$$typeof===R)return ne(z,Ql(z,$),H);nu(z,$)}return null}function F(z,$,H,ee){var Ce=$!==null?$.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ce!==null?null:N(z,$,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case _:return H.key===Ce?j(z,$,H,ee):null;case x:return H.key===Ce?G(z,$,H,ee):null;case O:return H=ns(H),F(z,$,H,ee)}if(X(H)||ke(H))return Ce!==null?null:Q(z,$,H,ee,null);if(typeof H.then=="function")return F(z,$,tu(H),ee);if(H.$$typeof===R)return F(z,$,Ql(z,H),ee);nu(z,H)}return null}function Z(z,$,H,ee,Ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return z=z.get(H)||null,N($,z,""+ee,Ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return z=z.get(ee.key===null?H:ee.key)||null,j($,z,ee,Ce);case x:return z=z.get(ee.key===null?H:ee.key)||null,G($,z,ee,Ce);case O:return ee=ns(ee),Z(z,$,H,ee,Ce)}if(X(ee)||ke(ee))return z=z.get(H)||null,Q($,z,ee,Ce,null);if(typeof ee.then=="function")return Z(z,$,H,tu(ee),Ce);if(ee.$$typeof===R)return Z(z,$,H,Ql($,ee),Ce);nu($,ee)}return null}function ve(z,$,H,ee){for(var Ce=null,Fe=null,Ee=$,Pe=$=0,He=null;Ee!==null&&Pe<H.length;Pe++){Ee.index>Pe?(He=Ee,Ee=null):He=Ee.sibling;var Ye=F(z,Ee,H[Pe],ee);if(Ye===null){Ee===null&&(Ee=He);break}i&&Ee&&Ye.alternate===null&&r(z,Ee),$=g(Ye,$,Pe),Fe===null?Ce=Ye:Fe.sibling=Ye,Fe=Ye,Ee=He}if(Pe===H.length)return l(z,Ee),Ge&&Ia(z,Pe),Ce;if(Ee===null){for(;Pe<H.length;Pe++)Ee=ne(z,H[Pe],ee),Ee!==null&&($=g(Ee,$,Pe),Fe===null?Ce=Ee:Fe.sibling=Ee,Fe=Ee);return Ge&&Ia(z,Pe),Ce}for(Ee=d(Ee);Pe<H.length;Pe++)He=Z(Ee,z,Pe,H[Pe],ee),He!==null&&(i&&He.alternate!==null&&Ee.delete(He.key===null?Pe:He.key),$=g(He,$,Pe),Fe===null?Ce=He:Fe.sibling=He,Fe=He);return i&&Ee.forEach(function(wi){return r(z,wi)}),Ge&&Ia(z,Pe),Ce}function Oe(z,$,H,ee){if(H==null)throw Error(a(151));for(var Ce=null,Fe=null,Ee=$,Pe=$=0,He=null,Ye=H.next();Ee!==null&&!Ye.done;Pe++,Ye=H.next()){Ee.index>Pe?(He=Ee,Ee=null):He=Ee.sibling;var wi=F(z,Ee,Ye.value,ee);if(wi===null){Ee===null&&(Ee=He);break}i&&Ee&&wi.alternate===null&&r(z,Ee),$=g(wi,$,Pe),Fe===null?Ce=wi:Fe.sibling=wi,Fe=wi,Ee=He}if(Ye.done)return l(z,Ee),Ge&&Ia(z,Pe),Ce;if(Ee===null){for(;!Ye.done;Pe++,Ye=H.next())Ye=ne(z,Ye.value,ee),Ye!==null&&($=g(Ye,$,Pe),Fe===null?Ce=Ye:Fe.sibling=Ye,Fe=Ye);return Ge&&Ia(z,Pe),Ce}for(Ee=d(Ee);!Ye.done;Pe++,Ye=H.next())Ye=Z(Ee,z,Pe,Ye.value,ee),Ye!==null&&(i&&Ye.alternate!==null&&Ee.delete(Ye.key===null?Pe:Ye.key),$=g(Ye,$,Pe),Fe===null?Ce=Ye:Fe.sibling=Ye,Fe=Ye);return i&&Ee.forEach(function(KN){return r(z,KN)}),Ge&&Ia(z,Pe),Ce}function ot(z,$,H,ee){if(typeof H=="object"&&H!==null&&H.type===w&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case _:e:{for(var Ce=H.key;$!==null;){if($.key===Ce){if(Ce=H.type,Ce===w){if($.tag===7){l(z,$.sibling),ee=p($,H.props.children),ee.return=z,z=ee;break e}}else if($.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===O&&ns(Ce)===$.type){l(z,$.sibling),ee=p($,H.props),lo(ee,H),ee.return=z,z=ee;break e}l(z,$);break}else r(z,$);$=$.sibling}H.type===w?(ee=Qi(H.props.children,z.mode,ee,H.key),ee.return=z,z=ee):(ee=Zl(H.type,H.key,H.props,null,z.mode,ee),lo(ee,H),ee.return=z,z=ee)}return b(z);case x:e:{for(Ce=H.key;$!==null;){if($.key===Ce)if($.tag===4&&$.stateNode.containerInfo===H.containerInfo&&$.stateNode.implementation===H.implementation){l(z,$.sibling),ee=p($,H.children||[]),ee.return=z,z=ee;break e}else{l(z,$);break}else r(z,$);$=$.sibling}ee=Yd(H,z.mode,ee),ee.return=z,z=ee}return b(z);case O:return H=ns(H),ot(z,$,H,ee)}if(X(H))return ve(z,$,H,ee);if(ke(H)){if(Ce=ke(H),typeof Ce!="function")throw Error(a(150));return H=Ce.call(H),Oe(z,$,H,ee)}if(typeof H.then=="function")return ot(z,$,tu(H),ee);if(H.$$typeof===R)return ot(z,$,Ql(z,H),ee);nu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,$!==null&&$.tag===6?(l(z,$.sibling),ee=p($,H),ee.return=z,z=ee):(l(z,$),ee=Fd(H,z.mode,ee),ee.return=z,z=ee),b(z)):l(z,$)}return function(z,$,H,ee){try{oo=0;var Ce=ot(z,$,H,ee);return Zs=null,Ce}catch(Ee){if(Ee===Ys||Ee===Wl)throw Ee;var Fe=En(29,Ee,null,z.mode);return Fe.lanes=ee,Fe.return=z,Fe}finally{}}}var is=$0(!0),U0=$0(!1),ii=!1;function rf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function of(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function si(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ri(i,r,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ke&2)!==0){var p=d.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),d.pending=r,r=Yl(i),x0(i,null,l),r}return Fl(i,d,r,l),Yl(i)}function uo(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,Ry(i,l)}}function lf(i,r){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?p=g=r:g=g.next=r}else p=g=r;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var uf=!1;function co(){if(uf){var i=Fs;if(i!==null)throw i}}function fo(i,r,l,d){uf=!1;var p=i.updateQueue;ii=!1;var g=p.firstBaseUpdate,b=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var j=N,G=j.next;j.next=null,b===null?g=G:b.next=G,b=j;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,N=Q.lastBaseUpdate,N!==b&&(N===null?Q.firstBaseUpdate=G:N.next=G,Q.lastBaseUpdate=j))}if(g!==null){var ne=p.baseState;b=0,Q=G=j=null,N=g;do{var F=N.lane&-536870913,Z=F!==N.lane;if(Z?(Ve&F)===F:(d&F)===F){F!==0&&F===qs&&(uf=!0),Q!==null&&(Q=Q.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ve=i,Oe=N;F=r;var ot=l;switch(Oe.tag){case 1:if(ve=Oe.payload,typeof ve=="function"){ne=ve.call(ot,ne,F);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Oe.payload,F=typeof ve=="function"?ve.call(ot,ne,F):ve,F==null)break e;ne=y({},ne,F);break e;case 2:ii=!0}}F=N.callback,F!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=p.callbacks,Z===null?p.callbacks=[F]:Z.push(F))}else Z={lane:F,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Q===null?(G=Q=Z,j=ne):Q=Q.next=Z,b|=F;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;Z=N,N=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);Q===null&&(j=ne),p.baseState=j,p.firstBaseUpdate=G,p.lastBaseUpdate=Q,g===null&&(p.shared.lanes=0),di|=b,i.lanes=b,i.memoizedState=ne}}function z0(i,r){if(typeof i!="function")throw Error(a(191,i));i.call(r)}function B0(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)z0(l[i],r)}var Xs=k(null),au=k(0);function V0(i,r){i=Va,se(au,i),se(Xs,r),Va=i|r.baseLanes}function cf(){se(au,Va),se(Xs,Xs.current)}function df(){Va=au.current,V(Xs),V(au)}var Tn=k(null),Bn=null;function oi(i){var r=i.alternate;se(St,St.current&1),se(Tn,i),Bn===null&&(r===null||Xs.current!==null||r.memoizedState!==null)&&(Bn=i)}function ff(i){se(St,St.current),se(Tn,i),Bn===null&&(Bn=i)}function H0(i){i.tag===22?(se(St,St.current),se(Tn,i),Bn===null&&(Bn=i)):li()}function li(){se(St,St.current),se(Tn,Tn.current)}function Sn(i){V(Tn),Bn===i&&(Bn=null),V(St)}var St=k(0);function iu(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||vh(l)||_h(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ma=0,De=null,st=null,Ot=null,su=!1,Ks=!1,ss=!1,ru=0,ho=0,Qs=null,zC=0;function bt(){throw Error(a(321))}function hf(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!xn(i[l],r[l]))return!1;return!0}function mf(i,r,l,d,p,g){return Ma=g,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,L.H=i===null||i.memoizedState===null?Av:Of,ss=!1,g=l(d,p),ss=!1,Ks&&(g=q0(r,l,d,p)),G0(i),g}function G0(i){L.H=go;var r=st!==null&&st.next!==null;if(Ma=0,Ot=st=De=null,su=!1,ho=0,Qs=null,r)throw Error(a(300));i===null||Rt||(i=i.dependencies,i!==null&&Kl(i)&&(Rt=!0))}function q0(i,r,l,d){De=i;var p=0;do{if(Ks&&(Qs=null),ho=0,Ks=!1,25<=p)throw Error(a(301));if(p+=1,Ot=st=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=Cv,g=r(l,d)}while(Ks);return g}function BC(){var i=L.H,r=i.useState()[0];return r=typeof r.then=="function"?mo(r):r,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(De.flags|=1024),r}function pf(){var i=ru!==0;return ru=0,i}function gf(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function yf(i){if(su){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}su=!1}Ma=0,Ot=st=De=null,Ks=!1,ho=ru=0,Qs=null}function Wt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?De.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function At(){if(st===null){var i=De.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var r=Ot===null?De.memoizedState:Ot.next;if(r!==null)Ot=r,st=i;else{if(i===null)throw De.alternate===null?Error(a(467)):Error(a(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Ot===null?De.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mo(i){var r=ho;return ho+=1,Qs===null&&(Qs=[]),i=L0(Qs,i,r),r=De,(Ot===null?r.memoizedState:Ot.next)===null&&(r=r.alternate,L.H=r===null||r.memoizedState===null?Av:Of),i}function lu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return mo(i);if(i.$$typeof===R)return Ht(i)}throw Error(a(438,String(i)))}function vf(i){var r=null,l=De.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=De.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=ou(),De.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),d=0;d<i;d++)l[d]=Ae;return r.index++,l}function La(i,r){return typeof r=="function"?r(i):r}function uu(i){var r=At();return _f(r,st,i)}function _f(i,r,l){var d=i.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=l;var p=i.baseQueue,g=d.pending;if(g!==null){if(p!==null){var b=p.next;p.next=g.next,g.next=b}r.baseQueue=p=g,d.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{r=p.next;var N=b=null,j=null,G=r,Q=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(Ve&ne)===ne:(Ma&ne)===ne){var F=G.revertLane;if(F===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===qs&&(Q=!0);else if((Ma&F)===F){G=G.next,F===qs&&(Q=!0);continue}else ne={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},j===null?(N=j=ne,b=g):j=j.next=ne,De.lanes|=F,di|=F;ne=G.action,ss&&l(g,ne),g=G.hasEagerState?G.eagerState:l(g,ne)}else F={lane:ne,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},j===null?(N=j=F,b=g):j=j.next=F,De.lanes|=ne,di|=ne;G=G.next}while(G!==null&&G!==r);if(j===null?b=g:j.next=N,!xn(g,i.memoizedState)&&(Rt=!0,Q&&(l=Fs,l!==null)))throw l;i.memoizedState=g,i.baseState=b,i.baseQueue=j,d.lastRenderedState=g}return p===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function bf(i){var r=At(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,g=r.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do g=i(g,b.action),b=b.next;while(b!==p);xn(g,r.memoizedState)||(Rt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),l.lastRenderedState=g}return[g,d]}function F0(i,r,l){var d=De,p=At(),g=Ge;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=r();var b=!xn((st||p).memoizedState,l);if(b&&(p.memoizedState=l,Rt=!0),p=p.queue,Ef(X0.bind(null,d,p,i),[i]),p.getSnapshot!==r||b||Ot!==null&&Ot.memoizedState.tag&1){if(d.flags|=2048,Js(9,{destroy:void 0},Z0.bind(null,d,p,l,r),null),lt===null)throw Error(a(349));g||(Ma&127)!==0||Y0(d,r,l)}return l}function Y0(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=De.updateQueue,r===null?(r=ou(),De.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Z0(i,r,l,d){r.value=l,r.getSnapshot=d,K0(r)&&Q0(i)}function X0(i,r,l){return l(function(){K0(r)&&Q0(i)})}function K0(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!xn(i,l)}catch{return!0}}function Q0(i){var r=Ki(i,2);r!==null&&pn(r,i,2)}function wf(i){var r=Wt();if(typeof i=="function"){var l=i;if(i=l(),ss){Qa(!0);try{l()}finally{Qa(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:i},r}function J0(i,r,l,d){return i.baseState=l,_f(i,st,typeof d=="function"?d:La)}function VC(i,r,l,d,p){if(fu(i))throw Error(a(485));if(i=r.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};L.T!==null?l(!0):g.isTransition=!1,d(g),l=r.pending,l===null?(g.next=r.pending=g,W0(r,g)):(g.next=l.next,r.pending=l.next=g)}}function W0(i,r){var l=r.action,d=r.payload,p=i.state;if(r.isTransition){var g=L.T,b={};L.T=b;try{var N=l(p,d),j=L.S;j!==null&&j(b,N),ev(i,r,N)}catch(G){xf(i,r,G)}finally{g!==null&&b.types!==null&&(g.types=b.types),L.T=g}}else try{g=l(p,d),ev(i,r,g)}catch(G){xf(i,r,G)}}function ev(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){tv(i,r,d)},function(d){return xf(i,r,d)}):tv(i,r,l)}function tv(i,r,l){r.status="fulfilled",r.value=l,nv(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,W0(i,l)))}function xf(i,r,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,nv(r),r=r.next;while(r!==d)}i.action=null}function nv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function av(i,r){return r}function iv(i,r){if(Ge){var l=lt.formState;if(l!==null){e:{var d=De;if(Ge){if(dt){t:{for(var p=dt,g=zn;p.nodeType!==8;){if(!g){p=null;break t}if(p=Vn(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){dt=Vn(p.nextSibling),d=p.data==="F!";break e}}ni(d)}d=!1}d&&(r=l[0])}}return l=Wt(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:av,lastRenderedState:r},l.queue=d,l=Ev.bind(null,De,d),d.dispatch=l,d=wf(!1),g=Nf.bind(null,De,!1,d.queue),d=Wt(),p={state:r,dispatch:null,action:i,pending:null},d.queue=p,l=VC.bind(null,De,p,g,l),p.dispatch=l,d.memoizedState=i,[r,l,!1]}function sv(i){var r=At();return rv(r,st,i)}function rv(i,r,l){if(r=_f(i,r,av)[0],i=uu(La)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=mo(r)}catch(b){throw b===Ys?Wl:b}else d=r;r=At();var p=r.queue,g=p.dispatch;return l!==r.memoizedState&&(De.flags|=2048,Js(9,{destroy:void 0},HC.bind(null,p,l),null)),[d,g,i]}function HC(i,r){i.action=r}function ov(i){var r=At(),l=st;if(l!==null)return rv(r,l,i);At(),r=r.memoizedState,l=At();var d=l.queue.dispatch;return l.memoizedState=i,[r,d,!1]}function Js(i,r,l,d){return i={tag:i,create:l,deps:d,inst:r,next:null},r=De.updateQueue,r===null&&(r=ou(),De.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,r.lastEffect=i),i}function lv(){return At().memoizedState}function cu(i,r,l,d){var p=Wt();De.flags|=i,p.memoizedState=Js(1|r,{destroy:void 0},l,d===void 0?null:d)}function du(i,r,l,d){var p=At();d=d===void 0?null:d;var g=p.memoizedState.inst;st!==null&&d!==null&&hf(d,st.memoizedState.deps)?p.memoizedState=Js(r,g,l,d):(De.flags|=i,p.memoizedState=Js(1|r,g,l,d))}function uv(i,r){cu(8390656,8,i,r)}function Ef(i,r){du(2048,8,i,r)}function GC(i){De.flags|=4;var r=De.updateQueue;if(r===null)r=ou(),De.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function cv(i){var r=At().memoizedState;return GC({ref:r,nextImpl:i}),function(){if((Ke&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function dv(i,r){return du(4,2,i,r)}function fv(i,r){return du(4,4,i,r)}function hv(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function mv(i,r,l){l=l!=null?l.concat([i]):null,du(4,4,hv.bind(null,r,i),l)}function Tf(){}function pv(i,r){var l=At();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&hf(r,d[1])?d[0]:(l.memoizedState=[i,r],i)}function gv(i,r){var l=At();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&hf(r,d[1]))return d[0];if(d=i(),ss){Qa(!0);try{i()}finally{Qa(!1)}}return l.memoizedState=[d,r],d}function Sf(i,r,l){return l===void 0||(Ma&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=y_(),De.lanes|=i,di|=i,l)}function yv(i,r,l,d){return xn(l,r)?l:Xs.current!==null?(i=Sf(i,l,d),xn(i,r)||(Rt=!0),i):(Ma&42)===0||(Ma&1073741824)!==0&&(Ve&261930)===0?(Rt=!0,i.memoizedState=l):(i=y_(),De.lanes|=i,di|=i,r)}function vv(i,r,l,d,p){var g=q.p;q.p=g!==0&&8>g?g:8;var b=L.T,N={};L.T=N,Nf(i,!1,r,l);try{var j=p(),G=L.S;if(G!==null&&G(N,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Q=UC(j,d);po(i,r,Q,Nn(i))}else po(i,r,d,Nn(i))}catch(ne){po(i,r,{then:function(){},status:"rejected",reason:ne},Nn())}finally{q.p=g,b!==null&&N.types!==null&&(b.types=N.types),L.T=b}}function qC(){}function Af(i,r,l,d){if(i.tag!==5)throw Error(a(476));var p=_v(i).queue;vv(i,p,r,J,l===null?qC:function(){return bv(i),l(d)})}function _v(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:J},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function bv(i){var r=_v(i);r.next===null&&(r=i.alternate.memoizedState),po(i,r.next.queue,{},Nn())}function Cf(){return Ht(ko)}function wv(){return At().memoizedState}function xv(){return At().memoizedState}function FC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=Nn();i=si(l);var d=ri(r,i,l);d!==null&&(pn(d,r,l),uo(d,r,l)),r={cache:tf()},i.payload=r;return}r=r.return}}function YC(i,r,l){var d=Nn();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fu(i)?Tv(r,l):(l=Gd(i,r,l,d),l!==null&&(pn(l,i,d),Sv(l,r,d)))}function Ev(i,r,l){var d=Nn();po(i,r,l,d)}function po(i,r,l,d){var p={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(fu(i))Tv(r,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,N=g(b,l);if(p.hasEagerState=!0,p.eagerState=N,xn(N,b))return Fl(i,r,p,0),lt===null&&ql(),!1}catch{}finally{}if(l=Gd(i,r,p,d),l!==null)return pn(l,i,d),Sv(l,r,d),!0}return!1}function Nf(i,r,l,d){if(d={lane:2,revertLane:rh(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},fu(i)){if(r)throw Error(a(479))}else r=Gd(i,l,d,2),r!==null&&pn(r,i,2)}function fu(i){var r=i.alternate;return i===De||r!==null&&r===De}function Tv(i,r){Ks=su=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function Sv(i,r,l){if((l&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,Ry(i,l)}}var go={readContext:Ht,use:lu,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};go.useEffectEvent=bt;var Av={readContext:Ht,use:lu,useCallback:function(i,r){return Wt().memoizedState=[i,r===void 0?null:r],i},useContext:Ht,useEffect:uv,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,cu(4194308,4,hv.bind(null,r,i),l)},useLayoutEffect:function(i,r){return cu(4194308,4,i,r)},useInsertionEffect:function(i,r){cu(4,2,i,r)},useMemo:function(i,r){var l=Wt();r=r===void 0?null:r;var d=i();if(ss){Qa(!0);try{i()}finally{Qa(!1)}}return l.memoizedState=[d,r],d},useReducer:function(i,r,l){var d=Wt();if(l!==void 0){var p=l(r);if(ss){Qa(!0);try{l(r)}finally{Qa(!1)}}}else p=r;return d.memoizedState=d.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},d.queue=i,i=i.dispatch=YC.bind(null,De,i),[d.memoizedState,i]},useRef:function(i){var r=Wt();return i={current:i},r.memoizedState=i},useState:function(i){i=wf(i);var r=i.queue,l=Ev.bind(null,De,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Tf,useDeferredValue:function(i,r){var l=Wt();return Sf(l,i,r)},useTransition:function(){var i=wf(!1);return i=vv.bind(null,De,i.queue,!0,!1),Wt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var d=De,p=Wt();if(Ge){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),lt===null)throw Error(a(349));(Ve&127)!==0||Y0(d,r,l)}p.memoizedState=l;var g={value:l,getSnapshot:r};return p.queue=g,uv(X0.bind(null,d,g,i),[i]),d.flags|=2048,Js(9,{destroy:void 0},Z0.bind(null,d,g,l,r),null),l},useId:function(){var i=Wt(),r=lt.identifierPrefix;if(Ge){var l=pa,d=ma;l=(d&~(1<<32-wn(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=ru++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=zC++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Cf,useFormState:iv,useActionState:iv,useOptimistic:function(i){var r=Wt();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Nf.bind(null,De,!0,l),l.dispatch=r,[i,r]},useMemoCache:vf,useCacheRefresh:function(){return Wt().memoizedState=FC.bind(null,De)},useEffectEvent:function(i){var r=Wt(),l={impl:i};return r.memoizedState=l,function(){if((Ke&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Of={readContext:Ht,use:lu,useCallback:pv,useContext:Ht,useEffect:Ef,useImperativeHandle:mv,useInsertionEffect:dv,useLayoutEffect:fv,useMemo:gv,useReducer:uu,useRef:lv,useState:function(){return uu(La)},useDebugValue:Tf,useDeferredValue:function(i,r){var l=At();return yv(l,st.memoizedState,i,r)},useTransition:function(){var i=uu(La)[0],r=At().memoizedState;return[typeof i=="boolean"?i:mo(i),r]},useSyncExternalStore:F0,useId:wv,useHostTransitionStatus:Cf,useFormState:sv,useActionState:sv,useOptimistic:function(i,r){var l=At();return J0(l,st,i,r)},useMemoCache:vf,useCacheRefresh:xv};Of.useEffectEvent=cv;var Cv={readContext:Ht,use:lu,useCallback:pv,useContext:Ht,useEffect:Ef,useImperativeHandle:mv,useInsertionEffect:dv,useLayoutEffect:fv,useMemo:gv,useReducer:bf,useRef:lv,useState:function(){return bf(La)},useDebugValue:Tf,useDeferredValue:function(i,r){var l=At();return st===null?Sf(l,i,r):yv(l,st.memoizedState,i,r)},useTransition:function(){var i=bf(La)[0],r=At().memoizedState;return[typeof i=="boolean"?i:mo(i),r]},useSyncExternalStore:F0,useId:wv,useHostTransitionStatus:Cf,useFormState:ov,useActionState:ov,useOptimistic:function(i,r){var l=At();return st!==null?J0(l,st,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:vf,useCacheRefresh:xv};Cv.useEffectEvent=cv;function Rf(i,r,l,d){r=i.memoizedState,l=l(d,r),l=l==null?r:y({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var If={enqueueSetState:function(i,r,l){i=i._reactInternals;var d=Nn(),p=si(d);p.payload=r,l!=null&&(p.callback=l),r=ri(i,p,d),r!==null&&(pn(r,i,d),uo(r,i,d))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var d=Nn(),p=si(d);p.tag=1,p.payload=r,l!=null&&(p.callback=l),r=ri(i,p,d),r!==null&&(pn(r,i,d),uo(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=Nn(),d=si(l);d.tag=2,r!=null&&(d.callback=r),r=ri(i,d,l),r!==null&&(pn(r,i,l),uo(r,i,l))}};function Nv(i,r,l,d,p,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,b):r.prototype&&r.prototype.isPureReactComponent?!to(l,d)||!to(p,g):!0}function Ov(i,r,l,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==i&&If.enqueueReplaceState(r,r.state,null)}function rs(i,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(i=i.defaultProps){l===r&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Rv(i){Gl(i)}function Iv(i){console.error(i)}function kv(i){Gl(i)}function hu(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function jv(i,r,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function kf(i,r,l){return l=si(l),l.tag=3,l.payload={element:null},l.callback=function(){hu(i,r)},l}function Mv(i){return i=si(i),i.tag=3,i}function Lv(i,r,l,d){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=d.value;i.payload=function(){return p(g)},i.callback=function(){jv(r,l,d)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){jv(r,l,d),typeof p!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function ZC(i,r,l,d,p){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&Gs(r,l,p,!0),l=Tn.current,l!==null){switch(l.tag){case 31:case 13:return Bn===null?Su():l.alternate===null&&wt===0&&(wt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,d===eu?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),ah(i,d,p)),!1;case 22:return l.flags|=65536,d===eu?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),ah(i,d,p)),!1}throw Error(a(435,l.tag))}return ah(i,d,p),Su(),!1}if(Ge)return r=Tn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,d!==Kd&&(i=Error(a(422),{cause:d}),io(Pn(i,l)))):(d!==Kd&&(r=Error(a(423),{cause:d}),io(Pn(r,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,d=Pn(d,l),p=kf(i.stateNode,d,p),lf(i,p),wt!==4&&(wt=2)),!1;var g=Error(a(520),{cause:d});if(g=Pn(g,l),To===null?To=[g]:To.push(g),wt!==4&&(wt=2),r===null)return!0;d=Pn(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=kf(l.stateNode,d,i),lf(l,i),!1;case 1:if(r=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(fi===null||!fi.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Mv(p),Lv(p,i,l,d),lf(l,p),!1}l=l.return}while(l!==null);return!1}var jf=Error(a(461)),Rt=!1;function Gt(i,r,l,d){r.child=i===null?U0(r,null,l,d):is(r,i.child,l,d)}function Dv(i,r,l,d,p){l=l.render;var g=r.ref;if("ref"in d){var b={};for(var N in d)N!=="ref"&&(b[N]=d[N])}else b=d;return es(r),d=mf(i,r,l,b,g,p),N=pf(),i!==null&&!Rt?(gf(i,r,p),Da(i,r,p)):(Ge&&N&&Zd(r),r.flags|=1,Gt(i,r,d,p),r.child)}function Pv(i,r,l,d,p){if(i===null){var g=l.type;return typeof g=="function"&&!qd(g)&&g.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=g,$v(i,r,g,d,p)):(i=Zl(l.type,null,d,r,r.mode,p),i.ref=r.ref,i.return=r,r.child=i)}if(g=i.child,!Bf(i,p)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:to,l(b,d)&&i.ref===r.ref)return Da(i,r,p)}return r.flags|=1,i=Ra(g,d),i.ref=r.ref,i.return=r,r.child=i}function $v(i,r,l,d,p){if(i!==null){var g=i.memoizedProps;if(to(g,d)&&i.ref===r.ref)if(Rt=!1,r.pendingProps=d=g,Bf(i,p))(i.flags&131072)!==0&&(Rt=!0);else return r.lanes=i.lanes,Da(i,r,p)}return Mf(i,r,l,d,p)}function Uv(i,r,l,d){var p=d.children,g=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,i!==null){for(d=r.child=i.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~g}else d=0,r.child=null;return zv(i,r,g,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jl(r,g!==null?g.cachePool:null),g!==null?V0(r,g):cf(),H0(r);else return d=r.lanes=536870912,zv(i,r,g!==null?g.baseLanes|l:l,l,d)}else g!==null?(Jl(r,g.cachePool),V0(r,g),li(),r.memoizedState=null):(i!==null&&Jl(r,null),cf(),li());return Gt(i,r,p,l),r.child}function yo(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function zv(i,r,l,d,p){var g=af();return g=g===null?null:{parent:Nt._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},i!==null&&Jl(r,null),cf(),H0(r),i!==null&&Gs(i,r,d,!0),r.childLanes=p,null}function mu(i,r){return r=gu({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Bv(i,r,l){return is(r,i.child,null,l),i=mu(r,r.pendingProps),i.flags|=2,Sn(r),r.memoizedState=null,i}function XC(i,r,l){var d=r.pendingProps,p=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ge){if(d.mode==="hidden")return i=mu(r,d),r.lanes=536870912,yo(null,i);if(ff(r),(i=dt)?(i=W_(i,zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ei!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=T0(i),l.return=r,r.child=l,Vt=r,dt=null)):i=null,i===null)throw ni(r);return r.lanes=536870912,null}return mu(r,d)}var g=i.memoizedState;if(g!==null){var b=g.dehydrated;if(ff(r),p)if(r.flags&256)r.flags&=-257,r=Bv(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(a(558));else if(Rt||Gs(i,r,l,!1),p=(l&i.childLanes)!==0,Rt||p){if(d=lt,d!==null&&(b=Iy(d,l),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ki(i,b),pn(d,i,b),jf;Su(),r=Bv(i,r,l)}else i=g.treeContext,dt=Vn(b.nextSibling),Vt=r,Ge=!0,ti=null,zn=!1,i!==null&&C0(r,i),r=mu(r,d),r.flags|=4096;return r}return i=Ra(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function pu(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function Mf(i,r,l,d,p){return es(r),l=mf(i,r,l,d,void 0,p),d=pf(),i!==null&&!Rt?(gf(i,r,p),Da(i,r,p)):(Ge&&d&&Zd(r),r.flags|=1,Gt(i,r,l,p),r.child)}function Vv(i,r,l,d,p,g){return es(r),r.updateQueue=null,l=q0(r,d,l,p),G0(i),d=pf(),i!==null&&!Rt?(gf(i,r,g),Da(i,r,g)):(Ge&&d&&Zd(r),r.flags|=1,Gt(i,r,l,g),r.child)}function Hv(i,r,l,d,p){if(es(r),r.stateNode===null){var g=zs,b=l.contextType;typeof b=="object"&&b!==null&&(g=Ht(b)),g=new l(d,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=If,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=d,g.state=r.memoizedState,g.refs={},rf(r),b=l.contextType,g.context=typeof b=="object"&&b!==null?Ht(b):zs,g.state=r.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Rf(r,l,b,d),g.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&If.enqueueReplaceState(g,g.state,null),fo(r,d,g,p),co(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){g=r.stateNode;var N=r.memoizedProps,j=rs(l,N);g.props=j;var G=g.context,Q=l.contextType;b=zs,typeof Q=="object"&&Q!==null&&(b=Ht(Q));var ne=l.getDerivedStateFromProps;Q=typeof ne=="function"||typeof g.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,Q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N||G!==b)&&Ov(r,g,d,b),ii=!1;var F=r.memoizedState;g.state=F,fo(r,d,g,p),co(),G=r.memoizedState,N||F!==G||ii?(typeof ne=="function"&&(Rf(r,l,ne,d),G=r.memoizedState),(j=ii||Nv(r,l,j,d,F,G,b))?(Q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=G),g.props=d,g.state=G,g.context=b,d=j):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{g=r.stateNode,of(i,r),b=r.memoizedProps,Q=rs(l,b),g.props=Q,ne=r.pendingProps,F=g.context,G=l.contextType,j=zs,typeof G=="object"&&G!==null&&(j=Ht(G)),N=l.getDerivedStateFromProps,(G=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ne||F!==j)&&Ov(r,g,d,j),ii=!1,F=r.memoizedState,g.state=F,fo(r,d,g,p),co();var Z=r.memoizedState;b!==ne||F!==Z||ii||i!==null&&i.dependencies!==null&&Kl(i.dependencies)?(typeof N=="function"&&(Rf(r,l,N,d),Z=r.memoizedState),(Q=ii||Nv(r,l,Q,d,F,Z,j)||i!==null&&i.dependencies!==null&&Kl(i.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,Z,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,Z,j)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Z),g.props=d,g.state=Z,g.context=j,d=Q):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&F===i.memoizedState||(r.flags|=1024),d=!1)}return g=d,pu(i,r),d=(r.flags&128)!==0,g||d?(g=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,i!==null&&d?(r.child=is(r,i.child,null,p),r.child=is(r,null,l,p)):Gt(i,r,l,p),r.memoizedState=g.state,i=r.child):i=Da(i,r,p),i}function Gv(i,r,l,d){return Ji(),r.flags|=256,Gt(i,r,l,d),r.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(i){return{baseLanes:i,cachePool:j0()}}function Pf(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=Cn),i}function qv(i,r,l){var d=r.pendingProps,p=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(St.current&2)!==0),b&&(p=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ge){if(p?oi(r):li(),(i=dt)?(i=W_(i,zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ei!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=T0(i),l.return=r,r.child=l,Vt=r,dt=null)):i=null,i===null)throw ni(r);return _h(i)?r.lanes=32:r.lanes=536870912,null}var N=d.children;return d=d.fallback,p?(li(),p=r.mode,N=gu({mode:"hidden",children:N},p),d=Qi(d,p,l,null),N.return=r,d.return=r,N.sibling=d,r.child=N,d=r.child,d.memoizedState=Df(l),d.childLanes=Pf(i,b,l),r.memoizedState=Lf,yo(null,d)):(oi(r),$f(r,N))}var j=i.memoizedState;if(j!==null&&(N=j.dehydrated,N!==null)){if(g)r.flags&256?(oi(r),r.flags&=-257,r=Uf(i,r,l)):r.memoizedState!==null?(li(),r.child=i.child,r.flags|=128,r=null):(li(),N=d.fallback,p=r.mode,d=gu({mode:"visible",children:d.children},p),N=Qi(N,p,l,null),N.flags|=2,d.return=r,N.return=r,d.sibling=N,r.child=d,is(r,i.child,null,l),d=r.child,d.memoizedState=Df(l),d.childLanes=Pf(i,b,l),r.memoizedState=Lf,r=yo(null,d));else if(oi(r),_h(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var G=b.dgst;b=G,d=Error(a(419)),d.stack="",d.digest=b,io({value:d,source:null,stack:null}),r=Uf(i,r,l)}else if(Rt||Gs(i,r,l,!1),b=(l&i.childLanes)!==0,Rt||b){if(b=lt,b!==null&&(d=Iy(b,l),d!==0&&d!==j.retryLane))throw j.retryLane=d,Ki(i,d),pn(b,i,d),jf;vh(N)||Su(),r=Uf(i,r,l)}else vh(N)?(r.flags|=192,r.child=i.child,r=null):(i=j.treeContext,dt=Vn(N.nextSibling),Vt=r,Ge=!0,ti=null,zn=!1,i!==null&&C0(r,i),r=$f(r,d.children),r.flags|=4096);return r}return p?(li(),N=d.fallback,p=r.mode,j=i.child,G=j.sibling,d=Ra(j,{mode:"hidden",children:d.children}),d.subtreeFlags=j.subtreeFlags&65011712,G!==null?N=Ra(G,N):(N=Qi(N,p,l,null),N.flags|=2),N.return=r,d.return=r,d.sibling=N,r.child=d,yo(null,d),d=r.child,N=i.child.memoizedState,N===null?N=Df(l):(p=N.cachePool,p!==null?(j=Nt._currentValue,p=p.parent!==j?{parent:j,pool:j}:p):p=j0(),N={baseLanes:N.baseLanes|l,cachePool:p}),d.memoizedState=N,d.childLanes=Pf(i,b,l),r.memoizedState=Lf,yo(i.child,d)):(oi(r),l=i.child,i=l.sibling,l=Ra(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=l,r.memoizedState=null,l)}function $f(i,r){return r=gu({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function gu(i,r){return i=En(22,i,null,r),i.lanes=0,i}function Uf(i,r,l){return is(r,i.child,null,l),i=$f(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Fv(i,r,l){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),Wd(i.return,r,l)}function zf(i,r,l,d,p,g){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p,treeForkCount:g}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=l,b.tailMode=p,b.treeForkCount=g)}function Yv(i,r,l){var d=r.pendingProps,p=d.revealOrder,g=d.tail;d=d.children;var b=St.current,N=(b&2)!==0;if(N?(b=b&1|2,r.flags|=128):b&=1,se(St,b),Gt(i,r,d,l),d=Ge?ao:0,!N&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fv(i,l,r);else if(i.tag===19)Fv(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=r.child,p=null;l!==null;)i=l.alternate,i!==null&&iu(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=r.child,r.child=null):(p=l.sibling,l.sibling=null),zf(r,!1,p,l,g,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=r.child,r.child=null;p!==null;){if(i=p.alternate,i!==null&&iu(i)===null){r.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}zf(r,!0,l,null,g,d);break;case"together":zf(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Da(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),di|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Gs(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(a(153));if(r.child!==null){for(i=r.child,l=Ra(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Ra(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function Bf(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Kl(i)))}function KC(i,r,l){switch(r.tag){case 3:B(r,r.stateNode.containerInfo),ai(r,Nt,i.memoizedState.cache),Ji();break;case 27:case 5:Ie(r);break;case 4:B(r,r.stateNode.containerInfo);break;case 10:ai(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ff(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(oi(r),r.flags|=128,null):(l&r.child.childLanes)!==0?qv(i,r,l):(oi(r),i=Da(i,r,l),i!==null?i.sibling:null);oi(r);break;case 19:var p=(i.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(Gs(i,r,l,!1),d=(l&r.childLanes)!==0),p){if(d)return Yv(i,r,l);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),se(St,St.current),d)break;return null;case 22:return r.lanes=0,Uv(i,r,l,r.pendingProps);case 24:ai(r,Nt,i.memoizedState.cache)}return Da(i,r,l)}function Zv(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Rt=!0;else{if(!Bf(i,l)&&(r.flags&128)===0)return Rt=!1,KC(i,r,l);Rt=(i.flags&131072)!==0}else Rt=!1,Ge&&(r.flags&1048576)!==0&&A0(r,ao,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=ns(r.elementType),r.type=i,typeof i=="function")qd(i)?(d=rs(i,d),r.tag=1,r=Hv(null,r,i,d,l)):(r.tag=0,r=Mf(null,r,i,d,l));else{if(i!=null){var p=i.$$typeof;if(p===U){r.tag=11,r=Dv(null,r,i,d,l);break e}else if(p===te){r.tag=14,r=Pv(null,r,i,d,l);break e}}throw r=ue(i)||i,Error(a(306,r,""))}}return r;case 0:return Mf(i,r,r.type,r.pendingProps,l);case 1:return d=r.type,p=rs(d,r.pendingProps),Hv(i,r,d,p,l);case 3:e:{if(B(r,r.stateNode.containerInfo),i===null)throw Error(a(387));d=r.pendingProps;var g=r.memoizedState;p=g.element,of(i,r),fo(r,d,null,l);var b=r.memoizedState;if(d=b.cache,ai(r,Nt,d),d!==g.cache&&ef(r,[Nt],l,!0),co(),d=b.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Gv(i,r,d,l);break e}else if(d!==p){p=Pn(Error(a(424)),r),io(p),r=Gv(i,r,d,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(dt=Vn(i.firstChild),Vt=r,Ge=!0,ti=null,zn=!0,l=U0(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ji(),d===p){r=Da(i,r,l);break e}Gt(i,r,d,l)}r=r.child}return r;case 26:return pu(i,r),i===null?(l=sb(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ge||(l=r.type,i=r.pendingProps,d=ku(S.current).createElement(l),d[Bt]=r,d[un]=i,qt(d,l,i),Pt(d),r.stateNode=d):r.memoizedState=sb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ie(r),i===null&&Ge&&(d=r.stateNode=nb(r.type,r.pendingProps,S.current),Vt=r,zn=!0,p=dt,gi(r.type)?(bh=p,dt=Vn(d.firstChild)):dt=p),Gt(i,r,r.pendingProps.children,l),pu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ge&&((p=d=dt)&&(d=AN(d,r.type,r.pendingProps,zn),d!==null?(r.stateNode=d,Vt=r,dt=Vn(d.firstChild),zn=!1,p=!0):p=!1),p||ni(r)),Ie(r),p=r.type,g=r.pendingProps,b=i!==null?i.memoizedProps:null,d=g.children,ph(p,g)?d=null:b!==null&&ph(p,b)&&(r.flags|=32),r.memoizedState!==null&&(p=mf(i,r,BC,null,null,l),ko._currentValue=p),pu(i,r),Gt(i,r,d,l),r.child;case 6:return i===null&&Ge&&((i=l=dt)&&(l=CN(l,r.pendingProps,zn),l!==null?(r.stateNode=l,Vt=r,dt=null,i=!0):i=!1),i||ni(r)),null;case 13:return qv(i,r,l);case 4:return B(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=is(r,null,d,l):Gt(i,r,d,l),r.child;case 11:return Dv(i,r,r.type,r.pendingProps,l);case 7:return Gt(i,r,r.pendingProps,l),r.child;case 8:return Gt(i,r,r.pendingProps.children,l),r.child;case 12:return Gt(i,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,ai(r,r.type,d.value),Gt(i,r,d.children,l),r.child;case 9:return p=r.type._context,d=r.pendingProps.children,es(r),p=Ht(p),d=d(p),r.flags|=1,Gt(i,r,d,l),r.child;case 14:return Pv(i,r,r.type,r.pendingProps,l);case 15:return $v(i,r,r.type,r.pendingProps,l);case 19:return Yv(i,r,l);case 31:return XC(i,r,l);case 22:return Uv(i,r,l,r.pendingProps);case 24:return es(r),d=Ht(Nt),i===null?(p=af(),p===null&&(p=lt,g=tf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),r.memoizedState={parent:d,cache:p},rf(r),ai(r,Nt,p)):((i.lanes&l)!==0&&(of(i,r),fo(r,null,null,l),co()),p=i.memoizedState,g=r.memoizedState,p.parent!==d?(p={parent:d,cache:d},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),ai(r,Nt,d)):(d=g.cache,ai(r,Nt,d),d!==p.cache&&ef(r,[Nt],l,!0))),Gt(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Pa(i){i.flags|=4}function Vf(i,r,l,d,p){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(w_())i.flags|=8192;else throw as=eu,sf}else i.flags&=-16777217}function Xv(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!cb(r))if(w_())i.flags|=8192;else throw as=eu,sf}function yu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ny():536870912,i.lanes|=r,nr|=r)}function vo(i,r){if(!Ge)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function ft(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(r)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,r}function QC(i,r,l){var d=r.pendingProps;switch(Xd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return l=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ja(Nt),D(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Hs(r)?Pa(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qd())),ft(r),null;case 26:var p=r.type,g=r.memoizedState;return i===null?(Pa(r),g!==null?(ft(r),Xv(r,g)):(ft(r),Vf(r,p,null,d,l))):g?g!==i.memoizedState?(Pa(r),ft(r),Xv(r,g)):(ft(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&Pa(r),ft(r),Vf(r,p,i,d,l)),null;case 27:if(Qe(r),l=S.current,p=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Pa(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return ft(r),null}i=oe.current,Hs(r)?N0(r):(i=nb(p,d,l),r.stateNode=i,Pa(r))}return ft(r),null;case 5:if(Qe(r),p=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Pa(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return ft(r),null}if(g=oe.current,Hs(r))N0(r);else{var b=ku(S.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof d.is=="string"?b.createElement("select",{is:d.is}):b.createElement("select"),d.multiple?g.multiple=!0:d.size&&(g.size=d.size);break;default:g=typeof d.is=="string"?b.createElement(p,{is:d.is}):b.createElement(p)}}g[Bt]=r,g[un]=d;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=g;e:switch(qt(g,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Pa(r)}}return ft(r),Vf(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&Pa(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(a(166));if(i=S.current,Hs(r)){if(i=r.stateNode,l=r.memoizedProps,d=null,p=Vt,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}i[Bt]=r,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||q_(i.nodeValue,l)),i||ni(r,!0)}else i=ku(i).createTextNode(d),i[Bt]=r,r.stateNode=i}return ft(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(d=Hs(r),l!==null){if(i===null){if(!d)throw Error(a(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[Bt]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),i=!1}else l=Qd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(Sn(r),r):(Sn(r),null);if((r.flags&128)!==0)throw Error(a(558))}return ft(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Hs(r),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(a(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));p[Bt]=r}else Ji(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),p=!1}else p=Qd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return r.flags&256?(Sn(r),r):(Sn(r),null)}return Sn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=r.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==p&&(d.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),yu(r,r.updateQueue),ft(r),null);case 4:return D(),i===null&&ch(r.stateNode.containerInfo),ft(r),null;case 10:return ja(r.type),ft(r),null;case 19:if(V(St),d=r.memoizedState,d===null)return ft(r),null;if(p=(r.flags&128)!==0,g=d.rendering,g===null)if(p)vo(d,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(g=iu(i),g!==null){for(r.flags|=128,vo(d,!1),i=g.updateQueue,r.updateQueue=i,yu(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)E0(l,i),l=l.sibling;return se(St,St.current&1|2),Ge&&Ia(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&_n()>xu&&(r.flags|=128,p=!0,vo(d,!1),r.lanes=4194304)}else{if(!p)if(i=iu(g),i!==null){if(r.flags|=128,p=!0,i=i.updateQueue,r.updateQueue=i,yu(r,i),vo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Ge)return ft(r),null}else 2*_n()-d.renderingStartTime>xu&&l!==536870912&&(r.flags|=128,p=!0,vo(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(i=d.last,i!==null?i.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=_n(),i.sibling=null,l=St.current,se(St,p?l&1|2:l&1),Ge&&Ia(r,d.treeForkCount),i):(ft(r),null);case 22:case 23:return Sn(r),df(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),l=r.updateQueue,l!==null&&yu(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),i!==null&&V(ts),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ja(Nt),ft(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function JC(i,r){switch(Xd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ja(Nt),D(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Qe(r),null;case 31:if(r.memoizedState!==null){if(Sn(r),r.alternate===null)throw Error(a(340));Ji()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Sn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ji()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return V(St),null;case 4:return D(),null;case 10:return ja(r.type),null;case 22:case 23:return Sn(r),df(),i!==null&&V(ts),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ja(Nt),null;case 25:return null;default:return null}}function Kv(i,r){switch(Xd(r),r.tag){case 3:ja(Nt),D();break;case 26:case 27:case 5:Qe(r);break;case 4:D();break;case 31:r.memoizedState!==null&&Sn(r);break;case 13:Sn(r);break;case 19:V(St);break;case 10:ja(r.type);break;case 22:case 23:Sn(r),df(),i!==null&&V(ts);break;case 24:ja(Nt)}}function _o(i,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&i)===i){d=void 0;var g=l.create,b=l.inst;d=g(),b.destroy=d}l=l.next}while(l!==p)}}catch(N){nt(r,r.return,N)}}function ui(i,r,l){try{var d=r.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var g=p.next;d=g;do{if((d.tag&i)===i){var b=d.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,p=r;var j=l,G=N;try{G()}catch(Q){nt(p,j,Q)}}}d=d.next}while(d!==g)}}catch(Q){nt(r,r.return,Q)}}function Qv(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{B0(r,l)}catch(d){nt(i,i.return,d)}}}function Jv(i,r,l){l.props=rs(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){nt(i,r,d)}}function bo(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(p){nt(i,r,p)}}function ga(i,r){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(p){nt(i,r,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){nt(i,r,p)}else l.current=null}function Wv(i){var r=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(p){nt(i,i.return,p)}}function Hf(i,r,l){try{var d=i.stateNode;bN(d,i.type,l,r),d[un]=r}catch(p){nt(i,i.return,p)}}function e_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&gi(i.type)||i.tag===4}function Gf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||e_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&gi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qf(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Na));else if(d!==4&&(d===27&&gi(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(qf(i,r,l),i=i.sibling;i!==null;)qf(i,r,l),i=i.sibling}function vu(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(d!==4&&(d===27&&gi(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(vu(i,r,l),i=i.sibling;i!==null;)vu(i,r,l),i=i.sibling}function t_(i){var r=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,p=r.attributes;p.length;)r.removeAttributeNode(p[0]);qt(r,d,l),r[Bt]=i,r[un]=l}catch(g){nt(i,i.return,g)}}var $a=!1,It=!1,Ff=!1,n_=typeof WeakSet=="function"?WeakSet:Set,$t=null;function WC(i,r){if(i=i.containerInfo,hh=Uu,i=m0(i),$d(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,N=-1,j=-1,G=0,Q=0,ne=i,F=null;t:for(;;){for(var Z;ne!==l||p!==0&&ne.nodeType!==3||(N=b+p),ne!==g||d!==0&&ne.nodeType!==3||(j=b+d),ne.nodeType===3&&(b+=ne.nodeValue.length),(Z=ne.firstChild)!==null;)F=ne,ne=Z;for(;;){if(ne===i)break t;if(F===l&&++G===p&&(N=b),F===g&&++Q===d&&(j=b),(Z=ne.nextSibling)!==null)break;ne=F,F=ne.parentNode}ne=Z}l=N===-1||j===-1?null:{start:N,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(mh={focusedElem:i,selectionRange:l},Uu=!1,$t=r;$t!==null;)if(r=$t,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,$t=i;else for(;$t!==null;){switch(r=$t,g=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=r,p=g.memoizedProps,g=g.memoizedState,d=l.stateNode;try{var ve=rs(l.type,p);i=d.getSnapshotBeforeUpdate(ve,g),d.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){nt(l,l.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)yh(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=r.sibling,i!==null){i.return=r.return,$t=i;break}$t=r.return}}function a_(i,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:za(i,l),d&4&&_o(5,l);break;case 1:if(za(i,l),d&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(b){nt(l,l.return,b)}else{var p=rs(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(p,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){nt(l,l.return,b)}}d&64&&Qv(l),d&512&&bo(l,l.return);break;case 3:if(za(i,l),d&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{B0(i,r)}catch(b){nt(l,l.return,b)}}break;case 27:r===null&&d&4&&t_(l);case 26:case 5:za(i,l),r===null&&d&4&&Wv(l),d&512&&bo(l,l.return);break;case 12:za(i,l);break;case 31:za(i,l),d&4&&r_(i,l);break;case 13:za(i,l),d&4&&o_(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=lN.bind(null,l),NN(i,l))));break;case 22:if(d=l.memoizedState!==null||$a,!d){r=r!==null&&r.memoizedState!==null||It,p=$a;var g=It;$a=d,(It=r)&&!g?Ba(i,l,(l.subtreeFlags&8772)!==0):za(i,l),$a=p,It=g}break;case 30:break;default:za(i,l)}}function i_(i){var r=i.alternate;r!==null&&(i.alternate=null,i_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&wd(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,dn=!1;function Ua(i,r,l){for(l=l.child;l!==null;)s_(i,r,l),l=l.sibling}function s_(i,r,l){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Hr,l)}catch{}switch(l.tag){case 26:It||ga(l,r),Ua(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:It||ga(l,r);var d=pt,p=dn;gi(l.type)&&(pt=l.stateNode,dn=!1),Ua(i,r,l),Oo(l.stateNode),pt=d,dn=p;break;case 5:It||ga(l,r);case 6:if(d=pt,p=dn,pt=null,Ua(i,r,l),pt=d,dn=p,pt!==null)if(dn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(g){nt(l,r,g)}else try{pt.removeChild(l.stateNode)}catch(g){nt(l,r,g)}break;case 18:pt!==null&&(dn?(i=pt,Q_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),cr(i)):Q_(pt,l.stateNode));break;case 4:d=pt,p=dn,pt=l.stateNode.containerInfo,dn=!0,Ua(i,r,l),pt=d,dn=p;break;case 0:case 11:case 14:case 15:ui(2,l,r),It||ui(4,l,r),Ua(i,r,l);break;case 1:It||(ga(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Jv(l,r,d)),Ua(i,r,l);break;case 21:Ua(i,r,l);break;case 22:It=(d=It)||l.memoizedState!==null,Ua(i,r,l),It=d;break;default:Ua(i,r,l)}}function r_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{cr(i)}catch(l){nt(r,r.return,l)}}}function o_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{cr(i)}catch(l){nt(r,r.return,l)}}function eN(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new n_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new n_),r;default:throw Error(a(435,i.tag))}}function _u(i,r){var l=eN(i);r.forEach(function(d){if(!l.has(d)){l.add(d);var p=uN.bind(null,i,d);d.then(p,p)}})}function fn(i,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d],g=i,b=r,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(gi(N.type)){pt=N.stateNode,dn=!1;break e}break;case 5:pt=N.stateNode,dn=!1;break e;case 3:case 4:pt=N.stateNode.containerInfo,dn=!0;break e}N=N.return}if(pt===null)throw Error(a(160));s_(g,b,p),pt=null,dn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)l_(r,i),r=r.sibling}var Qn=null;function l_(i,r){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:fn(r,i),hn(i),d&4&&(ui(3,i,i.return),_o(3,i),ui(5,i,i.return));break;case 1:fn(r,i),hn(i),d&512&&(It||l===null||ga(l,l.return)),d&64&&$a&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var p=Qn;if(fn(r,i),hn(i),d&512&&(It||l===null||ga(l,l.return)),d&4){var g=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Fr]||g[Bt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(d),p.head.insertBefore(g,p.querySelector("head > title"))),qt(g,d,l),g[Bt]=i,Pt(g),d=g;break e;case"link":var b=lb("link","href",p).get(d+(l.href||""));if(b){for(var N=0;N<b.length;N++)if(g=b[N],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(N,1);break t}}g=p.createElement(d),qt(g,d,l),p.head.appendChild(g);break;case"meta":if(b=lb("meta","content",p).get(d+(l.content||""))){for(N=0;N<b.length;N++)if(g=b[N],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(N,1);break t}}g=p.createElement(d),qt(g,d,l),p.head.appendChild(g);break;default:throw Error(a(468,d))}g[Bt]=i,Pt(g),d=g}i.stateNode=d}else ub(p,i.type,i.stateNode);else i.stateNode=ob(p,d,i.memoizedProps);else g!==d?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,d===null?ub(p,i.type,i.stateNode):ob(p,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Hf(i,i.memoizedProps,l.memoizedProps)}break;case 27:fn(r,i),hn(i),d&512&&(It||l===null||ga(l,l.return)),l!==null&&d&4&&Hf(i,i.memoizedProps,l.memoizedProps);break;case 5:if(fn(r,i),hn(i),d&512&&(It||l===null||ga(l,l.return)),i.flags&32){p=i.stateNode;try{js(p,"")}catch(ve){nt(i,i.return,ve)}}d&4&&i.stateNode!=null&&(p=i.memoizedProps,Hf(i,p,l!==null?l.memoizedProps:p)),d&1024&&(Ff=!0);break;case 6:if(fn(r,i),hn(i),d&4){if(i.stateNode===null)throw Error(a(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(ve){nt(i,i.return,ve)}}break;case 3:if(Lu=null,p=Qn,Qn=ju(r.containerInfo),fn(r,i),Qn=p,hn(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{cr(r.containerInfo)}catch(ve){nt(i,i.return,ve)}Ff&&(Ff=!1,u_(i));break;case 4:d=Qn,Qn=ju(i.stateNode.containerInfo),fn(r,i),hn(i),Qn=d;break;case 12:fn(r,i),hn(i);break;case 31:fn(r,i),hn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 13:fn(r,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(wu=_n()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 22:p=i.memoizedState!==null;var j=l!==null&&l.memoizedState!==null,G=$a,Q=It;if($a=G||p,It=Q||j,fn(r,i),It=Q,$a=G,hn(i),d&8192)e:for(r=i.stateNode,r._visibility=p?r._visibility&-2:r._visibility|1,p&&(l===null||j||$a||It||os(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){j=l=r;try{if(g=j.stateNode,p)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=j.stateNode;var ne=j.memoizedProps.style,F=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;N.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ve){nt(j,j.return,ve)}}}else if(r.tag===6){if(l===null){j=r;try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(ve){nt(j,j.return,ve)}}}else if(r.tag===18){if(l===null){j=r;try{var Z=j.stateNode;p?J_(Z,!0):J_(j.stateNode,!1)}catch(ve){nt(j,j.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,_u(i,l))));break;case 19:fn(r,i),hn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,_u(i,d)));break;case 30:break;case 21:break;default:fn(r,i),hn(i)}}function hn(i){var r=i.flags;if(r&2){try{for(var l,d=i.return;d!==null;){if(e_(d)){l=d;break}d=d.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var p=l.stateNode,g=Gf(i);vu(i,g,p);break;case 5:var b=l.stateNode;l.flags&32&&(js(b,""),l.flags&=-33);var N=Gf(i);vu(i,N,b);break;case 3:case 4:var j=l.stateNode.containerInfo,G=Gf(i);qf(i,G,j);break;default:throw Error(a(161))}}catch(Q){nt(i,i.return,Q)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function u_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;u_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function za(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)a_(i,r.alternate,r),r=r.sibling}function os(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ui(4,r,r.return),os(r);break;case 1:ga(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Jv(r,r.return,l),os(r);break;case 27:Oo(r.stateNode);case 26:case 5:ga(r,r.return),os(r);break;case 22:r.memoizedState===null&&os(r);break;case 30:os(r);break;default:os(r)}i=i.sibling}}function Ba(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,p=i,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:Ba(p,g,l),_o(4,g);break;case 1:if(Ba(p,g,l),d=g,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(G){nt(d,d.return,G)}if(d=g,p=d.updateQueue,p!==null){var N=d.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)z0(j[p],N)}catch(G){nt(d,d.return,G)}}l&&b&64&&Qv(g),bo(g,g.return);break;case 27:t_(g);case 26:case 5:Ba(p,g,l),l&&d===null&&b&4&&Wv(g),bo(g,g.return);break;case 12:Ba(p,g,l);break;case 31:Ba(p,g,l),l&&b&4&&r_(p,g);break;case 13:Ba(p,g,l),l&&b&4&&o_(p,g);break;case 22:g.memoizedState===null&&Ba(p,g,l),bo(g,g.return);break;case 30:break;default:Ba(p,g,l)}r=r.sibling}}function Yf(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&so(l))}function Zf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&so(i))}function Jn(i,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)c_(i,r,l,d),r=r.sibling}function c_(i,r,l,d){var p=r.flags;switch(r.tag){case 0:case 11:case 15:Jn(i,r,l,d),p&2048&&_o(9,r);break;case 1:Jn(i,r,l,d);break;case 3:Jn(i,r,l,d),p&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&so(i)));break;case 12:if(p&2048){Jn(i,r,l,d),i=r.stateNode;try{var g=r.memoizedProps,b=g.id,N=g.onPostCommit;typeof N=="function"&&N(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){nt(r,r.return,j)}}else Jn(i,r,l,d);break;case 31:Jn(i,r,l,d);break;case 13:Jn(i,r,l,d);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?Jn(i,r,l,d):wo(i,r):g._visibility&2?Jn(i,r,l,d):(g._visibility|=2,Ws(i,r,l,d,(r.subtreeFlags&10256)!==0||!1)),p&2048&&Yf(b,r);break;case 24:Jn(i,r,l,d),p&2048&&Zf(r.alternate,r);break;default:Jn(i,r,l,d)}}function Ws(i,r,l,d,p){for(p=p&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=i,b=r,N=l,j=d,G=b.flags;switch(b.tag){case 0:case 11:case 15:Ws(g,b,N,j,p),_o(8,b);break;case 23:break;case 22:var Q=b.stateNode;b.memoizedState!==null?Q._visibility&2?Ws(g,b,N,j,p):wo(g,b):(Q._visibility|=2,Ws(g,b,N,j,p)),p&&G&2048&&Yf(b.alternate,b);break;case 24:Ws(g,b,N,j,p),p&&G&2048&&Zf(b.alternate,b);break;default:Ws(g,b,N,j,p)}r=r.sibling}}function wo(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,d=r,p=d.flags;switch(d.tag){case 22:wo(l,d),p&2048&&Yf(d.alternate,d);break;case 24:wo(l,d),p&2048&&Zf(d.alternate,d);break;default:wo(l,d)}r=r.sibling}}var xo=8192;function er(i,r,l){if(i.subtreeFlags&xo)for(i=i.child;i!==null;)d_(i,r,l),i=i.sibling}function d_(i,r,l){switch(i.tag){case 26:er(i,r,l),i.flags&xo&&i.memoizedState!==null&&zN(l,Qn,i.memoizedState,i.memoizedProps);break;case 5:er(i,r,l);break;case 3:case 4:var d=Qn;Qn=ju(i.stateNode.containerInfo),er(i,r,l),Qn=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=xo,xo=16777216,er(i,r,l),xo=d):er(i,r,l));break;default:er(i,r,l)}}function f_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Eo(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];$t=d,m_(d,i)}f_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)h_(i),i=i.sibling}function h_(i){switch(i.tag){case 0:case 11:case 15:Eo(i),i.flags&2048&&ui(9,i,i.return);break;case 3:Eo(i);break;case 12:Eo(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,bu(i)):Eo(i);break;default:Eo(i)}}function bu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];$t=d,m_(d,i)}f_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ui(8,r,r.return),bu(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,bu(r));break;default:bu(r)}i=i.sibling}}function m_(i,r){for(;$t!==null;){var l=$t;switch(l.tag){case 0:case 11:case 15:ui(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:so(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,$t=d;else e:for(l=i;$t!==null;){d=$t;var p=d.sibling,g=d.return;if(i_(d),d===l){$t=null;break e}if(p!==null){p.return=g,$t=p;break e}$t=g}}}var tN={getCacheForType:function(i){var r=Ht(Nt),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return Ht(Nt).controller.signal}},nN=typeof WeakMap=="function"?WeakMap:Map,Ke=0,lt=null,ze=null,Ve=0,tt=0,An=null,ci=!1,tr=!1,Xf=!1,Va=0,wt=0,di=0,ls=0,Kf=0,Cn=0,nr=0,To=null,mn=null,Qf=!1,wu=0,p_=0,xu=1/0,Eu=null,fi=null,Mt=0,hi=null,ar=null,Ha=0,Jf=0,Wf=null,g_=null,So=0,eh=null;function Nn(){return(Ke&2)!==0&&Ve!==0?Ve&-Ve:L.T!==null?rh():ky()}function y_(){if(Cn===0)if((Ve&536870912)===0||Ge){var i=Il;Il<<=1,(Il&3932160)===0&&(Il=262144),Cn=i}else Cn=536870912;return i=Tn.current,i!==null&&(i.flags|=32),Cn}function pn(i,r,l){(i===lt&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(ir(i,0),mi(i,Ve,Cn,!1)),qr(i,l),((Ke&2)===0||i!==lt)&&(i===lt&&((Ke&2)===0&&(ls|=l),wt===4&&mi(i,Ve,Cn,!1)),ya(i))}function v_(i,r,l){if((Ke&6)!==0)throw Error(a(327));var d=!l&&(r&127)===0&&(r&i.expiredLanes)===0||Gr(i,r),p=d?sN(i,r):nh(i,r,!0),g=d;do{if(p===0){tr&&!d&&mi(i,r,0,!1);break}else{if(l=i.current.alternate,g&&!aN(l)){p=nh(i,r,!1),g=!1;continue}if(p===2){if(g=r,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var N=i;p=To;var j=N.current.memoizedState.isDehydrated;if(j&&(ir(N,b).flags|=256),b=nh(N,b,!1),b!==2){if(Xf&&!j){N.errorRecoveryDisabledLanes|=g,ls|=g,p=4;break e}g=mn,mn=p,g!==null&&(mn===null?mn=g:mn.push.apply(mn,g))}p=b}if(g=!1,p!==2)continue}}if(p===1){ir(i,0),mi(i,r,0,!0);break}e:{switch(d=i,g=p,g){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:mi(d,r,Cn,!ci);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(p=wu+300-_n(),10<p)){if(mi(d,r,Cn,!ci),jl(d,0,!0)!==0)break e;Ha=r,d.timeoutHandle=X_(__.bind(null,d,l,mn,Eu,Qf,r,Cn,ls,nr,ci,g,"Throttled",-0,0),p);break e}__(d,l,mn,Eu,Qf,r,Cn,ls,nr,ci,g,null,-0,0)}}break}while(!0);ya(i)}function __(i,r,l,d,p,g,b,N,j,G,Q,ne,F,Z){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},d_(r,g,ne);var ve=(g&62914560)===g?wu-_n():(g&4194048)===g?p_-_n():0;if(ve=BN(ne,ve),ve!==null){Ha=g,i.cancelPendingCommit=ve(C_.bind(null,i,r,g,l,d,p,b,N,j,Q,ne,null,F,Z)),mi(i,g,b,!G);return}}C_(i,r,g,l,d,p,b,N,j)}function aN(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var p=l[d],g=p.getSnapshot;p=p.value;try{if(!xn(g(),p))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mi(i,r,l,d){r&=~Kf,r&=~ls,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var p=r;0<p;){var g=31-wn(p),b=1<<g;d[g]=-1,p&=~b}l!==0&&Oy(i,l,r)}function Tu(){return(Ke&6)===0?(Ao(0),!1):!0}function th(){if(ze!==null){if(tt===0)var i=ze.return;else i=ze,ka=Wi=null,yf(i),Zs=null,oo=0,i=ze;for(;i!==null;)Kv(i.alternate,i),i=i.return;ze=null}}function ir(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,EN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ha=0,th(),lt=i,ze=l=Ra(i.current,null),Ve=r,tt=0,An=null,ci=!1,tr=Gr(i,r),Xf=!1,nr=Cn=Kf=ls=di=wt=0,mn=To=null,Qf=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var p=31-wn(d),g=1<<p;r|=i[p],d&=~g}return Va=r,ql(),l}function b_(i,r){De=null,L.H=go,r===Ys||r===Wl?(r=D0(),tt=3):r===sf?(r=D0(),tt=4):tt=r===jf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,ze===null&&(wt=1,hu(i,Pn(r,i.current)))}function w_(){var i=Tn.current;return i===null?!0:(Ve&4194048)===Ve?Bn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===Bn:!1}function x_(){var i=L.H;return L.H=go,i===null?go:i}function E_(){var i=L.A;return L.A=tN,i}function Su(){wt=4,ci||(Ve&4194048)!==Ve&&Tn.current!==null||(tr=!0),(di&134217727)===0&&(ls&134217727)===0||lt===null||mi(lt,Ve,Cn,!1)}function nh(i,r,l){var d=Ke;Ke|=2;var p=x_(),g=E_();(lt!==i||Ve!==r)&&(Eu=null,ir(i,r)),r=!1;var b=wt;e:do try{if(tt!==0&&ze!==null){var N=ze,j=An;switch(tt){case 8:th(),b=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(r=!0);var G=tt;if(tt=0,An=null,sr(i,N,j,G),l&&tr){b=0;break e}break;default:G=tt,tt=0,An=null,sr(i,N,j,G)}}iN(),b=wt;break}catch(Q){b_(i,Q)}while(!0);return r&&i.shellSuspendCounter++,ka=Wi=null,Ke=d,L.H=p,L.A=g,ze===null&&(lt=null,Ve=0,ql()),b}function iN(){for(;ze!==null;)T_(ze)}function sN(i,r){var l=Ke;Ke|=2;var d=x_(),p=E_();lt!==i||Ve!==r?(Eu=null,xu=_n()+500,ir(i,r)):tr=Gr(i,r);e:do try{if(tt!==0&&ze!==null){r=ze;var g=An;t:switch(tt){case 1:tt=0,An=null,sr(i,r,g,1);break;case 2:case 9:if(M0(g)){tt=0,An=null,S_(r);break}r=function(){tt!==2&&tt!==9||lt!==i||(tt=7),ya(i)},g.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:M0(g)?(tt=0,An=null,S_(r)):(tt=0,An=null,sr(i,r,g,7));break;case 5:var b=null;switch(ze.tag){case 26:b=ze.memoizedState;case 5:case 27:var N=ze;if(b?cb(b):N.stateNode.complete){tt=0,An=null;var j=N.sibling;if(j!==null)ze=j;else{var G=N.return;G!==null?(ze=G,Au(G)):ze=null}break t}}tt=0,An=null,sr(i,r,g,5);break;case 6:tt=0,An=null,sr(i,r,g,6);break;case 8:th(),wt=6;break e;default:throw Error(a(462))}}rN();break}catch(Q){b_(i,Q)}while(!0);return ka=Wi=null,L.H=d,L.A=p,Ke=l,ze!==null?0:(lt=null,Ve=0,ql(),wt)}function rN(){for(;ze!==null&&!O2();)T_(ze)}function T_(i){var r=Zv(i.alternate,i,Va);i.memoizedProps=i.pendingProps,r===null?Au(i):ze=r}function S_(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=Vv(l,r,r.pendingProps,r.type,void 0,Ve);break;case 11:r=Vv(l,r,r.pendingProps,r.type.render,r.ref,Ve);break;case 5:yf(r);default:Kv(l,r),r=ze=E0(r,Va),r=Zv(l,r,Va)}i.memoizedProps=i.pendingProps,r===null?Au(i):ze=r}function sr(i,r,l,d){ka=Wi=null,yf(r),Zs=null,oo=0;var p=r.return;try{if(ZC(i,p,r,l,Ve)){wt=1,hu(i,Pn(l,i.current)),ze=null;return}}catch(g){if(p!==null)throw ze=p,g;wt=1,hu(i,Pn(l,i.current)),ze=null;return}r.flags&32768?(Ge||d===1?i=!0:tr||(Ve&536870912)!==0?i=!1:(ci=i=!0,(d===2||d===9||d===3||d===6)&&(d=Tn.current,d!==null&&d.tag===13&&(d.flags|=16384))),A_(r,i)):Au(r)}function Au(i){var r=i;do{if((r.flags&32768)!==0){A_(r,ci);return}i=r.return;var l=QC(r.alternate,r,Va);if(l!==null){ze=l;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=i}while(r!==null);wt===0&&(wt=5)}function A_(i,r){do{var l=JC(i.alternate,i);if(l!==null){l.flags&=32767,ze=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){ze=i;return}ze=i=l}while(i!==null);wt=6,ze=null}function C_(i,r,l,d,p,g,b,N,j){i.cancelPendingCommit=null;do Cu();while(Mt!==0);if((Ke&6)!==0)throw Error(a(327));if(r!==null){if(r===i.current)throw Error(a(177));if(g=r.lanes|r.childLanes,g|=Hd,U2(i,l,g,b,N,j),i===lt&&(ze=lt=null,Ve=0),ar=r,hi=i,Ha=l,Jf=g,Wf=p,g_=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,cN(Ol,function(){return k_(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=L.T,L.T=null,p=q.p,q.p=2,b=Ke,Ke|=4;try{WC(i,r,l)}finally{Ke=b,q.p=p,L.T=d}}Mt=1,N_(),O_(),R_()}}function N_(){if(Mt===1){Mt=0;var i=hi,r=ar,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var d=q.p;q.p=2;var p=Ke;Ke|=4;try{l_(r,i);var g=mh,b=m0(i.containerInfo),N=g.focusedElem,j=g.selectionRange;if(b!==N&&N&&N.ownerDocument&&h0(N.ownerDocument.documentElement,N)){if(j!==null&&$d(N)){var G=j.start,Q=j.end;if(Q===void 0&&(Q=G),"selectionStart"in N)N.selectionStart=G,N.selectionEnd=Math.min(Q,N.value.length);else{var ne=N.ownerDocument||document,F=ne&&ne.defaultView||window;if(F.getSelection){var Z=F.getSelection(),ve=N.textContent.length,Oe=Math.min(j.start,ve),ot=j.end===void 0?Oe:Math.min(j.end,ve);!Z.extend&&Oe>ot&&(b=ot,ot=Oe,Oe=b);var z=f0(N,Oe),$=f0(N,ot);if(z&&$&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==$.node||Z.focusOffset!==$.offset)){var H=ne.createRange();H.setStart(z.node,z.offset),Z.removeAllRanges(),Oe>ot?(Z.addRange(H),Z.extend($.node,$.offset)):(H.setEnd($.node,$.offset),Z.addRange(H))}}}}for(ne=[],Z=N;Z=Z.parentNode;)Z.nodeType===1&&ne.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ne.length;N++){var ee=ne[N];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Uu=!!hh,mh=hh=null}finally{Ke=p,q.p=d,L.T=l}}i.current=r,Mt=2}}function O_(){if(Mt===2){Mt=0;var i=hi,r=ar,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var d=q.p;q.p=2;var p=Ke;Ke|=4;try{a_(i,r.alternate,r)}finally{Ke=p,q.p=d,L.T=l}}Mt=3}}function R_(){if(Mt===4||Mt===3){Mt=0,R2();var i=hi,r=ar,l=Ha,d=g_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Mt=5:(Mt=0,ar=hi=null,I_(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(fi=null),_d(l),r=r.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Hr,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=L.T,p=q.p,q.p=2,L.T=null;try{for(var g=i.onRecoverableError,b=0;b<d.length;b++){var N=d[b];g(N.value,{componentStack:N.stack})}}finally{L.T=r,q.p=p}}(Ha&3)!==0&&Cu(),ya(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===eh?So++:(So=0,eh=i):So=0,Ao(0)}}function I_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,so(r)))}function Cu(){return N_(),O_(),R_(),k_()}function k_(){if(Mt!==5)return!1;var i=hi,r=Jf;Jf=0;var l=_d(Ha),d=L.T,p=q.p;try{q.p=32>l?32:l,L.T=null,l=Wf,Wf=null;var g=hi,b=Ha;if(Mt=0,ar=hi=null,Ha=0,(Ke&6)!==0)throw Error(a(331));var N=Ke;if(Ke|=4,h_(g.current),c_(g,g.current,b,l),Ke=N,Ao(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Hr,g)}catch{}return!0}finally{q.p=p,L.T=d,I_(i,r)}}function j_(i,r,l){r=Pn(l,r),r=kf(i.stateNode,r,2),i=ri(i,r,2),i!==null&&(qr(i,2),ya(i))}function nt(i,r,l){if(i.tag===3)j_(i,i,l);else for(;r!==null;){if(r.tag===3){j_(r,i,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(fi===null||!fi.has(d))){i=Pn(l,i),l=Mv(2),d=ri(r,l,2),d!==null&&(Lv(l,d,r,i),qr(d,2),ya(d));break}}r=r.return}}function ah(i,r,l){var d=i.pingCache;if(d===null){d=i.pingCache=new nN;var p=new Set;d.set(r,p)}else p=d.get(r),p===void 0&&(p=new Set,d.set(r,p));p.has(l)||(Xf=!0,p.add(l),i=oN.bind(null,i,r,l),r.then(i,i))}function oN(i,r,l){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,lt===i&&(Ve&l)===l&&(wt===4||wt===3&&(Ve&62914560)===Ve&&300>_n()-wu?(Ke&2)===0&&ir(i,0):Kf|=l,nr===Ve&&(nr=0)),ya(i)}function M_(i,r){r===0&&(r=Ny()),i=Ki(i,r),i!==null&&(qr(i,r),ya(i))}function lN(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),M_(i,l)}function uN(i,r){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(r),M_(i,l)}function cN(i,r){return Ct(i,r)}var Nu=null,rr=null,ih=!1,Ou=!1,sh=!1,pi=0;function ya(i){i!==rr&&i.next===null&&(rr===null?Nu=rr=i:rr=rr.next=i),Ou=!0,ih||(ih=!0,fN())}function Ao(i,r){if(!sh&&Ou){sh=!0;do for(var l=!1,d=Nu;d!==null;){if(i!==0){var p=d.pendingLanes;if(p===0)var g=0;else{var b=d.suspendedLanes,N=d.pingedLanes;g=(1<<31-wn(42|i)+1)-1,g&=p&~(b&~N),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,$_(d,g))}else g=Ve,g=jl(d,d===lt?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(g&3)===0||Gr(d,g)||(l=!0,$_(d,g));d=d.next}while(l);sh=!1}}function dN(){L_()}function L_(){Ou=ih=!1;var i=0;pi!==0&&xN()&&(i=pi);for(var r=_n(),l=null,d=Nu;d!==null;){var p=d.next,g=D_(d,r);g===0?(d.next=null,l===null?Nu=p:l.next=p,p===null&&(rr=l)):(l=d,(i!==0||(g&3)!==0)&&(Ou=!0)),d=p}Mt!==0&&Mt!==5||Ao(i),pi!==0&&(pi=0)}function D_(i,r){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-wn(g),N=1<<b,j=p[b];j===-1?((N&l)===0||(N&d)!==0)&&(p[b]=$2(N,r)):j<=r&&(i.expiredLanes|=N),g&=~N}if(r=lt,l=Ve,l=jl(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===r&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&As(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Gr(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(d!==null&&As(d),_d(l)){case 2:case 8:l=Ay;break;case 32:l=Ol;break;case 268435456:l=Cy;break;default:l=Ol}return d=P_.bind(null,i),l=Ct(l,d),i.callbackPriority=r,i.callbackNode=l,r}return d!==null&&d!==null&&As(d),i.callbackPriority=2,i.callbackNode=null,2}function P_(i,r){if(Mt!==0&&Mt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Cu()&&i.callbackNode!==l)return null;var d=Ve;return d=jl(i,i===lt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(v_(i,d,r),D_(i,_n()),i.callbackNode!=null&&i.callbackNode===l?P_.bind(null,i):null)}function $_(i,r){if(Cu())return null;v_(i,r,!0)}function fN(){TN(function(){(Ke&6)!==0?Ct(Sy,dN):L_()})}function rh(){if(pi===0){var i=qs;i===0&&(i=Rl,Rl<<=1,(Rl&261888)===0&&(Rl=256)),pi=i}return pi}function U_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Pl(""+i)}function z_(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function hN(i,r,l,d,p){if(r==="submit"&&l&&l.stateNode===p){var g=U_((p[un]||null).action),b=d.submitter;b&&(r=(r=b[un]||null)?U_(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var N=new Bl("action","action",null,d,p);i.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(pi!==0){var j=b?z_(p,b):new FormData(p);Af(l,{pending:!0,data:j,method:p.method,action:g},null,j)}}else typeof g=="function"&&(N.preventDefault(),j=b?z_(p,b):new FormData(p),Af(l,{pending:!0,data:j,method:p.method,action:g},g,j))},currentTarget:p}]})}}for(var oh=0;oh<Vd.length;oh++){var lh=Vd[oh],mN=lh.toLowerCase(),pN=lh[0].toUpperCase()+lh.slice(1);Kn(mN,"on"+pN)}Kn(y0,"onAnimationEnd"),Kn(v0,"onAnimationIteration"),Kn(_0,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(IC,"onTransitionRun"),Kn(kC,"onTransitionStart"),Kn(jC,"onTransitionCancel"),Kn(b0,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Co));function B_(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var g=void 0;if(r)for(var b=d.length-1;0<=b;b--){var N=d[b],j=N.instance,G=N.currentTarget;if(N=N.listener,j!==g&&p.isPropagationStopped())break e;g=N,p.currentTarget=G;try{g(p)}catch(Q){Gl(Q)}p.currentTarget=null,g=j}else for(b=0;b<d.length;b++){if(N=d[b],j=N.instance,G=N.currentTarget,N=N.listener,j!==g&&p.isPropagationStopped())break e;g=N,p.currentTarget=G;try{g(p)}catch(Q){Gl(Q)}p.currentTarget=null,g=j}}}}function Be(i,r){var l=r[bd];l===void 0&&(l=r[bd]=new Set);var d=i+"__bubble";l.has(d)||(V_(r,i,2,!1),l.add(d))}function uh(i,r,l){var d=0;r&&(d|=4),V_(l,i,d,r)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function ch(i){if(!i[Ru]){i[Ru]=!0,Ly.forEach(function(l){l!=="selectionchange"&&(gN.has(l)||uh(l,!1,i),uh(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Ru]||(r[Ru]=!0,uh("selectionchange",!1,r))}}function V_(i,r,l,d){switch(yb(r)){case 2:var p=GN;break;case 8:p=qN;break;default:p=Sh}l=p.bind(null,r,l,i),p=void 0,!Od||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(r,l,{capture:!0,passive:p}):i.addEventListener(r,l,!0):p!==void 0?i.addEventListener(r,l,{passive:p}):i.addEventListener(r,l,!1)}function dh(i,r,l,d,p){var g=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var N=d.stateNode.containerInfo;if(N===p)break;if(b===4)for(b=d.return;b!==null;){var j=b.tag;if((j===3||j===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;N!==null;){if(b=Ns(N),b===null)return;if(j=b.tag,j===5||j===6||j===26||j===27){d=g=b;continue e}N=N.parentNode}}d=d.return}Yy(function(){var G=g,Q=Cd(l),ne=[];e:{var F=w0.get(i);if(F!==void 0){var Z=Bl,ve=i;switch(i){case"keypress":if(Ul(l)===0)break e;case"keydown":case"keyup":Z=uC;break;case"focusin":ve="focus",Z=jd;break;case"focusout":ve="blur",Z=jd;break;case"beforeblur":case"afterblur":Z=jd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Q2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=fC;break;case y0:case v0:case _0:Z=eC;break;case b0:Z=mC;break;case"scroll":case"scrollend":Z=X2;break;case"wheel":Z=gC;break;case"copy":case"cut":case"paste":Z=nC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Jy;break;case"toggle":case"beforetoggle":Z=vC}var Oe=(r&4)!==0,ot=!Oe&&(i==="scroll"||i==="scrollend"),z=Oe?F!==null?F+"Capture":null:F;Oe=[];for(var $=G,H;$!==null;){var ee=$;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||z===null||(ee=Zr($,z),ee!=null&&Oe.push(No($,ee,H))),ot)break;$=$.return}0<Oe.length&&(F=new Z(F,ve,null,l,Q),ne.push({event:F,listeners:Oe}))}}if((r&7)===0){e:{if(F=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",F&&l!==Ad&&(ve=l.relatedTarget||l.fromElement)&&(Ns(ve)||ve[Cs]))break e;if((Z||F)&&(F=Q.window===Q?Q:(F=Q.ownerDocument)?F.defaultView||F.parentWindow:window,Z?(ve=l.relatedTarget||l.toElement,Z=G,ve=ve?Ns(ve):null,ve!==null&&(ot=o(ve),Oe=ve.tag,ve!==ot||Oe!==5&&Oe!==27&&Oe!==6)&&(ve=null)):(Z=null,ve=G),Z!==ve)){if(Oe=Ky,ee="onMouseLeave",z="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=Jy,ee="onPointerLeave",z="onPointerEnter",$="pointer"),ot=Z==null?F:Yr(Z),H=ve==null?F:Yr(ve),F=new Oe(ee,$+"leave",Z,l,Q),F.target=ot,F.relatedTarget=H,ee=null,Ns(Q)===G&&(Oe=new Oe(z,$+"enter",ve,l,Q),Oe.target=H,Oe.relatedTarget=ot,ee=Oe),ot=ee,Z&&ve)t:{for(Oe=yN,z=Z,$=ve,H=0,ee=z;ee;ee=Oe(ee))H++;ee=0;for(var Ce=$;Ce;Ce=Oe(Ce))ee++;for(;0<H-ee;)z=Oe(z),H--;for(;0<ee-H;)$=Oe($),ee--;for(;H--;){if(z===$||$!==null&&z===$.alternate){Oe=z;break t}z=Oe(z),$=Oe($)}Oe=null}else Oe=null;Z!==null&&H_(ne,F,Z,Oe,!1),ve!==null&&ot!==null&&H_(ne,ot,ve,Oe,!0)}}e:{if(F=G?Yr(G):window,Z=F.nodeName&&F.nodeName.toLowerCase(),Z==="select"||Z==="input"&&F.type==="file")var Fe=r0;else if(i0(F))if(o0)Fe=NC;else{Fe=AC;var Ee=SC}else Z=F.nodeName,!Z||Z.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?G&&Sd(G.elementType)&&(Fe=r0):Fe=CC;if(Fe&&(Fe=Fe(i,G))){s0(ne,Fe,l,Q);break e}Ee&&Ee(i,F,G),i==="focusout"&&G&&F.type==="number"&&G.memoizedProps.value!=null&&Td(F,"number",F.value)}switch(Ee=G?Yr(G):window,i){case"focusin":(i0(Ee)||Ee.contentEditable==="true")&&(Ps=Ee,Ud=G,no=null);break;case"focusout":no=Ud=Ps=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,p0(ne,l,Q);break;case"selectionchange":if(RC)break;case"keydown":case"keyup":p0(ne,l,Q)}var Pe;if(Ld)e:{switch(i){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Ds?n0(i,l)&&(He="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&(Wy&&l.locale!=="ko"&&(Ds||He!=="onCompositionStart"?He==="onCompositionEnd"&&Ds&&(Pe=Zy()):(Wa=Q,Rd="value"in Wa?Wa.value:Wa.textContent,Ds=!0)),Ee=Iu(G,He),0<Ee.length&&(He=new Qy(He,i,null,l,Q),ne.push({event:He,listeners:Ee}),Pe?He.data=Pe:(Pe=a0(l),Pe!==null&&(He.data=Pe)))),(Pe=bC?wC(i,l):xC(i,l))&&(He=Iu(G,"onBeforeInput"),0<He.length&&(Ee=new Qy("onBeforeInput","beforeinput",null,l,Q),ne.push({event:Ee,listeners:He}),Ee.data=Pe)),hN(ne,i,G,l,Q)}B_(ne,r)})}function No(i,r,l){return{instance:i,listener:r,currentTarget:l}}function Iu(i,r){for(var l=r+"Capture",d=[];i!==null;){var p=i,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Zr(i,l),p!=null&&d.unshift(No(i,p,g)),p=Zr(i,r),p!=null&&d.push(No(i,p,g))),i.tag===3)return d;i=i.return}return[]}function yN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function H_(i,r,l,d,p){for(var g=r._reactName,b=[];l!==null&&l!==d;){var N=l,j=N.alternate,G=N.stateNode;if(N=N.tag,j!==null&&j===d)break;N!==5&&N!==26&&N!==27||G===null||(j=G,p?(G=Zr(l,g),G!=null&&b.unshift(No(l,G,j))):p||(G=Zr(l,g),G!=null&&b.push(No(l,G,j)))),l=l.return}b.length!==0&&i.push({event:r,listeners:b})}var vN=/\r\n?/g,_N=/\u0000|\uFFFD/g;function G_(i){return(typeof i=="string"?i:""+i).replace(vN,`
`).replace(_N,"")}function q_(i,r){return r=G_(r),G_(i)===r}function rt(i,r,l,d,p,g){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||js(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&js(i,""+d);break;case"className":Ll(i,"class",d);break;case"tabIndex":Ll(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ll(i,l,d);break;case"style":qy(i,d,g);break;case"data":if(r!=="object"){Ll(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Pl(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(r!=="input"&&rt(i,r,"name",p.name,p,null),rt(i,r,"formEncType",p.formEncType,p,null),rt(i,r,"formMethod",p.formMethod,p,null),rt(i,r,"formTarget",p.formTarget,p,null)):(rt(i,r,"encType",p.encType,p,null),rt(i,r,"method",p.method,p,null),rt(i,r,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Pl(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Na);break;case"onScroll":d!=null&&Be("scroll",i);break;case"onScrollEnd":d!=null&&Be("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(a(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=Pl(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Be("beforetoggle",i),Be("toggle",i),Ml(i,"popover",d);break;case"xlinkActuate":Ca(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ca(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ca(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ca(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ca(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ca(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ca(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ca(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ca(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ml(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Y2.get(l)||l,Ml(i,l,d))}}function fh(i,r,l,d,p,g){switch(l){case"style":qy(i,d,g);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(a(60));i.innerHTML=l}}break;case"children":typeof d=="string"?js(i,d):(typeof d=="number"||typeof d=="bigint")&&js(i,""+d);break;case"onScroll":d!=null&&Be("scroll",i);break;case"onScrollEnd":d!=null&&Be("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dy.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),r=l.slice(2,p?l.length-7:void 0),g=i[un]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(r,g,p),typeof d=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,d,p);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):Ml(i,l,d)}}}function qt(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",i),Be("load",i);var d=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:rt(i,r,g,b,l,null)}}p&&rt(i,r,"srcSet",l.srcSet,l,null),d&&rt(i,r,"src",l.src,l,null);return;case"input":Be("invalid",i);var N=g=b=p=null,j=null,G=null;for(d in l)if(l.hasOwnProperty(d)){var Q=l[d];if(Q!=null)switch(d){case"name":p=Q;break;case"type":b=Q;break;case"checked":j=Q;break;case"defaultChecked":G=Q;break;case"value":g=Q;break;case"defaultValue":N=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,r));break;default:rt(i,r,d,Q,l,null)}}By(i,g,N,j,G,b,p,!1);return;case"select":Be("invalid",i),d=b=g=null;for(p in l)if(l.hasOwnProperty(p)&&(N=l[p],N!=null))switch(p){case"value":g=N;break;case"defaultValue":b=N;break;case"multiple":d=N;default:rt(i,r,p,N,l,null)}r=g,l=b,i.multiple=!!d,r!=null?ks(i,!!d,r,!1):l!=null&&ks(i,!!d,l,!0);return;case"textarea":Be("invalid",i),g=p=d=null;for(b in l)if(l.hasOwnProperty(b)&&(N=l[b],N!=null))switch(b){case"value":d=N;break;case"defaultValue":p=N;break;case"children":g=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:rt(i,r,b,N,l,null)}Hy(i,d,p,g);return;case"option":for(j in l)if(l.hasOwnProperty(j)&&(d=l[j],d!=null))switch(j){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:rt(i,r,j,d,l,null)}return;case"dialog":Be("beforetoggle",i),Be("toggle",i),Be("cancel",i),Be("close",i);break;case"iframe":case"object":Be("load",i);break;case"video":case"audio":for(d=0;d<Co.length;d++)Be(Co[d],i);break;case"image":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"embed":case"source":case"link":Be("error",i),Be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(d=l[G],d!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:rt(i,r,G,d,l,null)}return;default:if(Sd(r)){for(Q in l)l.hasOwnProperty(Q)&&(d=l[Q],d!==void 0&&fh(i,r,Q,d,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(d=l[N],d!=null&&rt(i,r,N,d,l,null))}function bN(i,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,b=null,N=null,j=null,G=null,Q=null;for(Z in l){var ne=l[Z];if(l.hasOwnProperty(Z)&&ne!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=ne;default:d.hasOwnProperty(Z)||rt(i,r,Z,null,d,ne)}}for(var F in d){var Z=d[F];if(ne=l[F],d.hasOwnProperty(F)&&(Z!=null||ne!=null))switch(F){case"type":g=Z;break;case"name":p=Z;break;case"checked":G=Z;break;case"defaultChecked":Q=Z;break;case"value":b=Z;break;case"defaultValue":N=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,r));break;default:Z!==ne&&rt(i,r,F,Z,d,ne)}}Ed(i,b,N,j,G,Q,g,p);return;case"select":Z=b=N=F=null;for(g in l)if(j=l[g],l.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":Z=j;default:d.hasOwnProperty(g)||rt(i,r,g,null,d,j)}for(p in d)if(g=d[p],j=l[p],d.hasOwnProperty(p)&&(g!=null||j!=null))switch(p){case"value":F=g;break;case"defaultValue":N=g;break;case"multiple":b=g;default:g!==j&&rt(i,r,p,g,d,j)}r=N,l=b,d=Z,F!=null?ks(i,!!l,F,!1):!!d!=!!l&&(r!=null?ks(i,!!l,r,!0):ks(i,!!l,l?[]:"",!1));return;case"textarea":Z=F=null;for(N in l)if(p=l[N],l.hasOwnProperty(N)&&p!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:rt(i,r,N,null,d,p)}for(b in d)if(p=d[b],g=l[b],d.hasOwnProperty(b)&&(p!=null||g!=null))switch(b){case"value":F=p;break;case"defaultValue":Z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(a(91));break;default:p!==g&&rt(i,r,b,p,d,g)}Vy(i,F,Z);return;case"option":for(var ve in l)if(F=l[ve],l.hasOwnProperty(ve)&&F!=null&&!d.hasOwnProperty(ve))switch(ve){case"selected":i.selected=!1;break;default:rt(i,r,ve,null,d,F)}for(j in d)if(F=d[j],Z=l[j],d.hasOwnProperty(j)&&F!==Z&&(F!=null||Z!=null))switch(j){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:rt(i,r,j,F,d,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in l)F=l[Oe],l.hasOwnProperty(Oe)&&F!=null&&!d.hasOwnProperty(Oe)&&rt(i,r,Oe,null,d,F);for(G in d)if(F=d[G],Z=l[G],d.hasOwnProperty(G)&&F!==Z&&(F!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,r));break;default:rt(i,r,G,F,d,Z)}return;default:if(Sd(r)){for(var ot in l)F=l[ot],l.hasOwnProperty(ot)&&F!==void 0&&!d.hasOwnProperty(ot)&&fh(i,r,ot,void 0,d,F);for(Q in d)F=d[Q],Z=l[Q],!d.hasOwnProperty(Q)||F===Z||F===void 0&&Z===void 0||fh(i,r,Q,F,d,Z);return}}for(var z in l)F=l[z],l.hasOwnProperty(z)&&F!=null&&!d.hasOwnProperty(z)&&rt(i,r,z,null,d,F);for(ne in d)F=d[ne],Z=l[ne],!d.hasOwnProperty(ne)||F===Z||F==null&&Z==null||rt(i,r,ne,F,d,Z)}function F_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var p=l[d],g=p.transferSize,b=p.initiatorType,N=p.duration;if(g&&N&&F_(b)){for(b=0,N=p.responseEnd,d+=1;d<l.length;d++){var j=l[d],G=j.startTime;if(G>N)break;var Q=j.transferSize,ne=j.initiatorType;Q&&F_(ne)&&(j=j.responseEnd,b+=Q*(j<N?1:(N-G)/(j-G)))}if(--d,r+=8*(g+b)/(p.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var hh=null,mh=null;function ku(i){return i.nodeType===9?i:i.ownerDocument}function Y_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function ph(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gh=null;function xN(){var i=window.event;return i&&i.type==="popstate"?i===gh?!1:(gh=i,!0):(gh=null,!1)}var X_=typeof setTimeout=="function"?setTimeout:void 0,EN=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,TN=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(i){return K_.resolve(null).then(i).catch(SN)}:X_;function SN(i){setTimeout(function(){throw i})}function gi(i){return i==="head"}function Q_(i,r){var l=r,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(p),cr(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Oo(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Oo(l);for(var g=l.firstChild;g;){var b=g.nextSibling,N=g.nodeName;g[Fr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=b}}else l==="body"&&Oo(i.ownerDocument.body);l=p}while(l);cr(r)}function J_(i,r){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function yh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":yh(l),wd(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function AN(i,r,l,d){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Fr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Vn(i.nextSibling),i===null)break}return null}function CN(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Vn(i.nextSibling),i===null))return null;return i}function W_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Vn(i.nextSibling),i===null))return null;return i}function vh(i){return i.data==="$?"||i.data==="$~"}function _h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function NN(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Vn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var bh=null;function eb(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return Vn(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function tb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function nb(i,r,l){switch(r=ku(l),i){case"html":if(i=r.documentElement,!i)throw Error(a(452));return i;case"head":if(i=r.head,!i)throw Error(a(453));return i;case"body":if(i=r.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Oo(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);wd(i)}var Hn=new Map,ab=new Set;function ju(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ga=q.d;q.d={f:ON,r:RN,D:IN,C:kN,L:jN,m:MN,X:DN,S:LN,M:PN};function ON(){var i=Ga.f(),r=Tu();return i||r}function RN(i){var r=Os(i);r!==null&&r.tag===5&&r.type==="form"?bv(r):Ga.r(i)}var or=typeof document>"u"?null:document;function ib(i,r,l){var d=or;if(d&&typeof r=="string"&&r){var p=Ln(r);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),ab.has(p)||(ab.add(p),i={rel:i,crossOrigin:l,href:r},d.querySelector(p)===null&&(r=d.createElement("link"),qt(r,"link",i),Pt(r),d.head.appendChild(r)))}}function IN(i){Ga.D(i),ib("dns-prefetch",i,null)}function kN(i,r){Ga.C(i,r),ib("preconnect",i,r)}function jN(i,r,l){Ga.L(i,r,l);var d=or;if(d&&i&&r){var p='link[rel="preload"][as="'+Ln(r)+'"]';r==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Ln(l.imageSizes)+'"]')):p+='[href="'+Ln(i)+'"]';var g=p;switch(r){case"style":g=lr(i);break;case"script":g=ur(i)}Hn.has(g)||(i=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Hn.set(g,i),d.querySelector(p)!==null||r==="style"&&d.querySelector(Ro(g))||r==="script"&&d.querySelector(Io(g))||(r=d.createElement("link"),qt(r,"link",i),Pt(r),d.head.appendChild(r)))}}function MN(i,r){Ga.m(i,r);var l=or;if(l&&i){var d=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+Ln(d)+'"][href="'+Ln(i)+'"]',g=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ur(i)}if(!Hn.has(g)&&(i=y({rel:"modulepreload",href:i},r),Hn.set(g,i),l.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Io(g)))return}d=l.createElement("link"),qt(d,"link",i),Pt(d),l.head.appendChild(d)}}}function LN(i,r,l){Ga.S(i,r,l);var d=or;if(d&&i){var p=Rs(d).hoistableStyles,g=lr(i);r=r||"default";var b=p.get(g);if(!b){var N={loading:0,preload:null};if(b=d.querySelector(Ro(g)))N.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Hn.get(g))&&wh(i,l);var j=b=d.createElement("link");Pt(j),qt(j,"link",i),j._p=new Promise(function(G,Q){j.onload=G,j.onerror=Q}),j.addEventListener("load",function(){N.loading|=1}),j.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Mu(b,r,d)}b={type:"stylesheet",instance:b,count:1,state:N},p.set(g,b)}}}function DN(i,r){Ga.X(i,r);var l=or;if(l&&i){var d=Rs(l).hoistableScripts,p=ur(i),g=d.get(p);g||(g=l.querySelector(Io(p)),g||(i=y({src:i,async:!0},r),(r=Hn.get(p))&&xh(i,r),g=l.createElement("script"),Pt(g),qt(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function PN(i,r){Ga.M(i,r);var l=or;if(l&&i){var d=Rs(l).hoistableScripts,p=ur(i),g=d.get(p);g||(g=l.querySelector(Io(p)),g||(i=y({src:i,async:!0,type:"module"},r),(r=Hn.get(p))&&xh(i,r),g=l.createElement("script"),Pt(g),qt(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function sb(i,r,l,d){var p=(p=S.current)?ju(p):null;if(!p)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=lr(l.href),l=Rs(p).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=lr(l.href);var g=Rs(p).hoistableStyles,b=g.get(i);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=p.querySelector(Ro(i)))&&!g._p&&(b.instance=g,b.state.loading=5),Hn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Hn.set(i,l),g||$N(p,i,l,b.state))),r&&d===null)throw Error(a(528,""));return b}if(r&&d!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ur(l),l=Rs(p).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function lr(i){return'href="'+Ln(i)+'"'}function Ro(i){return'link[rel="stylesheet"]['+i+"]"}function rb(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function $N(i,r,l,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),qt(r,"link",l),Pt(r),i.head.appendChild(r))}function ur(i){return'[src="'+Ln(i)+'"]'}function Io(i){return"script[async]"+i}function ob(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+Ln(l.href)+'"]');if(d)return r.instance=d,Pt(d),d;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Pt(d),qt(d,"style",p),Mu(d,l.precedence,i),r.instance=d;case"stylesheet":p=lr(l.href);var g=i.querySelector(Ro(p));if(g)return r.state.loading|=4,r.instance=g,Pt(g),g;d=rb(l),(p=Hn.get(p))&&wh(d,p),g=(i.ownerDocument||i).createElement("link"),Pt(g);var b=g;return b._p=new Promise(function(N,j){b.onload=N,b.onerror=j}),qt(g,"link",d),r.state.loading|=4,Mu(g,l.precedence,i),r.instance=g;case"script":return g=ur(l.src),(p=i.querySelector(Io(g)))?(r.instance=p,Pt(p),p):(d=l,(p=Hn.get(g))&&(d=y({},l),xh(d,p)),i=i.ownerDocument||i,p=i.createElement("script"),Pt(p),qt(p,"link",d),i.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Mu(d,l.precedence,i));return r.instance}function Mu(i,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,g=p,b=0;b<d.length;b++){var N=d[b];if(N.dataset.precedence===r)g=N;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function wh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function xh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Lu=null;function lb(i,r,l){if(Lu===null){var d=new Map,p=Lu=new Map;p.set(l,d)}else p=Lu,d=p.get(l),d||(d=new Map,p.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var g=l[p];if(!(g[Fr]||g[Bt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=i+b;var N=d.get(b);N?N.push(g):d.set(b,[g])}}return d}function ub(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function UN(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function cb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function zN(i,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=lr(d.href),g=r.querySelector(Ro(p));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Du.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=g,Pt(g);return}g=r.ownerDocument||r,d=rb(d),(p=Hn.get(p))&&wh(d,p),g=g.createElement("link"),Pt(g);var b=g;b._p=new Promise(function(N,j){b.onload=N,b.onerror=j}),qt(g,"link",d),l.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Du.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var Eh=0;function BN(i,r){return i.stylesheets&&i.count===0&&$u(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&$u(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+r);0<i.imgBytes&&Eh===0&&(Eh=62500*wN());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&$u(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>Eh?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function Du(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Pu=null;function $u(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Pu=new Map,r.forEach(VN,i),Pu=null,Du.call(i))}function VN(i,r){if(!(r.state.loading&4)){var l=Pu.get(i);if(l)var d=l.get(null);else{l=new Map,Pu.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var b=p[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),d=b)}d&&l.set(null,d)}p=r.instance,b=p.getAttribute("data-precedence"),g=l.get(b)||d,g===d&&l.set(null,p),l.set(b,p),this.count++,d=Du.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),r.state.loading|=4}}var ko={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function HN(i,r,l,d,p,g,b,N,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.hiddenUpdates=yd(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function db(i,r,l,d,p,g,b,N,j,G,Q,ne){return i=new HN(i,r,l,b,j,G,Q,ne,N),r=1,g===!0&&(r|=24),g=En(3,null,null,r),i.current=g,g.stateNode=i,r=tf(),r.refCount++,i.pooledCache=r,r.refCount++,g.memoizedState={element:d,isDehydrated:l,cache:r},rf(g),i}function fb(i){return i?(i=zs,i):zs}function hb(i,r,l,d,p,g){p=fb(p),d.context===null?d.context=p:d.pendingContext=p,d=si(r),d.payload={element:l},g=g===void 0?null:g,g!==null&&(d.callback=g),l=ri(i,d,r),l!==null&&(pn(l,i,r),uo(l,i,r))}function mb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Th(i,r){mb(i,r),(i=i.alternate)&&mb(i,r)}function pb(i){if(i.tag===13||i.tag===31){var r=Ki(i,67108864);r!==null&&pn(r,i,67108864),Th(i,67108864)}}function gb(i){if(i.tag===13||i.tag===31){var r=Nn();r=vd(r);var l=Ki(i,r);l!==null&&pn(l,i,r),Th(i,r)}}var Uu=!0;function GN(i,r,l,d){var p=L.T;L.T=null;var g=q.p;try{q.p=2,Sh(i,r,l,d)}finally{q.p=g,L.T=p}}function qN(i,r,l,d){var p=L.T;L.T=null;var g=q.p;try{q.p=8,Sh(i,r,l,d)}finally{q.p=g,L.T=p}}function Sh(i,r,l,d){if(Uu){var p=Ah(d);if(p===null)dh(i,r,d,zu,l),vb(i,d);else if(YN(p,i,r,l,d))d.stopPropagation();else if(vb(i,d),r&4&&-1<FN.indexOf(i)){for(;p!==null;){var g=Os(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=qi(g.pendingLanes);if(b!==0){var N=g;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var j=1<<31-wn(b);N.entanglements[1]|=j,b&=~j}ya(g),(Ke&6)===0&&(xu=_n()+500,Ao(0))}}break;case 31:case 13:N=Ki(g,2),N!==null&&pn(N,g,2),Tu(),Th(g,2)}if(g=Ah(d),g===null&&dh(i,r,d,zu,l),g===p)break;p=g}p!==null&&d.stopPropagation()}else dh(i,r,d,null,l)}}function Ah(i){return i=Cd(i),Ch(i)}var zu=null;function Ch(i){if(zu=null,i=Ns(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=u(r),i!==null)return i;i=null}else if(l===31){if(i=c(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return zu=i,null}function yb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(I2()){case Sy:return 2;case Ay:return 8;case Ol:case k2:return 32;case Cy:return 268435456;default:return 32}default:return 32}}var Nh=!1,yi=null,vi=null,_i=null,jo=new Map,Mo=new Map,bi=[],FN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vb(i,r){switch(i){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(r.pointerId)}}function Lo(i,r,l,d,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},r!==null&&(r=Os(r),r!==null&&pb(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),i)}function YN(i,r,l,d,p){switch(r){case"focusin":return yi=Lo(yi,i,r,l,d,p),!0;case"dragenter":return vi=Lo(vi,i,r,l,d,p),!0;case"mouseover":return _i=Lo(_i,i,r,l,d,p),!0;case"pointerover":var g=p.pointerId;return jo.set(g,Lo(jo.get(g)||null,i,r,l,d,p)),!0;case"gotpointercapture":return g=p.pointerId,Mo.set(g,Lo(Mo.get(g)||null,i,r,l,d,p)),!0}return!1}function _b(i){var r=Ns(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){i.blockedOn=r,jy(i.priority,function(){gb(l)});return}}else if(r===31){if(r=c(l),r!==null){i.blockedOn=r,jy(i.priority,function(){gb(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Ah(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Ad=d,l.target.dispatchEvent(d),Ad=null}else return r=Os(l),r!==null&&pb(r),i.blockedOn=l,!1;r.shift()}return!0}function bb(i,r,l){Bu(i)&&l.delete(r)}function ZN(){Nh=!1,yi!==null&&Bu(yi)&&(yi=null),vi!==null&&Bu(vi)&&(vi=null),_i!==null&&Bu(_i)&&(_i=null),jo.forEach(bb),Mo.forEach(bb)}function Vu(i,r){i.blockedOn===r&&(i.blockedOn=null,Nh||(Nh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ZN)))}var Hu=null;function wb(i){Hu!==i&&(Hu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hu===i&&(Hu=null);for(var r=0;r<i.length;r+=3){var l=i[r],d=i[r+1],p=i[r+2];if(typeof d!="function"){if(Ch(d||l)===null)continue;break}var g=Os(l);g!==null&&(i.splice(r,3),r-=3,Af(g,{pending:!0,data:p,method:l.method,action:d},d,p))}}))}function cr(i){function r(j){return Vu(j,i)}yi!==null&&Vu(yi,i),vi!==null&&Vu(vi,i),_i!==null&&Vu(_i,i),jo.forEach(r),Mo.forEach(r);for(var l=0;l<bi.length;l++){var d=bi[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<bi.length&&(l=bi[0],l.blockedOn===null);)_b(l),l.blockedOn===null&&bi.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var p=l[d],g=l[d+1],b=p[un]||null;if(typeof g=="function")b||wb(l);else if(b){var N=null;if(g&&g.hasAttribute("formAction")){if(p=g,b=g[un]||null)N=b.formAction;else if(Ch(p)!==null)continue}else N=b.action;typeof N=="function"?l[d+1]=N:(l.splice(d,3),d-=3),wb(l)}}}function xb(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function r(){p!==null&&(p(),p=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),p!==null&&(p(),p=null)}}}function Oh(i){this._internalRoot=i}Gu.prototype.render=Oh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,d=Nn();hb(l,d,i,r,null,null)},Gu.prototype.unmount=Oh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;hb(i.current,2,null,i,null,null),Tu(),r[Cs]=null}};function Gu(i){this._internalRoot=i}Gu.prototype.unstable_scheduleHydration=function(i){if(i){var r=ky();i={blockedOn:null,target:i,priority:r};for(var l=0;l<bi.length&&r!==0&&r<bi[l].priority;l++);bi.splice(l,0,i),l===0&&_b(i)}};var Eb=e.version;if(Eb!=="19.2.4")throw Error(a(527,Eb,"19.2.4"));q.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=h(r),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var XN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{Hr=qu.inject(XN),bn=qu}catch{}}return Po.createRoot=function(i,r){if(!s(i))throw Error(a(299));var l=!1,d="",p=Rv,g=Iv,b=kv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=db(i,1,!1,null,null,l,d,null,p,g,b,xb),i[Cs]=r.current,ch(i),new Oh(r)},Po.hydrateRoot=function(i,r,l){if(!s(i))throw Error(a(299));var d=!1,p="",g=Rv,b=Iv,N=kv,j=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(j=l.formState)),r=db(i,1,!0,r,l??null,d,p,j,g,b,N,xb),r.context=fb(null),l=r.current,d=Nn(),d=vd(d),p=si(d),p.callback=null,ri(l,p,d),l=d,r.current.lanes=l,qr(r,l),ya(r),i[Cs]=r.current,ch(i),new Gu(r)},Po.version="19.2.4",Po}var jb;function oO(){if(jb)return kh.exports;jb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),kh.exports=rO(),kh.exports}var lO=oO();const wg=ae.createContext({});function ed(t){const e=ae.useRef(null);return e.current===null&&(e.current=t()),e.current}const aT=typeof window<"u",xg=aT?ae.useLayoutEffect:ae.useEffect,td=ae.createContext(null);function Eg(t,e){t.indexOf(e)===-1&&t.push(e)}function Nc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ta=(t,e,n)=>n>e?e:n<t?t:n;let Tg=()=>{};const Za={},iT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function sT(t){return typeof t=="object"&&t!==null}const rT=t=>/^0[^.\s]+$/u.test(t);function oT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fn=t=>t,uO=(t,e)=>n=>e(t(n)),bl=(...t)=>t.reduce(uO),il=(t,e,n)=>{const a=e-t;return a===0?1:(n-t)/a};class Sg{constructor(){this.subscriptions=[]}add(e){return Eg(this.subscriptions,e),()=>Nc(this.subscriptions,e)}notify(e,n,a){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,a);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const la=t=>t*1e3,qn=t=>t/1e3;function lT(t,e){return e?t*(1e3/e):0}const uT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cO=1e-7,dO=12;function fO(t,e,n,a,s){let o,u,c=0;do u=e+(n-e)/2,o=uT(u,a,s)-t,o>0?n=u:e=u;while(Math.abs(o)>cO&&++c<dO);return u}function wl(t,e,n,a){if(t===e&&n===a)return Fn;const s=o=>fO(o,0,1,t,n);return o=>o===0||o===1?o:uT(s(o),e,a)}const cT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,dT=t=>e=>1-t(1-e),fT=wl(.33,1.53,.69,.99),Ag=dT(fT),hT=cT(Ag),mT=t=>(t*=2)<1?.5*Ag(t):.5*(2-Math.pow(2,-10*(t-1))),Cg=t=>1-Math.sin(Math.acos(t)),pT=dT(Cg),gT=cT(Cg),hO=wl(.42,0,1,1),mO=wl(0,0,.58,1),yT=wl(.42,0,.58,1),pO=t=>Array.isArray(t)&&typeof t[0]!="number",vT=t=>Array.isArray(t)&&typeof t[0]=="number",gO={linear:Fn,easeIn:hO,easeInOut:yT,easeOut:mO,circIn:Cg,circInOut:gT,circOut:pT,backIn:Ag,backInOut:hT,backOut:fT,anticipate:mT},yO=t=>typeof t=="string",Mb=t=>{if(vT(t)){Tg(t.length===4);const[e,n,a,s]=t;return wl(e,n,a,s)}else if(yO(t))return gO[t];return t},Fu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function vO(t,e){let n=new Set,a=new Set,s=!1,o=!1;const u=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(m){u.has(m)&&(h.schedule(m),t()),m(c)}const h={schedule:(m,y=!1,v=!1)=>{const x=v&&s?n:a;return y&&u.add(m),x.has(m)||x.add(m),m},cancel:m=>{a.delete(m),u.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[n,a]=[a,n],n.forEach(f),n.clear(),s=!1,o&&(o=!1,h.process(m))}};return h}const _O=40;function _T(t,e){let n=!1,a=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Fu.reduce((R,U)=>(R[U]=vO(o),R),{}),{setup:c,read:f,resolveKeyframes:h,preUpdate:m,update:y,preRender:v,render:_,postRender:x}=u,w=()=>{const R=Za.useManualTiming?s.timestamp:performance.now();n=!1,Za.useManualTiming||(s.delta=a?1e3/60:Math.max(Math.min(R-s.timestamp,_O),1)),s.timestamp=R,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),m.process(s),y.process(s),v.process(s),_.process(s),x.process(s),s.isProcessing=!1,n&&e&&(a=!1,t(w))},C=()=>{n=!0,a=!0,s.isProcessing||t(w)};return{schedule:Fu.reduce((R,U)=>{const P=u[U];return R[U]=(Y,te=!1,O=!1)=>(n||C(),P.schedule(Y,te,O)),R},{}),cancel:R=>{for(let U=0;U<Fu.length;U++)u[Fu[U]].cancel(R)},state:s,steps:u}}const{schedule:ct,cancel:$i,state:Zt,steps:Dh}=_T(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fn,!0);let pc;function bO(){pc=void 0}const rn={now:()=>(pc===void 0&&rn.set(Zt.isProcessing||Za.useManualTiming?Zt.timestamp:performance.now()),pc),set:t=>{pc=t,queueMicrotask(bO)}},bT=t=>e=>typeof e=="string"&&e.startsWith(t),wT=bT("--"),wO=bT("var(--"),Ng=t=>wO(t)?xO.test(t.split("/*")[0].trim()):!1,xO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Lb(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Pr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sl={...Pr,transform:t=>Ta(0,1,t)},Yu={...Pr,default:1},Zo=t=>Math.round(t*1e5)/1e5,Og=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EO(t){return t==null}const TO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rg=(t,e)=>n=>!!(typeof n=="string"&&TO.test(n)&&n.startsWith(t)||e&&!EO(n)&&Object.prototype.hasOwnProperty.call(n,e)),xT=(t,e,n)=>a=>{if(typeof a!="string")return a;const[s,o,u,c]=a.match(Og);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},SO=t=>Ta(0,255,t),Ph={...Pr,transform:t=>Math.round(SO(t))},ms={test:Rg("rgb","red"),parse:xT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:a=1})=>"rgba("+Ph.transform(t)+", "+Ph.transform(e)+", "+Ph.transform(n)+", "+Zo(sl.transform(a))+")"};function AO(t){let e="",n="",a="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),a=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),a=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,a+=a,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:s?parseInt(s,16)/255:1}}const _p={test:Rg("#"),parse:AO,transform:ms.transform},xl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ti=xl("deg"),xa=xl("%"),be=xl("px"),CO=xl("vh"),NO=xl("vw"),Db={...xa,parse:t=>xa.parse(t)/100,transform:t=>xa.transform(t*100)},gr={test:Rg("hsl","hue"),parse:xT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:a=1})=>"hsla("+Math.round(t)+", "+xa.transform(Zo(e))+", "+xa.transform(Zo(n))+", "+Zo(sl.transform(a))+")"},kt={test:t=>ms.test(t)||_p.test(t)||gr.test(t),parse:t=>ms.test(t)?ms.parse(t):gr.test(t)?gr.parse(t):_p.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ms.transform(t):gr.transform(t),getAnimatableNone:t=>{const e=kt.parse(t);return e.alpha=0,kt.transform(e)}},OO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Og))==null?void 0:e.length)||0)+(((n=t.match(OO))==null?void 0:n.length)||0)>0}const ET="number",TT="color",IO="var",kO="var(",Pb="${}",jO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rl(t){const e=t.toString(),n=[],a={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(jO,f=>(kt.test(f)?(a.color.push(o),s.push(TT),n.push(kt.parse(f))):f.startsWith(kO)?(a.var.push(o),s.push(IO),n.push(f)):(a.number.push(o),s.push(ET),n.push(parseFloat(f))),++o,Pb)).split(Pb);return{values:n,split:c,indexes:a,types:s}}function ST(t){return rl(t).values}function AT(t){const{split:e,types:n}=rl(t),a=e.length;return s=>{let o="";for(let u=0;u<a;u++)if(o+=e[u],s[u]!==void 0){const c=n[u];c===ET?o+=Zo(s[u]):c===TT?o+=kt.transform(s[u]):o+=s[u]}return o}}const MO=t=>typeof t=="number"?0:kt.test(t)?kt.getAnimatableNone(t):t;function LO(t){const e=ST(t);return AT(t)(e.map(MO))}const ua={test:RO,parse:ST,createTransformer:AT,getAnimatableNone:LO};function $h(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function DO({hue:t,saturation:e,lightness:n,alpha:a}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=$h(f,c,t+1/3),o=$h(f,c,t),u=$h(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:a}}function Oc(t,e){return n=>n>0?e:t}const vt=(t,e,n)=>t+(e-t)*n,Uh=(t,e,n)=>{const a=t*t,s=n*(e*e-a)+a;return s<0?0:Math.sqrt(s)},PO=[_p,ms,gr],$O=t=>PO.find(e=>e.test(t));function $b(t){const e=$O(t);if(!e)return!1;let n=e.parse(t);return e===gr&&(n=DO(n)),n}const Ub=(t,e)=>{const n=$b(t),a=$b(e);if(!n||!a)return Oc(t,e);const s={...n};return o=>(s.red=Uh(n.red,a.red,o),s.green=Uh(n.green,a.green,o),s.blue=Uh(n.blue,a.blue,o),s.alpha=vt(n.alpha,a.alpha,o),ms.transform(s))},bp=new Set(["none","hidden"]);function UO(t,e){return bp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zO(t,e){return n=>vt(t,e,n)}function Ig(t){return typeof t=="number"?zO:typeof t=="string"?Ng(t)?Oc:kt.test(t)?Ub:HO:Array.isArray(t)?CT:typeof t=="object"?kt.test(t)?Ub:BO:Oc}function CT(t,e){const n=[...t],a=n.length,s=t.map((o,u)=>Ig(o)(o,e[u]));return o=>{for(let u=0;u<a;u++)n[u]=s[u](o);return n}}function BO(t,e){const n={...t,...e},a={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(a[s]=Ig(t[s])(t[s],e[s]));return s=>{for(const o in a)n[o]=a[o](s);return n}}function VO(t,e){const n=[],a={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],u=t.indexes[o][a[o]],c=t.values[u]??0;n[s]=c,a[o]++}return n}const HO=(t,e)=>{const n=ua.createTransformer(e),a=rl(t),s=rl(e);return a.indexes.var.length===s.indexes.var.length&&a.indexes.color.length===s.indexes.color.length&&a.indexes.number.length>=s.indexes.number.length?bp.has(t)&&!s.values.length||bp.has(e)&&!a.values.length?UO(t,e):bl(CT(VO(a,s),s.values),n):Oc(t,e)};function NT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?vt(t,e,n):Ig(t)(t,e)}const GO=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ct.update(e,n),stop:()=>$i(e),now:()=>Zt.isProcessing?Zt.timestamp:rn.now()}},OT=(t,e,n=10)=>{let a="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)a+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Rc=2e4;function kg(t){let e=0;const n=50;let a=t.next(e);for(;!a.done&&e<Rc;)e+=n,a=t.next(e);return e>=Rc?1/0:e}function qO(t,e=100,n){const a=n({...t,keyframes:[0,e]}),s=Math.min(kg(a),Rc);return{type:"keyframes",ease:o=>a.next(s*o).value/e,duration:qn(s)}}const FO=5;function RT(t,e,n){const a=Math.max(e-FO,0);return lT(n-t(a),e-a)}const xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zh=.001;function YO({duration:t=xt.duration,bounce:e=xt.bounce,velocity:n=xt.velocity,mass:a=xt.mass}){let s,o,u=1-e;u=Ta(xt.minDamping,xt.maxDamping,u),t=Ta(xt.minDuration,xt.maxDuration,qn(t)),u<1?(s=h=>{const m=h*u,y=m*t,v=m-n,_=wp(h,u),x=Math.exp(-y);return zh-v/_*x},o=h=>{const y=h*u*t,v=y*n+n,_=Math.pow(u,2)*Math.pow(h,2)*t,x=Math.exp(-y),w=wp(Math.pow(h,2),u);return(-s(h)+zh>0?-1:1)*((v-_)*x)/w}):(s=h=>{const m=Math.exp(-h*t),y=(h-n)*t+1;return-zh+m*y},o=h=>{const m=Math.exp(-h*t),y=(n-h)*(t*t);return m*y});const c=5/t,f=XO(s,o,c);if(t=la(t),isNaN(f))return{stiffness:xt.stiffness,damping:xt.damping,duration:t};{const h=Math.pow(f,2)*a;return{stiffness:h,damping:u*2*Math.sqrt(a*h),duration:t}}}const ZO=12;function XO(t,e,n){let a=n;for(let s=1;s<ZO;s++)a=a-t(a)/e(a);return a}function wp(t,e){return t*Math.sqrt(1-e*e)}const KO=["duration","bounce"],QO=["stiffness","damping","mass"];function zb(t,e){return e.some(n=>t[n]!==void 0)}function JO(t){let e={velocity:xt.velocity,stiffness:xt.stiffness,damping:xt.damping,mass:xt.mass,isResolvedFromDuration:!1,...t};if(!zb(t,QO)&&zb(t,KO))if(t.visualDuration){const n=t.visualDuration,a=2*Math.PI/(n*1.2),s=a*a,o=2*Ta(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:xt.mass,stiffness:s,damping:o}}else{const n=YO(t);e={...e,...n,mass:xt.mass},e.isResolvedFromDuration=!0}return e}function Ic(t=xt.visualDuration,e=xt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:a,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:m,duration:y,velocity:v,isResolvedFromDuration:_}=JO({...n,velocity:-qn(n.velocity||0)}),x=v||0,w=h/(2*Math.sqrt(f*m)),C=u-o,A=qn(Math.sqrt(f/m)),I=Math.abs(C)<5;a||(a=I?xt.restSpeed.granular:xt.restSpeed.default),s||(s=I?xt.restDelta.granular:xt.restDelta.default);let R;if(w<1){const P=wp(A,w);R=Y=>{const te=Math.exp(-w*A*Y);return u-te*((x+w*A*C)/P*Math.sin(P*Y)+C*Math.cos(P*Y))}}else if(w===1)R=P=>u-Math.exp(-A*P)*(C+(x+A*C)*P);else{const P=A*Math.sqrt(w*w-1);R=Y=>{const te=Math.exp(-w*A*Y),O=Math.min(P*Y,300);return u-te*((x+w*A*C)*Math.sinh(O)+P*C*Math.cosh(O))/P}}const U={calculatedDuration:_&&y||null,next:P=>{const Y=R(P);if(_)c.done=P>=y;else{let te=P===0?x:0;w<1&&(te=P===0?la(x):RT(R,P,Y));const O=Math.abs(te)<=a,pe=Math.abs(u-Y)<=s;c.done=O&&pe}return c.value=c.done?u:Y,c},toString:()=>{const P=Math.min(kg(U),Rc),Y=OT(te=>U.next(P*te).value,P,30);return P+"ms "+Y},toTransition:()=>{}};return U}Ic.applyToOptions=t=>{const e=qO(t,100,Ic);return t.ease=e.ease,t.duration=la(e.duration),t.type="keyframes",t};function xp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:a=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:c,max:f,restDelta:h=.5,restSpeed:m}){const y=t[0],v={done:!1,value:y},_=O=>c!==void 0&&O<c||f!==void 0&&O>f,x=O=>c===void 0?f:f===void 0||Math.abs(c-O)<Math.abs(f-O)?c:f;let w=n*e;const C=y+w,A=u===void 0?C:u(C);A!==C&&(w=A-y);const I=O=>-w*Math.exp(-O/a),R=O=>A+I(O),U=O=>{const pe=I(O),Ae=R(O);v.done=Math.abs(pe)<=h,v.value=v.done?A:Ae};let P,Y;const te=O=>{_(v.value)&&(P=O,Y=Ic({keyframes:[v.value,x(v.value)],velocity:RT(R,O,v.value),damping:s,stiffness:o,restDelta:h,restSpeed:m}))};return te(0),{calculatedDuration:null,next:O=>{let pe=!1;return!Y&&P===void 0&&(pe=!0,U(O),te(O)),P!==void 0&&O>=P?Y.next(O-P):(!pe&&U(O),v)}}}function WO(t,e,n){const a=[],s=n||Za.mix||NT,o=t.length-1;for(let u=0;u<o;u++){let c=s(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Fn:e;c=bl(f,c)}a.push(c)}return a}function eR(t,e,{clamp:n=!0,ease:a,mixer:s}={}){const o=t.length;if(Tg(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=WO(e,a,s),f=c.length,h=m=>{if(u&&m<t[0])return e[0];let y=0;if(f>1)for(;y<t.length-2&&!(m<t[y+1]);y++);const v=il(t[y],t[y+1],m);return c[y](v)};return n?m=>h(Ta(t[0],t[o-1],m)):h}function tR(t,e){const n=t[t.length-1];for(let a=1;a<=e;a++){const s=il(0,e,a);t.push(vt(n,1,s))}}function nR(t){const e=[0];return tR(e,t.length-1),e}function aR(t,e){return t.map(n=>n*e)}function iR(t,e){return t.map(()=>e||yT).splice(0,t.length-1)}function Xo({duration:t=300,keyframes:e,times:n,ease:a="easeInOut"}){const s=pO(a)?a.map(Mb):Mb(a),o={done:!1,value:e[0]},u=aR(n&&n.length===e.length?n:nR(e),t),c=eR(u,e,{ease:Array.isArray(s)?s:iR(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const sR=t=>t!==null;function jg(t,{repeat:e,repeatType:n="loop"},a,s=1){const o=t.filter(sR),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||a===void 0?o[c]:a}const rR={decay:xp,inertia:xp,tween:Xo,keyframes:Xo,spring:Ic};function IT(t){typeof t.type=="string"&&(t.type=rR[t.type])}class Mg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const oR=t=>t/100;class Lg extends Mg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,s;const{motionValue:n}=this.options;n&&n.updatedAt!==rn.now()&&this.tick(rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(a=this.options).onStop)==null||s.call(a))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;IT(e);const{type:n=Xo,repeat:a=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=e;let{keyframes:c}=e;const f=n||Xo;f!==Xo&&typeof c[0]!="number"&&(this.mixKeyframes=bl(oR,NT(c[0],c[1])),c=[0,100]);const h=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-u})),h.calculatedDuration===null&&(h.calculatedDuration=kg(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(a+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:a,totalDuration:s,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:m,repeat:y,repeatType:v,repeatDelay:_,type:x,onUpdate:w,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const A=this.currentTime-h*(this.playbackSpeed>=0?1:-1),I=this.playbackSpeed>=0?A<0:A>s;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let R=this.currentTime,U=a;if(y){const O=Math.min(this.currentTime,s)/c;let pe=Math.floor(O),Ae=O%1;!Ae&&O>=1&&(Ae=1),Ae===1&&pe--,pe=Math.min(pe,y+1),!!(pe%2)&&(v==="reverse"?(Ae=1-Ae,_&&(Ae-=_/c)):v==="mirror"&&(U=u)),R=Ta(0,1,Ae)*c}const P=I?{done:!1,value:m[0]}:U.next(R);o&&(P.value=o(P.value));let{done:Y}=P;!I&&f!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const te=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return te&&x!==xp&&(P.value=jg(m,this.options,C,this.speed)),w&&w(P.value),te&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return qn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qn(e)}get time(){return qn(this.currentTime)}set time(e){var n;e=la(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(rn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qn(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=GO,startTime:n}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),(o=(s=this.options).onPlay)==null||o.call(s);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=n??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function lR(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ps=t=>t*180/Math.PI,Ep=t=>{const e=ps(Math.atan2(t[1],t[0]));return Tp(e)},uR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ep,rotateZ:Ep,skewX:t=>ps(Math.atan(t[1])),skewY:t=>ps(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Tp=t=>(t=t%360,t<0&&(t+=360),t),Bb=Ep,Vb=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Hb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),cR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Vb,scaleY:Hb,scale:t=>(Vb(t)+Hb(t))/2,rotateX:t=>Tp(ps(Math.atan2(t[6],t[5]))),rotateY:t=>Tp(ps(Math.atan2(-t[2],t[0]))),rotateZ:Bb,rotate:Bb,skewX:t=>ps(Math.atan(t[4])),skewY:t=>ps(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Sp(t){return t.includes("scale")?1:0}function Ap(t,e){if(!t||t==="none")return Sp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,s;if(n)a=cR,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=uR,s=c}if(!s)return Sp(e);const o=a[e],u=s[1].split(",").map(fR);return typeof o=="function"?o(u):u[o]}const dR=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ap(n,e)};function fR(t){return parseFloat(t.trim())}const $r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ur=new Set($r),Gb=t=>t===Pr||t===be,hR=new Set(["x","y","z"]),mR=$r.filter(t=>!hR.has(t));function pR(t){const e=[];return mR.forEach(n=>{const a=t.getValue(n);a!==void 0&&(e.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),e}const Ri={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ap(e,"x"),y:(t,{transform:e})=>Ap(e,"y")};Ri.translateX=Ri.x;Ri.translateY=Ri.y;const ys=new Set;let Cp=!1,Np=!1,Op=!1;function kT(){if(Np){const t=Array.from(ys).filter(a=>a.needsMeasurement),e=new Set(t.map(a=>a.element)),n=new Map;e.forEach(a=>{const s=pR(a);s.length&&(n.set(a,s),a.render())}),t.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();const s=n.get(a);s&&s.forEach(([o,u])=>{var c;(c=a.getValue(o))==null||c.set(u)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Np=!1,Cp=!1,ys.forEach(t=>t.complete(Op)),ys.clear()}function jT(){ys.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Np=!0)})}function gR(){Op=!0,jT(),kT(),Op=!1}class Dg{constructor(e,n,a,s,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=a,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(ys.add(this),Cp||(Cp=!0,ct.read(jT),ct.resolveKeyframes(kT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:a,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(a&&n){const c=a.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&o===void 0&&s.set(e[0])}lR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ys.delete(this)}cancel(){this.state==="scheduled"&&(ys.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yR=t=>t.startsWith("--");function vR(t,e,n){yR(e)?t.style.setProperty(e,n):t.style[e]=n}const _R={};function MT(t,e){const n=oT(t);return()=>_R[e]??n()}const bR=MT(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),LT=MT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Go=([t,e,n,a])=>`cubic-bezier(${t}, ${e}, ${n}, ${a})`,qb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function DT(t,e){if(t)return typeof t=="function"?LT()?OT(t,e):"ease-out":vT(t)?Go(t):Array.isArray(t)?t.map(n=>DT(n,e)||qb.easeOut):qb[t]}function wR(t,e,n,{delay:a=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:c="easeOut",times:f}={},h=void 0){const m={[e]:n};f&&(m.offset=f);const y=DT(c,s);Array.isArray(y)&&(m.easing=y);const v={delay:a,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(m,v)}function PT(t){return typeof t=="function"&&"applyToOptions"in t}function xR({type:t,...e}){return PT(t)&&LT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class $T extends Mg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:a,keyframes:s,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,Tg(typeof e.type!="string");const h=xR(e);this.animation=wR(n,a,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=jg(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):vR(n,a,m),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,a,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(a=this.animation).commitStyles)==null||s.call(a))}get duration(){var n,a;const e=((a=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:a.call(n).duration)||0;return qn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qn(e)}get time(){return qn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=la(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&bR()?(this.animation.timeline=e,Fn):n(this)}}const UT={anticipate:mT,backInOut:hT,circInOut:gT};function ER(t){return t in UT}function TR(t){typeof t.ease=="string"&&ER(t.ease)&&(t.ease=UT[t.ease])}const Bh=10;class SR extends $T{constructor(e){TR(e),IT(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:a,onComplete:s,element:o,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Lg({...u,autoplay:!1}),f=Math.max(Bh,rn.now()-this.startTime),h=Ta(0,Bh,f-Bh);n.setWithVelocity(c.sample(Math.max(0,f-h)).value,c.sample(f).value,h),c.stop()}}const Fb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ua.test(t)||t==="0")&&!t.startsWith("url("));function AR(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function CR(t,e,n,a){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=Fb(s,e),c=Fb(o,e);return!u||!c?!1:AR(t)||(n==="spring"||PT(n))&&a}function Rp(t){t.duration=0,t.type="keyframes"}const NR=new Set(["opacity","clipPath","filter","transform"]),OR=oT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function RR(t){var m;const{motionValue:e,name:n,repeatDelay:a,repeatType:s,damping:o,type:u}=t;if(!(((m=e==null?void 0:e.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=e.owner.getProps();return OR()&&n&&NR.has(n)&&(n!=="transform"||!h)&&!f&&!a&&s!=="mirror"&&o!==0&&u!=="inertia"}const IR=40;class kR extends Mg{constructor({autoplay:e=!0,delay:n=0,type:a="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",keyframes:c,name:f,motionValue:h,element:m,...y}){var x;super(),this.stop=()=>{var w,C;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=rn.now();const v={autoplay:e,delay:n,type:a,repeat:s,repeatDelay:o,repeatType:u,name:f,motionValue:h,element:m,...y},_=(m==null?void 0:m.KeyframeResolver)||Dg;this.keyframeResolver=new _(c,(w,C,A)=>this.onKeyframesResolved(w,C,v,!A),f,h,m),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,a,s){var C,A;this.keyframeResolver=void 0;const{name:o,type:u,velocity:c,delay:f,isHandoff:h,onUpdate:m}=a;this.resolvedAt=rn.now(),CR(e,o,u,c)||((Za.instantAnimations||!f)&&(m==null||m(jg(e,a,n))),e[0]=e[e.length-1],Rp(a),a.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>IR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...a,keyframes:e},_=!h&&RR(v),x=(A=(C=v.motionValue)==null?void 0:C.owner)==null?void 0:A.current,w=_?new SR({...v,element:x}):new Lg(v);w.finished.then(()=>{this.notifyFinished()}).catch(Fn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),gR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function zT(t,e,n,a=0,s=1){const o=Array.from(t).sort((h,m)=>h.sortNodePosition(m)).indexOf(e),u=t.size,c=(u-1)*a;return typeof n=="function"?n(o,u):s===1?o*a:c-o*a}const jR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function MR(t){const e=jR.exec(t);if(!e)return[,];const[,n,a,s]=e;return[`--${n??a}`,s]}function BT(t,e,n=1){const[a,s]=MR(t);if(!a)return;const o=window.getComputedStyle(e).getPropertyValue(a);if(o){const u=o.trim();return iT(u)?parseFloat(u):u}return Ng(s)?BT(s,e,n+1):s}const LR={type:"spring",stiffness:500,damping:25,restSpeed:10},DR=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),PR={type:"keyframes",duration:.8},$R={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UR=(t,{keyframes:e})=>e.length>2?PR:Ur.has(t)?t.startsWith("scale")?DR(e[1]):LR:$R,zR=t=>t!==null;function BR(t,{repeat:e,repeatType:n="loop"},a){const s=t.filter(zR),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}function VT(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...a}=t;return{...e,...a}}return t}function Pg(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?VT(n,t):n}function VR({when:t,delay:e,delayChildren:n,staggerChildren:a,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:c,from:f,elapsed:h,...m}){return!!Object.keys(m).length}const $g=(t,e,n,a={},s,o)=>u=>{const c=Pg(a,t)||{},f=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-la(f);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};VR(c)||Object.assign(m,UR(t,m)),m.duration&&(m.duration=la(m.duration)),m.repeatDelay&&(m.repeatDelay=la(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Rp(m),m.delay===0&&(y=!0)),(Za.instantAnimations||Za.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(y=!0,Rp(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const v=BR(m.keyframes,c);if(v!==void 0){ct.update(()=>{m.onUpdate(v),m.onComplete()});return}}return c.isSync?new Lg(m):new kR(m)};function Yb(t){const e=[{},{}];return t==null||t.values.forEach((n,a)=>{e[0][a]=n.get(),e[1][a]=n.getVelocity()}),e}function Ug(t,e,n,a){if(typeof e=="function"){const[s,o]=Yb(a);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Yb(a);e=e(n!==void 0?n:t.custom,s,o)}return e}function Cr(t,e,n){const a=t.getProps();return Ug(a,e,n!==void 0?n:a.custom,t)}const HT=new Set(["width","height","top","left","right","bottom",...$r]),Zb=30,HR=t=>!isNaN(parseFloat(t));class GR{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var o;const s=rn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=rn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=HR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sg);const a=this.events[e].add(n);return e==="change"?()=>{a(),ct.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,a){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zb);return lT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Or(t,e){return new GR(t,e)}const Ip=t=>Array.isArray(t);function qR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Or(n))}function FR(t){return Ip(t)?t[t.length-1]||0:t}function zg(t,e){const n=Cr(t,e);let{transitionEnd:a={},transition:s={},...o}=n||{};o={...o,...a};for(const u in o){const c=FR(o[u]);qR(t,u,c)}}const Jt=t=>!!(t&&t.getVelocity);function YR(t){return!!(Jt(t)&&t.add)}function kp(t,e){const n=t.getValue("willChange");if(YR(n))return n.add(e);if(!n&&Za.WillChange){const a=new Za.WillChange("auto");t.addValue("willChange",a),a.add(e)}}function Bg(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const ZR="framerAppearId",GT="data-"+Bg(ZR);function qT(t){return t.props[GT]}function XR({protectedKeys:t,needsAnimating:e},n){const a=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,a}function FT(t,e,{delay:n=0,transitionOverride:a,type:s}={}){let{transition:o,transitionEnd:u,...c}=e;const f=t.getDefaultTransition();o=o?VT(o,f):f;const h=o==null?void 0:o.reduceMotion;a&&(o=a);const m=[],y=s&&t.animationState&&t.animationState.getState()[s];for(const v in c){const _=t.getValue(v,t.latestValues[v]??null),x=c[v];if(x===void 0||y&&XR(y,v))continue;const w={delay:n,...Pg(o||{},v)},C=_.get();if(C!==void 0&&!_.isAnimating&&!Array.isArray(x)&&x===C&&!w.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const U=qT(t);if(U){const P=window.MotionHandoffAnimation(U,v,ct);P!==null&&(w.startTime=P,A=!0)}}kp(t,v);const I=h??t.shouldReduceMotion;_.start($g(v,_,x,I&&HT.has(v)?{type:!1}:w,t,A));const R=_.animation;R&&m.push(R)}if(u){const v=()=>ct.update(()=>{u&&zg(t,u)});m.length?Promise.all(m).then(v):v()}return m}function jp(t,e,n={}){var f;const a=Cr(t,e,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(s=n.transitionOverride);const o=a?()=>Promise.all(FT(t,a,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:v}=s;return KR(t,e,h,m,y,v,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,m]=c==="beforeChildren"?[o,u]:[u,o];return h().then(()=>m())}else return Promise.all([o(),u(n.delay)])}function KR(t,e,n=0,a=0,s=0,o=1,u){const c=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),c.push(jp(f,e,{...u,delay:n+(typeof a=="function"?0:a)+zT(t.variantChildren,f,a,s,o)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function YT(t,e,n={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const s=e.map(o=>jp(t,o,n));a=Promise.all(s)}else if(typeof e=="string")a=jp(t,e,n);else{const s=typeof e=="function"?Cr(t,e,n.custom):e;a=Promise.all(FT(t,s,n))}return a.then(()=>{t.notify("AnimationComplete",e)})}const QR={test:t=>t==="auto",parse:t=>t},ZT=t=>e=>e.test(t),XT=[Pr,be,xa,Ti,NO,CO,QR],Xb=t=>XT.find(ZT(t));function JR(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||rT(t):!0}const WR=new Set(["brightness","contrast","saturate","opacity"]);function eI(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=n.match(Og)||[];if(!a)return t;const s=n.replace(a,"");let o=WR.has(e)?1:0;return a!==n&&(o*=100),e+"("+o+s+")"}const tI=/\b([a-z-]*)\(.*?\)/gu,Mp={...ua,getAnimatableNone:t=>{const e=t.match(tI);return e?e.map(eI).join(" "):t}},Lp={...ua,getAnimatableNone:t=>{const e=ua.parse(t);return ua.createTransformer(t)(e.map(a=>typeof a=="number"?0:typeof a=="object"?{...a,alpha:1}:a))}},Kb={...Pr,transform:Math.round},nI={rotate:Ti,rotateX:Ti,rotateY:Ti,rotateZ:Ti,scale:Yu,scaleX:Yu,scaleY:Yu,scaleZ:Yu,skew:Ti,skewX:Ti,skewY:Ti,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:sl,originX:Db,originY:Db,originZ:be},Vg={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,inset:be,insetBlock:be,insetBlockStart:be,insetBlockEnd:be,insetInline:be,insetInlineStart:be,insetInlineEnd:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,paddingBlock:be,paddingBlockStart:be,paddingBlockEnd:be,paddingInline:be,paddingInlineStart:be,paddingInlineEnd:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,marginBlock:be,marginBlockStart:be,marginBlockEnd:be,marginInline:be,marginInlineStart:be,marginInlineEnd:be,fontSize:be,backgroundPositionX:be,backgroundPositionY:be,...nI,zIndex:Kb,fillOpacity:sl,strokeOpacity:sl,numOctaves:Kb},aI={...Vg,color:kt,backgroundColor:kt,outlineColor:kt,fill:kt,stroke:kt,borderColor:kt,borderTopColor:kt,borderRightColor:kt,borderBottomColor:kt,borderLeftColor:kt,filter:Mp,WebkitFilter:Mp,mask:Lp,WebkitMask:Lp},KT=t=>aI[t],iI=new Set([Mp,Lp]);function QT(t,e){let n=KT(t);return iI.has(n)||(n=ua),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sI=new Set(["auto","none","0"]);function rI(t,e,n){let a=0,s;for(;a<t.length&&!s;){const o=t[a];typeof o=="string"&&!sI.has(o)&&rl(o).values.length&&(s=t[a]),a++}if(s&&n)for(const o of e)t[o]=QT(n,s)}class oI extends Dg{constructor(e,n,a,s,o){super(e,n,a,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:a}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let y=e[m];if(typeof y=="string"&&(y=y.trim(),Ng(y))){const v=BT(y,n.current);v!==void 0&&(e[m]=v),m===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!HT.has(a)||e.length!==2)return;const[s,o]=e,u=Xb(s),c=Xb(o),f=Lb(s),h=Lb(o);if(f!==h&&Ri[a]){this.needsMeasurement=!0;return}if(u!==c)if(Gb(u)&&Gb(c))for(let m=0;m<e.length;m++){const y=e[m];typeof y=="string"&&(e[m]=parseFloat(y))}else Ri[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,a=[];for(let s=0;s<e.length;s++)(e[s]===null||JR(e[s]))&&a.push(s);a.length&&rI(e,a,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ri[a](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(a,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=a.length-1,u=a[o];a[o]=Ri[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([f,h])=>{e.getValue(f).set(h)}),this.resolveNoneKeyframes()}}const lI=new Set(["opacity","clipPath","filter","transform"]);function JT(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const s=(n==null?void 0:n[t])??a.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(a=>a!=null)}const WT=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Dp(t){return sT(t)&&"offsetHeight"in t}const{schedule:Hg}=_T(queueMicrotask,!1),sa={x:!1,y:!1};function eS(){return sa.x||sa.y}function uI(t){return t==="x"||t==="y"?sa[t]?null:(sa[t]=!0,()=>{sa[t]=!1}):sa.x||sa.y?null:(sa.x=sa.y=!0,()=>{sa.x=sa.y=!1})}function tS(t,e){const n=JT(t),a=new AbortController,s={passive:!0,...e,signal:a.signal};return[n,s,()=>a.abort()]}function cI(t){return!(t.pointerType==="touch"||eS())}function dI(t,e,n={}){const[a,s,o]=tS(t,n);return a.forEach(u=>{let c=!1,f=!1,h;const m=()=>{u.removeEventListener("pointerleave",x)},y=C=>{h&&(h(C),h=void 0),m()},v=C=>{c=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f&&(f=!1,y(C))},_=()=>{c=!0,window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",v,s)},x=C=>{if(C.pointerType!=="touch"){if(c){f=!0;return}y(C)}},w=C=>{if(!cI(C))return;f=!1;const A=e(u,C);typeof A=="function"&&(h=A,u.addEventListener("pointerleave",x,s))};u.addEventListener("pointerenter",w,s),u.addEventListener("pointerdown",_,s)}),o}const nS=(t,e)=>e?t===e?!0:nS(t,e.parentElement):!1,Gg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hI(t){return fI.has(t.tagName)||t.isContentEditable===!0}const mI=new Set(["INPUT","SELECT","TEXTAREA"]);function pI(t){return mI.has(t.tagName)||t.isContentEditable===!0}const gc=new WeakSet;function Qb(t){return e=>{e.key==="Enter"&&t(e)}}function Vh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const gI=(t,e)=>{const n=t.currentTarget;if(!n)return;const a=Qb(()=>{if(gc.has(n))return;Vh(n,"down");const s=Qb(()=>{Vh(n,"up")}),o=()=>Vh(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",a,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",a),e)};function Jb(t){return Gg(t)&&!eS()}const Wb=new WeakSet;function yI(t,e,n={}){const[a,s,o]=tS(t,n),u=c=>{const f=c.currentTarget;if(!Jb(c)||Wb.has(c))return;gc.add(f),n.stopPropagation&&Wb.add(c);const h=e(f,c),m=(_,x)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),gc.has(f)&&gc.delete(f),Jb(_)&&typeof h=="function"&&h(_,{success:x})},y=_=>{m(_,f===window||f===document||n.useGlobalTarget||nS(f,_.target))},v=_=>{m(_,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return a.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",u,s),Dp(c)&&(c.addEventListener("focus",h=>gI(h,s)),!hI(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function qg(t){return sT(t)&&"ownerSVGElement"in t}const yc=new WeakMap;let Si;const aS=(t,e,n)=>(a,s)=>s&&s[0]?s[0][t+"Size"]:qg(a)&&"getBBox"in a?a.getBBox()[e]:a[n],vI=aS("inline","width","offsetWidth"),_I=aS("block","height","offsetHeight");function bI({target:t,borderBoxSize:e}){var n;(n=yc.get(t))==null||n.forEach(a=>{a(t,{get width(){return vI(t,e)},get height(){return _I(t,e)}})})}function wI(t){t.forEach(bI)}function xI(){typeof ResizeObserver>"u"||(Si=new ResizeObserver(wI))}function EI(t,e){Si||xI();const n=JT(t);return n.forEach(a=>{let s=yc.get(a);s||(s=new Set,yc.set(a,s)),s.add(e),Si==null||Si.observe(a)}),()=>{n.forEach(a=>{const s=yc.get(a);s==null||s.delete(e),s!=null&&s.size||Si==null||Si.unobserve(a)})}}const vc=new Set;let yr;function TI(){yr=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};vc.forEach(e=>e(t))},window.addEventListener("resize",yr)}function SI(t){return vc.add(t),yr||TI(),()=>{vc.delete(t),!vc.size&&typeof yr=="function"&&(window.removeEventListener("resize",yr),yr=void 0)}}function ew(t,e){return typeof t=="function"?SI(t):EI(t,e)}function AI(t){return qg(t)&&t.tagName==="svg"}const CI=[...XT,kt,ua],NI=t=>CI.find(ZT(t)),tw=()=>({translate:0,scale:1,origin:0,originPoint:0}),vr=()=>({x:tw(),y:tw()}),nw=()=>({min:0,max:0}),Lt=()=>({x:nw(),y:nw()}),OI=new WeakMap;function nd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ol(t){return typeof t=="string"||Array.isArray(t)}const Fg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yg=["initial",...Fg];function ad(t){return nd(t.animate)||Yg.some(e=>ol(t[e]))}function iS(t){return!!(ad(t)||t.variants)}function RI(t,e,n){for(const a in e){const s=e[a],o=n[a];if(Jt(s))t.addValue(a,s);else if(Jt(o))t.addValue(a,Or(s,{owner:t}));else if(o!==s)if(t.hasValue(a)){const u=t.getValue(a);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(a);t.addValue(a,Or(u!==void 0?u:s,{owner:t}))}}for(const a in n)e[a]===void 0&&t.removeValue(a);return e}const Pp={current:null},sS={current:!1},II=typeof window<"u";function kI(){if(sS.current=!0,!!II)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pp.current=t.matches;t.addEventListener("change",e),e()}else Pp.current=!1}const aw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let kc={};function rS(t){kc=t}function jI(){return kc}class MI{scrapeMotionValuesFromProps(e,n,a){return{}}constructor({parent:e,props:n,presenceContext:a,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:u,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Dg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=rn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,ct.render(this.render,!1,!0))};const{latestValues:h,renderState:m}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=f,this.blockInitialAnimation=!!u,this.isControllingVariants=ad(n),this.isVariantNode=iS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in v){const x=v[_];h[_]!==void 0&&Jt(x)&&x.set(h[_])}}mount(e){var n,a;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,OI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(sS.current||kI(),this.shouldReduceMotion=Pp.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),$i(this.notifyUpdate),$i(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const a=this.features[n];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&lI.has(e)&&this.current instanceof HTMLElement){const{factory:u,keyframes:c,times:f,ease:h,duration:m}=n.accelerate,y=new $T({element:this.current,name:e,keyframes:c,times:f,ease:h,duration:la(m)}),v=u(y);this.valueSubscriptions.set(e,()=>{v(),y.cancel()});return}const a=Ur.has(e);a&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ct.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kc){const n=kc[e];if(!n)continue;const{isEnabled:a,Feature:s}=n;if(!this.features[e]&&s&&a(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let a=0;a<aw.length;a++){const s=aw[a];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=RI(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const a=this.values.get(e);n!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&n!==void 0&&(a=Or(n===null?void 0:n,{owner:this}),this.addValue(e,a)),a}readValue(e,n){let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(iT(a)||rT(a))?a=parseFloat(a):!NI(a)&&ua.test(n)&&(a=QT(e,n)),this.setBaseTarget(e,Jt(a)?a.get():a)),Jt(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const u=Ug(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);u&&(a=u[e])}if(n&&a!==void 0)return a;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Jt(s)?s:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Hg.render(this.render)}}class oS extends MI{constructor(){super(...arguments),this.KeyframeResolver=oI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const a=e.style;return a?a[n]:void 0}removeValueFromRenderState(e,{vars:n,style:a}){delete n[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Gi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function lS({top:t,left:e,right:n,bottom:a}){return{x:{min:e,max:n},y:{min:t,max:a}}}function LI({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function DI(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}function Hh(t){return t===void 0||t===1}function $p({scale:t,scaleX:e,scaleY:n}){return!Hh(t)||!Hh(e)||!Hh(n)}function cs(t){return $p(t)||uS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function uS(t){return iw(t.x)||iw(t.y)}function iw(t){return t&&t!=="0%"}function jc(t,e,n){const a=t-n,s=e*a;return n+s}function sw(t,e,n,a,s){return s!==void 0&&(t=jc(t,s,a)),jc(t,n,a)+e}function Up(t,e=0,n=1,a,s){t.min=sw(t.min,e,n,a,s),t.max=sw(t.max,e,n,a,s)}function cS(t,{x:e,y:n}){Up(t.x,e.translate,e.scale,e.originPoint),Up(t.y,n.translate,n.scale,n.originPoint)}const rw=.999999999999,ow=1.0000000000001;function PI(t,e,n,a=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let c=0;c<s;c++){o=n[c],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(a&&o.options.layoutScroll&&o.scroll&&o!==o.root&&br(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,cS(t,u)),a&&cs(o.latestValues)&&br(t,o.latestValues))}e.x<ow&&e.x>rw&&(e.x=1),e.y<ow&&e.y>rw&&(e.y=1)}function _r(t,e){t.min=t.min+e,t.max=t.max+e}function lw(t,e,n,a,s=.5){const o=vt(t.min,t.max,s);Up(t,e,n,o,a)}function br(t,e){lw(t.x,e.x,e.scaleX,e.scale,e.originX),lw(t.y,e.y,e.scaleY,e.scale,e.originY)}function dS(t,e){return lS(DI(t.getBoundingClientRect(),e))}function $I(t,e,n){const a=dS(t,n),{scroll:s}=e;return s&&(_r(a.x,s.offset.x),_r(a.y,s.offset.y)),a}const UI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zI=$r.length;function BI(t,e,n){let a="",s=!0;for(let o=0;o<zI;o++){const u=$r[o],c=t[u];if(c===void 0)continue;let f=!0;if(typeof c=="number")f=c===(u.startsWith("scale")?1:0);else{const h=parseFloat(c);f=u.startsWith("scale")?h===1:h===0}if(!f||n){const h=WT(c,Vg[u]);if(!f){s=!1;const m=UI[u]||u;a+=`${m}(${h}) `}n&&(e[u]=h)}}return a=a.trim(),n?a=n(e,s?"":a):s&&(a="none"),a}function Zg(t,e,n){const{style:a,vars:s,transformOrigin:o}=t;let u=!1,c=!1;for(const f in e){const h=e[f];if(Ur.has(f)){u=!0;continue}else if(wT(f)){s[f]=h;continue}else{const m=WT(h,Vg[f]);f.startsWith("origin")?(c=!0,o[f]=m):a[f]=m}}if(e.transform||(u||n?a.transform=BI(e,t.transform,n):a.transform&&(a.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:m=0}=o;a.transformOrigin=`${f} ${h} ${m}`}}function fS(t,{style:e,vars:n},a,s){const o=t.style;let u;for(u in e)o[u]=e[u];s==null||s.applyProjectionStyles(o,a);for(u in n)o.setProperty(u,n[u])}function uw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $o={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const n=uw(t,e.target.x),a=uw(t,e.target.y);return`${n}% ${a}%`}},VI={correct:(t,{treeScale:e,projectionDelta:n})=>{const a=t,s=ua.parse(t);if(s.length>5)return a;const o=ua.createTransformer(t),u=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+u]/=c,s[1+u]/=f;const h=vt(c,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=h),typeof s[3+u]=="number"&&(s[3+u]/=h),o(s)}},zp={borderRadius:{...$o,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$o,borderTopRightRadius:$o,borderBottomLeftRadius:$o,borderBottomRightRadius:$o,boxShadow:VI};function hS(t,{layout:e,layoutId:n}){return Ur.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zp[t]||t==="opacity")}function Xg(t,e,n){var u;const a=t.style,s=e==null?void 0:e.style,o={};if(!a)return o;for(const c in a)(Jt(a[c])||s&&Jt(s[c])||hS(c,t)||((u=n==null?void 0:n.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(o[c]=a[c]);return o}function HI(t){return window.getComputedStyle(t)}class GI extends oS{constructor(){super(...arguments),this.type="html",this.renderInstance=fS}readValueFromInstance(e,n){var a;if(Ur.has(n))return(a=this.projection)!=null&&a.isProjecting?Sp(n):dR(e,n);{const s=HI(e),o=(wT(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return dS(e,n)}build(e,n,a){Zg(e,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,n,a){return Xg(e,n,a)}}const qI={offset:"stroke-dashoffset",array:"stroke-dasharray"},FI={offset:"strokeDashoffset",array:"strokeDasharray"};function YI(t,e,n=1,a=0,s=!0){t.pathLength=1;const o=s?qI:FI;t[o.offset]=`${-a}`,t[o.array]=`${e} ${n}`}const ZI=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function mS(t,{attrX:e,attrY:n,attrScale:a,pathLength:s,pathSpacing:o=1,pathOffset:u=0,...c},f,h,m){if(Zg(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox);for(const _ of ZI)y[_]!==void 0&&(v[_]=y[_],delete y[_]);e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),a!==void 0&&(y.scale=a),s!==void 0&&YI(y,s,o,u,!1)}const pS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),gS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function XI(t,e,n,a){fS(t,e,void 0,a);for(const s in e.attrs)t.setAttribute(pS.has(s)?s:Bg(s),e.attrs[s])}function yS(t,e,n){const a=Xg(t,e,n);for(const s in t)if(Jt(t[s])||Jt(e[s])){const o=$r.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;a[o]=t[s]}return a}class KI extends oS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ur.has(n)){const a=KT(n);return a&&a.default||0}return n=pS.has(n)?n:Bg(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,a){return yS(e,n,a)}build(e,n,a){mS(e,n,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(e,n,a,s){XI(e,n,a,s)}mount(e){this.isSVGTag=gS(e.tagName),super.mount(e)}}const QI=Yg.length;function vS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?vS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<QI;n++){const a=Yg[n],s=t.props[a];(ol(s)||s===!1)&&(e[a]=s)}return e}function _S(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let a=0;a<n;a++)if(e[a]!==t[a])return!1;return!0}const JI=[...Fg].reverse(),WI=Fg.length;function ek(t){return e=>Promise.all(e.map(({animation:n,options:a})=>YT(t,n,a)))}function tk(t){let e=ek(t),n=cw(),a=!0;const s=f=>(h,m)=>{var v;const y=Cr(t,m,f==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:_,transitionEnd:x,...w}=y;h={...h,...w,...x}}return h};function o(f){e=f(t)}function u(f){const{props:h}=t,m=vS(t.parent)||{},y=[],v=new Set;let _={},x=1/0;for(let C=0;C<WI;C++){const A=JI[C],I=n[A],R=h[A]!==void 0?h[A]:m[A],U=ol(R),P=A===f?I.isActive:null;P===!1&&(x=C);let Y=R===m[A]&&R!==h[A]&&U;if(Y&&a&&t.manuallyAnimateOnMount&&(Y=!1),I.protectedKeys={..._},!I.isActive&&P===null||!R&&!I.prevProp||nd(R)||typeof R=="boolean")continue;if(A==="exit"&&I.isActive&&P!==!0){I.prevResolvedValues&&(_={..._,...I.prevResolvedValues});continue}const te=nk(I.prevProp,R);let O=te||A===f&&I.isActive&&!Y&&U||C>x&&U,pe=!1;const Ae=Array.isArray(R)?R:[R];let ye=Ae.reduce(s(A),{});P===!1&&(ye={});const{prevResolvedValues:ke={}}=I,We={...ke,...ye},ue=q=>{O=!0,v.has(q)&&(pe=!0,v.delete(q)),I.needsAnimating[q]=!0;const J=t.getValue(q);J&&(J.liveStyle=!1)};for(const q in We){const J=ye[q],K=ke[q];if(_.hasOwnProperty(q))continue;let ie=!1;Ip(J)&&Ip(K)?ie=!_S(J,K):ie=J!==K,ie?J!=null?ue(q):v.add(q):J!==void 0&&v.has(q)?ue(q):I.protectedKeys[q]=!0}I.prevProp=R,I.prevResolvedValues=ye,I.isActive&&(_={..._,...ye}),a&&t.blockInitialAnimation&&(O=!1);const X=Y&&te;O&&(!X||pe)&&y.push(...Ae.map(q=>{const J={type:A};if(typeof q=="string"&&a&&!X&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,ie=Cr(K,q);if(K.enteringChildren&&ie){const{delayChildren:k}=ie.transition||{};J.delay=zT(K.enteringChildren,t,k)}}return{animation:q,options:J}}))}if(v.size){const C={};if(typeof h.initial!="boolean"){const A=Cr(t,Array.isArray(h.initial)?h.initial[0]:h.initial);A&&A.transition&&(C.transition=A.transition)}v.forEach(A=>{const I=t.getBaseTarget(A),R=t.getValue(A);R&&(R.liveStyle=!0),C[A]=I??null}),y.push({animation:C})}let w=!!y.length;return a&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),a=!1,w?e(y):Promise.resolve()}function c(f,h){var y;if(n[f].isActive===h)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var _;return(_=v.animationState)==null?void 0:_.setActive(f,h)}),n[f].isActive=h;const m=u(f);for(const v in n)n[v].protectedKeys={};return m}return{animateChanges:u,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=cw()}}}function nk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_S(e,t):!1}function us(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cw(){return{animate:us(!0),whileInView:us(),whileHover:us(),whileTap:us(),whileDrag:us(),whileFocus:us(),exit:us()}}function dw(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){dw(t.x,e.x),dw(t.y,e.y)}function fw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const bS=1e-4,ak=1-bS,ik=1+bS,wS=.01,sk=0-wS,rk=0+wS;function on(t){return t.max-t.min}function ok(t,e,n){return Math.abs(t-e)<=n}function hw(t,e,n,a=.5){t.origin=a,t.originPoint=vt(e.min,e.max,t.origin),t.scale=on(n)/on(e),t.translate=vt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ak&&t.scale<=ik||isNaN(t.scale))&&(t.scale=1),(t.translate>=sk&&t.translate<=rk||isNaN(t.translate))&&(t.translate=0)}function Ko(t,e,n,a){hw(t.x,e.x,n.x,a?a.originX:void 0),hw(t.y,e.y,n.y,a?a.originY:void 0)}function mw(t,e,n){t.min=n.min+e.min,t.max=t.min+on(e)}function lk(t,e,n){mw(t.x,e.x,n.x),mw(t.y,e.y,n.y)}function pw(t,e,n){t.min=e.min-n.min,t.max=t.min+on(e)}function Mc(t,e,n){pw(t.x,e.x,n.x),pw(t.y,e.y,n.y)}function gw(t,e,n,a,s){return t-=e,t=jc(t,1/n,a),s!==void 0&&(t=jc(t,1/s,a)),t}function uk(t,e=0,n=1,a=.5,s,o=t,u=t){if(xa.test(e)&&(e=parseFloat(e),e=vt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let c=vt(o.min,o.max,a);t===o&&(c-=e),t.min=gw(t.min,e,n,c,s),t.max=gw(t.max,e,n,c,s)}function yw(t,e,[n,a,s],o,u){uk(t,e[n],e[a],e[s],e.scale,o,u)}const ck=["x","scaleX","originX"],dk=["y","scaleY","originY"];function vw(t,e,n,a){yw(t.x,e,ck,n?n.x:void 0,a?a.x:void 0),yw(t.y,e,dk,n?n.y:void 0,a?a.y:void 0)}function _w(t){return t.translate===0&&t.scale===1}function xS(t){return _w(t.x)&&_w(t.y)}function bw(t,e){return t.min===e.min&&t.max===e.max}function fk(t,e){return bw(t.x,e.x)&&bw(t.y,e.y)}function ww(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ES(t,e){return ww(t.x,e.x)&&ww(t.y,e.y)}function xw(t){return on(t.x)/on(t.y)}function Ew(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function _a(t){return[t("x"),t("y")]}function hk(t,e,n){let a="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||o||u)&&(a=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:y,rotateY:v,skewX:_,skewY:x}=n;h&&(a=`perspective(${h}px) ${a}`),m&&(a+=`rotate(${m}deg) `),y&&(a+=`rotateX(${y}deg) `),v&&(a+=`rotateY(${v}deg) `),_&&(a+=`skewX(${_}deg) `),x&&(a+=`skewY(${x}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(a+=`scale(${c}, ${f})`),a||"none"}const TS=["TopLeft","TopRight","BottomLeft","BottomRight"],mk=TS.length,Tw=t=>typeof t=="string"?parseFloat(t):t,Sw=t=>typeof t=="number"||be.test(t);function pk(t,e,n,a,s,o){s?(t.opacity=vt(0,n.opacity??1,gk(a)),t.opacityExit=vt(e.opacity??1,0,yk(a))):o&&(t.opacity=vt(e.opacity??1,n.opacity??1,a));for(let u=0;u<mk;u++){const c=`border${TS[u]}Radius`;let f=Aw(e,c),h=Aw(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||Sw(f)===Sw(h)?(t[c]=Math.max(vt(Tw(f),Tw(h),a),0),(xa.test(h)||xa.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=vt(e.rotate||0,n.rotate||0,a))}function Aw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gk=SS(0,.5,pT),yk=SS(.5,.95,Fn);function SS(t,e,n){return a=>a<t?0:a>e?1:n(il(t,e,a))}function vk(t,e,n){const a=Jt(t)?t:Or(t);return a.start($g("",a,e,n)),a.animation}function ll(t,e,n,a={passive:!0}){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n)}const _k=(t,e)=>t.depth-e.depth;class bk{constructor(){this.children=[],this.isDirty=!1}add(e){Eg(this.children,e),this.isDirty=!0}remove(e){Nc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_k),this.isDirty=!1,this.children.forEach(e)}}function wk(t,e){const n=rn.now(),a=({timestamp:s})=>{const o=s-n;o>=e&&($i(a),t(o-e))};return ct.setup(a,!0),()=>$i(a)}function _c(t){return Jt(t)?t.get():t}class xk{constructor(){this.members=[]}add(e){Eg(this.members,e);for(let n=this.members.length-1;n>=0;n--){const a=this.members[n];if(a===e||a===this.lead||a===this.prevLead)continue;const s=a.instance;s&&s.isConnected===!1&&a.isPresent!==!1&&!a.snapshot&&Nc(this.members,a)}e.scheduleRender()}remove(e){if(Nc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let a;for(let s=n;s>=0;s--){const o=this.members[s],u=o.instance;if(o.isPresent!==!1&&(!u||u.isConnected!==!1)){a=o;break}}return a?(this.promote(a),!0):!1}promote(e,n){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender();const s=a.options.layoutDependency,o=e.options.layoutDependency;if(!(s!==void 0&&o!==void 0&&s===o)){const f=a.instance;f&&f.isConnected===!1&&!a.snapshot||(e.resumeFrom=a,n&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:c}=e.options;c===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:a}=e;n.onExitComplete&&n.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const bc={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Gh=["","X","Y","Z"],Ek=1e3;let Tk=0;function qh(t,e,n,a){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),a&&(a[t]=0))}function AS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ct,!(s||o))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&AS(a)}function CS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:a,resetTransform:s}){return class{constructor(u={},c=e==null?void 0:e()){this.id=Tk++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ck),this.nodes.forEach(Ik),this.nodes.forEach(kk),this.nodes.forEach(Nk)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new bk)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Sg),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const f=this.eventHandlers.get(u);f&&f.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=qg(u)&&!AI(u),this.instance=u;const{layoutId:c,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let m,y=0;const v=()=>this.root.updateBlockedByResize=!1;ct.read(()=>{y=window.innerWidth}),t(u,()=>{const _=window.innerWidth;_!==y&&(y=_,this.root.updateBlockedByResize=!0,m&&m(),m=wk(v,250),bc.hasAnimatedSinceResize&&(bc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ow)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||Pk,{onLayoutAnimationStart:w,onLayoutAnimationComplete:C}=h.getProps(),A=!this.targetLayout||!ES(this.targetLayout,_),I=!y&&v;if(this.options.layoutRoot||this.resumeFrom||I||y&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Pg(x,"layout"),onPlay:w,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(m,I)}else y||Ow(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$i(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jk),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Nw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Rk),this.nodes.forEach(Sk),this.nodes.forEach(Ak)):this.nodes.forEach(Nw),this.clearAllSnapshots();const c=rn.now();Zt.delta=Ta(0,1e3/60,c-Zt.timestamp),Zt.timestamp=c,Zt.isProcessing=!0,Dh.update.process(Zt),Dh.preRender.process(Zt),Dh.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ok),this.sharedNodes.forEach(Mk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!on(this.snapshot.measuredBox.x)&&!on(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c&&this.instance){const f=a(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!xS(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;u&&this.instance&&(c||cs(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return u&&(f=this.removeTransform(f)),$k(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:u}=this.options;if(!u)return Lt();const c=u.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(Uk))){const{scroll:m}=this.root;m&&(_r(c.x,m.offset.x),_r(c.y,m.offset.y))}return c}removeElementScroll(u){var f;const c=Lt();if(Wn(c,u),(f=this.scroll)!=null&&f.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:y,options:v}=m;m!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Wn(c,u),_r(c.x,y.offset.x),_r(c.y,y.offset.y))}return c}applyTransform(u,c=!1){const f=Lt();Wn(f,u);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&br(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),cs(m.latestValues)&&br(f,m.latestValues)}return cs(this.latestValues)&&br(f,this.latestValues),f}removeTransform(u){const c=Lt();Wn(c,u);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!cs(h.latestValues))continue;$p(h.latestValues)&&h.updateSnapshot();const m=Lt(),y=h.measurePageBox();Wn(m,y),vw(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return cs(this.latestValues)&&vw(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var _;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=Zt.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lt(),this.targetWithTransforms=Lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),cS(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||$p(this.parent.latestValues)||uS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,c,f){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),Mc(this.relativeTargetOrigin,c,f),Wn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var x;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(f=!1),f)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Wn(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;PI(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Lt());const{target:_}=u;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fw(this.prevProjectionDelta.x,this.projectionDelta.x),fw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ko(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!Ew(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ew(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vr(),this.projectionDelta=vr(),this.projectionDeltaWithTransform=vr()}setAnimationOrigin(u,c=!1){const f=this.snapshot,h=f?f.latestValues:{},m={...this.latestValues},y=vr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Lt(),_=f?f.source:void 0,x=this.layout?this.layout.source:void 0,w=_!==x,C=this.getStack(),A=!C||C.members.length<=1,I=!!(w&&!A&&this.options.crossfade===!0&&!this.path.some(Dk));this.animationProgress=0;let R;this.mixTargetDelta=U=>{const P=U/1e3;Rw(y.x,u.x,P),Rw(y.y,u.y,P),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mc(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lk(this.relativeTarget,this.relativeTargetOrigin,v,P),R&&fk(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Lt()),Wn(R,this.relativeTarget)),w&&(this.animationValues=m,pk(m,h,this.latestValues,P,I,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var c,f,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||h.stop(),this.pendingAnimation&&($i(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ct.update(()=>{bc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Or(0)),this.motionValue.jump(0,!1),this.currentAnimation=vk(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),u.onUpdate&&u.onUpdate(m)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ek),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:m}=u;if(!(!c||!f||!h)){if(this!==u&&this.layout&&h&&NS(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Lt();const y=on(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const v=on(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+v}Wn(c,f),br(c,m),Ko(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new xk),this.sharedNodes.get(u).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&qh("z",u,h,this.animationValues);for(let m=0;m<Gh.length;m++)qh(`rotate${Gh[m]}`,u,h,this.animationValues),qh(`skew${Gh[m]}`,u,h,this.animationValues);u.render();for(const m in h)u.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);u.scheduleRender()}applyProjectionStyles(u,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=_c(c==null?void 0:c.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=_c(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!cs(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let y=hk(this.projectionDeltaWithTransform,this.treeScale,m);f&&(y=f(m,y)),u.transform=y;const{x:v,y:_}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,h.animationValues?u.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in zp){if(m[x]===void 0)continue;const{correct:w,applyTo:C,isCSSVariable:A}=zp[x],I=y==="none"?m[x]:w(m[x],h);if(C){const R=C.length;for(let U=0;U<R;U++)u[C[U]]=I}else A?this.options.visualElement.renderState.vars[x]=I:u[x]=I}this.options.layoutId&&(u.pointerEvents=h===this?_c(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var c;return(c=u.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(Cw),this.root.sharedNodes.clear()}}}function Sk(t){t.updateLayout()}function Ak(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:s}=t.layout,{animationType:o}=t.options,u=e.source!==t.layout.source;o==="size"?_a(y=>{const v=u?e.measuredBox[y]:e.layoutBox[y],_=on(v);v.min=a[y].min,v.max=v.min+_}):NS(o,e.layoutBox,a)&&_a(y=>{const v=u?e.measuredBox[y]:e.layoutBox[y],_=on(a[y]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+_)});const c=vr();Ko(c,a,e.layoutBox);const f=vr();u?Ko(f,t.applyTransform(s,!0),e.measuredBox):Ko(f,a,e.layoutBox);const h=!xS(c);let m=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:_}=y;if(v&&_){const x=Lt();Mc(x,e.layoutBox,v.layoutBox);const w=Lt();Mc(w,a,_.layoutBox),ES(x,w)||(m=!0),y.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=x,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:e,delta:f,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function Ck(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Nk(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ok(t){t.clearSnapshot()}function Cw(t){t.clearMeasurements()}function Nw(t){t.isLayoutDirty=!1}function Rk(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ow(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Ik(t){t.resolveTargetDelta()}function kk(t){t.calcProjection()}function jk(t){t.resetSkewAndRotation()}function Mk(t){t.removeLeadSnapshot()}function Rw(t,e,n){t.translate=vt(e.translate,0,n),t.scale=vt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Iw(t,e,n,a){t.min=vt(e.min,n.min,a),t.max=vt(e.max,n.max,a)}function Lk(t,e,n,a){Iw(t.x,e.x,n.x,a),Iw(t.y,e.y,n.y,a)}function Dk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Pk={duration:.45,ease:[.4,0,.1,1]},kw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),jw=kw("applewebkit/")&&!kw("chrome/")?Math.round:Fn;function Mw(t){t.min=jw(t.min),t.max=jw(t.max)}function $k(t){Mw(t.x),Mw(t.y)}function NS(t,e,n){return t==="position"||t==="preserve-aspect"&&!ok(xw(e),xw(n),.2)}function Uk(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const zk=CS({attachResizeListener:(t,e)=>ll(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Fh={current:void 0},OS=CS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fh.current){const t=new zk({});t.mount(window),t.setOptions({layoutScroll:!0}),Fh.current=t}return Fh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kg=ae.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Lw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Bk(...t){return e=>{let n=!1;const a=t.map(s=>{const o=Lw(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<a.length;s++){const o=a[s];typeof o=="function"?o():Lw(t[s],null)}}}}function Vk(...t){return ae.useCallback(Bk(...t),t)}class Hk extends ae.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const a=n.offsetParent,s=Dp(a)&&a.offsetWidth||0,o=Dp(a)&&a.offsetHeight||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=s-u.width-u.left,u.bottom=o-u.height-u.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Gk({children:t,isPresent:e,anchorX:n,anchorY:a,root:s,pop:o}){var v;const u=ae.useId(),c=ae.useRef(null),f=ae.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=ae.useContext(Kg),m=((v=t.props)==null?void 0:v.ref)??(t==null?void 0:t.ref),y=Vk(c,m);return ae.useInsertionEffect(()=>{const{width:_,height:x,top:w,left:C,right:A,bottom:I}=f.current;if(e||o===!1||!c.current||!_||!x)return;const R=n==="left"?`left: ${C}`:`right: ${A}`,U=a==="bottom"?`bottom: ${I}`:`top: ${w}`;c.current.dataset.motionPopId=u;const P=document.createElement("style");h&&(P.nonce=h);const Y=s??document.head;return Y.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${_}px !important;
            height: ${x}px !important;
            ${R}px !important;
            ${U}px !important;
          }
        `),()=>{Y.contains(P)&&Y.removeChild(P)}},[e]),E.jsx(Hk,{isPresent:e,childRef:c,sizeRef:f,pop:o,children:o===!1?t:ae.cloneElement(t,{ref:y})})}const qk=({children:t,initial:e,isPresent:n,onExitComplete:a,custom:s,presenceAffectsLayout:o,mode:u,anchorX:c,anchorY:f,root:h})=>{const m=ed(Fk),y=ae.useId();let v=!0,_=ae.useMemo(()=>(v=!1,{id:y,initial:e,isPresent:n,custom:s,onExitComplete:x=>{m.set(x,!0);for(const w of m.values())if(!w)return;a&&a()},register:x=>(m.set(x,!1),()=>m.delete(x))}),[n,m,a]);return o&&v&&(_={..._}),ae.useMemo(()=>{m.forEach((x,w)=>m.set(w,!1))},[n]),ae.useEffect(()=>{!n&&!m.size&&a&&a()},[n]),t=E.jsx(Gk,{pop:u==="popLayout",isPresent:n,anchorX:c,anchorY:f,root:h,children:t}),E.jsx(td.Provider,{value:_,children:t})};function Fk(){return new Map}function RS(t=!0){const e=ae.useContext(td);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:a,register:s}=e,o=ae.useId();ae.useEffect(()=>{if(t)return s(o)},[t]);const u=ae.useCallback(()=>t&&a&&a(o),[o,a,t]);return!n&&a?[!1,u]:[!0]}const Zu=t=>t.key||"";function Dw(t){const e=[];return ae.Children.forEach(t,n=>{ae.isValidElement(n)&&e.push(n)}),e}const Rn=({children:t,custom:e,initial:n=!0,onExitComplete:a,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1,anchorX:c="left",anchorY:f="top",root:h})=>{const[m,y]=RS(u),v=ae.useMemo(()=>Dw(t),[t]),_=u&&!m?[]:v.map(Zu),x=ae.useRef(!0),w=ae.useRef(v),C=ed(()=>new Map),A=ae.useRef(new Set),[I,R]=ae.useState(v),[U,P]=ae.useState(v);xg(()=>{x.current=!1,w.current=v;for(let O=0;O<U.length;O++){const pe=Zu(U[O]);_.includes(pe)?(C.delete(pe),A.current.delete(pe)):C.get(pe)!==!0&&C.set(pe,!1)}},[U,_.length,_.join("-")]);const Y=[];if(v!==I){let O=[...v];for(let pe=0;pe<U.length;pe++){const Ae=U[pe],ye=Zu(Ae);_.includes(ye)||(O.splice(pe,0,Ae),Y.push(Ae))}return o==="wait"&&Y.length&&(O=Y),P(Dw(O)),R(v),null}const{forceRender:te}=ae.useContext(wg);return E.jsx(E.Fragment,{children:U.map(O=>{const pe=Zu(O),Ae=u&&!m?!1:v===U||_.includes(pe),ye=()=>{if(A.current.has(pe))return;if(A.current.add(pe),C.has(pe))C.set(pe,!0);else return;let ke=!0;C.forEach(We=>{We||(ke=!1)}),ke&&(te==null||te(),P(w.current),u&&(y==null||y()),a&&a())};return E.jsx(qk,{isPresent:Ae,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:h,onExitComplete:Ae?void 0:ye,anchorX:c,anchorY:f,children:O},pe)})})},IS=ae.createContext({strict:!1}),Pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $w=!1;function Yk(){if($w)return;const t={};for(const e in Pw)t[e]={isEnabled:n=>Pw[e].some(a=>!!n[a])};rS(t),$w=!0}function kS(){return Yk(),jI()}function Zk(t){const e=kS();for(const n in t)e[n]={...e[n],...t[n]};rS(e)}const Xk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Lc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Xk.has(t)}let jS=t=>!Lc(t);function Kk(t){typeof t=="function"&&(jS=e=>e.startsWith("on")?!Lc(e):t(e))}try{Kk(require("@emotion/is-prop-valid").default)}catch{}function Qk(t,e,n){const a={};for(const s in t)s==="values"&&typeof t.values=="object"||(jS(s)||n===!0&&Lc(s)||!e&&!Lc(s)||t.draggable&&s.startsWith("onDrag"))&&(a[s]=t[s]);return a}const id=ae.createContext({});function Jk(t,e){if(ad(t)){const{initial:n,animate:a}=t;return{initial:n===!1||ol(n)?n:void 0,animate:ol(a)?a:void 0}}return t.inherit!==!1?e:{}}function Wk(t){const{initial:e,animate:n}=Jk(t,ae.useContext(id));return ae.useMemo(()=>({initial:e,animate:n}),[Uw(e),Uw(n)])}function Uw(t){return Array.isArray(t)?t.join(" "):t}const Qg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MS(t,e,n){for(const a in e)!Jt(e[a])&&!hS(a,n)&&(t[a]=e[a])}function e4({transformTemplate:t},e){return ae.useMemo(()=>{const n=Qg();return Zg(n,e,t),Object.assign({},n.vars,n.style)},[e])}function t4(t,e){const n=t.style||{},a={};return MS(a,n,t),Object.assign(a,e4(t,e)),a}function n4(t,e){const n={},a=t4(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=a,n}const LS=()=>({...Qg(),attrs:{}});function a4(t,e,n,a){const s=ae.useMemo(()=>{const o=LS();return mS(o,e,gS(a),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};MS(o,t.style,t),s.style={...o,...s.style}}return s}const i4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jg(t){return typeof t!="string"||t.includes("-")?!1:!!(i4.indexOf(t)>-1||/[A-Z]/u.test(t))}function s4(t,e,n,{latestValues:a},s,o=!1,u){const f=(u??Jg(t)?a4:n4)(e,a,s,t),h=Qk(e,typeof t=="string",o),m=t!==ae.Fragment?{...h,...f,ref:n}:{},{children:y}=e,v=ae.useMemo(()=>Jt(y)?y.get():y,[y]);return ae.createElement(t,{...m,children:v})}function r4({scrapeMotionValuesFromProps:t,createRenderState:e},n,a,s){return{latestValues:o4(n,a,s,t),renderState:e()}}function o4(t,e,n,a){const s={},o=a(t,{});for(const v in o)s[v]=_c(o[v]);let{initial:u,animate:c}=t;const f=ad(t),h=iS(t);e&&h&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||u===!1;const y=m?c:u;if(y&&typeof y!="boolean"&&!nd(y)){const v=Array.isArray(y)?y:[y];for(let _=0;_<v.length;_++){const x=Ug(t,v[_]);if(x){const{transitionEnd:w,transition:C,...A}=x;for(const I in A){let R=A[I];if(Array.isArray(R)){const U=m?R.length-1:0;R=R[U]}R!==null&&(s[I]=R)}for(const I in w)s[I]=w[I]}}}return s}const DS=t=>(e,n)=>{const a=ae.useContext(id),s=ae.useContext(td),o=()=>r4(t,e,a,s);return n?o():ed(o)},l4=DS({scrapeMotionValuesFromProps:Xg,createRenderState:Qg}),u4=DS({scrapeMotionValuesFromProps:yS,createRenderState:LS}),c4=Symbol.for("motionComponentSymbol");function d4(t,e,n){const a=ae.useRef(n);ae.useInsertionEffect(()=>{a.current=n});const s=ae.useRef(null);return ae.useCallback(o=>{var c;o&&((c=t.onMount)==null||c.call(t,o)),e&&(o?e.mount(o):e.unmount());const u=a.current;if(typeof u=="function")if(o){const f=u(o);typeof f=="function"&&(s.current=f)}else s.current?(s.current(),s.current=null):u(o);else u&&(u.current=o)},[e])}const PS=ae.createContext({});function mr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function f4(t,e,n,a,s,o){var R,U;const{visualElement:u}=ae.useContext(id),c=ae.useContext(IS),f=ae.useContext(td),h=ae.useContext(Kg),m=h.reducedMotion,y=h.skipAnimations,v=ae.useRef(null),_=ae.useRef(!1);a=a||c.renderer,!v.current&&a&&(v.current=a(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m,skipAnimations:y,isSVG:o}),_.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const x=v.current,w=ae.useContext(PS);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&h4(v.current,n,s,w);const C=ae.useRef(!1);ae.useInsertionEffect(()=>{x&&C.current&&x.update(n,f)});const A=n[GT],I=ae.useRef(!!A&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,A))&&((U=window.MotionHasOptimisedAnimation)==null?void 0:U.call(window,A)));return xg(()=>{_.current=!0,x&&(C.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),I.current&&x.animationState&&x.animationState.animateChanges())}),ae.useEffect(()=>{x&&(!I.current&&x.animationState&&x.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)==null||P.call(window,A)}),I.current=!1),x.enteringChildren=void 0)}),x}function h4(t,e,n,a){const{layoutId:s,layout:o,drag:u,dragConstraints:c,layoutScroll:f,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$S(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||c&&mr(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:a,crossfade:m,layoutScroll:f,layoutRoot:h})}function $S(t){if(t)return t.options.allowProjection!==!1?t.projection:$S(t.parent)}function Yh(t,{forwardMotionProps:e=!1,type:n}={},a,s){a&&Zk(a);const o=n?n==="svg":Jg(t),u=o?u4:l4;function c(h,m){let y;const v={...ae.useContext(Kg),...h,layoutId:m4(h)},{isStatic:_}=v,x=Wk(h),w=u(h,_);if(!_&&aT){p4();const C=g4(v);y=C.MeasureLayout,x.visualElement=f4(t,w,v,s,C.ProjectionNode,o)}return E.jsxs(id.Provider,{value:x,children:[y&&x.visualElement?E.jsx(y,{visualElement:x.visualElement,...v}):null,s4(t,h,d4(w,x.visualElement,m),w,_,e,o)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const f=ae.forwardRef(c);return f[c4]=t,f}function m4({layoutId:t}){const e=ae.useContext(wg).id;return e&&t!==void 0?e+"-"+t:t}function p4(t,e){ae.useContext(IS).strict}function g4(t){const e=kS(),{drag:n,layout:a}=e;if(!n&&!a)return{};const s={...n,...a};return{MeasureLayout:n!=null&&n.isEnabled(t)||a!=null&&a.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function y4(t,e){if(typeof Proxy>"u")return Yh;const n=new Map,a=(o,u)=>Yh(o,u,t,e),s=(o,u)=>a(o,u);return new Proxy(s,{get:(o,u)=>u==="create"?a:(n.has(u)||n.set(u,Yh(u,void 0,t,e)),n.get(u))})}const v4=(t,e)=>e.isSVG??Jg(t)?new KI(e):new GI(e,{allowProjection:t!==ae.Fragment});class _4 extends Gi{constructor(e){super(e),e.animationState||(e.animationState=tk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let b4=0;class w4 extends Gi{constructor(){super(...arguments),this.id=b4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const x4={animation:{Feature:_4},exit:{Feature:w4}};function El(t){return{point:{x:t.pageX,y:t.pageY}}}const E4=t=>e=>Gg(e)&&t(e,El(e));function Qo(t,e,n,a){return ll(t,e,E4(n),a)}const US=({current:t})=>t?t.ownerDocument.defaultView:null,zw=(t,e)=>Math.abs(t-e);function T4(t,e){const n=zw(t.x,e.x),a=zw(t.y,e.y);return Math.sqrt(n**2+a**2)}const Bw=new Set(["auto","scroll"]);class zS{constructor(e,n,{transformPagePoint:a,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Xh(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=T4(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!w)return;const{point:C}=_,{timestamp:A}=Zt;this.history.push({...C,timestamp:A});const{onStart:I,onMove:R}=this.handlers;x||(I&&I(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,_)},this.handlePointerMove=(_,x)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Zh(x,this.transformPagePoint),ct.update(this.updatePoint,!0)},this.handlePointerUp=(_,x)=>{this.end();const{onEnd:w,onSessionEnd:C,resumeAnimation:A}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Xh(_.type==="pointercancel"?this.lastMoveEventInfo:Zh(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(_,I),C&&C(_,I)},!Gg(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=a,this.distanceThreshold=u,this.contextWindow=s||window;const f=El(e),h=Zh(f,this.transformPagePoint),{point:m}=h,{timestamp:y}=Zt;this.history=[{...m,timestamp:y}];const{onSessionStart:v}=n;v&&v(e,Xh(h,this.history)),this.removeListeners=bl(Qo(this.contextWindow,"pointermove",this.handlePointerMove),Qo(this.contextWindow,"pointerup",this.handlePointerUp),Qo(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let n=e.parentElement;for(;n;){const a=getComputedStyle(n);(Bw.has(a.overflowX)||Bw.has(a.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const a=e===window,s=a?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:s.x-n.x,y:s.y-n.y};o.x===0&&o.y===0||(a?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,s),ct.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),$i(this.updatePoint)}}function Zh(t,e){return e?{point:e(t.point)}:t}function Vw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xh({point:t},e){return{point:t,delta:Vw(t,BS(e)),offset:Vw(t,S4(e)),velocity:A4(e,.1)}}function S4(t){return t[0]}function BS(t){return t[t.length-1]}function A4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,a=null;const s=BS(t);for(;n>=0&&(a=t[n],!(s.timestamp-a.timestamp>la(e)));)n--;if(!a)return{x:0,y:0};a===t[0]&&t.length>2&&s.timestamp-a.timestamp>la(e)*2&&(a=t[1]);const o=qn(s.timestamp-a.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-a.x)/o,y:(s.y-a.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function C4(t,{min:e,max:n},a){return e!==void 0&&t<e?t=a?vt(e,t,a.min):Math.max(t,e):n!==void 0&&t>n&&(t=a?vt(n,t,a.max):Math.min(t,n)),t}function Hw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function N4(t,{top:e,left:n,bottom:a,right:s}){return{x:Hw(t.x,n,s),y:Hw(t.y,e,a)}}function Gw(t,e){let n=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,a]=[a,n]),{min:n,max:a}}function O4(t,e){return{x:Gw(t.x,e.x),y:Gw(t.y,e.y)}}function R4(t,e){let n=.5;const a=on(t),s=on(e);return s>a?n=il(e.min,e.max-a,t.min):a>s&&(n=il(t.min,t.max-s,e.min)),Ta(0,1,n)}function I4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Bp=.35;function k4(t=Bp){return t===!1?t=0:t===!0&&(t=Bp),{x:qw(t,"left","right"),y:qw(t,"top","bottom")}}function qw(t,e,n){return{min:Fw(t,e),max:Fw(t,n)}}function Fw(t,e){return typeof t=="number"?t:t[e]||0}const j4=new WeakMap;class M4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:a}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{n&&this.snapToCursor(El(y).point),this.stopAnimation()},u=(y,v)=>{const{drag:_,dragPropagation:x,onDragStart:w}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uI(_),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_a(A=>{let I=this.getAxisMotionValue(A).get()||0;if(xa.test(I)){const{projection:R}=this.visualElement;if(R&&R.layout){const U=R.layout.layoutBox[A];U&&(I=on(U)*(parseFloat(I)/100))}}this.originPoint[A]=I}),w&&ct.update(()=>w(y,v),!1,!0),kp(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:w,onDrag:C}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:A}=v;if(x&&this.currentDirection===null){this.currentDirection=D4(A),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,A),this.updateAxis("y",v.point,A),this.visualElement.render(),C&&ct.update(()=>C(y,v),!1,!0)},f=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new zS(e,{onSessionStart:o,onStart:u,onMove:c,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:a,contextWindow:US(this.visualElement),element:this.visualElement.current})}stop(e,n){const a=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!a)return;const{velocity:u}=s;this.startAnimation(u);const{onDragEnd:c}=this.getProps();c&&ct.postRender(()=>c(a,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,a){const{drag:s}=this.getProps();if(!a||!Xu(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(u=C4(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&mr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=N4(a.layoutBox,e):this.constraints=!1,this.elastic=k4(n),s!==this.constraints&&!mr(e)&&a&&this.constraints&&!this.hasMutatedConstraints&&_a(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=I4(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!mr(e))return!1;const a=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=$I(a,s.root,this.visualElement.getTransformPagePoint());let u=O4(s.layout.layoutBox,o);if(n){const c=n(LI(u));this.hasMutatedConstraints=!!c,c&&(u=lS(c))}return u}startAnimation(e){const{drag:n,dragMomentum:a,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=_a(m=>{if(!Xu(m,n,this.currentDirection))return;let y=f&&f[m]||{};u&&(y={min:0,max:0});const v=s?200:1e6,_=s?40:1e7,x={type:"inertia",velocity:a?e[m]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,x)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const a=this.getAxisMotionValue(e);return kp(this.visualElement,e),a.start($g(e,a,0,n,this.visualElement,!1))}stopAnimation(){_a(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps(),s=a[n];return s||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){_a(n=>{const{drag:a}=this.getProps();if(!Xu(n,a,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:c}=s.layout.layoutBox[n],f=o.get()||0;o.set(e[n]-vt(u,c,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:a}=this.visualElement;if(!mr(n)||!a||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_a(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const f=c.get();s[u]=R4({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.constraints=!1,this.resolveConstraints(),_a(u=>{if(!Xu(u,e,null))return;const c=this.getAxisMotionValue(u),{min:f,max:h}=this.constraints[u];c.set(vt(f,h,s[u]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;j4.set(this.visualElement,this);const e=this.visualElement.current,n=Qo(e,"pointerdown",h=>{const{drag:m,dragListener:y=!0}=this.getProps(),v=h.target,_=v!==e&&pI(v);m&&y&&!_&&this.start(h)});let a;const s=()=>{const{dragConstraints:h}=this.getProps();mr(h)&&h.current&&(this.constraints=this.resolveRefConstraints(),a||(a=L4(e,h.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,u=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ct.read(s);const c=ll(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(_a(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=h[y].translate,v.set(v.get()+h[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),u(),f&&f(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:a=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=Bp,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:a,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:c}}}function Yw(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function L4(t,e,n){const a=ew(t,Yw(n)),s=ew(e,Yw(n));return()=>{a(),s()}}function Xu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function D4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class P4 extends Gi{constructor(e){super(e),this.removeGroupControls=Fn,this.removeListeners=Fn,this.controls=new M4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Kh=t=>(e,n)=>{t&&ct.update(()=>t(e,n),!1,!0)};class $4 extends Gi{constructor(){super(...arguments),this.removePointerDownListener=Fn}onPointerDown(e){this.session=new zS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:US(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:a,onPanEnd:s}=this.node.getProps();return{onSessionStart:Kh(e),onStart:Kh(n),onMove:Kh(a),onEnd:(o,u)=>{delete this.session,s&&ct.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=Qo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Qh=!1;class U4 extends ae.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:a,layoutId:s}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),a&&a.register&&s&&a.register(o),Qh&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),bc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:a,drag:s,isPresent:o}=this.props,{projection:u}=a;return u&&(u.isPresent=o,e.layoutDependency!==n&&u.setOptions({...u.options,layoutDependency:n}),Qh=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||ct.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Hg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:a}=this.props,{projection:s}=e;Qh=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),a&&a.deregister&&a.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function VS(t){const[e,n]=RS(),a=ae.useContext(wg);return E.jsx(U4,{...t,layoutGroup:a,switchLayoutGroup:ae.useContext(PS),isPresent:e,safeToRemove:n})}const z4={pan:{Feature:$4},drag:{Feature:P4,ProjectionNode:OS,MeasureLayout:VS}};function Zw(t,e,n){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=a[s];o&&ct.postRender(()=>o(e,El(e)))}class B4 extends Gi{mount(){const{current:e}=this.node;e&&(this.unmount=dI(e,(n,a)=>(Zw(this.node,a,"Start"),s=>Zw(this.node,s,"End"))))}unmount(){}}class V4 extends Gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bl(ll(this.node.current,"focus",()=>this.onFocus()),ll(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Xw(t,e,n){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=a[s];o&&ct.postRender(()=>o(e,El(e)))}class H4 extends Gi{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:a}=this.node.props;this.unmount=yI(e,(s,o)=>(Xw(this.node,o,"Start"),(u,{success:c})=>Xw(this.node,u,c?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(a==null?void 0:a.tap)===!1})}unmount(){}}const Vp=new WeakMap,Jh=new WeakMap,G4=t=>{const e=Vp.get(t.target);e&&e(t)},q4=t=>{t.forEach(G4)};function F4({root:t,...e}){const n=t||document;Jh.has(n)||Jh.set(n,{});const a=Jh.get(n),s=JSON.stringify(e);return a[s]||(a[s]=new IntersectionObserver(q4,{root:t,...e})),a[s]}function Y4(t,e,n){const a=F4(e);return Vp.set(t,n),a.observe(t),()=>{Vp.delete(t),a.unobserve(t)}}const Z4={some:0,all:1};class X4 extends Gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:a,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:a,threshold:typeof s=="number"?s:Z4[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),v=h?m:y;v&&v(f)};return Y4(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(K4(e,n))&&this.startObserver()}unmount(){}}function K4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Q4={inView:{Feature:X4},tap:{Feature:H4},focus:{Feature:V4},hover:{Feature:B4}},J4={layout:{ProjectionNode:OS,MeasureLayout:VS}},W4={...x4,...Q4,...z4,...J4},he=y4(W4,v4);function ej(t){t.values.forEach(e=>e.stop())}function Hp(t,e){[...e].reverse().forEach(a=>{const s=t.getVariant(a);s&&zg(t,s),t.variantChildren&&t.variantChildren.forEach(o=>{Hp(o,e)})})}function tj(t,e){if(Array.isArray(e))return Hp(t,e);if(typeof e=="string")return Hp(t,[e]);zg(t,e)}function nj(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,a){const s=[];return t.forEach(o=>{s.push(YT(o,n,{transitionOverride:a}))}),Promise.all(s)},set(n){return t.forEach(a=>{tj(a,n)})},stop(){t.forEach(n=>{ej(n)})},mount(){return()=>{e.stop()}}};return e}function aj(){const t=ed(nj);return xg(t.mount,[]),t}const ij=aj;/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),Kw=t=>{const e=rj(t);return e.charAt(0).toUpperCase()+e.slice(1)},HS=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),oj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=ae.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:u,...c},f)=>ae.createElement("svg",{ref:f,...lj,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:HS("lucide",s),...!o&&!oj(c)&&{"aria-hidden":"true"},...c},[...u.map(([h,m])=>ae.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=ae.forwardRef(({className:a,...s},o)=>ae.createElement(uj,{ref:o,iconNode:e,className:HS(`lucide-${sj(Kw(t))}`,`lucide-${t}`,a),...s}));return n.displayName=Kw(t),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dj=Xe("activity",cj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Qw=Xe("arrow-up",fj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],mj=Xe("book-open",hj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gj=Xe("circle-alert",pj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vj=Xe("circle-check",yj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bj=Xe("circle-x",_j);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Wh=Xe("cloud",wj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ej=Xe("external-link",xj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Sj=Xe("gamepad-2",Tj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Cj=Xe("graduation-cap",Aj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Oj=Xe("heart",Nj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11",key:"1v6356"}],["path",{d:"M17 7A5 5 0 0 0 7 7",key:"151p3v"}],["path",{d:"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4",key:"1sdaij"}]],Ij=Xe("ice-cream-cone",Rj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jj=Xe("layers",kj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Lj=Xe("lock-open",Mj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Pj=Xe("lock",Dj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Uj=Xe("message-circle",$j);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Bj=Xe("moon",zj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Hj=Xe("pause",Vj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],GS=Xe("play",Gj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],qS=Xe("rotate-ccw",qj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jw=Xe("search",Fj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Zj=Xe("settings-2",Yj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ww=Xe("share-2",Xj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Uo=Xe("sparkles",Kj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],dr=Xe("star",Qj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],e1=Xe("sun",Jj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],e3=Xe("timer",Wj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],n3=Xe("trophy",t3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],i3=Xe("volume-2",a3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],r3=Xe("volume-x",s3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],l3=Xe("waves",o3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ku=Xe("zap",u3);var t1=Object.defineProperty,c3=(t,e)=>{let n={};for(var a in t)t1(n,a,{get:t[a],enumerable:!0});return t1(n,Symbol.toStringTag,{value:"Module"}),n};function sd(t,e,n){function a(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:u,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const h=u.prototype,m=Object.keys(h);for(let y=0;y<m.length;y++){const v=m[y];v in c||(c[v]=h[v].bind(c))}}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:t});function u(c){var f;const h=n!=null&&n.Parent?new o:this;a(h,c),(f=h._zod).deferred??(f.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(u,"init",{value:a}),Object.defineProperty(u,Symbol.hasInstance,{value:c=>{var f,h;return n!=null&&n.Parent&&c instanceof n.Parent?!0:(h=(f=c==null?void 0:c._zod)==null?void 0:f.traits)==null?void 0:h.has(t)}}),Object.defineProperty(u,"name",{value:t}),u}class wc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const d3={};function Wg(t){return d3}function f3(t){const e=Object.values(t).filter(a=>typeof a=="number");return Object.entries(t).filter(([a,s])=>e.indexOf(+a)===-1).map(([a,s])=>s)}function h3(t,e){return typeof e=="bigint"?e.toString():e}const n1=Symbol("evaluating");function m3(t,e,n){let a;Object.defineProperty(t,e,{get(){if(a!==n1)return a===void 0&&(a=n1,a=n()),a},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}const p3="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function wr(t,e,n){const a=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(a._zod.parent=t),a}function g3(t){return{}}function Qu(t,e=0){var n;if(t.aborted===!0)return!0;for(let a=e;a<t.issues.length;a++)if(((n=t.issues[a])==null?void 0:n.continue)!==!0)return!0;return!1}function Ju(t){return typeof t=="string"?t:t==null?void 0:t.message}function ey(t,e,n){var s,o,u,c,f,h;const a={...t,path:t.path??[]};if(!t.message){const m=Ju((u=(o=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:u.call(o,t))??Ju((c=e==null?void 0:e.error)==null?void 0:c.call(e,t))??Ju((f=n.customError)==null?void 0:f.call(n,t))??Ju((h=n.localeError)==null?void 0:h.call(n,t))??"Invalid input";a.message=m}return delete a.inst,delete a.continue,e!=null&&e.reportInput||delete a.input,a}const FS=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,h3,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},y3=sd("$ZodError",FS),ty=sd("$ZodError",FS,{Parent:Error}),v3=t=>async(e,n,a,s)=>{const o=a?Object.assign(a,{async:!0}):{async:!0};let u=e._zod.run({value:n,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const c=new((s==null?void 0:s.Err)??t)(u.issues.map(f=>ey(f,o,Wg())));throw p3(c,s==null?void 0:s.callee),c}return u.value},YS=v3(ty),_3=t=>(e,n,a)=>{const s=a?{...a,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new wc;return o.issues.length?{success:!1,error:new(t??y3)(o.issues.map(u=>ey(u,s,Wg())))}:{success:!0,data:o.value}},b3=_3(ty),w3=t=>async(e,n,a)=>{const s=a?Object.assign(a,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(u=>ey(u,s,Wg())))}:{success:!0,data:o.value}},x3=w3(ty),E3={major:4,minor:3,patch:6},T3=sd("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=E3;const a=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&a.unshift(t);for(const o of a)for(const u of o._zod.onattach)u(t);if(a.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const o=(c,f,h)=>{let m=Qu(c),y;for(const v of f){if(v._zod.def.when){if(!v._zod.def.when(c))continue}else if(m)continue;const _=c.issues.length,x=v._zod.check(c);if(x instanceof Promise&&(h==null?void 0:h.async)===!1)throw new wc;if(y||x instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await x,c.issues.length!==_&&(m||(m=Qu(c,_)))});else{if(c.issues.length===_)continue;m||(m=Qu(c,_))}}return y?y.then(()=>c):c},u=(c,f,h)=>{if(Qu(c))return c.aborted=!0,c;const m=o(f,a,h);if(m instanceof Promise){if(h.async===!1)throw new wc;return m.then(y=>t._zod.parse(y,h))}return t._zod.parse(m,h)};t._zod.run=(c,f)=>{if(f.skipChecks)return t._zod.parse(c,f);if(f.direction==="backward"){const m=t._zod.parse({value:c.value,issues:[]},{...f,skipChecks:!0});return m instanceof Promise?m.then(y=>u(y,c,f)):u(m,c,f)}const h=t._zod.parse(c,f);if(h instanceof Promise){if(f.async===!1)throw new wc;return h.then(m=>o(m,a,f))}return o(h,a,f)}}m3(t,"~standard",()=>({validate:o=>{var u;try{const c=b3(t,o);return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}}catch{return x3(t,o).then(f=>{var h;return f.success?{value:f.data}:{issues:(h=f.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}))}),S3=sd("$ZodNever",(t,e)=>{T3.init(t,e),t._zod.parse=(n,a)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});var a1;class A3{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const a=n[0];return this._map.set(e,a),a&&typeof a=="object"&&"id"in a&&this._idmap.set(a.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const a={...this.get(n)??{}};delete a.id;const s={...a,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function C3(){return new A3}(a1=globalThis).__zod_globalRegistry??(a1.__zod_globalRegistry=C3());const Ii=globalThis.__zod_globalRegistry;function N3(t,e){return new t({type:"never",...g3()})}function Gp(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??Ii,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function mt(t,e,n={path:[],schemaPath:[]}){var m,y;var a;const s=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const u={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,u);const c=(y=(m=t._zod).toJSONSchema)==null?void 0:y.call(m);if(c)u.schema=c;else{const v={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,u.schema,v);else{const x=u.schema,w=e.processors[s.type];if(!w)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);w(t,e,x,v)}const _=t._zod.parent;_&&(u.ref||(u.ref=_),mt(_,e,v),e.seen.get(_).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(u.schema,f),e.io==="input"&&nn(t)&&(delete u.schema.examples,delete u.schema.default),e.io==="input"&&u.schema._prefault&&((a=u.schema).default??(a.default=u.schema._prefault)),delete u.schema._prefault,e.seen.get(t).schema}function qp(t,e){var u,c,f,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=new Map;for(const m of t.seen.entries()){const y=(u=t.metadataRegistry.get(m[0]))==null?void 0:u.id;if(y){const v=a.get(y);if(v&&v!==m[0])throw new Error(`Duplicate schema id "${y}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);a.set(y,m[0])}}const s=m=>{var w;const y=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const C=(w=t.external.registry.get(m[0]))==null?void 0:w.id,A=t.external.uri??(R=>R);if(C)return{ref:A(C)};const I=m[1].defId??m[1].schema.id??`schema${t.counter++}`;return m[1].defId=I,{defId:I,ref:`${A("__shared")}#/${y}/${I}`}}if(m[1]===n)return{ref:"#"};const _=`#/${y}/`,x=m[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:_+x}},o=m=>{if(m[1].schema.$ref)return;const y=m[1],{ref:v,defId:_}=s(m);y.def={...y.schema},_&&(y.defId=_);const x=y.schema;for(const w in x)delete x[w];x.$ref=v};if(t.cycles==="throw")for(const m of t.seen.entries()){const y=m[1];if(y.cycle)throw new Error(`Cycle detected: #/${(c=y.cycle)==null?void 0:c.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const m of t.seen.entries()){const y=m[1];if(e===m[0]){o(m);continue}if(t.external){const _=(f=t.external.registry.get(m[0]))==null?void 0:f.id;if(e!==m[0]&&_){o(m);continue}}if((h=t.metadataRegistry.get(m[0]))==null?void 0:h.id){o(m);continue}if(y.cycle){o(m);continue}if(y.count>1&&t.reused==="ref"){o(m);continue}}}function Fp(t,e){var u,c,f;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=h=>{const m=t.seen.get(h);if(m.ref===null)return;const y=m.def??m.schema,v={...y},_=m.ref;if(m.ref=null,_){a(_);const w=t.seen.get(_),C=w.schema;if(C.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(y.allOf=y.allOf??[],y.allOf.push(C)):Object.assign(y,C),Object.assign(y,v),h._zod.parent===_)for(const I in y)I==="$ref"||I==="allOf"||I in v||delete y[I];if(C.$ref&&w.def)for(const I in y)I==="$ref"||I==="allOf"||I in w.def&&JSON.stringify(y[I])===JSON.stringify(w.def[I])&&delete y[I]}const x=h._zod.parent;if(x&&x!==_){a(x);const w=t.seen.get(x);if(w!=null&&w.schema.$ref&&(y.$ref=w.schema.$ref,w.def))for(const C in y)C==="$ref"||C==="allOf"||C in w.def&&JSON.stringify(y[C])===JSON.stringify(w.def[C])&&delete y[C]}t.override({zodSchema:h,jsonSchema:y,path:m.path??[]})};for(const h of[...t.seen.entries()].reverse())a(h[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(u=t.external)!=null&&u.uri){const h=(c=t.external.registry.get(e))==null?void 0:c.id;if(!h)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(h)}Object.assign(s,n.def??n.schema);const o=((f=t.external)==null?void 0:f.defs)??{};for(const h of t.seen.entries()){const m=h[1];m.def&&m.defId&&(o[m.defId]=m.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const h=JSON.parse(JSON.stringify(s));return Object.defineProperty(h,"~standard",{value:{...e["~standard"],jsonSchema:{input:i1(e,"input",t.processors),output:i1(e,"output",t.processors)}},enumerable:!1,writable:!1}),h}catch{throw new Error("Error converting schema to JSON.")}}function nn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const a=t._zod.def;if(a.type==="transform")return!0;if(a.type==="array")return nn(a.element,n);if(a.type==="set")return nn(a.valueType,n);if(a.type==="lazy")return nn(a.getter(),n);if(a.type==="promise"||a.type==="optional"||a.type==="nonoptional"||a.type==="nullable"||a.type==="readonly"||a.type==="default"||a.type==="prefault")return nn(a.innerType,n);if(a.type==="intersection")return nn(a.left,n)||nn(a.right,n);if(a.type==="record"||a.type==="map")return nn(a.keyType,n)||nn(a.valueType,n);if(a.type==="pipe")return nn(a.in,n)||nn(a.out,n);if(a.type==="object"){for(const s in a.shape)if(nn(a.shape[s],n))return!0;return!1}if(a.type==="union"){for(const s of a.options)if(nn(s,n))return!0;return!1}if(a.type==="tuple"){for(const s of a.items)if(nn(s,n))return!0;return!!(a.rest&&nn(a.rest,n))}return!1}const i1=(t,e,n={})=>a=>{const{libraryOptions:s,target:o}=a??{},u=Gp({...s??{},target:o,io:e,processors:n});return mt(t,u),qp(u,t),Fp(u,t)},O3={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},R3=(t,e,n,a)=>{const s=n;s.type="string";const{minimum:o,maximum:u,format:c,patterns:f,contentEncoding:h}=t._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof u=="number"&&(s.maxLength=u),c&&(s.format=O3[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(y=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:y.source}))])}},I3=(t,e,n,a)=>{const s=n,{minimum:o,maximum:u,format:c,multipleOf:f,exclusiveMaximum:h,exclusiveMinimum:m}=t._zod.bag;typeof c=="string"&&c.includes("int")?s.type="integer":s.type="number",typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=m,s.exclusiveMinimum=!0):s.exclusiveMinimum=m),typeof o=="number"&&(s.minimum=o,typeof m=="number"&&e.target!=="draft-04"&&(m>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof u=="number"&&(s.maximum=u,typeof h=="number"&&e.target!=="draft-04"&&(h<=u?delete s.maximum:delete s.exclusiveMaximum)),typeof f=="number"&&(s.multipleOf=f)},k3=(t,e,n,a)=>{n.type="boolean"},j3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},M3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},L3=(t,e,n,a)=>{e.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},D3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},P3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},$3=(t,e,n,a)=>{n.not={}},U3=(t,e,n,a)=>{},z3=(t,e,n,a)=>{},B3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},V3=(t,e,n,a)=>{const s=t._zod.def,o=f3(s.entries);o.every(u=>typeof u=="number")&&(n.type="number"),o.every(u=>typeof u=="string")&&(n.type="string"),n.enum=o},H3=(t,e,n,a)=>{const s=t._zod.def,o=[];for(const u of s.values)if(u===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof u=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(u))}else o.push(u);if(o.length!==0)if(o.length===1){const u=o[0];n.type=u===null?"null":typeof u,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[u]:n.const=u}else o.every(u=>typeof u=="number")&&(n.type="number"),o.every(u=>typeof u=="string")&&(n.type="string"),o.every(u=>typeof u=="boolean")&&(n.type="boolean"),o.every(u=>u===null)&&(n.type="null"),n.enum=o},G3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},q3=(t,e,n,a)=>{const s=n,o=t._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=o.source},F3=(t,e,n,a)=>{const s=n,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:u,maximum:c,mime:f}=t._zod.bag;u!==void 0&&(o.minLength=u),c!==void 0&&(o.maxLength=c),f?f.length===1?(o.contentMediaType=f[0],Object.assign(s,o)):(Object.assign(s,o),s.anyOf=f.map(h=>({contentMediaType:h}))):Object.assign(s,o)},Y3=(t,e,n,a)=>{n.type="boolean"},Z3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},X3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},K3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Q3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},J3=(t,e,n,a)=>{if(e.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},W3=(t,e,n,a)=>{const s=n,o=t._zod.def,{minimum:u,maximum:c}=t._zod.bag;typeof u=="number"&&(s.minItems=u),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=mt(o.element,e,{...a,path:[...a.path,"items"]})},eM=(t,e,n,a)=>{var h;const s=n,o=t._zod.def;s.type="object",s.properties={};const u=o.shape;for(const m in u)s.properties[m]=mt(u[m],e,{...a,path:[...a.path,"properties",m]});const c=new Set(Object.keys(u)),f=new Set([...c].filter(m=>{const y=o.shape[m]._zod;return e.io==="input"?y.optin===void 0:y.optout===void 0}));f.size>0&&(s.required=Array.from(f)),((h=o.catchall)==null?void 0:h._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=mt(o.catchall,e,{...a,path:[...a.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},tM=(t,e,n,a)=>{const s=t._zod.def,o=s.inclusive===!1,u=s.options.map((c,f)=>mt(c,e,{...a,path:[...a.path,o?"oneOf":"anyOf",f]}));o?n.oneOf=u:n.anyOf=u},nM=(t,e,n,a)=>{const s=t._zod.def,o=mt(s.left,e,{...a,path:[...a.path,"allOf",0]}),u=mt(s.right,e,{...a,path:[...a.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,f=[...c(o)?o.allOf:[o],...c(u)?u.allOf:[u]];n.allOf=f},aM=(t,e,n,a)=>{const s=n,o=t._zod.def;s.type="array";const u=e.target==="draft-2020-12"?"prefixItems":"items",c=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",f=o.items.map((v,_)=>mt(v,e,{...a,path:[...a.path,u,_]})),h=o.rest?mt(o.rest,e,{...a,path:[...a.path,c,...e.target==="openapi-3.0"?[o.items.length]:[]]}):null;e.target==="draft-2020-12"?(s.prefixItems=f,h&&(s.items=h)):e.target==="openapi-3.0"?(s.items={anyOf:f},h&&s.items.anyOf.push(h),s.minItems=f.length,h||(s.maxItems=f.length)):(s.items=f,h&&(s.additionalItems=h));const{minimum:m,maximum:y}=t._zod.bag;typeof m=="number"&&(s.minItems=m),typeof y=="number"&&(s.maxItems=y)},iM=(t,e,n,a)=>{const s=n,o=t._zod.def;s.type="object";const u=o.keyType,c=u._zod.bag,f=c==null?void 0:c.patterns;if(o.mode==="loose"&&f&&f.size>0){const m=mt(o.valueType,e,{...a,path:[...a.path,"patternProperties","*"]});s.patternProperties={};for(const y of f)s.patternProperties[y.source]=m}else(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=mt(o.keyType,e,{...a,path:[...a.path,"propertyNames"]})),s.additionalProperties=mt(o.valueType,e,{...a,path:[...a.path,"additionalProperties"]});const h=u._zod.values;if(h){const m=[...h].filter(y=>typeof y=="string"||typeof y=="number");m.length>0&&(s.required=m)}},sM=(t,e,n,a)=>{const s=t._zod.def,o=mt(s.innerType,e,a),u=e.seen.get(t);e.target==="openapi-3.0"?(u.ref=s.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},rM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType},oM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},lM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},uM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType;let u;try{u=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=u},cM=(t,e,n,a)=>{const s=t._zod.def,o=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;mt(o,e,a);const u=e.seen.get(t);u.ref=o},dM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType,n.readOnly=!0},fM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType},hM=(t,e,n,a)=>{const s=t._zod.def;mt(s.innerType,e,a);const o=e.seen.get(t);o.ref=s.innerType},mM=(t,e,n,a)=>{const s=t._zod.innerType;mt(s,e,a);const o=e.seen.get(t);o.ref=s},s1={string:R3,number:I3,boolean:k3,bigint:j3,symbol:M3,null:L3,undefined:D3,void:P3,never:$3,any:U3,unknown:z3,date:B3,enum:V3,literal:H3,nan:G3,template_literal:q3,file:F3,success:Y3,custom:Z3,function:X3,transform:K3,map:Q3,set:J3,array:W3,object:eM,union:tM,intersection:nM,tuple:aM,record:iM,nullable:sM,nonoptional:rM,default:oM,prefault:lM,catch:uM,pipe:cM,readonly:dM,promise:fM,optional:hM,lazy:mM};function r1(t,e){if("_idmap"in t){const a=t,s=Gp({...e,processors:s1}),o={};for(const f of a._idmap.entries()){const[h,m]=f;mt(m,s)}const u={},c={registry:a,uri:e==null?void 0:e.uri,defs:o};s.external=c;for(const f of a._idmap.entries()){const[h,m]=f;qp(s,m),u[h]=Fp(s,m)}if(Object.keys(o).length>0){const f=s.target==="draft-2020-12"?"$defs":"definitions";u.__shared={[f]:o}}return{schemas:u}}const n=Gp({...e,processors:s1});return mt(t,n),qp(n,t),Fp(n,t)}function Zn(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function Ka(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function Tl(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(Zn(t)||Ka(t))}async function pM(t,e){if(Zn(t))try{return{success:!0,data:await YS(t,e)}}catch(n){return{success:!1,error:n}}if(Ka(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function gM(t,e){if(Zn(t))return await YS(t,e);if(Ka(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function ZS(t){var e;if(Zn(t))return(e=Ii.get(t))==null?void 0:e.description;if(Ka(t)||"description"in t&&typeof t.description=="string")return t.description}function yM(t){return Tl(t)?Ka(t)?t._def.typeName==="ZodString":Zn(t)?t._zod.def.type==="string":!1:!1}function Jo(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function XS(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function vM(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="optional":!1}function _M(t){return Zn(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="nullable":!1}function Yp(t,e=!1){if(Ka(t))return t.strict();if(Jo(t)){const n=t._zod.def.shape;if(e)for(const[o,u]of Object.entries(t._zod.def.shape)){if(Jo(u))n[o]=Yp(u,e);else if(XS(u)){let f=u._zod.def.element;Jo(f)&&(f=Yp(f,e)),n[o]=wr(u,{...u._zod.def,element:f})}else n[o]=u;const c=Ii.get(u);c&&Ii.add(n[o],c)}const a=wr(t,{...t._zod.def,shape:n,catchall:N3(S3)}),s=Ii.get(t);return s&&Ii.add(a,s),a}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function bM(t){return Ka(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function wM(t){return Zn(t)&&t._zod.def.type==="pipe"}function ds(t,e,n){const a=n.get(t);if(a!==void 0)return a;if(Ka(t))return bM(t)?ds(t._def.schema,e,n):t;if(Zn(t)){let s=t;if(wM(t)&&(s=ds(t._zod.def.in,e,n)),e){if(Jo(s)){const u={};for(const[c,f]of Object.entries(s._zod.def.shape))u[c]=ds(f,e,n);s=wr(s,{...s._zod.def,shape:u})}else if(XS(s)){const u=ds(s._zod.def.element,e,n);s=wr(s,{...s._zod.def,element:u})}else if(vM(s)){const u=ds(s._zod.def.innerType,e,n);s=wr(s,{...s._zod.def,innerType:u})}else if(_M(s)){const u=ds(s._zod.def.innerType,e,n);s=wr(s,{...s._zod.def,innerType:u})}}const o=Ii.get(t);return o&&Ii.add(s,o),n.set(t,s),s}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function xM(t,e=!1){return ds(t,e,new WeakMap)}const EM=Symbol("Let zodToJsonSchema decide on which parser to use"),TM={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},SM=t=>({...TM,...t}),AM=t=>{const e=SM(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([a,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,a],jsonSchema:void 0}]))}},KS=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function kn(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?KS(e,t.currentPath):e.join("/")}}function QS(t,e,n,a){a!=null&&a.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function it(t,e,n,a,s){t[e]=n,QS(t,e,a,s)}var Ze;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const u of s)o[u]=u;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),u={};for(const c of o)u[c]=s[c];return t.objectValues(u)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&o.push(u);return o},t.find=(s,o)=>{for(const u of s)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function a(s,o=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=a,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(Ze||(Ze={}));var o1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(o1||(o1={}));const xe=Ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ai=t=>{switch(typeof t){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return Number.isNaN(t)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(t)?xe.array:t===null?xe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xe.promise:typeof Map<"u"&&t instanceof Map?xe.map:typeof Set<"u"&&t instanceof Set?xe.set:typeof Date<"u"&&t instanceof Date?xe.date:xe.object;default:return xe.unknown}},de=Ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},a={_errors:[]},s=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)a._errors.push(n(u));else{let c=a,f=0;for(;f<u.path.length;){const h=u.path[f];f===u.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(n(u))):c[h]=c[h]||{_errors:[]},c=c[h],f++}}};return s(this),a}static assert(e){if(!(e instanceof Xa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n=Object.create(null),a=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];n[o]=n[o]||[],n[o].push(e(s))}else a.push(e(s));return{formErrors:a,fieldErrors:n}}get formErrors(){return this.flatten()}}Xa.create=t=>new Xa(t);const Zp=(t,e)=>{let n;switch(t.code){case de.invalid_type:t.received===xe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ze.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ze.joinValues(t.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ze.joinValues(t.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${Ze.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ze.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case de.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case de.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ze.assertNever(t)}return{message:n}};let CM=Zp;function NM(){return CM}const OM=t=>{const{data:e,path:n,errorMaps:a,issueData:s}=t,o=[...n,...s.path||[]],u={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let c="";const f=a.filter(h=>!!h).slice().reverse();for(const h of f)c=h(u,{data:e,defaultError:c}).message;return{...s,path:o,message:c}};function ge(t,e){const n=NM(),a=OM({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Zp?void 0:Zp].filter(s=>!!s)});t.common.issues.push(a)}class jn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const a=[];for(const s of n){if(s.status==="aborted")return Le;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,n){const a=[];for(const s of n){const o=await s.key,u=await s.value;a.push({key:o,value:u})}return jn.mergeObjectSync(e,a)}static mergeObjectSync(e,n){const a={};for(const s of n){const{key:o,value:u}=s;if(o.status==="aborted"||u.status==="aborted")return Le;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(a[o.value]=u.value)}return{status:e.value,value:a}}}const Le=Object.freeze({status:"aborted"}),qo=t=>({status:"dirty",value:t}),Xn=t=>({status:"valid",value:t}),l1=t=>t.status==="aborted",u1=t=>t.status==="dirty",Rr=t=>t.status==="valid",Dc=t=>typeof Promise<"u"&&t instanceof Promise;var Se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Se||(Se={}));class Ui{constructor(e,n,a,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=a,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const c1=(t,e)=>{if(Rr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Xa(t.common.issues);return this._error=n,this._error}}};function Ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:a,description:s}=t;if(e&&(n||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,c)=>{const{message:f}=t;return u.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:f??a??c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:f??n??c.defaultError}},description:s}}class qe{get description(){return this._def.description}_getType(e){return Ai(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jn,ctx:{common:e.parent.common,data:e.data,parsedType:Ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Dc(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const a=this.safeParse(e,n);if(a.success)return a.data;throw a.error}safeParse(e,n){const a={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)},s=this._parseSync({data:e,path:a.path,parent:a});return c1(a,s)}"~validate"(e){var a,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return Rr(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(s=(a=o==null?void 0:o.message)==null?void 0:a.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>Rr(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(e,n){const a=await this.safeParseAsync(e,n);if(a.success)return a.data;throw a.error}async safeParseAsync(e,n){const a={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)},s=this._parse({data:e,path:a.path,parent:a}),o=await(Dc(s)?s:Promise.resolve(s));return c1(a,o)}refine(e,n){const a=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const u=e(s),c=()=>o.addIssue({code:de.custom,...a(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,n){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof n=="function"?n(a,s):n),!1))}_refinement(e){return new kr({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ji.create(this,this._def)}nullable(){return jr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ea.create(this)}promise(){return zc.create(this,this._def)}or(e){return $c.create([this,e],this._def)}and(e){return Uc.create(this,e,this._def)}transform(e){return new kr({...Ue(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Qp({...Ue(this._def),innerType:this,defaultValue:n,typeName:fe.ZodDefault})}brand(){return new JM({typeName:fe.ZodBranded,type:this,...Ue(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Jp({...Ue(this._def),innerType:this,catchValue:n,typeName:fe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ny.create(this,e)}readonly(){return Wp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const RM=/^c[^\s-]{8,}$/i,IM=/^[0-9a-z]+$/,kM=/^[0-9A-HJKMNP-TV-Z]{26}$/i,jM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,MM=/^[a-z0-9_-]{21}$/i,LM=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,DM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,PM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$M="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let em;const UM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,BM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GM=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,JS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qM=new RegExp(`^${JS}$`);function WS(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function FM(t){return new RegExp(`^${WS(t)}$`)}function YM(t){let e=`${JS}T${WS(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function ZM(t,e){return!!((e==="v4"||!e)&&UM.test(t)||(e==="v6"||!e)&&BM.test(t))}function XM(t,e){if(!LM.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function KM(t,e){return!!((e==="v4"||!e)&&zM.test(t)||(e==="v6"||!e)&&VM.test(t))}class ki extends qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){const o=this._getOrReturnCtx(e);return ge(o,{code:de.invalid_type,expected:xe.string,received:o.parsedType}),Le}const a=new jn;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),ge(s,{code:de.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),ge(s,{code:de.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(s=this._getOrReturnCtx(e,s),u?ge(s,{code:de.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&ge(s,{code:de.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),a.dirty())}else if(o.kind==="email")PM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"email",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="emoji")em||(em=new RegExp($M,"u")),em.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"emoji",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="uuid")jM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"uuid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="nanoid")MM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"nanoid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid")RM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"cuid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid2")IM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"cuid2",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="ulid")kM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"ulid",code:de.invalid_string,message:o.message}),a.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ge(s,{validation:"url",code:de.invalid_string,message:o.message}),a.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"regex",code:de.invalid_string,message:o.message}),a.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),ge(s,{code:de.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),a.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),ge(s,{code:de.invalid_string,validation:{startsWith:o.value},message:o.message}),a.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),ge(s,{code:de.invalid_string,validation:{endsWith:o.value},message:o.message}),a.dirty()):o.kind==="datetime"?YM(o).test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{code:de.invalid_string,validation:"datetime",message:o.message}),a.dirty()):o.kind==="date"?qM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{code:de.invalid_string,validation:"date",message:o.message}),a.dirty()):o.kind==="time"?FM(o).test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{code:de.invalid_string,validation:"time",message:o.message}),a.dirty()):o.kind==="duration"?DM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"duration",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="ip"?ZM(e.data,o.version)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"ip",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="jwt"?XM(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"jwt",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="cidr"?KM(e.data,o.version)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"cidr",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="base64"?HM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"base64",code:de.invalid_string,message:o.message}),a.dirty()):o.kind==="base64url"?GM.test(e.data)||(s=this._getOrReturnCtx(e,s),ge(s,{validation:"base64url",code:de.invalid_string,message:o.message}),a.dirty()):Ze.assertNever(o);return{status:a.value,value:e.data}}_regex(e,n,a){return this.refinement(s=>e.test(s),{validation:n,code:de.invalid_string,...Se.errToObj(a)})}_addCheck(e){return new ki({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Se.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Se.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Se.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Se.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Se.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Se.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Se.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Se.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Se.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Se.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Se.errToObj(n)})}nonempty(e){return this.min(1,Se.errToObj(e))}trim(){return new ki({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ki({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ki({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ki.create=t=>new ki({checks:[],typeName:fe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ue(t)});function QM(t,e){const n=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=n>a?n:a,o=Number.parseInt(t.toFixed(s).replace(".","")),u=Number.parseInt(e.toFixed(s).replace(".",""));return o%u/10**s}class ul extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){const o=this._getOrReturnCtx(e);return ge(o,{code:de.invalid_type,expected:xe.number,received:o.parsedType}),Le}let a;const s=new jn;for(const o of this._def.checks)o.kind==="int"?Ze.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),ge(a,{code:de.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(a=this._getOrReturnCtx(e,a),ge(a,{code:de.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(a=this._getOrReturnCtx(e,a),ge(a,{code:de.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?QM(e.data,o.value)!==0&&(a=this._getOrReturnCtx(e,a),ge(a,{code:de.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),ge(a,{code:de.not_finite,message:o.message}),s.dirty()):Ze.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Se.toString(n))}setLimit(e,n,a,s){return new ul({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:Se.toString(s)}]})}_addCheck(e){return new ul({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Se.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ze.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(n===null||a.value>n)&&(n=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ul.create=t=>new ul({checks:[],typeName:fe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class cl extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==xe.bigint)return this._getInvalidInput(e);let a;const s=new jn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(a=this._getOrReturnCtx(e,a),ge(a,{code:de.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(a=this._getOrReturnCtx(e,a),ge(a,{code:de.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),ge(a,{code:de.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):Ze.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ge(n,{code:de.invalid_type,expected:xe.bigint,received:n.parsedType}),Le}gte(e,n){return this.setLimit("min",e,!0,Se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Se.toString(n))}setLimit(e,n,a,s){return new cl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:a,message:Se.toString(s)}]})}_addCheck(e){return new cl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}cl.create=t=>new cl({checks:[],typeName:fe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ue(t)});class d1 extends qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){const a=this._getOrReturnCtx(e);return ge(a,{code:de.invalid_type,expected:xe.boolean,received:a.parsedType}),Le}return Xn(e.data)}}d1.create=t=>new d1({typeName:fe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class Pc extends qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){const o=this._getOrReturnCtx(e);return ge(o,{code:de.invalid_type,expected:xe.date,received:o.parsedType}),Le}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ge(o,{code:de.invalid_date}),Le}const a=new jn;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),ge(s,{code:de.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),a.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),ge(s,{code:de.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),a.dirty()):Ze.assertNever(o);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Se.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Se.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Pc.create=t=>new Pc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:fe.ZodDate,...Ue(t)});class f1 extends qe{_parse(e){if(this._getType(e)!==xe.symbol){const a=this._getOrReturnCtx(e);return ge(a,{code:de.invalid_type,expected:xe.symbol,received:a.parsedType}),Le}return Xn(e.data)}}f1.create=t=>new f1({typeName:fe.ZodSymbol,...Ue(t)});class h1 extends qe{_parse(e){if(this._getType(e)!==xe.undefined){const a=this._getOrReturnCtx(e);return ge(a,{code:de.invalid_type,expected:xe.undefined,received:a.parsedType}),Le}return Xn(e.data)}}h1.create=t=>new h1({typeName:fe.ZodUndefined,...Ue(t)});class m1 extends qe{_parse(e){if(this._getType(e)!==xe.null){const a=this._getOrReturnCtx(e);return ge(a,{code:de.invalid_type,expected:xe.null,received:a.parsedType}),Le}return Xn(e.data)}}m1.create=t=>new m1({typeName:fe.ZodNull,...Ue(t)});class Xp extends qe{constructor(){super(...arguments),this._any=!0}_parse(e){return Xn(e.data)}}Xp.create=t=>new Xp({typeName:fe.ZodAny,...Ue(t)});class p1 extends qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xn(e.data)}}p1.create=t=>new p1({typeName:fe.ZodUnknown,...Ue(t)});class zi extends qe{_parse(e){const n=this._getOrReturnCtx(e);return ge(n,{code:de.invalid_type,expected:xe.never,received:n.parsedType}),Le}}zi.create=t=>new zi({typeName:fe.ZodNever,...Ue(t)});class g1 extends qe{_parse(e){if(this._getType(e)!==xe.undefined){const a=this._getOrReturnCtx(e);return ge(a,{code:de.invalid_type,expected:xe.void,received:a.parsedType}),Le}return Xn(e.data)}}g1.create=t=>new g1({typeName:fe.ZodVoid,...Ue(t)});class Ea extends qe{_parse(e){const{ctx:n,status:a}=this._processInputParams(e),s=this._def;if(n.parsedType!==xe.array)return ge(n,{code:de.invalid_type,expected:xe.array,received:n.parsedType}),Le;if(s.exactLength!==null){const u=n.data.length>s.exactLength.value,c=n.data.length<s.exactLength.value;(u||c)&&(ge(n,{code:u?de.too_big:de.too_small,minimum:c?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ge(n,{code:de.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ge(n,{code:de.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),n.common.async)return Promise.all([...n.data].map((u,c)=>s.type._parseAsync(new Ui(n,u,n.path,c)))).then(u=>jn.mergeArray(a,u));const o=[...n.data].map((u,c)=>s.type._parseSync(new Ui(n,u,n.path,c)));return jn.mergeArray(a,o)}get element(){return this._def.type}min(e,n){return new Ea({...this._def,minLength:{value:e,message:Se.toString(n)}})}max(e,n){return new Ea({...this._def,maxLength:{value:e,message:Se.toString(n)}})}length(e,n){return new Ea({...this._def,exactLength:{value:e,message:Se.toString(n)}})}nonempty(e){return this.min(1,e)}}Ea.create=(t,e)=>new Ea({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Ue(e)});function pr(t){if(t instanceof jt){const e={};for(const n in t.shape){const a=t.shape[n];e[n]=ji.create(pr(a))}return new jt({...t._def,shape:()=>e})}else return t instanceof Ea?new Ea({...t._def,type:pr(t.element)}):t instanceof ji?ji.create(pr(t.unwrap())):t instanceof jr?jr.create(pr(t.unwrap())):t instanceof _s?_s.create(t.items.map(e=>pr(e))):t}class jt extends qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ze.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==xe.object){const h=this._getOrReturnCtx(e);return ge(h,{code:de.invalid_type,expected:xe.object,received:h.parsedType}),Le}const{status:a,ctx:s}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof zi&&this._def.unknownKeys==="strip"))for(const h in s.data)u.includes(h)||c.push(h);const f=[];for(const h of u){const m=o[h],y=s.data[h];f.push({key:{status:"valid",value:h},value:m._parse(new Ui(s,y,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof zi){const h=this._def.unknownKeys;if(h==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(h==="strict")c.length>0&&(ge(s,{code:de.unrecognized_keys,keys:c}),a.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const m of c){const y=s.data[m];f.push({key:{status:"valid",value:m},value:h._parse(new Ui(s,y,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const m of f){const y=await m.key,v=await m.value;h.push({key:y,value:v,alwaysSet:m.alwaysSet})}return h}).then(h=>jn.mergeObjectSync(a,h)):jn.mergeObjectSync(a,f)}get shape(){return this._def.shape()}strict(e){return Se.errToObj,new jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,a)=>{var o,u;const s=((u=(o=this._def).errorMap)==null?void 0:u.call(o,n,a).message)??a.defaultError;return n.code==="unrecognized_keys"?{message:Se.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new jt({...this._def,unknownKeys:"strip"})}passthrough(){return new jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new jt({...this._def,catchall:e})}pick(e){const n={};for(const a of Ze.objectKeys(e))e[a]&&this.shape[a]&&(n[a]=this.shape[a]);return new jt({...this._def,shape:()=>n})}omit(e){const n={};for(const a of Ze.objectKeys(this.shape))e[a]||(n[a]=this.shape[a]);return new jt({...this._def,shape:()=>n})}deepPartial(){return pr(this)}partial(e){const n={};for(const a of Ze.objectKeys(this.shape)){const s=this.shape[a];e&&!e[a]?n[a]=s:n[a]=s.optional()}return new jt({...this._def,shape:()=>n})}required(e){const n={};for(const a of Ze.objectKeys(this.shape))if(e&&!e[a])n[a]=this.shape[a];else{let o=this.shape[a];for(;o instanceof ji;)o=o._def.innerType;n[a]=o}return new jt({...this._def,shape:()=>n})}keyof(){return eA(Ze.objectKeys(this.shape))}}jt.create=(t,e)=>new jt({shape:()=>t,unknownKeys:"strip",catchall:zi.create(),typeName:fe.ZodObject,...Ue(e)});jt.strictCreate=(t,e)=>new jt({shape:()=>t,unknownKeys:"strict",catchall:zi.create(),typeName:fe.ZodObject,...Ue(e)});jt.lazycreate=(t,e)=>new jt({shape:t,unknownKeys:"strip",catchall:zi.create(),typeName:fe.ZodObject,...Ue(e)});class $c extends qe{_parse(e){const{ctx:n}=this._processInputParams(e),a=this._def.options;function s(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new Xa(c.ctx.common.issues));return ge(n,{code:de.invalid_union,unionErrors:u}),Le}if(n.common.async)return Promise.all(a.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(s);{let o;const u=[];for(const f of a){const h={...n,common:{...n.common,issues:[]},parent:null},m=f._parseSync({data:n.data,path:n.path,parent:h});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:h}),h.common.issues.length&&u.push(h.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new Xa(f));return ge(n,{code:de.invalid_union,unionErrors:c}),Le}}get options(){return this._def.options}}$c.create=(t,e)=>new $c({options:t,typeName:fe.ZodUnion,...Ue(e)});function Kp(t,e){const n=Ai(t),a=Ai(e);if(t===e)return{valid:!0,data:t};if(n===xe.object&&a===xe.object){const s=Ze.objectKeys(e),o=Ze.objectKeys(t).filter(c=>s.indexOf(c)!==-1),u={...t,...e};for(const c of o){const f=Kp(t[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(n===xe.array&&a===xe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const u=t[o],c=e[o],f=Kp(u,c);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===xe.date&&a===xe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Uc extends qe{_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=(o,u)=>{if(l1(o)||l1(u))return Le;const c=Kp(o.value,u.value);return c.valid?((u1(o)||u1(u))&&n.dirty(),{status:n.value,value:c.data}):(ge(a,{code:de.invalid_intersection_types}),Le)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([o,u])=>s(o,u)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Uc.create=(t,e,n)=>new Uc({left:t,right:e,typeName:fe.ZodIntersection,...Ue(n)});class _s extends qe{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==xe.array)return ge(a,{code:de.invalid_type,expected:xe.array,received:a.parsedType}),Le;if(a.data.length<this._def.items.length)return ge(a,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Le;!this._def.rest&&a.data.length>this._def.items.length&&(ge(a,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...a.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Ui(a,u,a.path,c)):null}).filter(u=>!!u);return a.common.async?Promise.all(o).then(u=>jn.mergeArray(n,u)):jn.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new _s({...this._def,rest:e})}}_s.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _s({items:t,typeName:fe.ZodTuple,rest:null,...Ue(e)})};class y1 extends qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==xe.map)return ge(a,{code:de.invalid_type,expected:xe.map,received:a.parsedType}),Le;const s=this._def.keyType,o=this._def.valueType,u=[...a.data.entries()].map(([c,f],h)=>({key:s._parse(new Ui(a,c,a.path,[h,"key"])),value:o._parse(new Ui(a,f,a.path,[h,"value"]))}));if(a.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const h=await f.key,m=await f.value;if(h.status==="aborted"||m.status==="aborted")return Le;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(h.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of u){const h=f.key,m=f.value;if(h.status==="aborted"||m.status==="aborted")return Le;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(h.value,m.value)}return{status:n.value,value:c}}}}y1.create=(t,e,n)=>new y1({valueType:e,keyType:t,typeName:fe.ZodMap,...Ue(n)});class dl extends qe{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.parsedType!==xe.set)return ge(a,{code:de.invalid_type,expected:xe.set,received:a.parsedType}),Le;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(ge(a,{code:de.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(ge(a,{code:de.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function u(f){const h=new Set;for(const m of f){if(m.status==="aborted")return Le;m.status==="dirty"&&n.dirty(),h.add(m.value)}return{status:n.value,value:h}}const c=[...a.data.values()].map((f,h)=>o._parse(new Ui(a,f,a.path,h)));return a.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,n){return new dl({...this._def,minSize:{value:e,message:Se.toString(n)}})}max(e,n){return new dl({...this._def,maxSize:{value:e,message:Se.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}dl.create=(t,e)=>new dl({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Ue(e)});class v1 extends qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}v1.create=(t,e)=>new v1({getter:t,typeName:fe.ZodLazy,...Ue(e)});class _1 extends qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ge(n,{received:n.data,code:de.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:e.data}}get value(){return this._def.value}}_1.create=(t,e)=>new _1({value:t,typeName:fe.ZodLiteral,...Ue(e)});function eA(t,e){return new Ir({values:t,typeName:fe.ZodEnum,...Ue(e)})}class Ir extends qe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),a=this._def.values;return ge(n,{expected:Ze.joinValues(a),received:n.parsedType,code:de.invalid_type}),Le}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),a=this._def.values;return ge(n,{received:n.data,code:de.invalid_enum_value,options:a}),Le}return Xn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ir.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ir.create(this.options.filter(a=>!e.includes(a)),{...this._def,...n})}}Ir.create=eA;class b1 extends qe{_parse(e){const n=Ze.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==xe.string&&a.parsedType!==xe.number){const s=Ze.objectValues(n);return ge(a,{expected:Ze.joinValues(s),received:a.parsedType,code:de.invalid_type}),Le}if(this._cache||(this._cache=new Set(Ze.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ze.objectValues(n);return ge(a,{received:a.data,code:de.invalid_enum_value,options:s}),Le}return Xn(e.data)}get enum(){return this._def.values}}b1.create=(t,e)=>new b1({values:t,typeName:fe.ZodNativeEnum,...Ue(e)});class zc extends qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.promise&&n.common.async===!1)return ge(n,{code:de.invalid_type,expected:xe.promise,received:n.parsedType}),Le;const a=n.parsedType===xe.promise?n.data:Promise.resolve(n.data);return Xn(a.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zc.create=(t,e)=>new zc({type:t,typeName:fe.ZodPromise,...Ue(e)});class kr extends qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:a}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:u=>{ge(a,u),u.fatal?n.abort():n.dirty()},get path(){return a.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const u=s.transform(a.data,o);if(a.common.async)return Promise.resolve(u).then(async c=>{if(n.value==="aborted")return Le;const f=await this._def.schema._parseAsync({data:c,path:a.path,parent:a});return f.status==="aborted"?Le:f.status==="dirty"||n.value==="dirty"?qo(f.value):f});{if(n.value==="aborted")return Le;const c=this._def.schema._parseSync({data:u,path:a.path,parent:a});return c.status==="aborted"?Le:c.status==="dirty"||n.value==="dirty"?qo(c.value):c}}if(s.type==="refinement"){const u=c=>{const f=s.refinement(c,o);if(a.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return c.status==="aborted"?Le:(c.status==="dirty"&&n.dirty(),u(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>c.status==="aborted"?Le:(c.status==="dirty"&&n.dirty(),u(c.value).then(()=>({status:n.value,value:c.value}))))}if(s.type==="transform")if(a.common.async===!1){const u=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Rr(u))return Le;const c=s.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(u=>Rr(u)?Promise.resolve(s.transform(u.value,o)).then(c=>({status:n.value,value:c})):Le);Ze.assertNever(s)}}kr.create=(t,e,n)=>new kr({schema:t,typeName:fe.ZodEffects,effect:e,...Ue(n)});kr.createWithPreprocess=(t,e,n)=>new kr({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Ue(n)});class ji extends qe{_parse(e){return this._getType(e)===xe.undefined?Xn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ji.create=(t,e)=>new ji({innerType:t,typeName:fe.ZodOptional,...Ue(e)});class jr extends qe{_parse(e){return this._getType(e)===xe.null?Xn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jr.create=(t,e)=>new jr({innerType:t,typeName:fe.ZodNullable,...Ue(e)});class Qp extends qe{_parse(e){const{ctx:n}=this._processInputParams(e);let a=n.data;return n.parsedType===xe.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Qp.create=(t,e)=>new Qp({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class Jp extends qe{_parse(e){const{ctx:n}=this._processInputParams(e),a={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Dc(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Xa(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Xa(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Jp.create=(t,e)=>new Jp({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class w1 extends qe{_parse(e){if(this._getType(e)!==xe.nan){const a=this._getOrReturnCtx(e);return ge(a,{code:de.invalid_type,expected:xe.nan,received:a.parsedType}),Le}return{status:"valid",value:e.data}}}w1.create=t=>new w1({typeName:fe.ZodNaN,...Ue(t)});class JM extends qe{_parse(e){const{ctx:n}=this._processInputParams(e),a=n.data;return this._def.type._parse({data:a,path:n.path,parent:n})}unwrap(){return this._def.type}}class ny extends qe{_parse(e){const{status:n,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?Le:o.status==="dirty"?(n.dirty(),qo(o.value)):this._def.out._parseAsync({data:o.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?Le:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,n){return new ny({in:e,out:n,typeName:fe.ZodPipeline})}}class Wp extends qe{_parse(e){const n=this._def.innerType._parse(e),a=s=>(Rr(s)&&(s.value=Object.freeze(s.value)),s);return Dc(n)?n.then(s=>a(s)):a(n)}unwrap(){return this._def.innerType}}Wp.create=(t,e)=>new Wp({innerType:t,typeName:fe.ZodReadonly,...Ue(e)});var fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));const WM=ki.create,x1=Xp.create;zi.create;Ea.create;const e5=jt.create;$c.create;Uc.create;_s.create;Ir.create;zc.create;ji.create;jr.create;function t5(t,e){var a,s,o;const n={type:"array"};return(a=t.type)!=null&&a._def&&((o=(s=t.type)==null?void 0:s._def)==null?void 0:o.typeName)!==fe.ZodAny&&(n.items=Je(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&it(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&it(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(it(n,"minItems",t.exactLength.value,t.exactLength.message,e),it(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function n5(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const a of t.checks)switch(a.kind){case"min":e.target==="jsonSchema7"?a.inclusive?it(n,"minimum",a.value,a.message,e):it(n,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(n.exclusiveMinimum=!0),it(n,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?it(n,"maximum",a.value,a.message,e):it(n,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(n.exclusiveMaximum=!0),it(n,"maximum",a.value,a.message,e));break;case"multipleOf":it(n,"multipleOf",a.value,a.message,e);break}return n}function a5(){return{type:"boolean"}}function tA(t,e){return Je(t.type._def,e)}const i5=(t,e)=>Je(t.innerType._def,e);function nA(t,e,n){const a=n??e.dateStrategy;if(Array.isArray(a))return{anyOf:a.map(s=>nA(t,e,s))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return s5(t,e)}}const s5=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const a of t.checks)switch(a.kind){case"min":it(n,"minimum",a.value,a.message,e);break;case"max":it(n,"maximum",a.value,a.message,e);break}return n};function r5(t,e){return{...Je(t.innerType._def,e),default:t.defaultValue()}}function o5(t,e){return e.effectStrategy==="input"?Je(t.schema._def,e):kn(e)}function l5(t){return{type:"string",enum:Array.from(t.values)}}const u5=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function c5(t,e){const n=[Je(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Je(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let a=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(o=>{if(u5(o))s.push(...o.allOf),o.unevaluatedProperties===void 0&&(a=void 0);else{let u=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...f}=o;u=f}else a=void 0;s.push(u)}}),s.length?{allOf:s,...a}:void 0}function d5(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let tm;const ea={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(tm===void 0&&(tm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),tm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function aA(t,e){const n={type:"string"};if(t.checks)for(const a of t.checks)switch(a.kind){case"min":it(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,a.value):a.value,a.message,e);break;case"max":it(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,a.value):a.value,a.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ta(n,"email",a.message,e);break;case"format:idn-email":ta(n,"idn-email",a.message,e);break;case"pattern:zod":en(n,ea.email,a.message,e);break}break;case"url":ta(n,"uri",a.message,e);break;case"uuid":ta(n,"uuid",a.message,e);break;case"regex":en(n,a.regex,a.message,e);break;case"cuid":en(n,ea.cuid,a.message,e);break;case"cuid2":en(n,ea.cuid2,a.message,e);break;case"startsWith":en(n,RegExp(`^${nm(a.value,e)}`),a.message,e);break;case"endsWith":en(n,RegExp(`${nm(a.value,e)}$`),a.message,e);break;case"datetime":ta(n,"date-time",a.message,e);break;case"date":ta(n,"date",a.message,e);break;case"time":ta(n,"time",a.message,e);break;case"duration":ta(n,"duration",a.message,e);break;case"length":it(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,a.value):a.value,a.message,e),it(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,a.value):a.value,a.message,e);break;case"includes":en(n,RegExp(nm(a.value,e)),a.message,e);break;case"ip":a.version!=="v6"&&ta(n,"ipv4",a.message,e),a.version!=="v4"&&ta(n,"ipv6",a.message,e);break;case"base64url":en(n,ea.base64url,a.message,e);break;case"jwt":en(n,ea.jwt,a.message,e);break;case"cidr":a.version!=="v6"&&en(n,ea.ipv4Cidr,a.message,e),a.version!=="v4"&&en(n,ea.ipv6Cidr,a.message,e);break;case"emoji":en(n,ea.emoji(),a.message,e);break;case"ulid":en(n,ea.ulid,a.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":ta(n,"binary",a.message,e);break;case"contentEncoding:base64":it(n,"contentEncoding","base64",a.message,e);break;case"pattern:zod":en(n,ea.base64,a.message,e);break}break;case"nanoid":en(n,ea.nanoid,a.message,e);break}return n}function nm(t,e){return e.patternStrategy==="escape"?h5(t):t}const f5=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function h5(t){let e="";for(let n=0;n<t.length;n++)f5.has(t[n])||(e+="\\"),e+=t[n];return e}function ta(t,e,n,a){var s;t.format||(s=t.anyOf)!=null&&s.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&a.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&a.errorMessages&&{errorMessage:{format:n}}})):it(t,"format",e,n,a)}function en(t,e,n,a){var s;t.pattern||(s=t.allOf)!=null&&s.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&a.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:E1(e,a),...n&&a.errorMessages&&{errorMessage:{pattern:n}}})):it(t,"pattern",E1(e,a),n,a)}function E1(t,e){var f;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},a=n.i?t.source.toLowerCase():t.source;let s="",o=!1,u=!1,c=!1;for(let h=0;h<a.length;h++){if(o){s+=a[h],o=!1;continue}if(n.i){if(u){if(a[h].match(/[a-z]/)){c?(s+=a[h],s+=`${a[h-2]}-${a[h]}`.toUpperCase(),c=!1):a[h+1]==="-"&&((f=a[h+2])!=null&&f.match(/[a-z]/))?(s+=a[h],c=!0):s+=`${a[h]}${a[h].toUpperCase()}`;continue}}else if(a[h].match(/[a-z]/)){s+=`[${a[h]}${a[h].toUpperCase()}]`;continue}}if(n.m){if(a[h]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(a[h]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&a[h]==="."){s+=u?`${a[h]}\r
`:`[${a[h]}\r
]`;continue}s+=a[h],a[h]==="\\"?o=!0:u&&a[h]==="]"?u=!1:!u&&a[h]==="["&&(u=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function iA(t,e){var a,s,o,u,c,f;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((a=t.keyType)==null?void 0:a._def.typeName)===fe.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((h,m)=>({...h,[m]:Je(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",m]})??kn(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:Je(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===fe.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){const{type:h,...m}=aA(t.keyType._def,e);return{...n,propertyNames:m}}else{if(((u=t.keyType)==null?void 0:u._def.typeName)===fe.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((c=t.keyType)==null?void 0:c._def.typeName)===fe.ZodBranded&&t.keyType._def.type._def.typeName===fe.ZodString&&((f=t.keyType._def.type._def.checks)!=null&&f.length)){const{type:h,...m}=tA(t.keyType._def,e);return{...n,propertyNames:m}}}return n}function m5(t,e){return e.mapStrategy==="record"?iA(t,e):{type:"array",maxItems:125,items:{type:"array",items:[Je(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||kn(e),Je(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||kn(e)],minItems:2,maxItems:2}}}function p5(t){const e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),a=Array.from(new Set(n.map(s=>typeof s)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}function g5(t){return t.target==="openAi"?void 0:{not:kn({...t,currentPath:[...t.currentPath,"not"]})}}function y5(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Bc={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function v5(t,e){if(e.target==="openApi3")return T1(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(a=>a._def.typeName in Bc&&(!a._def.checks||!a._def.checks.length))){const a=n.reduce((s,o)=>{const u=Bc[o._def.typeName];return u&&!s.includes(u)?[...s,u]:s},[]);return{type:a.length>1?a:a[0]}}else if(n.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=n.reduce((s,o)=>{const u=typeof o._def.value;switch(u){case"string":case"number":case"boolean":return[...s,u];case"bigint":return[...s,"integer"];case"object":return o._def.value===null?[...s,"null"]:s;default:return s}},[]);if(a.length===n.length){const s=a.filter((o,u,c)=>c.indexOf(o)===u);return{type:s.length>1?s:s[0],enum:n.reduce((o,u)=>o.includes(u._def.value)?o:[...o,u._def.value],[])}}}else if(n.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((a,s)=>[...a,...s._def.values.filter(o=>!a.includes(o))],[])};return T1(t,e)}const T1=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((a,s)=>Je(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(a=>!!a&&(!e.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return n.length?{anyOf:n}:void 0};function _5(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Bc[t.innerType._def.typeName],nullable:!0}:{type:[Bc[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const a=Je(t.innerType._def,{...e,currentPath:[...e.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}const n=Je(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function b5(t,e){const n={type:"number"};if(!t.checks)return n;for(const a of t.checks)switch(a.kind){case"int":n.type="integer",QS(n,"type",a.message,e);break;case"min":e.target==="jsonSchema7"?a.inclusive?it(n,"minimum",a.value,a.message,e):it(n,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(n.exclusiveMinimum=!0),it(n,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?it(n,"maximum",a.value,a.message,e):it(n,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(n.exclusiveMaximum=!0),it(n,"maximum",a.value,a.message,e));break;case"multipleOf":it(n,"multipleOf",a.value,a.message,e);break}return n}function w5(t,e){const n=e.target==="openAi",a={type:"object",properties:{}},s=[],o=t.shape();for(const c in o){let f=o[c];if(f===void 0||f._def===void 0)continue;let h=E5(f);h&&n&&(f._def.typeName==="ZodOptional"&&(f=f._def.innerType),f.isNullable()||(f=f.nullable()),h=!1);const m=Je(f._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});m!==void 0&&(a.properties[c]=m,h||s.push(c))}s.length&&(a.required=s);const u=x5(t,e);return u!==void 0&&(a.additionalProperties=u),a}function x5(t,e){if(t.catchall._def.typeName!=="ZodNever")return Je(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function E5(t){try{return t.isOptional()}catch{return!0}}const T5=(t,e)=>{var a;if(e.currentPath.toString()===((a=e.propertyPath)==null?void 0:a.toString()))return Je(t.innerType._def,e);const n=Je(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:kn(e)},n]}:kn(e)},S5=(t,e)=>{if(e.pipeStrategy==="input")return Je(t.in._def,e);if(e.pipeStrategy==="output")return Je(t.out._def,e);const n=Je(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]});return{allOf:[n,Je(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]})].filter(a=>a!==void 0)}};function A5(t,e){return Je(t.type._def,e)}function C5(t,e){const n={type:"array",uniqueItems:!0,items:Je(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&it(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&it(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function N5(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,a)=>Je(n._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((n,a)=>a===void 0?n:[...n,a],[]),additionalItems:Je(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,a)=>Je(n._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((n,a)=>a===void 0?n:[...n,a],[])}}function O5(t){return{not:kn(t)}}function R5(t){return kn(t)}const I5=(t,e)=>Je(t.innerType._def,e),k5=(t,e,n)=>{switch(e){case fe.ZodString:return aA(t,n);case fe.ZodNumber:return b5(t,n);case fe.ZodObject:return w5(t,n);case fe.ZodBigInt:return n5(t,n);case fe.ZodBoolean:return a5();case fe.ZodDate:return nA(t,n);case fe.ZodUndefined:return O5(n);case fe.ZodNull:return y5(n);case fe.ZodArray:return t5(t,n);case fe.ZodUnion:case fe.ZodDiscriminatedUnion:return v5(t,n);case fe.ZodIntersection:return c5(t,n);case fe.ZodTuple:return N5(t,n);case fe.ZodRecord:return iA(t,n);case fe.ZodLiteral:return d5(t,n);case fe.ZodEnum:return l5(t);case fe.ZodNativeEnum:return p5(t);case fe.ZodNullable:return _5(t,n);case fe.ZodOptional:return T5(t,n);case fe.ZodMap:return m5(t,n);case fe.ZodSet:return C5(t,n);case fe.ZodLazy:return()=>t.getter()._def;case fe.ZodPromise:return A5(t,n);case fe.ZodNaN:case fe.ZodNever:return g5(n);case fe.ZodEffects:return o5(t,n);case fe.ZodAny:return kn(n);case fe.ZodUnknown:return R5(n);case fe.ZodDefault:return r5(t,n);case fe.ZodBranded:return tA(t,n);case fe.ZodReadonly:return I5(t,n);case fe.ZodCatch:return i5(t,n);case fe.ZodPipeline:return S5(t,n);case fe.ZodFunction:case fe.ZodVoid:case fe.ZodSymbol:return;default:return(a=>{})()}};function Je(t,e,n=!1){var c;const a=e.seen.get(t);if(e.override){const f=(c=e.override)==null?void 0:c.call(e,t,e,a,n);if(f!==EM)return f}if(a&&!n){const f=j5(a,e);if(f!==void 0)return f}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const o=k5(t,t.typeName,e),u=typeof o=="function"?Je(o(),e):o;if(u&&M5(t,e,u),e.postProcess){const f=e.postProcess(u,t,e);return s.jsonSchema=u,f}return s.jsonSchema=u,u}const j5=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:KS(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,a)=>e.currentPath[a]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),kn(e)):e.$refStrategy==="seen"?kn(e):void 0}},M5=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),L5=(t,e)=>{const n=AM(e);let a;const s=e==null?void 0:e.name,o=Je(t._def,n,!1)??kn(n);n.flags.hasReferencedOpenAiAnyType&&(a||(a={}),a[n.openAiAnyTypeName]||(a[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const u=s===void 0?a?{...o,[n.definitionPath]:a}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...a,[s]:o}};return n.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};function eg(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const a=t.length;if(a!==e.length)return!1;for(let s=0;s<a;s++)if(!eg(t[s],e[s]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const a=Object.keys(t),s=Object.keys(e);if(a.length!==s.length)return!1;for(const u of a)if(!eg(t[u],e[u]))return!1;return!0}return t===e}function ay(t,e){if(Zn(t)){const n=xM(t,!0);return Jo(n)?r1(Yp(n,!0),e):r1(t,e)}return Ka(t)?L5(t):t}function bs(t){if(typeof t=="object"&&t!==null){const e={...t};"additionalProperties"in e&&delete e.additionalProperties,"$schema"in e&&delete e.$schema,"strict"in e&&delete e.strict;for(const n in e)n in e&&(Array.isArray(e[n])?e[n]=e[n].map(bs):typeof e[n]=="object"&&e[n]!==null&&(e[n]=bs(e[n])));return e}return t}function tg(t){const{$schema:e,...n}=bs(Tl(t)?ay(t):t);return n}function D5(t){const{$schema:e,...n}=bs(t);return n}function xr(t,e,n=[]){if(t==null||typeof t!="object")return;const a=t;if(Array.isArray(a.enum)&&a.enum.some(s=>s==="")){const s=n.length?` at path "${n.join(".")}"`:"",o=e?` in tool "${e}"`:"";throw new Error(`Invalid enum: empty string not allowed${o}${s}. Gemini API rejects empty strings in enums.`)}if(a.type==="object"&&a.properties&&typeof a.properties=="object")for(const[s,o]of Object.entries(a.properties))xr(o,e,[...n,s]);a.items&&xr(a.items,e,[...n,"[]"]);for(const s of["anyOf","oneOf","allOf"]){const o=a[s];Array.isArray(o)&&o.forEach((u,c)=>xr(u,e,[...n,`${s}[${c}]`]))}a.additionalProperties&&typeof a.additionalProperties=="object"&&xr(a.additionalProperties,e,[...n,"additionalProperties"])}function ws(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function sA(t){return ws(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function rA(t){return ws(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function P5(t){return ws(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function $5(t){if(ws(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function Wo({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let a;if(n){a=n[1].toLowerCase();const s=e?Uint8Array.from(atob(n[2]),o=>o.charCodeAt(0)):n[2];return{mime_type:a,data:s}}}function U5(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function z5(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}var am,S1;function B5(){return S1||(S1=1,am=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),am}var V5=B5();const H5=_g(V5);var Wu={exports:{}},A1;function G5(){if(A1)return Wu.exports;A1=1;const t=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,a=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),u=new RegExp(s.source+a.source,"gu"),c=new RegExp("\\d+"+a.source,"gu"),f=(v,_,x)=>{let w=!1,C=!1,A=!1;for(let I=0;I<v.length;I++){const R=v[I];w&&t.test(R)?(v=v.slice(0,I)+"-"+v.slice(I),w=!1,A=C,C=!0,I++):C&&A&&e.test(R)?(v=v.slice(0,I-1)+"-"+v.slice(I-1),A=C,C=!1,w=!0):(w=_(R)===R&&x(R)!==R,A=C,C=x(R)===R&&_(R)!==R)}return v},h=(v,_)=>(n.lastIndex=0,v.replace(n,x=>_(x))),m=(v,_)=>(u.lastIndex=0,c.lastIndex=0,v.replace(u,(x,w)=>_(w)).replace(c,x=>_(x))),y=(v,_)=>{if(!(typeof v=="string"||Array.isArray(v)))throw new TypeError("Expected the input to be `string | string[]`");if(_={pascalCase:!1,preserveConsecutiveUppercase:!1,..._},Array.isArray(v)?v=v.map(A=>A.trim()).filter(A=>A.length).join("-"):v=v.trim(),v.length===0)return"";const x=_.locale===!1?A=>A.toLowerCase():A=>A.toLocaleLowerCase(_.locale),w=_.locale===!1?A=>A.toUpperCase():A=>A.toLocaleUpperCase(_.locale);return v.length===1?_.pascalCase?w(v):x(v):(v!==x(v)&&(v=f(v,x,w)),v=v.replace(o,""),_.preserveConsecutiveUppercase?v=h(v,x):v=x(v),_.pascalCase&&(v=w(v.charAt(0))+v.slice(1)),m(v,w))};return Wu.exports=y,Wu.exports.default=y,Wu.exports}G5();function q5(t,e){return(e==null?void 0:e[t])||H5(t)}function F5(t,e,n){const a={};for(const s in t)Object.hasOwn(t,s)&&(a[e(s,n)]=t[s]);return a}const oA="__lc_escaped__";function Y5(t){return"lc"in t||Object.keys(t).length===1&&oA in t}function Z5(t){return{[oA]:t}}function X5(t){return t!==null&&typeof t=="object"&&"lc_serializable"in t&&typeof t.toJSON=="function"}function K5(t){var n;let e;return t!==null&&typeof t=="object"?"lc_id"in t&&Array.isArray(t.lc_id)?e=t.lc_id:e=[((n=t.constructor)==null?void 0:n.name)??"Object"]:e=[typeof t],{lc:1,type:"not_implemented",id:e}}function ng(t,e=new WeakSet){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){if(e.has(t))return K5(t);if(X5(t))return t;e.add(t);const n=t;if(Y5(n))return e.delete(t),Z5(n);const a={};for(const[s,o]of Object.entries(n))a[s]=ng(o,e);return e.delete(t),a}return Array.isArray(t)?t.map(n=>ng(n,e)):t}function C1(t){return Array.isArray(t)?[...t]:{...t}}function Q5(t,e){const n=C1(t);for(const[a,s]of Object.entries(e)){const[o,...u]=a.split(".").reverse();let c=n;for(const f of u.reverse()){if(c[f]===void 0)break;c[f]=C1(c[f]),c=c[f]}c[o]!==void 0&&(c[o]={lc:1,type:"secret",id:[s]})}return n}function lA(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var fl=class uA{constructor(e,...n){M(this,"lc_serializable",!1);M(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([a])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(a)})):this.lc_kwargs=e??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,lA(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof uA||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},a=Object.keys(this.lc_kwargs).reduce((c,f)=>(c[f]=f in this?this[f]:this.lc_kwargs[f],c),{});for(let c=Object.getPrototypeOf(this);c;c=Object.getPrototypeOf(c))Object.assign(e,Reflect.get(c,"lc_aliases",this)),Object.assign(n,Reflect.get(c,"lc_secrets",this)),Object.assign(a,Reflect.get(c,"lc_attributes",this));Object.keys(n).forEach(c=>{let f=this,h=a;const[m,...y]=c.split(".").reverse();for(const v of y.reverse()){if(!(v in f)||f[v]===void 0)return;(!(v in h)||h[v]===void 0)&&(typeof f[v]=="object"&&f[v]!=null?h[v]={}:Array.isArray(f[v])&&(h[v]=[])),f=f[v],h=h[v]}m in f&&f[m]!==void 0&&(h[m]=h[m]||f[m])});const s={},o=new WeakSet;o.add(this);for(const[c,f]of Object.entries(a))s[c]=ng(f,o);const u=F5(Object.keys(n).length?Q5(s,n):s,q5,e);return{lc:1,type:"constructor",id:this.lc_id,kwargs:u}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function we(t,e){return Ne(t)&&t.type===e}function Ne(t){return typeof t=="object"&&t!==null}function In(t){return Array.isArray(t)}function ce(t){return typeof t=="string"}function ra(t){return typeof t=="number"}function iy(t){return t instanceof Uint8Array}function N1(t){try{return JSON.parse(t)}catch{return}}const Mi=t=>t();function J5(t){if(t.type==="char_location"&&ce(t.document_title)&&ra(t.start_char_index)&&ra(t.end_char_index)&&ce(t.cited_text)){const{document_title:e,start_char_index:n,end_char_index:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"char",title:e??void 0,startIndex:n,endIndex:a,citedText:s}}if(t.type==="page_location"&&ce(t.document_title)&&ra(t.start_page_number)&&ra(t.end_page_number)&&ce(t.cited_text)){const{document_title:e,start_page_number:n,end_page_number:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"page",title:e??void 0,startIndex:n,endIndex:a,citedText:s}}if(t.type==="content_block_location"&&ce(t.document_title)&&ra(t.start_block_index)&&ra(t.end_block_index)&&ce(t.cited_text)){const{document_title:e,start_block_index:n,end_block_index:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"block",title:e??void 0,startIndex:n,endIndex:a,citedText:s}}if(t.type==="web_search_result_location"&&ce(t.url)&&ce(t.title)&&ce(t.encrypted_index)&&ce(t.cited_text)){const{url:e,title:n,encrypted_index:a,cited_text:s,...o}=t;return{...o,type:"citation",source:"url",url:e,title:n,startIndex:Number(a),endIndex:Number(a),citedText:s}}if(t.type==="search_result_location"&&ce(t.source)&&ce(t.title)&&ra(t.start_block_index)&&ra(t.end_block_index)&&ce(t.cited_text)){const{source:e,title:n,start_block_index:a,end_block_index:s,cited_text:o,...u}=t;return{...u,type:"citation",source:"search",url:e,title:n??void 0,startIndex:a,endIndex:s,citedText:o}}}function cA(t){if(we(t,"document")&&Ne(t.source)&&"type"in t.source){if(t.source.type==="base64"&&ce(t.source.media_type)&&ce(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&ce(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&ce(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&ce(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(we(t,"image")&&Ne(t.source)&&"type"in t.source){if(t.source.type==="base64"&&ce(t.source.media_type)&&ce(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&ce(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&ce(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function W5(t){function*e(){for(const n of t){const a=cA(n);a?yield a:yield n}}return Array.from(e())}function O1(t){function*e(){var a;const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n){if(we(s,"text")&&ce(s.text)){const{text:o,citations:u,...c}=s;if(In(u)&&u.length){const f=u.reduce((h,m)=>{const y=J5(m);return y?[...h,y]:h},[]);yield{...c,type:"text",text:o,annotations:f};continue}else{yield{...c,type:"text",text:o};continue}}else if(we(s,"thinking")&&ce(s.thinking)){const{thinking:o,signature:u,...c}=s;yield{...c,type:"reasoning",reasoning:o,signature:u};continue}else if(we(s,"redacted_thinking")){yield{type:"non_standard",value:s};continue}else if(we(s,"tool_use")&&ce(s.name)&&ce(s.id)){yield{type:"tool_call",id:s.id,name:s.name,args:s.input};continue}else if(we(s,"input_json_delta")){if(tL(t)&&((a=t.tool_call_chunks)!=null&&a.length)){const o=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:o.id,name:o.name,args:o.args,index:o.index};continue}}else if(we(s,"server_tool_use")&&ce(s.name)&&ce(s.id)){const{name:o,id:u}=s;if(o==="web_search"){yield{id:u,type:"server_tool_call",name:"web_search",args:{query:Mi(()=>{if(typeof s.input=="string")return s.input;if(Ne(s.input)&&ce(s.input.query))return s.input.query;if(ce(s.partial_json)){const c=N1(s.partial_json);if(c!=null&&c.query)return c.query}return""})}};continue}else if(s.name==="code_execution"){yield{id:u,type:"server_tool_call",name:"code_execution",args:{code:Mi(()=>{if(typeof s.input=="string")return s.input;if(Ne(s.input)&&ce(s.input.code))return s.input.code;if(ce(s.partial_json)){const c=N1(s.partial_json);if(c!=null&&c.code)return c.code}return""})}};continue}}else if(we(s,"web_search_tool_result")&&ce(s.tool_use_id)&&In(s.content)){const{content:o,tool_use_id:u}=s;yield{type:"server_tool_call_result",name:"web_search",toolCallId:u,status:"success",output:{urls:o.reduce((c,f)=>we(f,"web_search_result")?[...c,f.url]:c,[])}};continue}else if(we(s,"code_execution_tool_result")&&ce(s.tool_use_id)&&Ne(s.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(we(s,"mcp_tool_use")){yield{id:s.id,type:"server_tool_call",name:"mcp_tool_use",args:s.input};continue}else if(we(s,"mcp_tool_result")&&ce(s.tool_use_id)&&Ne(s.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(we(s,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:s.input};continue}else if(we(s,"search_result")){yield{id:s.id,type:"non_standard",value:s};continue}else if(we(s,"tool_result")){yield{id:s.id,type:"non_standard",value:s};continue}else{const o=cA(s);if(o){yield o;continue}}yield{type:"non_standard",value:s}}}return Array.from(e())}const eL={translateContent:O1,translateContentChunk:O1};function tL(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function nL(t){return sA(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:rA(t)?{type:t.type,mimeType:t.mime_type??"application/octet-stream",data:t.data,metadata:t.metadata}:P5(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function aL(t){return t.map(nL)}function iL(t){return!!(we(t,"image_url")&&Ne(t.image_url)||we(t,"input_audio")&&Ne(t.input_audio)||we(t,"file")&&Ne(t.file))}function sL(t){if(we(t,"image_url")&&Ne(t.image_url)&&ce(t.image_url.url)){const e=Wo({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(we(t,"input_audio")&&Ne(t.input_audio)&&ce(t.input_audio.data)&&ce(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(we(t,"file")&&Ne(t.file)&&ce(t.file.data)){const e=Wo({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(ce(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function rL(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...sy(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function oL(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...sy(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function sy(t){const e=[];for(const n of t)iL(n)?e.push(sL(n)):e.push(n);return e}function lL(t){if(t.type==="url_citation"){const{url:e,title:n,start_index:a,end_index:s}=t;return{type:"citation",url:e,title:n,startIndex:a,endIndex:s}}if(t.type==="file_citation"){const{file_id:e,filename:n,index:a}=t;return{type:"citation",title:n,startIndex:a,endIndex:a,fileId:e}}return t}function dA(t){function*e(){var a;Ne((a=t.additional_kwargs)==null?void 0:a.reasoning)&&In(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((s,o)=>Ne(o)&&ce(o.text)?`${s}${o.text}`:s,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n)if(we(s,"text")){const{text:o,annotations:u,...c}=s;Array.isArray(u)?yield{...c,type:"text",text:String(o),annotations:u.map(lL)}:yield{...c,type:"text",text:String(o)}}for(const s of t.tool_calls??[])yield{type:"tool_call",id:s.id,name:s.name,args:s.args};if(Ne(t.additional_kwargs)&&In(t.additional_kwargs.tool_outputs))for(const s of t.additional_kwargs.tool_outputs){if(we(s,"web_search_call")){const o={};if(Ne(s.action)&&ce(s.action.query)&&(o.query=s.action.query),yield{id:s.id,type:"server_tool_call",name:"web_search",args:o},s.status==="completed"||s.status==="failed"){const u={};Ne(s.action)&&(u.action=s.action),yield{type:"server_tool_call_result",toolCallId:ce(s.id)?s.id:"",status:s.status==="completed"?"success":"error",output:u}}continue}else if(we(s,"file_search_call")){yield{id:s.id,type:"server_tool_call",name:"file_search",args:{queries:In(s.queries)?s.queries:[]}},(s.status==="completed"||s.status==="failed")&&(yield{type:"server_tool_call_result",toolCallId:ce(s.id)?s.id:"",status:s.status==="completed"?"success":"error",output:In(s.results)?{results:s.results}:{}});continue}else if(we(s,"computer_call")){yield{type:"non_standard",value:s};continue}else if(we(s,"code_interpreter_call")){if(ce(s.code)&&(yield{id:s.id,type:"server_tool_call",name:"code_interpreter",args:{code:s.code}}),In(s.outputs)){const o=Mi(()=>{if(s.status!=="in_progress"){if(s.status==="completed")return 0;if(s.status==="incomplete")return 127;if(s.status!=="interpreting"&&s.status==="failed")return 1}});for(const u of s.outputs)if(we(u,"logs")){yield{type:"server_tool_call_result",toolCallId:s.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:o??0,stderr:[0,void 0].includes(o)?void 0:String(u.logs),stdout:[0,void 0].includes(o)?String(u.logs):void 0}};continue}}continue}else if(we(s,"mcp_call")){yield{id:s.id,type:"server_tool_call",name:"mcp_call",args:s.input};continue}else if(we(s,"mcp_list_tools")){yield{id:s.id,type:"server_tool_call",name:"mcp_list_tools",args:s.input};continue}else if(we(s,"mcp_approval_request")){yield{type:"non_standard",value:s};continue}else if(we(s,"image_generation_call")){ce(s.result)&&(yield{type:"image",mimeType:"image/png",data:s.result,id:ce(s.id)?s.id:void 0,metadata:{status:ce(s.status)?s.status:void 0}}),yield{type:"non_standard",value:s};continue}Ne(s)&&(yield{type:"non_standard",value:s})}}return Array.from(e())}function uL(t){function*e(){yield*dA(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}const cL={translateContent:t=>typeof t.content=="string"?rL(t):dA(t),translateContentChunk:t=>typeof t.content=="string"?oL(t):uL(t)};function dL(t,e="pretty"){return e==="pretty"?fL(t):JSON.stringify(t)}function fL(t){const e=[],n=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,a=Math.floor((80-n.length)/2),s="=".repeat(a),o=n.length%2===0?s:`${s}=`;if(e.push(`${s}${n}${o}`),t.type==="ai"){const u=t;if(u.tool_calls&&u.tool_calls.length>0){e.push("Tool Calls:");for(const c of u.tool_calls){e.push(`  ${c.name} (${c.id})`),e.push(` Call ID: ${c.id}`),e.push("  Args:");for(const[f,h]of Object.entries(c.args))e.push(`    ${f}: ${typeof h=="object"?JSON.stringify(h):h}`)}}}if(t.type==="tool"){const u=t;u.name&&e.push(`Name: ${u.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}const im=Symbol.for("langchain.message");function xs(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>ws(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Vc(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>ws(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function hL(t,e){function n(a,s){if(typeof a!="object"||a===null||a===void 0)return a;if(s>=e)return Array.isArray(a)?"[Array]":"[Object]";if(Array.isArray(a))return a.map(u=>n(u,s+1));const o={};for(const u of Object.keys(a))o[u]=n(a[u],s+1);return o}return JSON.stringify(n(t,0),null,2)}var nT,Ss=class extends fl{constructor(e){const n=typeof e=="string"||Array.isArray(e)?{content:e}:e;n.additional_kwargs||(n.additional_kwargs={}),n.response_metadata||(n.response_metadata={});super(n);M(this,"lc_namespace",["langchain_core","messages"]);M(this,"lc_serializable",!0);M(this,nT,!0);M(this,"id");M(this,"name");M(this,"content");M(this,"additional_kwargs");M(this,"response_metadata");this.name=n.name,n.content===void 0&&n.contentBlocks!==void 0?(this.content=n.contentBlocks,this.response_metadata={output_version:"v1",...n.response_metadata}):n.content!==void 0?(this.content=n.content??[],this.response_metadata=n.response_metadata):(this.content=[],this.response_metadata=n.response_metadata),this.additional_kwargs=n.additional_kwargs,this.id=n.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[aL,sy,W5].reduce((n,a)=>a(n),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&im in e&&e[im]===!0&&z5(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(nT=im,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=hL(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}toFormattedString(e="pretty"){return dL(this,e)}};const mL=["index","created","timestamp"];function Yn(t,e,n){const a=mL;if(t==null&&e==null)return;if(t==null||e==null)return t??e;const s={...t};for(const[o,u]of Object.entries(e))if(s[o]==null)s[o]=u;else{if(u==null)continue;if(typeof s[o]!=typeof u||Array.isArray(s[o])!==Array.isArray(u))throw new Error(`field[${o}] already exists in the message chunk, but with a different type.`);if(typeof s[o]=="string"){if(o==="type")continue;if(["id","name","output_version","model_provider"].includes(o))u&&(s[o]=u);else{if(a.includes(o))continue;s[o]+=u}}else if(typeof s[o]=="number"){if(a.includes(o))continue;s[o]=s[o]+u}else if(typeof s[o]=="object"&&!Array.isArray(s[o]))s[o]=Yn(s[o],u);else if(Array.isArray(s[o]))s[o]=Vc(s[o],u);else{if(s[o]===u)continue;console.warn(`field[${o}] already exists in this message chunk and value has unsupported type.`)}}return s}function Vc(t,e,n){if(!(t==null&&e==null)){if(t==null||e==null)return t||e;{const a=[...t];for(const s of e)if(typeof s=="object"&&s!==null&&"index"in s&&typeof s.index=="number"){const o=a.findIndex(u=>{const c=typeof u=="object",f="index"in u&&u.index===s.index,h="id"in u&&"id"in s&&(u==null?void 0:u.id)===(s==null?void 0:s.id),m=!("id"in u)||!(u!=null&&u.id)||!("id"in s)||!(s!=null&&s.id);return c&&f&&(h||m)});o!==-1&&typeof a[o]=="object"&&a[o]!==null?a[o]=Yn(a[o],s):a.push(s)}else{if(typeof s=="object"&&s!==null&&"text"in s&&s.text==="")continue;a.push(s)}return a}}}var zr=class fA extends Ss{static isInstance(e){if(!super.isInstance(e))return!1;let n=Object.getPrototypeOf(e);for(;n!==null;){if(n===fA.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function pL(t){return typeof t.role=="string"}function rd(t){return typeof(t==null?void 0:t._getType)=="function"}function gL(t){return zr.isInstance(t)}function yL(t,e){return Yn(t,e)??{}}function hA(t,e){const n={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(n.audio=((t==null?void 0:t.audio)??0)+((e==null?void 0:e.audio)??0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(n.image=((t==null?void 0:t.image)??0)+((e==null?void 0:e.image)??0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(n.video=((t==null?void 0:t.video)??0)+((e==null?void 0:e.video)??0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(n.document=((t==null?void 0:t.document)??0)+((e==null?void 0:e.document)??0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(n.text=((t==null?void 0:t.text)??0)+((e==null?void 0:e.text)??0)),n}function vL(t,e){const n={...hA(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(n.cache_read=((t==null?void 0:t.cache_read)??0)+((e==null?void 0:e.cache_read)??0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(n.cache_creation=((t==null?void 0:t.cache_creation)??0)+((e==null?void 0:e.cache_creation)??0)),n}function _L(t,e){const n={...hA(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(n.reasoning=((t==null?void 0:t.reasoning)??0)+((e==null?void 0:e.reasoning)??0)),n}function mA(t,e){return{input_tokens:((t==null?void 0:t.input_tokens)??0)+((e==null?void 0:e.input_tokens)??0),output_tokens:((t==null?void 0:t.output_tokens)??0)+((e==null?void 0:e.output_tokens)??0),total_tokens:((t==null?void 0:t.total_tokens)??0)+((e==null?void 0:e.total_tokens)??0),input_token_details:vL(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:_L(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var bL=class extends Ss{constructor(e,n,a){const s=typeof e=="string"||Array.isArray(e)?{content:e,name:a,tool_call_id:n}:e;super(s);M(this,"lc_direct_tool_output",!0);M(this,"type","tool");M(this,"status");M(this,"tool_call_id");M(this,"metadata");M(this,"artifact");this.tool_call_id=s.tool_call_id,this.artifact=s.artifact,this.status=s.status,this.metadata=s.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function wL(t){const e=[],n=[];for(const a of t)if(a.function){const s=a.function.name;try{const o=JSON.parse(a.function.arguments);e.push({name:s||"",args:o||{},id:a.id})}catch{n.push({name:s,args:a.function.arguments,id:a.id,error:"Malformed args."})}}else continue;return[e,n]}function xL(t){return typeof t=="object"&&t!==null&&"getType"in t&&typeof t.getType=="function"&&t.getType()==="tool"}function ry(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function EL(t){if(Ne(t.document)&&Ne(t.document.source)){const e=ry(Ne(t.document)&&ce(t.document.format)?t.document.format:"");if(Ne(t.document.source)){if(Ne(t.document.source.s3Location)&&ce(t.document.source.s3Location.uri))return{type:"file",mimeType:e,fileId:t.document.source.s3Location.uri};if(iy(t.document.source.bytes))return{type:"file",mimeType:e,data:t.document.source.bytes};if(ce(t.document.source.text))return{type:"file",mimeType:e,data:Buffer.from(t.document.source.text).toString("base64")};if(In(t.document.source.content))return{type:"file",mimeType:e,data:t.document.source.content.reduce((n,a)=>Ne(a)&&ce(a.text)?n+a.text:n,"")}}}return{type:"non_standard",value:t}}function TL(t){if(we(t,"image")&&Ne(t.image)){const e=ry(Ne(t.image)&&ce(t.image.format)?t.image.format:"");if(Ne(t.image.source)){if(Ne(t.image.source.s3Location)&&ce(t.image.source.s3Location.uri))return{type:"image",mimeType:e,fileId:t.image.source.s3Location.uri};if(iy(t.image.source.bytes))return{type:"image",mimeType:e,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function SL(t){if(we(t,"video")&&Ne(t.video)){const e=ry(Ne(t.video)&&ce(t.video.format)?t.video.format:"");if(Ne(t.video.source)){if(Ne(t.video.source.s3Location)&&ce(t.video.source.s3Location.uri))return{type:"video",mimeType:e,fileId:t.video.source.s3Location.uri};if(iy(t.video.source.bytes))return{type:"video",mimeType:e,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function R1(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const a of n){if(we(a,"cache_point")){yield{type:"non_standard",value:a};continue}else if(we(a,"citations_content")&&Ne(a.citationsContent)){yield{type:"text",text:In(a.citationsContent.content)?a.citationsContent.content.reduce((s,o)=>Ne(o)&&ce(o.text)?s+o.text:s,""):"",annotations:In(a.citationsContent.citations)?a.citationsContent.citations.reduce((s,o)=>{if(Ne(o)){const u=In(o.sourceContent)?o.sourceContent.reduce((f,h)=>Ne(h)&&ce(h.text)?f+h.text:f,""):"",c=Mi(()=>{if(Ne(o.location)){const f=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(Ne(f))return{source:ra(f.documentIndex)?f.documentIndex.toString():void 0,startIndex:ra(f.start)?f.start:void 0,endIndex:ra(f.end)?f.end:void 0}}return{}});s.push({type:"citation",citedText:u,...c})}return s},[]):[]};continue}else if(we(a,"document")&&Ne(a.document)){yield EL(a);continue}else if(we(a,"guard_content")){yield{type:"non_standard",value:a};continue}else if(we(a,"image")&&Ne(a.image)){yield TL(a);continue}else if(we(a,"reasoning_content")&&ce(a.reasoningText)){yield{type:"reasoning",reasoning:a.reasoningText};continue}else if(we(a,"text")&&ce(a.text)){yield{type:"text",text:a.text};continue}else if(we(a,"tool_result")){yield{type:"non_standard",value:a};continue}else{if(we(a,"tool_call"))continue;if(we(a,"video")&&Ne(a.video)){yield SL(a);continue}}yield{type:"non_standard",value:a}}}return Array.from(e())}const AL={translateContent:R1,translateContentChunk:R1};function I1(t){var a;const e=[],n=(a=t.additional_kwargs)==null?void 0:a.reasoning_content;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const s of t.content)typeof s=="object"&&"type"in s&&s.type==="text"&&"text"in s&&ce(s.text)&&e.push({type:"text",text:s.text});for(const s of t.tool_calls??[])e.push({type:"tool_call",id:s.id,name:s.name,args:s.args});return e}const CL={translateContent:I1,translateContentChunk:I1};function k1(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const a of n){if(we(a,"text")&&ce(a.text)){yield{type:"text",text:a.text};continue}else if(we(a,"thinking")&&ce(a.thinking)){yield{type:"reasoning",reasoning:a.thinking,...a.signature?{signature:a.signature}:{}};continue}else if(we(a,"inlineData")&&Ne(a.inlineData)&&ce(a.inlineData.mimeType)&&ce(a.inlineData.data)){yield{type:"file",mimeType:a.inlineData.mimeType,data:a.inlineData.data};continue}else if(we(a,"functionCall")&&Ne(a.functionCall)&&ce(a.functionCall.name)&&Ne(a.functionCall.args)){yield{type:"tool_call",id:t.id,name:a.functionCall.name,args:a.functionCall.args};continue}else if(we(a,"functionResponse")){yield{type:"non_standard",value:a};continue}else if(we(a,"fileData")&&Ne(a.fileData)&&ce(a.fileData.mimeType)&&ce(a.fileData.fileUri)){yield{type:"file",mimeType:a.fileData.mimeType,fileId:a.fileData.fileUri};continue}else if(we(a,"executableCode")){yield{type:"non_standard",value:a};continue}else if(we(a,"codeExecutionResult")){yield{type:"non_standard",value:a};continue}yield{type:"non_standard",value:a}}}return Array.from(e())}const NL={translateContent:k1,translateContentChunk:k1};function j1(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const a of n){if(we(a,"reasoning")&&ce(a.reasoning)){const s=Mi(()=>{var u;const o=n.indexOf(a);if(In((u=t.additional_kwargs)==null?void 0:u.signatures)&&o>=0)return t.additional_kwargs.signatures.at(o)});ce(s)?yield{type:"reasoning",reasoning:a.reasoning,signature:s}:yield{type:"reasoning",reasoning:a.reasoning};continue}else if(we(a,"thinking")&&ce(a.thinking)){yield{type:"reasoning",reasoning:a.thinking,...a.signature?{signature:a.signature}:{}};continue}else if(we(a,"text")&&ce(a.text)){yield{type:"text",text:a.text};continue}else if(we(a,"image_url")){if(ce(a.image_url))if(a.image_url.startsWith("data:")){const s=a.image_url.match(/^data:([^;]+);base64,(.+)$/);s?yield{type:"image",data:s[2],mimeType:s[1]}:yield{type:"image",url:a.image_url}}else yield{type:"image",url:a.image_url};continue}else if(we(a,"media")&&ce(a.mimeType)&&ce(a.data)){yield{type:"file",mimeType:a.mimeType,data:a.data};continue}yield{type:"non_standard",value:a}}}return Array.from(e())}const OL={translateContent:j1,translateContentChunk:j1};function M1(t){var a;const e=[],n=(a=t.additional_kwargs)==null?void 0:a.reasoning;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string"){let s=t.content;const o=s.match(/<think>([\s\S]*?)<\/think>/);if(o){const u=o[1].trim();u.length>0&&e.push({type:"reasoning",reasoning:u}),s=s.replace(/<think>[\s\S]*?<\/think>/,"").trim()}s.length>0&&e.push({type:"text",text:s})}else for(const s of t.content)if(typeof s=="object"&&"type"in s&&s.type==="text"&&"text"in s&&ce(s.text)){let o=s.text;const u=o.match(/<think>([\s\S]*?)<\/think>/);if(u){const c=u[1].trim();c.length>0&&e.push({type:"reasoning",reasoning:c}),o=o.replace(/<think>[\s\S]*?<\/think>/,"").trim()}o.length>0&&e.push({type:"text",text:o})}for(const s of t.tool_calls??[])e.push({type:"tool_call",id:s.id,name:s.name,args:s.args});return e}const RL={translateContent:M1,translateContentChunk:M1};function L1(t){var a;const e=[],n=(a=t.additional_kwargs)==null?void 0:a.reasoning_content;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const s of t.content)typeof s=="object"&&"type"in s&&s.type==="text"&&"text"in s&&ce(s.text)&&e.push({type:"text",text:s.text});for(const s of t.tool_calls??[])e.push({type:"tool_call",id:s.id,name:s.name,args:s.args});return e}const IL={translateContent:L1,translateContentChunk:L1};function D1(t){var a,s;const e=[];if(Ne((a=t.additional_kwargs)==null?void 0:a.reasoning)){const o=t.additional_kwargs.reasoning;if(In(o.summary)){const u=o.summary.reduce((c,f)=>Ne(f)&&ce(f.text)?`${c}${f.text}`:c,"");u.length>0&&e.push({type:"reasoning",reasoning:u})}}const n=(s=t.additional_kwargs)==null?void 0:s.reasoning_content;if(ce(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const o of t.content)typeof o=="object"&&"type"in o&&o.type==="text"&&"text"in o&&ce(o.text)&&e.push({type:"text",text:o.text});for(const o of t.tool_calls??[])e.push({type:"tool_call",id:o.id,name:o.name,args:o.args});return e}const kL={translateContent:D1,translateContentChunk:D1};function P1(t){function*e(){const n=Mi(()=>typeof t.content=="string"?t.additional_kwargs.originalTextContentBlock?[{...t.additional_kwargs.originalTextContentBlock,type:"text"}]:[{type:"text",text:t.content}]:t.content);for(const a of n){const s=Mi(()=>we(a,"text")&&ce(a.text)?{type:"text",text:a.text}:we(a,"inlineData")&&Ne(a.inlineData)&&ce(a.inlineData.mimeType)&&ce(a.inlineData.data)?{type:"file",mimeType:a.inlineData.mimeType,data:a.inlineData.data}:we(a,"functionCall")&&Ne(a.functionCall)&&ce(a.functionCall.name)&&Ne(a.functionCall.args)?{type:"tool_call",id:t.id,name:a.functionCall.name,args:a.functionCall.args}:we(a,"functionResponse")?{type:"non_standard",value:a}:we(a,"fileData")&&Ne(a.fileData)&&ce(a.fileData.mimeType)&&ce(a.fileData.fileUri)?{type:"file",mimeType:a.fileData.mimeType,fileId:a.fileData.fileUri}:we(a,"executableCode")?{type:"non_standard",value:a}:we(a,"codeExecutionResult")?{type:"non_standard",value:a}:{type:"non_standard",value:a}),o=Mi(()=>"thought"in a&&a.thought?{type:"reasoning",reasoning:s.type==="text"?s.text:"",reasoningContentBlock:s}:s),u={thought:a.thought,thoughtSignature:a.thoughtSignature,partMetadata:a.partMetadata,...o};for(const c in u)u[c]===void 0&&delete u[c];yield u}}return Array.from(e())}const jL={translateContent:P1,translateContentChunk:P1};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",eL],["bedrock-converse",AL],["deepseek",CL],["google",jL],["google-genai",NL],["google-vertexai",OL],["groq",RL],["ollama",IL],["openai",cL],["xai",kL]]));function pA(t){return globalThis.lc_block_translators_registry.get(t)}function gA(t){const e=Symbol.for(t);return{brand(n,a){var u,c;const s=a?Symbol.for(`${t}.${a}`):e;class o extends(c=n,u=s,c){constructor(...m){super(...m);M(this,u,!0)}static isInstance(m){return typeof m=="object"&&m!==null&&s in m&&m[s]===!0}}return Object.defineProperty(o,"name",{value:n.name}),o},sub(n){return gA(`${t}.${n}`)},isInstance(n){return typeof n=="object"&&n!==null&&e in n&&n[e]===!0}}}const ML=gA("langchain");function yA(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}const oy=ML.sub("error");var vA=class extends oy.brand(Error){constructor(e){super(e);M(this,"name","LangChainError");Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},$1=class extends oy.brand(vA,"model-abort"){constructor(e,n){super(e);M(this,"name","ModelAbortError");M(this,"partialOutput");this.partialOutput=n}};(class _A extends oy.brand(vA,"context-overflow"){constructor(n){super(n??"Input exceeded the model's context window.");M(this,"name","ContextOverflowError");M(this,"cause")}static fromError(n){const a=new _A(n.message);return a.cause=n,a}});function bA(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}var LL=class extends Error{constructor(e,n){super(e);M(this,"output");this.output=n}};function U1(t,e=wA){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let a=t.substring(n+3);a.startsWith(`json
`)?a=a.substring(5):a.startsWith("json")?a=a.substring(4):a.startsWith(`
`)&&(a=a.substring(1));const s=a.indexOf("```");let o=a;return s!==-1&&(o=a.substring(0,s)),e(o.trim())}function DL(t){try{return JSON.parse(t)}catch{}const e=t.trim();if(e.length===0)throw new Error("Unexpected end of JSON input");let n=0;function a(){for(;n<e.length&&/\s/.test(e[n]);)n+=1}function s(){if(e[n]!=='"')throw new Error(`Expected '"' at position ${n}, got '${e[n]}'`);n+=1;let m="",y=!1;for(;n<e.length;){const v=e[n];if(y){if(v==="n")m+=`
`;else if(v==="t")m+="	";else if(v==="r")m+="\r";else if(v==="\\")m+="\\";else if(v==='"')m+='"';else if(v==="b")m+="\b";else if(v==="f")m+="\f";else if(v==="/")m+="/";else if(v==="u"){const _=e.substring(n+1,n+5);if(/^[0-9A-Fa-f]{0,4}$/.test(_))_.length===4?m+=String.fromCharCode(Number.parseInt(_,16)):m+=`u${_}`,n+=_.length;else throw new Error(`Invalid unicode escape sequence '\\u${_}' at position ${n}`)}else throw new Error(`Invalid escape sequence '\\${v}' at position ${n}`);y=!1}else if(v==="\\")y=!0;else{if(v==='"')return n+=1,m;m+=v}n+=1}return y&&(m+="\\"),m}function o(){const m=n;let y="";if(e[n]==="-"&&(y+="-",n+=1),n<e.length&&e[n]==="0"&&(y+="0",n+=1,e[n]>="0"&&e[n]<="9"))throw new Error(`Invalid number at position ${m}`);if(n<e.length&&e[n]>="1"&&e[n]<="9")for(;n<e.length&&e[n]>="0"&&e[n]<="9";)y+=e[n],n+=1;if(n<e.length&&e[n]===".")for(y+=".",n+=1;n<e.length&&e[n]>="0"&&e[n]<="9";)y+=e[n],n+=1;if(n<e.length&&(e[n]==="e"||e[n]==="E"))for(y+=e[n],n+=1,n<e.length&&(e[n]==="+"||e[n]==="-")&&(y+=e[n],n+=1);n<e.length&&e[n]>="0"&&e[n]<="9";)y+=e[n],n+=1;if(y==="-")return-0;const v=Number.parseFloat(y);if(Number.isNaN(v))throw n=m,new Error(`Invalid number '${y}' at position ${m}`);return v}function u(){if(a(),n>=e.length)throw new Error(`Unexpected end of input at position ${n}`);const m=e[n];if(m==="{")return f();if(m==="[")return c();if(m==='"')return s();if("null".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),null;if("true".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),!0;if("false".startsWith(e.substring(n,n+5)))return n+=Math.min(5,e.length-n),!1;if(m==="-"||m>="0"&&m<="9")return o();throw new Error(`Unexpected character '${m}' at position ${n}`)}function c(){if(e[n]!=="[")throw new Error(`Expected '[' at position ${n}, got '${e[n]}'`);const m=[];if(n+=1,a(),n>=e.length)return m;if(e[n]==="]")return n+=1,m;for(;n<e.length;){if(a(),n>=e.length||(m.push(u()),a(),n>=e.length))return m;if(e[n]==="]")return n+=1,m;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or ']' at position ${n}, got '${e[n]}'`)}return m}function f(){if(e[n]!=="{")throw new Error(`Expected '{' at position ${n}, got '${e[n]}'`);const m={};if(n+=1,a(),n>=e.length)return m;if(e[n]==="}")return n+=1,m;for(;n<e.length;){if(a(),n>=e.length)return m;const y=s();if(a(),n>=e.length)return m;if(e[n]!==":")throw new Error(`Expected ':' at position ${n}, got '${e[n]}'`);if(n+=1,a(),n>=e.length||(m[y]=u(),a(),n>=e.length))return m;if(e[n]==="}")return n+=1,m;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or '}' at position ${n}, got '${e[n]}'`)}return m}const h=u();if(a(),n<e.length)throw new Error(`Unexpected character '${e[n]}' at position ${n}`);return h}function wA(t){try{return typeof t>"u"?null:DL(t)}catch{return null}}var xA=class EA extends Ss{constructor(n,a){(typeof n=="string"||Array.isArray(n))&&(n={content:n,role:a});super(n);M(this,"type","generic");M(this,"role");this.role=n.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return EA}static isInstance(n){return super.isInstance(n)&&n.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},PL=class extends zr{constructor(e,n){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:n});super(e);M(this,"type","generic");M(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},$L=class extends zr{constructor(){super(...arguments);M(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}},hl=class extends Ss{constructor(e){super(e);M(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},UL=class extends zr{constructor(e){super(e);M(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},zL=class extends Ss{constructor(e){super({...e,content:[]});M(this,"type","remove");M(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}},ag=class xc extends Ss{constructor(n){super(n);M(this,"type","system")}static lc_name(){return"SystemMessage"}concat(n){if(typeof n=="string")return new xc({...this,content:xs(this.content,n)});if(xc.isInstance(n))return new xc({...this,additional_kwargs:{...this.additional_kwargs,...n.additional_kwargs},response_metadata:{...this.response_metadata,...n.response_metadata},content:xs(this.content,n.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(n){return super.isInstance(n)&&n.type==="system"}},BL=class extends zr{constructor(e){super(e);M(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){const n=this.constructor;return new n({content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:Yn(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function VL(t){return bA(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function HL(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function sm(t){let e,n;if(HL(t)){const a=t.id.at(-1);a==="HumanMessage"||a==="HumanMessageChunk"?e="user":a==="AIMessage"||a==="AIMessageChunk"?e="assistant":a==="SystemMessage"||a==="SystemMessageChunk"?e="system":a==="FunctionMessage"||a==="FunctionMessageChunk"?e="function":a==="ToolMessage"||a==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:a,...s}=t;e=a,n=s}if(e==="human"||e==="user")return new hl(n);if(e==="ai"||e==="assistant"){const{tool_calls:a,...s}=n;if(!Array.isArray(a))return new Mr(n);const o=a.map(VL);return new Mr({...s,tool_calls:o})}else{if(e==="system")return new ag(n);if(e==="developer")return new ag({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new bL({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new zL({...n,id:n.id});throw yA(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Ec(t){if(typeof t=="string")return new hl(t);if(rd(t))return t;if(Array.isArray(t)){const[e,n]=t;return sm({type:e,content:n})}else if(pL(t)){const{role:e,...n}=t;return sm({...n,type:e})}else return sm(t)}function TA(t,e="Human",n="AI"){const a=[];for(const s of t){let o;if(s.type==="human")o=e;else if(s.type==="ai")o=n;else if(s.type==="system")o="System";else if(s.type==="tool")o="Tool";else if(s.type==="generic")o=s.role;else throw new Error(`Got unsupported message type: ${s.type}`);const u=s.name?`${s.name}, `:"",c=s.text;let f=`${o}: ${u}${c}`;if(s.type==="ai"){const h=s;h.tool_calls&&h.tool_calls.length>0?f+=JSON.stringify(h.tool_calls):h.additional_kwargs&&"function_call"in h.additional_kwargs&&(f+=JSON.stringify(h.additional_kwargs.function_call))}a.push(f)}return a.join(`
`)}function GL(t){var n;const e=t._getType();if(e==="human")return new UL({...t});if(e==="ai"){let a={...t};return"tool_calls"in a&&(a={...a,tool_call_chunks:(n=a.tool_calls)==null?void 0:n.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new Sl({...a})}else{if(e==="system")return new BL({...t});if(e==="function")return new $L({...t});if(xA.isInstance(t))return new PL({...t});throw new Error("Unknown message type.")}}function qL(t){var s,o;const e=t.reduce((u,c)=>{const f=u.findIndex(([h])=>"id"in c&&c.id&&"index"in c&&c.index!==void 0?c.id===h.id&&c.index===h.index:"id"in c&&c.id?c.id===h.id:"index"in c&&c.index!==void 0?c.index===h.index:!1);return f!==-1?u[f].push(c):u.push([c]),u},[]),n=[],a=[];for(const u of e){let c=null;const f=((s=u[0])==null?void 0:s.name)??"",h=u.map(v=>v.args||"").join("").trim(),m=h.length?h:"{}",y=(o=u[0])==null?void 0:o.id;try{if(c=wA(m),!y||c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");n.push({name:f,args:c,id:y,type:"tool_call"})}catch{a.push({name:f,args:m,id:y,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:t,tool_calls:n,invalid_tool_calls:a}}var Mr=class extends Ss{constructor(e){var a;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{n=e;const s=(a=n.additional_kwargs)==null?void 0:a.tool_calls,o=n.tool_calls;s!=null&&s.length>0&&(o===void 0||o.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(s!=null&&o===void 0){const[u,c]=wL(s);n.tool_calls=u??[],n.invalid_tool_calls=c??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}if(n.response_metadata!==void 0&&"output_version"in n.response_metadata&&n.response_metadata.output_version==="v1"&&(n.contentBlocks=n.content,n.content=void 0),n.contentBlocks!==void 0){n.tool_calls&&n.contentBlocks.push(...n.tool_calls.map(c=>({type:"tool_call",id:c.id,name:c.name,args:c.args})));const u=n.contentBlocks.filter(c=>c.type==="tool_call").filter(c=>{var f;return!((f=n.tool_calls)!=null&&f.some(h=>h.id===c.id&&h.name===c.name))});u.length>0&&(n.tool_calls=u.map(c=>({type:"tool_call",id:c.id,name:c.name,args:c.args})))}}super(n);M(this,"type","ai");M(this,"tool_calls",[]);M(this,"invalid_tool_calls",[]);M(this,"usage_metadata");typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=pA(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const n=this.tool_calls.filter(a=>!e.some(s=>s.id===a.id&&s.name===a.name));e.push(...n.map(a=>({type:"tool_call",id:a.id,name:a.name,args:a.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function ly(t){return t._getType()==="ai"}function z1(t){return t._getType()==="ai"}var Sl=class extends zr{constructor(e){let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const a=qL(e.tool_call_chunks??[]);n={...e,tool_call_chunks:a.tool_call_chunks,tool_calls:a.tool_calls,invalid_tool_calls:a.invalid_tool_calls,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n);M(this,"type","ai");M(this,"tool_calls",[]);M(this,"invalid_tool_calls",[]);M(this,"tool_call_chunks",[]);M(this,"usage_metadata");this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=pA(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const n=this.content.filter(a=>a.type==="tool_call").map(a=>a.id);for(const a of this.tool_calls)a.id&&!n.includes(a.id)&&e.push({...a,type:"tool_call",id:a.id,name:a.name,args:a.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:xs(this.content,e.content),additional_kwargs:Yn(this.additional_kwargs,e.additional_kwargs),response_metadata:yL(this.response_metadata,e.response_metadata),tool_call_chunks:[],tool_calls:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const s=Vc(this.tool_call_chunks,e.tool_call_chunks);s!==void 0&&s.length>0&&(n.tool_call_chunks=s)}if(this.tool_calls!==void 0||e.tool_calls!==void 0){const s=Vc(this.tool_calls,e.tool_calls);s!==void 0&&s.length>0&&(n.tool_calls=s)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(n.usage_metadata=mA(this.usage_metadata,e.usage_metadata));const a=this.constructor;return new a(n)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};const SA=Symbol.for("ls:tracing_async_local_storage"),Tc=Symbol.for("lc:context_variables"),FL=t=>{globalThis[SA]=t},ml=()=>globalThis[SA];var rm={};const YL=()=>typeof window<"u"&&typeof window.document<"u",ZL=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",XL=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),uy=()=>typeof Deno<"u",KL=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!uy(),QL=()=>{let t;return YL()?t="browser":KL()?t="node":ZL()?t="webworker":XL()?t="jsdom":uy()?t="deno":t="other",t};let om;function JL(){return om===void 0&&(om={library:"langchain-js",runtime:QL()}),om}function Li(t){try{return typeof process<"u"?rm==null?void 0:rm[t]:uy()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}const WL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function el(t){return typeof t=="string"&&WL.test(t)}function eD(t){if(!el(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Ft=[];for(var lm=0;lm<256;++lm)Ft.push((lm+256).toString(16).slice(1));function cy(t,e=0){return(Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]).toLowerCase()}var ec,tD=new Uint8Array(16);function AA(){if(!ec&&(ec=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ec))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ec(tD)}function nD(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var aD="6ba7b810-9dad-11d1-80b4-00c04fd430c8",iD="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function sD(t,e,n){function a(s,o,u,c){var f;if(typeof s=="string"&&(s=nD(s)),typeof o=="string"&&(o=eD(o)),((f=o)===null||f===void 0?void 0:f.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(o),h.set(s,o.length),h=n(h),h[6]=h[6]&15|e,h[8]=h[8]&63|128,u){c=c||0;for(var m=0;m<16;++m)u[c+m]=h[m];return u}return cy(h)}try{a.name=t}catch{}return a.DNS=aD,a.URL=iD,a}var rD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const B1={randomUUID:rD};function hs(t,e,n){if(B1.randomUUID&&!t)return B1.randomUUID();t=t||{};var a=t.random||(t.rng||AA)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,cy(a)}function oD(t,e,n,a){switch(t){case 0:return e&n^~e&a;case 1:return e^n^a;case 2:return e&n^e&a^n&a;case 3:return e^n^a}}function um(t,e){return t<<e|t>>>32-e}function lD(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var a=unescape(encodeURIComponent(t));t=[];for(var s=0;s<a.length;++s)t.push(a.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,u=Math.ceil(o/16),c=new Array(u),f=0;f<u;++f){for(var h=new Uint32Array(16),m=0;m<16;++m)h[m]=t[f*64+m*4]<<24|t[f*64+m*4+1]<<16|t[f*64+m*4+2]<<8|t[f*64+m*4+3];c[f]=h}c[u-1][14]=(t.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(t.length-1)*8&4294967295;for(var y=0;y<u;++y){for(var v=new Uint32Array(80),_=0;_<16;++_)v[_]=c[y][_];for(var x=16;x<80;++x)v[x]=um(v[x-3]^v[x-8]^v[x-14]^v[x-16],1);for(var w=n[0],C=n[1],A=n[2],I=n[3],R=n[4],U=0;U<80;++U){var P=Math.floor(U/20),Y=um(w,5)+oD(P,C,A,I)+R+e[P]+v[U]>>>0;R=I,I=A,A=um(C,30)>>>0,C=w,w=Y}n[0]=n[0]+w>>>0,n[1]=n[1]+C>>>0,n[2]=n[2]+A>>>0,n[3]=n[3]+I>>>0,n[4]=n[4]+R>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var uD=sD("v5",80,lD),V1=null,H1=null,na=0;function Ci(t,e,n){t=t||{};var a=0,s=new Uint8Array(16),o=t.random||(t.rng||AA)(),u=t.msecs!==void 0?t.msecs:Date.now(),c=t.seq!==void 0?t.seq:null,f=H1,h=V1;return u>na&&t.msecs===void 0&&(na=u,c!==null&&(f=null,h=null)),c!==null&&(c>2147483647&&(c=2147483647),f=c>>>19&4095,h=c&524287),(f===null||h===null)&&(f=o[6]&127,f=f<<8|o[7],h=o[8]&63,h=h<<8|o[9],h=h<<5|o[10]>>>3),u+1e4>na&&c===null?++h>524287&&(h=0,++f>4095&&(f=0,na++)):na=u,H1=f,V1=h,s[a++]=na/1099511627776&255,s[a++]=na/4294967296&255,s[a++]=na/16777216&255,s[a++]=na/65536&255,s[a++]=na/256&255,s[a++]=na&255,s[a++]=f>>>4&15|112,s[a++]=f&255,s[a++]=h>>>13&63|128,s[a++]=h>>>5&255,s[a++]=h<<3&255|o[10]&7,s[a++]=o[11],s[a++]=o[12],s[a++]=o[13],s[a++]=o[14],s[a++]=o[15],cy(s)}var cD=class{};function dD(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var od=class extends cD{constructor(e){super();M(this,"lc_serializable",!1);M(this,"lc_kwargs");M(this,"ignoreLLM",!1);M(this,"ignoreChain",!1);M(this,"ignoreAgent",!1);M(this,"ignoreRetriever",!1);M(this,"ignoreCustomEvent",!1);M(this,"raiseError",!1);M(this,"awaitHandlers",Li("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,lA(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return fl.prototype.toJSON.call(this)}toJSONNotImplemented(){return fl.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends od{constructor(){super();M(this,"name",Ci());Object.assign(this,e)}}return new n}};const fD=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},hD="gen_ai.operation.name",mD="gen_ai.system",G1="gen_ai.request.model",pD="gen_ai.response.model",q1="gen_ai.usage.input_tokens",F1="gen_ai.usage.output_tokens",Y1="gen_ai.usage.total_tokens",gD="gen_ai.request.max_tokens",yD="gen_ai.request.temperature",vD="gen_ai.request.top_p",_D="gen_ai.request.frequency_penalty",bD="gen_ai.request.presence_penalty",wD="gen_ai.response.finish_reasons",xD="gen_ai.prompt",ED="gen_ai.completion",TD="gen_ai.request.extra_query",SD="gen_ai.request.extra_body",AD="gen_ai.serialized.name",CD="gen_ai.serialized.signature",ND="gen_ai.serialized.doc",OD="gen_ai.response.id",RD="gen_ai.response.service_tier",ID="gen_ai.response.system_fingerprint",kD="gen_ai.usage.input_token_details",jD="gen_ai.usage.output_token_details",MD="langsmith.trace.session_id",LD="langsmith.trace.session_name",DD="langsmith.span.kind",PD="langsmith.trace.name",$D="langsmith.metadata",Z1="langsmith.span.tags",UD="langsmith.request.streaming",zD="langsmith.request.headers",BD=(...t)=>fetch(...t),CA=Symbol.for("ls:fetch_implementation"),VD=()=>globalThis[CA]===void 0,HD=t=>async(...e)=>{if(t||an("DEBUG")==="true"){const[a,s]=e;console.log(` ${(s==null?void 0:s.method)||"GET"} ${a}`)}const n=await(globalThis[CA]??BD)(...e);return(t||an("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},NA=()=>an("PROJECT")??Sa("LANGCHAIN_SESSION")??"default",X1={};function Sc(t){X1[t]||(console.warn(t),X1[t]=!0)}const re=t=>BigInt(t),OA=re("0x9E3779B1"),RA=re("0x85EBCA77"),GD=re("0xC2B2AE3D"),Bi=re("0x9E3779B185EBCA87"),Es=re("0xC2B2AE3D27D4EB4F"),IA=re("0x165667B19E3779F9"),dy=re("0x85EBCA77C2B2AE63"),qD=re("0x27D4EB2F165667C5"),FD=re("0x165667919E3779F9"),YD=re("0x9FB21C651E98DF25");function ZD(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.substring(n,n+2),16);return e}const ba=ZD("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),Nr=(re(1)<<re(128))-re(1),$e=(re(1)<<re(64))-re(1),Hc=(re(1)<<re(32))-re(1),qa=64,kA=qa/8,XD=8,tc=4;function ut(t,e=0){return new Uint8Array(t.buffer,t.byteOffset+e,t.length-e)}function ht(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getBigUint64(0,!0)}function Er(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getUint32(0,!0)}function cm(t,e=0){return t[e]}const KD=t=>(t&re(255))<<re(56)|(t&re(65280))<<re(40)|(t&re(16711680))<<re(24)|(t&re(4278190080))<<re(8)|(t&re(0xff00000000))>>re(8)|(t&re(0xff0000000000))>>re(24)|(t&re(0xff000000000000))>>re(40)|(t&re(0xff00000000000000))>>re(56),QD=t=>(t=(t&re(65535))<<re(16)|(t&re(4294901760))>>re(16),t=(t&re(16711935))<<re(8)|(t&re(4278255360))>>re(8),t),JD=(t,e)=>(t&Hc)*(e&Hc)&$e,Lr=t=>{if(!t)throw new Error("Assert failed")};function WD(t,e){return(t<<e|t>>re(32)-e)&Hc}function jA(t,e,n){for(let a=0;a<kA;a++){const s=ht(e,a*8),o=s^ht(n,a*8);t[a^1]+=s,t[a]+=JD(o,o>>re(32))}return t}function K1(t,e,n,a){for(let s=0;s<a;s++)jA(t,ut(e,s*qa),ut(n,s*8));return t}function e6(t,e){for(let n=0;n<kA;n++){const a=ht(e,n*8);let s=t[n];s=ig(s,re(47)),s^=a,s*=OA,t[n]=s&$e}return t}function nc(t,e){return MA(t[0]^ht(e,0),t[1]^ht(e,XD))}function Q1(t,e,n){let a=n;return a+=nc(t.slice(0),ut(e,0*tc)),a+=nc(t.slice(2),ut(e,4*tc)),a+=nc(t.slice(4),ut(e,8*tc)),a+=nc(t.slice(6),ut(e,12*tc)),wa(a&$e)}function t6(t,e,n,a,s){const o=Math.floor((n.byteLength-qa)/8),u=qa*o,c=Math.floor((e.byteLength-1)/u);for(let f=0;f<c;f++)t=K1(t,ut(e,f*u),n,o),t=s(t,ut(n,n.byteLength-qa));{const f=Math.floor((e.byteLength-1-u*c)/qa);t=K1(t,ut(e,c*u),n,f),t=a(t,ut(e,e.byteLength-qa),ut(n,n.byteLength-qa-7))}return t}function n6(t,e,n){let a=new BigUint64Array([GD,Bi,Es,IA,dy,RA,qD,OA]);Lr(t.length>128),a=t6(a,t,e,jA,e6),Lr(a.length*8==64);{const s=Q1(a,ut(e,11),re(t.byteLength)*Bi&$e);return Q1(a,ut(e,e.byteLength-qa-11),~(re(t.byteLength)*Es)&$e)<<re(64)|s}}function MA(t,e){const n=t*e&Nr;return n&$e^n>>re(64)}function J1(t,e,n){return MA((ht(t,0)^ht(e,0)+n)&$e,(ht(t,8)^ht(e,8)-n)&$e)}function Ac(t,e,n,a,s){let o=t&$e,u=t>>re(64)&$e;return o+=J1(e,a,s),o^=ht(n,0)+ht(n,8),o&=$e,u+=J1(n,ut(a,16),s),u^=ht(e,0)+ht(e,8),u&=$e,u<<re(64)|o}function wa(t){return t^=t>>re(37),t*=FD,t&=$e,t^=t>>re(32),t}function Gc(t){return t^=t>>re(33),t*=Es,t&=$e,t^=t>>re(29),t*=IA,t&=$e,t^=t>>re(32),t}function a6(t,e,n){const a=t.byteLength;Lr(a>0&&a<=3);const s=re(cm(t,a-1))|re(a<<8)|re(cm(t,0)<<16)|re(cm(t,a>>1)<<24),o=(re(Er(e,0))^re(Er(e,4)))+n,u=(s^o)&$e,c=(re(Er(e,8))^re(Er(e,12)))-n,f=(WD(QD(s),re(13))^c)&$e;return(Gc(f)&$e)<<re(64)|Gc(u)}function ig(t,e){return t^t>>e}function i6(t,e,n){const a=t.byteLength;Lr(a>=4&&a<=8);{const s=Er(t,0),o=Er(t,a-4),u=re(s)|re(o)<<re(32),c=(ht(e,16)^ht(e,24))+n&$e;let h=(u^c)*(Bi+(re(a)<<re(2)))&Nr;return h+=(h&$e)<<re(65),h&=Nr,h^=h>>re(67),ig(ig(h&$e,re(35))*YD&$e,re(28))|wa(h>>re(64))<<re(64)}}function s6(t,e,n){const a=t.byteLength;Lr(a>=9&&a<=16);{const s=(ht(e,32)^ht(e,40))+n&$e,o=(ht(e,48)^ht(e,56))-n&$e,u=ht(t);let c=ht(t,a-8),f=(u^c^s)*Bi;const h=(f&$e)+(re(a-1)<<re(54));f=f&(Nr^$e)|h,c^=o,f+=c+(c&Hc)*(RA-re(1))<<re(64),f&=Nr,f^=KD(f>>re(64));let m=(f&$e)*Es;return m+=(f>>re(64))*Es<<re(64),m&=Nr,wa(m&$e)|wa(m>>re(64))<<re(64)}}function r6(t,e){const n=t.byteLength;return Lr(n<=16),n>8?s6(t,ba,e):n>=4?i6(t,ba,e):n>0?a6(t,ba,e):Gc(e^ht(ba,64)^ht(ba,72))|Gc(e^ht(ba,80)^ht(ba,88))<<re(64)}function sg(t){return~t+re(1)&$e}function o6(t,e,n){let a=re(t.byteLength)*Bi&$e,s=re(t.byteLength-1)/re(32);for(;s>=0;){const c=Number(s);a=Ac(a,ut(t,16*c),ut(t,t.byteLength-16*(c+1)),ut(e,32*c),n),s--}let o=a+(a>>re(64))&$e;o=wa(o);let u=(a&$e)*Bi+(a>>re(64))*dy+(re(t.byteLength)-n&$e)*Es;return u&=$e,u=sg(wa(u)),o|u<<re(64)}function l6(t,e,n){let a=re(t.byteLength)*Bi&$e;for(let u=32;u<160;u+=32)a=Ac(a,ut(t,u-32),ut(t,u-16),ut(e,u-32),n);a=wa(a&$e)|wa(a>>re(64))<<re(64);for(let u=160;u<=t.byteLength;u+=32)a=Ac(a,ut(t,u-32),ut(t,u-16),ut(e,3+u-160),n);a=Ac(a,ut(t,t.byteLength-16),ut(t,t.byteLength-32),ut(e,103),sg(n));let s=a+(a>>re(64))&$e;s=wa(s);let o=(a&$e)*Bi+(a>>re(64))*dy+(re(t.byteLength)-n&$e)*Es;return o&=$e,o=sg(wa(o)),s|o<<re(64)}function u6(t,e=re(0)){const n=t.byteLength;return n<=16?r6(t,e):n<=128?o6(t,ba,e):n<=240?l6(t,ba,e):n6(t,ba)}function c6(t){const e=new Uint8Array(16),n=new DataView(e.buffer),a=t&$e,s=t>>re(64);return n.setBigUint64(0,s,!1),n.setBigUint64(8,a,!1),e}const LA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Me(t,e){if(!LA.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}function d6(t){const e=typeof t=="string"?Date.parse(t):t;return Ci({msecs:e,seq:0})}function f6(t){if(!LA.test(t))return null;const e=t[14];return parseInt(e,16)}function h6(t){const e=t.replace(/-/g,""),n=new Uint8Array(16);for(let a=0;a<16;a++)n[a]=parseInt(e.slice(a*2,a*2+2),16);return n}function m6(t){const e=Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}const p6=new TextEncoder;function g6(t){const e=p6.encode(t),n=u6(e);return c6(n)}function ac(t,e){const n=`${t}:${e}`,a=g6(n),s=new Uint8Array(16);if(f6(t)===7){const u=h6(t);s.set(u.slice(0,6),0)}else{const u=Date.now();s[0]=u/1099511627776&255,s[1]=u/4294967296&255,s[2]=u/16777216&255,s[3]=u/65536&255,s[4]=u/256&255,s[5]=u&255}return s[6]=112|a[0]&15,s[7]=a[1],s[8]=128|a[2]&63,s.set(a.slice(3,10),9),m6(s)}function y6(t,e){throw new Error("dump() is not supported in browser environments.")}function v6(t){throw new Error("load() is not supported in browser environments.")}function _6(t,e){return e===null?!1:Date.now()-t.createdAt>e*1e3}class b6{constructor(e={}){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ttlSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshIntervalSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_metrics",{enumerable:!0,configurable:!0,writable:!0,value:{hits:0,misses:0,refreshes:0,refreshErrors:0}}),this.configure(e)}get metrics(){return{...this._metrics}}get totalRequests(){return this._metrics.hits+this._metrics.misses}get hitRate(){const e=this.totalRequests;return e>0?this._metrics.hits/e:0}resetMetrics(){this._metrics={hits:0,misses:0,refreshes:0,refreshErrors:0}}get(e,n){if(this.maxSize===0)return;const a=this.cache.get(e);if(!a){this._metrics.misses+=1;return}return this.cache.delete(e),this.cache.set(e,{...a,refreshFunc:n}),this._metrics.hits+=1,a.value}set(e,n,a){if(this.maxSize===0)return;if(this.refreshTimer===void 0&&this.startRefreshLoop(),!this.cache.has(e)&&this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;o!==void 0&&this.cache.delete(o)}const s={value:n,createdAt:Date.now(),refreshFunc:a};this.cache.delete(e),this.cache.set(e,s)}invalidate(e){this.cache.delete(e)}clear(){this.cache.clear()}get size(){return this.cache.size}stop(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=void 0)}dump(e){for(const[n,a]of this.cache.entries())a.value;y6()}load(e){const n=v6();if(!n)return 0;let a=0;const s=Date.now();for(const[o,u]of Object.entries(n)){if(this.cache.size>=this.maxSize)break;const c={value:u,createdAt:s};this.cache.set(o,c),a+=1}return a}startRefreshLoop(){this.stop(),this.ttlSeconds!==null&&(this.refreshTimer=setInterval(()=>{this.refreshStaleEntries().catch(e=>{console.warn("Unexpected error in cache refresh loop:",e)})},this.refreshIntervalSeconds*1e3),this.refreshTimer.unref&&this.refreshTimer.unref())}getStaleEntries(){const e=[];for(const[n,a]of this.cache.entries())_6(a,this.ttlSeconds)&&e.push([n,a]);return e}async refreshStaleEntries(){const e=this.getStaleEntries();if(e.length!==0){for(const[n,a]of e)if(a.refreshFunc!==void 0)try{const s=await a.refreshFunc();this.set(n,s,a.refreshFunc),this._metrics.refreshes+=1}catch(s){this._metrics.refreshErrors+=1,console.warn(`Failed to refresh cache entry ${n}:`,s)}}}configure(e){this.stop(),this.refreshIntervalSeconds=e.refreshIntervalSeconds??60,this.maxSize=e.maxSize??100,this.ttlSeconds=e.ttlSeconds??300}}const W1=new b6,DA="0.5.4";var tl={};let va;const w6=()=>typeof window<"u"&&typeof window.document<"u",x6=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",E6=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),PA=()=>typeof Deno<"u",T6=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!PA(),$A=()=>va||(typeof Bun<"u"?va="bun":w6()?va="browser":T6()?va="node":x6()?va="webworker":E6()?va="jsdom":PA()?va="deno":va="other",va);let dm;function UA(){if(dm===void 0){const t=$A(),e=A6();dm={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:DA,...e}}return dm}function zA(){const t=S6(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[a,s]of Object.entries(t))typeof s=="string"&&!n.includes(a)&&!a.toLowerCase().includes("key")&&!a.toLowerCase().includes("secret")&&!a.toLowerCase().includes("token")&&(a==="LANGCHAIN_REVISION_ID"?e.revision_id=s:e[a]=s);return e}function S6(){const t={};try{if(typeof process<"u"&&tl)for(const[e,n]of Object.entries(tl))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function Sa(t){try{return typeof process<"u"?tl==null?void 0:tl[t]:void 0}catch{return}}function an(t){return Sa(`LANGSMITH_${t}`)||Sa(`LANGCHAIN_${t}`)}let fm;function A6(){if(fm!==void 0)return fm;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const a=Sa(n);a!==void 0&&(e[n]=a)}return fm=e,e}function BA(){return Sa("OTEL_ENABLED")==="true"||an("OTEL_ENABLED")==="true"}class C6{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&BA()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let a;if(n.length===1&&typeof n[0]=="function"?a=n[0]:n.length===2&&typeof n[1]=="function"?a=n[1]:n.length===3&&typeof n[2]=="function"&&(a=n[2]),typeof a=="function")return a()}}class N6{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new C6})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class O6{active(){return{}}with(e,n){return n()}}const hm=Symbol.for("ls:otel_trace"),mm=Symbol.for("ls:otel_context"),ex=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),R6=new N6,I6=new O6;class k6{getTraceInstance(){return globalThis[hm]??R6}getContextInstance(){return globalThis[mm]??I6}initializeGlobalInstances(e){globalThis[hm]===void 0&&(globalThis[hm]=e.trace),globalThis[mm]===void 0&&(globalThis[mm]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[ex]=e}getDefaultOTLPTracerComponents(){return globalThis[ex]??void 0}}const fy=new k6;function VA(){return fy.getTraceInstance()}function j6(){return fy.getContextInstance()}function M6(){return fy.getDefaultOTLPTracerComponents()}const L6={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function D6(t){return L6[t]||t}class P6{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const a of e)try{if(!a.run)continue;if(a.operation==="post"){const s=this.createSpanForRun(a,a.run,n.get(a.id));s&&!a.run.end_time&&this.spans.set(a.id,s)}else this.updateSpanForRun(a,a.run)}catch(s){console.error(`Error processing operation ${a.id}:`,s)}}createSpanForRun(e,n,a){const s=a&&VA().getSpan(a);if(s)try{return this.finishSpanSetup(s,n,e)}catch(o){console.error(`Failed to create span for run ${e.id}:`,o);return}}finishSpanSetup(e,n,a){return this.setSpanAttributes(e,n,a),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const a=this.spans.get(e.id);if(!a){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(a,n,e),n.error?(a.setStatus({code:2}),a.recordException(new Error(n.error))):a.setStatus({code:1});const s=n.end_time;s&&(a.end(new Date(s)),this.spans.delete(e.id))}catch(a){console.error(`Failed to update span for run ${e.id}:`,a)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const a=e.extra.metadata;if(a.ls_model_name)return a.ls_model_name;if(a.invocation_params){const s=a.invocation_params;if(s.model)return s.model;if(s.model_name)return s.model_name}}}setSpanAttributes(e,n,a){var c;if("run_type"in n&&n.run_type){e.setAttribute(DD,n.run_type);const f=D6(n.run_type||"chain");e.setAttribute(hD,f)}"name"in n&&n.name&&e.setAttribute(PD,n.name),"session_id"in n&&n.session_id&&e.setAttribute(MD,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(LD,n.session_name),this.setGenAiSystem(e,n);const s=this.extractModelName(n);s&&e.setAttribute(G1,s),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(q1,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(F1,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(Y1,n.total_tokens),this.setInvocationParameters(e,n);const o=((c=n.extra)==null?void 0:c.metadata)||{};for(const[f,h]of Object.entries(o))h!=null&&e.setAttribute(`${$D}.${f}`,String(h));const u=n.tags;if(u&&Array.isArray(u)?e.setAttribute(Z1,u.join(", ")):u&&e.setAttribute(Z1,String(u)),"serialized"in n&&typeof n.serialized=="object"){const f=n.serialized;f.name&&e.setAttribute(AD,String(f.name)),f.signature&&e.setAttribute(CD,String(f.signature)),f.doc&&e.setAttribute(ND,String(f.doc))}this.setIOAttributes(e,a)}setGenAiSystem(e,n){let a="langchain";const s=this.extractModelName(n);if(s){const o=s.toLowerCase();o.includes("anthropic")||o.startsWith("claude")?a="anthropic":o.includes("bedrock")?a="aws.bedrock":o.includes("azure")&&o.includes("openai")?a="az.ai.openai":o.includes("azure")&&o.includes("inference")?a="az.ai.inference":o.includes("cohere")?a="cohere":o.includes("deepseek")?a="deepseek":o.includes("gemini")?a="gemini":o.includes("groq")?a="groq":o.includes("watson")||o.includes("ibm")?a="ibm.watsonx.ai":o.includes("mistral")?a="mistral_ai":o.includes("gpt")||o.includes("openai")?a="openai":o.includes("perplexity")||o.includes("sonar")?a="perplexity":o.includes("vertex")?a="vertex_ai":(o.includes("xai")||o.includes("grok"))&&(a="xai")}e.setAttribute(mD,a)}setInvocationParameters(e,n){var s,o;if(!((o=(s=n.extra)==null?void 0:s.metadata)!=null&&o.invocation_params))return;const a=n.extra.metadata.invocation_params;a.max_tokens!==void 0&&e.setAttribute(gD,a.max_tokens),a.temperature!==void 0&&e.setAttribute(yD,a.temperature),a.top_p!==void 0&&e.setAttribute(vD,a.top_p),a.frequency_penalty!==void 0&&e.setAttribute(_D,a.frequency_penalty),a.presence_penalty!==void 0&&e.setAttribute(bD,a.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const a=n.run.inputs;typeof a=="object"&&a!==null&&(a.model&&Array.isArray(a.messages)&&e.setAttribute(G1,a.model),a.stream!==void 0&&e.setAttribute(UD,a.stream),a.extra_headers&&e.setAttribute(zD,JSON.stringify(a.extra_headers)),a.extra_query&&e.setAttribute(TD,JSON.stringify(a.extra_query)),a.extra_body&&e.setAttribute(SD,JSON.stringify(a.extra_body))),e.setAttribute(xD,JSON.stringify(a))}catch(a){console.debug(`Failed to process inputs for run ${n.id}`,a)}if(n.run.outputs)try{const a=n.run.outputs,s=this.getUnifiedRunTokens(a);if(s&&(e.setAttribute(q1,s[0]),e.setAttribute(F1,s[1]),e.setAttribute(Y1,s[0]+s[1])),a&&typeof a=="object"){if(a.model&&e.setAttribute(pD,String(a.model)),a.id&&e.setAttribute(OD,a.id),a.choices&&Array.isArray(a.choices)){const o=a.choices.map(u=>u.finish_reason).filter(u=>u).map(String);o.length>0&&e.setAttribute(wD,o.join(", "))}if(a.service_tier&&e.setAttribute(RD,a.service_tier),a.system_fingerprint&&e.setAttribute(ID,a.system_fingerprint),a.usage_metadata&&typeof a.usage_metadata=="object"){const o=a.usage_metadata;o.input_token_details&&e.setAttribute(kD,JSON.stringify(o.input_token_details)),o.output_token_details&&e.setAttribute(jD,JSON.stringify(o.output_token_details))}}e.setAttribute(ED,JSON.stringify(a))}catch(a){console.debug(`Failed to process outputs for run ${n.id}`,a)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const a=Object.keys(e);for(const u of a){const c=e[u];if(!(!c||typeof c!="object")&&(n=this.extractUnifiedRunTokens(c.usage_metadata),n||c.lc===1&&c.kwargs&&typeof c.kwargs=="object"&&(n=this.extractUnifiedRunTokens(c.kwargs.usage_metadata),n)))return n}const s=e.generations||[];if(!Array.isArray(s))return null;const o=Array.isArray(s[0])?s.flat():s;for(const u of o)if(typeof u=="object"&&u.message&&typeof u.message=="object"&&u.message.kwargs&&typeof u.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(u.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}const $6=Object.prototype.toString,U6=t=>$6.call(t)==="[object Error]",z6=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function B6(t){if(!(t&&U6(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:a}=t;return n==="Load failed"?a===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:z6.has(n)}function V6(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function ic(t,e,{min:n=0,allowInfinity:a=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${a?" or Infinity":""}.`);if(!a&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}let H6=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function G6(t,e){const n=Math.max(1,t+1),a=e.randomize?Math.random()+1:1;let s=Math.round(a*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function tx(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function q6({error:t,attemptNumber:e,retriesConsumed:n,startTime:a,options:s}){var _,x,w;const o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof H6)throw o.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,c=s.maxRetryTime??Number.POSITIVE_INFINITY,f=Object.freeze({error:o,attemptNumber:e,retriesLeft:u,retriesConsumed:n});if(await s.onFailedAttempt(f),tx(a,c)<=0)throw o;const h=await s.shouldConsumeRetry(f),m=tx(a,c);if(m<=0||u<=0)throw o;if(o instanceof TypeError&&!B6(o)){if(h)throw o;return(_=s.signal)==null||_.throwIfAborted(),!1}if(!await s.shouldRetry(f))throw o;if(!h)return(x=s.signal)==null||x.throwIfAborted(),!1;const y=G6(n,s),v=Math.min(y,m);return v>0&&await new Promise((C,A)=>{var U,P;const I=()=>{var Y;clearTimeout(R),(Y=s.signal)==null||Y.removeEventListener("abort",I),A(s.signal.reason)},R=setTimeout(()=>{var Y;(Y=s.signal)==null||Y.removeEventListener("abort",I),C()},v);s.unref&&((U=R.unref)==null||U.call(R)),(P=s.signal)==null||P.addEventListener("abort",I,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function F6(t,e={}){var o,u,c;if(e={...e},V6(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),ic("factor",e.factor,{min:0,allowInfinity:!1}),ic("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),ic("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),ic("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(o=e.signal)==null||o.throwIfAborted();let n=0,a=0;const s=performance.now();for(;!Number.isFinite(e.retries)||a<=e.retries;){n++;try{(u=e.signal)==null||u.throwIfAborted();const f=await t(n);return(c=e.signal)==null||c.throwIfAborted(),f}catch(f){await q6({error:f,attemptNumber:n,retriesConsumed:a,startTime:s,options:e})&&a++}}throw new Error("Retry attempts exhausted without throwing an error.")}var sc={},pm={exports:{}},nx;function Y6(){return nx||(nx=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(f,h,m){this.fn=f,this.context=h,this.once=m||!1}function o(f,h,m,y,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new s(m,y||f,v),x=n?n+h:h;return f._events[x]?f._events[x].fn?f._events[x]=[f._events[x],_]:f._events[x].push(_):(f._events[x]=_,f._eventsCount++),f}function u(f,h){--f._eventsCount===0?f._events=new a:delete f._events[h]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,y;if(this._eventsCount===0)return h;for(y in m=this._events)e.call(m,y)&&h.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=n?n+h:h,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,_=y.length,x=new Array(_);v<_;v++)x[v]=y[v].fn;return x},c.prototype.listenerCount=function(h){var m=n?n+h:h,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(h,m,y,v,_,x){var w=n?n+h:h;if(!this._events[w])return!1;var C=this._events[w],A=arguments.length,I,R;if(C.fn){switch(C.once&&this.removeListener(h,C.fn,void 0,!0),A){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,m),!0;case 3:return C.fn.call(C.context,m,y),!0;case 4:return C.fn.call(C.context,m,y,v),!0;case 5:return C.fn.call(C.context,m,y,v,_),!0;case 6:return C.fn.call(C.context,m,y,v,_,x),!0}for(R=1,I=new Array(A-1);R<A;R++)I[R-1]=arguments[R];C.fn.apply(C.context,I)}else{var U=C.length,P;for(R=0;R<U;R++)switch(C[R].once&&this.removeListener(h,C[R].fn,void 0,!0),A){case 1:C[R].fn.call(C[R].context);break;case 2:C[R].fn.call(C[R].context,m);break;case 3:C[R].fn.call(C[R].context,m,y);break;case 4:C[R].fn.call(C[R].context,m,y,v);break;default:if(!I)for(P=1,I=new Array(A-1);P<A;P++)I[P-1]=arguments[P];C[R].fn.apply(C[R].context,I)}}return!0},c.prototype.on=function(h,m,y){return o(this,h,m,y,!1)},c.prototype.once=function(h,m,y){return o(this,h,m,y,!0)},c.prototype.removeListener=function(h,m,y,v){var _=n?n+h:h;if(!this._events[_])return this;if(!m)return u(this,_),this;var x=this._events[_];if(x.fn)x.fn===m&&(!v||x.once)&&(!y||x.context===y)&&u(this,_);else{for(var w=0,C=[],A=x.length;w<A;w++)(x[w].fn!==m||v&&!x[w].once||y&&x[w].context!==y)&&C.push(x[w]);C.length?this._events[_]=C.length===1?C[0]:C:u(this,_)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&u(this,m)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(pm)),pm.exports}var zo={exports:{}},gm,ax;function Z6(){return ax||(ax=1,gm=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(a=>{a(e())}).then(()=>n),n=>new Promise(a=>{a(e())}).then(()=>{throw n})))),gm}var ix;function X6(){if(ix)return zo.exports;ix=1;const t=Z6();class e extends Error{constructor(s){super(s),this.name="TimeoutError"}}const n=(a,s,o)=>new Promise((u,c)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){u(a);return}const f=setTimeout(()=>{if(typeof o=="function"){try{u(o())}catch(y){c(y)}return}const h=typeof o=="string"?o:`Promise timed out after ${s} milliseconds`,m=o instanceof Error?o:new e(h);typeof a.cancel=="function"&&a.cancel(),c(m)},s);t(a.then(u,c),()=>{clearTimeout(f)})});return zo.exports=n,zo.exports.default=n,zo.exports.TimeoutError=e,zo.exports}var rc={},oc={},sx;function K6(){if(sx)return oc;sx=1,Object.defineProperty(oc,"__esModule",{value:!0});function t(e,n,a){let s=0,o=e.length;for(;o>0;){const u=o/2|0;let c=s+u;a(e[c],n)<=0?(s=++c,o-=u+1):o=u}return s}return oc.default=t,oc}var rx;function Q6(){if(rx)return rc;rx=1,Object.defineProperty(rc,"__esModule",{value:!0});const t=K6();class e{constructor(){this._queue=[]}enqueue(a,s){s=Object.assign({priority:0},s);const o={priority:s.priority,run:a};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(o);return}const u=t.default(this._queue,o,(c,f)=>f.priority-c.priority);this._queue.splice(u,0,o)}dequeue(){const a=this._queue.shift();return a==null?void 0:a.run}filter(a){return this._queue.filter(s=>s.priority===a.priority).map(s=>s.run)}get size(){return this._queue.length}}return rc.default=e,rc}var ox;function J6(){if(ox)return sc;ox=1,Object.defineProperty(sc,"__esModule",{value:!0});const t=Y6(),e=X6(),n=Q6(),a=()=>{},s=new e.TimeoutError;class o extends t{constructor(c){var f,h,m,y;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,c=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},c),!(typeof c.intervalCap=="number"&&c.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(f=c.intervalCap)===null||f===void 0?void 0:f.toString())!==null&&h!==void 0?h:""}\` (${typeof c.intervalCap})`);if(c.interval===void 0||!(Number.isFinite(c.interval)&&c.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(y=(m=c.interval)===null||m===void 0?void 0:m.toString())!==null&&y!==void 0?y:""}\` (${typeof c.interval})`);this._carryoverConcurrencyCount=c.carryoverConcurrencyCount,this._isIntervalIgnored=c.intervalCap===1/0||c.interval===0,this._intervalCap=c.intervalCap,this._interval=c.interval,this._queue=new c.queueClass,this._queueClass=c.queueClass,this.concurrency=c.concurrency,this._timeout=c.timeout,this._throwOnTimeout=c.throwOnTimeout===!0,this._isPaused=c.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const c=Date.now();if(this._intervalId===void 0){const f=this._intervalEnd-c;if(f<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},f)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const c=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const f=this._queue.dequeue();return f?(this.emit("active"),f(),c&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(c){if(!(typeof c=="number"&&c>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${c}\` (${typeof c})`);this._concurrency=c,this._processQueue()}async add(c,f={}){return new Promise((h,m)=>{const y=async()=>{this._pendingCount++,this._intervalCount++;try{const v=this._timeout===void 0&&f.timeout===void 0?c():e.default(Promise.resolve(c()),f.timeout===void 0?this._timeout:f.timeout,()=>{(f.throwOnTimeout===void 0?this._throwOnTimeout:f.throwOnTimeout)&&m(s)});h(await v)}catch(v){m(v)}this._next()};this._queue.enqueue(y,f),this._tryToStartAnother(),this.emit("add")})}async addAll(c,f){return Promise.all(c.map(async h=>this.add(h,f)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(c=>{const f=this._resolveEmpty;this._resolveEmpty=()=>{f(),c()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(c=>{const f=this._resolveIdle;this._resolveIdle=()=>{f(),c()}})}get size(){return this._queue.size}sizeBy(c){return this._queue.filter(c).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(c){this._timeout=c}}return sc.default=o,sc}var W6=J6();const Fa=_g(W6),e8="default"in Fa?Fa.default:Fa,t8=[408,425,429,500,502,503,504];let lx=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,this.queue=new e8({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){return this.callWithOptions({},e,...n)}callWithOptions(e,n,...a){const s=e.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&s>0&&this.queueSizeBytes+s>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${s} bytes.`));s>0&&(this.queueSizeBytes+=s);const o=this.onFailedResponseHook;let u=this.queue.add(()=>F6(()=>n(...a).catch(c=>{throw c instanceof Error?c:new Error(c)}),{async onFailedAttempt({error:c}){if(typeof c!="object"||c==null)throw c;const f="message"in c&&typeof c.message=="string"?c.message:void 0;if(f!=null&&f.startsWith("Cancel")||f!=null&&f.startsWith("TimeoutError")||f!=null&&f.startsWith("AbortError")||"name"in c&&c.name==="TimeoutError"||"code"in c&&c.code==="ECONNABORTED")throw c;const h="response"in c?c.response:void 0;if(o&&await o(h))return;const m=(h==null?void 0:h.status)??("status"in c?c.status:void 0);if(m!=null&&(typeof m=="number"||typeof m=="string")&&!t8.includes(+m))throw c},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return s>0&&(u=u.finally(()=>{this.queueSizeBytes-=s})),e.signal?Promise.race([u,new Promise((c,f)=>{var h;(h=e.signal)==null||h.addEventListener("abort",()=>{f(new Error("AbortError"))})})]):u}};function ux(t){return typeof(t==null?void 0:t._getType)=="function"}function cx(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var lc={exports:{}},ym,dx;function ld(){if(dx)return ym;dx=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,s=e-6;return ym={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ym}var vm,fx;function ud(){if(fx)return vm;fx=1;var t={};return vm=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},vm}var hx;function Al(){return hx||(hx=1,(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:s}=ld(),o=ud();e=t.exports={};const u=e.re=[],c=e.safeRe=[],f=e.src=[],h=e.safeSrc=[],m=e.t={};let y=0;const v="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",s],[v,a]],x=C=>{for(const[A,I]of _)C=C.split(`${A}*`).join(`${A}{0,${I}}`).split(`${A}+`).join(`${A}{1,${I}}`);return C},w=(C,A,I)=>{const R=x(A),U=y++;o(C,U,A),m[C]=U,f[U]=A,h[U]=R,u[U]=new RegExp(A,I?"g":void 0),c[U]=new RegExp(R,I?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),w("MAINVERSION",`(${f[m.NUMERICIDENTIFIER]})\\.(${f[m.NUMERICIDENTIFIER]})\\.(${f[m.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${f[m.NUMERICIDENTIFIERLOOSE]})\\.(${f[m.NUMERICIDENTIFIERLOOSE]})\\.(${f[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${f[m.NONNUMERICIDENTIFIER]}|${f[m.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${f[m.NONNUMERICIDENTIFIER]}|${f[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${f[m.PRERELEASEIDENTIFIER]}(?:\\.${f[m.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${f[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[m.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${v}+`),w("BUILD",`(?:\\+(${f[m.BUILDIDENTIFIER]}(?:\\.${f[m.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${f[m.MAINVERSION]}${f[m.PRERELEASE]}?${f[m.BUILD]}?`),w("FULL",`^${f[m.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${f[m.MAINVERSIONLOOSE]}${f[m.PRERELEASELOOSE]}?${f[m.BUILD]}?`),w("LOOSE",`^${f[m.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${f[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${f[m.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${f[m.XRANGEIDENTIFIER]})(?:\\.(${f[m.XRANGEIDENTIFIER]})(?:\\.(${f[m.XRANGEIDENTIFIER]})(?:${f[m.PRERELEASE]})?${f[m.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${f[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[m.XRANGEIDENTIFIERLOOSE]})(?:${f[m.PRERELEASELOOSE]})?${f[m.BUILD]}?)?)?`),w("XRANGE",`^${f[m.GTLT]}\\s*${f[m.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${f[m.GTLT]}\\s*${f[m.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${f[m.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",f[m.COERCEPLAIN]+`(?:${f[m.PRERELEASE]})?(?:${f[m.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",f[m.COERCE],!0),w("COERCERTLFULL",f[m.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${f[m.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${f[m.LONETILDE]}${f[m.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${f[m.LONETILDE]}${f[m.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${f[m.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${f[m.LONECARET]}${f[m.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${f[m.LONECARET]}${f[m.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${f[m.GTLT]}\\s*(${f[m.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${f[m.GTLT]}\\s*(${f[m.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${f[m.GTLT]}\\s*(${f[m.LOOSEPLAIN]}|${f[m.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${f[m.XRANGEPLAIN]})\\s+-\\s+(${f[m.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${f[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[m.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lc,lc.exports)),lc.exports}var _m,mx;function hy(){if(mx)return _m;mx=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return _m=a=>a?typeof a!="object"?t:a:e,_m}var bm,px;function HA(){if(px)return bm;px=1;const t=/^[0-9]+$/,e=(a,s)=>{if(typeof a=="number"&&typeof s=="number")return a===s?0:a<s?-1:1;const o=t.test(a),u=t.test(s);return o&&u&&(a=+a,s=+s),a===s?0:o&&!u?-1:u&&!o?1:a<s?-1:1};return bm={compareIdentifiers:e,rcompareIdentifiers:(a,s)=>e(s,a)},bm}var wm,gx;function ln(){if(gx)return wm;gx=1;const t=ud(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=ld(),{safeRe:a,t:s}=Al(),o=hy(),{compareIdentifiers:u}=HA();class c{constructor(h,m){if(m=o(m),h instanceof c){if(h.loose===!!m.loose&&h.includePrerelease===!!m.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",h,m),this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease;const y=h.trim().match(m.loose?a[s.LOOSE]:a[s.FULL]);if(!y)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+y[1],this.minor=+y[2],this.patch=+y[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");y[4]?this.prerelease=y[4].split(".").map(v=>{if(/^[0-9]+$/.test(v)){const _=+v;if(_>=0&&_<n)return _}return v}):this.prerelease=[],this.build=y[5]?y[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(t("SemVer.compare",this.version,this.options,h),!(h instanceof c)){if(typeof h=="string"&&h===this.version)return 0;h=new c(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof c||(h=new c(h,this.options)),this.major<h.major?-1:this.major>h.major?1:this.minor<h.minor?-1:this.minor>h.minor?1:this.patch<h.patch?-1:this.patch>h.patch?1:0}comparePre(h){if(h instanceof c||(h=new c(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let m=0;do{const y=this.prerelease[m],v=h.prerelease[m];if(t("prerelease compare",m,y,v),y===void 0&&v===void 0)return 0;if(v===void 0)return 1;if(y===void 0)return-1;if(y===v)continue;return u(y,v)}while(++m)}compareBuild(h){h instanceof c||(h=new c(h,this.options));let m=0;do{const y=this.build[m],v=h.build[m];if(t("build compare",m,y,v),y===void 0&&v===void 0)return 0;if(v===void 0)return 1;if(y===void 0)return-1;if(y===v)continue;return u(y,v)}while(++m)}inc(h,m,y){if(h.startsWith("pre")){if(!m&&y===!1)throw new Error("invalid increment argument: identifier is empty");if(m){const v=`-${m}`.match(this.options.loose?a[s.PRERELEASELOOSE]:a[s.PRERELEASE]);if(!v||v[1]!==m)throw new Error(`invalid identifier: ${m}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",m,y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",m,y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",m,y),this.inc("pre",m,y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",m,y),this.inc("pre",m,y);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const v=Number(y)?1:0;if(this.prerelease.length===0)this.prerelease=[v];else{let _=this.prerelease.length;for(;--_>=0;)typeof this.prerelease[_]=="number"&&(this.prerelease[_]++,_=-2);if(_===-1){if(m===this.prerelease.join(".")&&y===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(v)}}if(m){let _=[m,v];y===!1&&(_=[m]),u(this.prerelease[0],m)===0?isNaN(this.prerelease[1])&&(this.prerelease=_):this.prerelease=_}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return wm=c,wm}var xm,yx;function Br(){if(yx)return xm;yx=1;const t=ln();return xm=(n,a,s=!1)=>{if(n instanceof t)return n;try{return new t(n,a)}catch(o){if(!s)return null;throw o}},xm}var Em,vx;function n8(){if(vx)return Em;vx=1;const t=Br();return Em=(n,a)=>{const s=t(n,a);return s?s.version:null},Em}var Tm,_x;function a8(){if(_x)return Tm;_x=1;const t=Br();return Tm=(n,a)=>{const s=t(n.trim().replace(/^[=v]+/,""),a);return s?s.version:null},Tm}var Sm,bx;function i8(){if(bx)return Sm;bx=1;const t=ln();return Sm=(n,a,s,o,u)=>{typeof s=="string"&&(u=o,o=s,s=void 0);try{return new t(n instanceof t?n.version:n,s).inc(a,o,u).version}catch{return null}},Sm}var Am,wx;function s8(){if(wx)return Am;wx=1;const t=Br();return Am=(n,a)=>{const s=t(n,null,!0),o=t(a,null,!0),u=s.compare(o);if(u===0)return null;const c=u>0,f=c?s:o,h=c?o:s,m=!!f.prerelease.length;if(!!h.prerelease.length&&!m){if(!h.patch&&!h.minor)return"major";if(h.compareMain(f)===0)return h.minor&&!h.patch?"minor":"patch"}const v=m?"pre":"";return s.major!==o.major?v+"major":s.minor!==o.minor?v+"minor":s.patch!==o.patch?v+"patch":"prerelease"},Am}var Cm,xx;function r8(){if(xx)return Cm;xx=1;const t=ln();return Cm=(n,a)=>new t(n,a).major,Cm}var Nm,Ex;function o8(){if(Ex)return Nm;Ex=1;const t=ln();return Nm=(n,a)=>new t(n,a).minor,Nm}var Om,Tx;function l8(){if(Tx)return Om;Tx=1;const t=ln();return Om=(n,a)=>new t(n,a).patch,Om}var Rm,Sx;function u8(){if(Sx)return Rm;Sx=1;const t=Br();return Rm=(n,a)=>{const s=t(n,a);return s&&s.prerelease.length?s.prerelease:null},Rm}var Im,Ax;function fa(){if(Ax)return Im;Ax=1;const t=ln();return Im=(n,a,s)=>new t(n,s).compare(new t(a,s)),Im}var km,Cx;function c8(){if(Cx)return km;Cx=1;const t=fa();return km=(n,a,s)=>t(a,n,s),km}var jm,Nx;function d8(){if(Nx)return jm;Nx=1;const t=fa();return jm=(n,a)=>t(n,a,!0),jm}var Mm,Ox;function my(){if(Ox)return Mm;Ox=1;const t=ln();return Mm=(n,a,s)=>{const o=new t(n,s),u=new t(a,s);return o.compare(u)||o.compareBuild(u)},Mm}var Lm,Rx;function f8(){if(Rx)return Lm;Rx=1;const t=my();return Lm=(n,a)=>n.sort((s,o)=>t(s,o,a)),Lm}var Dm,Ix;function h8(){if(Ix)return Dm;Ix=1;const t=my();return Dm=(n,a)=>n.sort((s,o)=>t(o,s,a)),Dm}var Pm,kx;function cd(){if(kx)return Pm;kx=1;const t=fa();return Pm=(n,a,s)=>t(n,a,s)>0,Pm}var $m,jx;function py(){if(jx)return $m;jx=1;const t=fa();return $m=(n,a,s)=>t(n,a,s)<0,$m}var Um,Mx;function GA(){if(Mx)return Um;Mx=1;const t=fa();return Um=(n,a,s)=>t(n,a,s)===0,Um}var zm,Lx;function qA(){if(Lx)return zm;Lx=1;const t=fa();return zm=(n,a,s)=>t(n,a,s)!==0,zm}var Bm,Dx;function gy(){if(Dx)return Bm;Dx=1;const t=fa();return Bm=(n,a,s)=>t(n,a,s)>=0,Bm}var Vm,Px;function yy(){if(Px)return Vm;Px=1;const t=fa();return Vm=(n,a,s)=>t(n,a,s)<=0,Vm}var Hm,$x;function FA(){if($x)return Hm;$x=1;const t=GA(),e=qA(),n=cd(),a=gy(),s=py(),o=yy();return Hm=(c,f,h,m)=>{switch(f){case"===":return typeof c=="object"&&(c=c.version),typeof h=="object"&&(h=h.version),c===h;case"!==":return typeof c=="object"&&(c=c.version),typeof h=="object"&&(h=h.version),c!==h;case"":case"=":case"==":return t(c,h,m);case"!=":return e(c,h,m);case">":return n(c,h,m);case">=":return a(c,h,m);case"<":return s(c,h,m);case"<=":return o(c,h,m);default:throw new TypeError(`Invalid operator: ${f}`)}},Hm}var Gm,Ux;function m8(){if(Ux)return Gm;Ux=1;const t=ln(),e=Br(),{safeRe:n,t:a}=Al();return Gm=(o,u)=>{if(o instanceof t)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;u=u||{};let c=null;if(!u.rtl)c=o.match(u.includePrerelease?n[a.COERCEFULL]:n[a.COERCE]);else{const _=u.includePrerelease?n[a.COERCERTLFULL]:n[a.COERCERTL];let x;for(;(x=_.exec(o))&&(!c||c.index+c[0].length!==o.length);)(!c||x.index+x[0].length!==c.index+c[0].length)&&(c=x),_.lastIndex=x.index+x[1].length+x[2].length;_.lastIndex=-1}if(c===null)return null;const f=c[2],h=c[3]||"0",m=c[4]||"0",y=u.includePrerelease&&c[5]?`-${c[5]}`:"",v=u.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${f}.${h}.${m}${y}${v}`,u)},Gm}var qm,zx;function p8(){if(zx)return qm;zx=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const a=this.map.get(n);if(a!==void 0)return this.map.delete(n),this.map.set(n,a),a}delete(n){return this.map.delete(n)}set(n,a){if(!this.delete(n)&&a!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,a)}return this}}return qm=t,qm}var Fm,Bx;function ha(){if(Bx)return Fm;Bx=1;const t=/\s+/g;class e{constructor(X,L){if(L=s(L),X instanceof e)return X.loose===!!L.loose&&X.includePrerelease===!!L.includePrerelease?X:new e(X.raw,L);if(X instanceof o)return this.raw=X.value,this.set=[[X]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=X.trim().replace(t," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(J=>!w(J[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&C(J[0])){this.set=[J];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let X=0;X<this.set.length;X++){X>0&&(this.formatted+="||");const L=this.set[X];for(let q=0;q<L.length;q++)q>0&&(this.formatted+=" "),this.formatted+=L[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(X){const q=((this.options.includePrerelease&&_)|(this.options.loose&&x))+":"+X,J=a.get(q);if(J)return J;const K=this.options.loose,ie=K?f[h.HYPHENRANGELOOSE]:f[h.HYPHENRANGE];X=X.replace(ie,ke(this.options.includePrerelease)),u("hyphen replace",X),X=X.replace(f[h.COMPARATORTRIM],m),u("comparator trim",X),X=X.replace(f[h.TILDETRIM],y),u("tilde trim",X),X=X.replace(f[h.CARETTRIM],v),u("caret trim",X);let k=X.split(" ").map(me=>I(me,this.options)).join(" ").split(/\s+/).map(me=>ye(me,this.options));K&&(k=k.filter(me=>(u("loose invalid filter",me,this.options),!!me.match(f[h.COMPARATORLOOSE])))),u("range list",k);const V=new Map,se=k.map(me=>new o(me,this.options));for(const me of se){if(w(me))return[me];V.set(me.value,me)}V.size>1&&V.has("")&&V.delete("");const oe=[...V.values()];return a.set(q,oe),oe}intersects(X,L){if(!(X instanceof e))throw new TypeError("a Range is required");return this.set.some(q=>A(q,L)&&X.set.some(J=>A(J,L)&&q.every(K=>J.every(ie=>K.intersects(ie,L)))))}test(X){if(!X)return!1;if(typeof X=="string")try{X=new c(X,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(We(this.set[L],X,this.options))return!0;return!1}}Fm=e;const n=p8(),a=new n,s=hy(),o=dd(),u=ud(),c=ln(),{safeRe:f,t:h,comparatorTrimReplace:m,tildeTrimReplace:y,caretTrimReplace:v}=Al(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:x}=ld(),w=ue=>ue.value==="<0.0.0-0",C=ue=>ue.value==="",A=(ue,X)=>{let L=!0;const q=ue.slice();let J=q.pop();for(;L&&q.length;)L=q.every(K=>J.intersects(K,X)),J=q.pop();return L},I=(ue,X)=>(ue=ue.replace(f[h.BUILD],""),u("comp",ue,X),ue=Y(ue,X),u("caret",ue),ue=U(ue,X),u("tildes",ue),ue=O(ue,X),u("xrange",ue),ue=Ae(ue,X),u("stars",ue),ue),R=ue=>!ue||ue.toLowerCase()==="x"||ue==="*",U=(ue,X)=>ue.trim().split(/\s+/).map(L=>P(L,X)).join(" "),P=(ue,X)=>{const L=X.loose?f[h.TILDELOOSE]:f[h.TILDE];return ue.replace(L,(q,J,K,ie,k)=>{u("tilde",ue,q,J,K,ie,k);let V;return R(J)?V="":R(K)?V=`>=${J}.0.0 <${+J+1}.0.0-0`:R(ie)?V=`>=${J}.${K}.0 <${J}.${+K+1}.0-0`:k?(u("replaceTilde pr",k),V=`>=${J}.${K}.${ie}-${k} <${J}.${+K+1}.0-0`):V=`>=${J}.${K}.${ie} <${J}.${+K+1}.0-0`,u("tilde return",V),V})},Y=(ue,X)=>ue.trim().split(/\s+/).map(L=>te(L,X)).join(" "),te=(ue,X)=>{u("caret",ue,X);const L=X.loose?f[h.CARETLOOSE]:f[h.CARET],q=X.includePrerelease?"-0":"";return ue.replace(L,(J,K,ie,k,V)=>{u("caret",ue,J,K,ie,k,V);let se;return R(K)?se="":R(ie)?se=`>=${K}.0.0${q} <${+K+1}.0.0-0`:R(k)?K==="0"?se=`>=${K}.${ie}.0${q} <${K}.${+ie+1}.0-0`:se=`>=${K}.${ie}.0${q} <${+K+1}.0.0-0`:V?(u("replaceCaret pr",V),K==="0"?ie==="0"?se=`>=${K}.${ie}.${k}-${V} <${K}.${ie}.${+k+1}-0`:se=`>=${K}.${ie}.${k}-${V} <${K}.${+ie+1}.0-0`:se=`>=${K}.${ie}.${k}-${V} <${+K+1}.0.0-0`):(u("no pr"),K==="0"?ie==="0"?se=`>=${K}.${ie}.${k}${q} <${K}.${ie}.${+k+1}-0`:se=`>=${K}.${ie}.${k}${q} <${K}.${+ie+1}.0-0`:se=`>=${K}.${ie}.${k} <${+K+1}.0.0-0`),u("caret return",se),se})},O=(ue,X)=>(u("replaceXRanges",ue,X),ue.split(/\s+/).map(L=>pe(L,X)).join(" ")),pe=(ue,X)=>{ue=ue.trim();const L=X.loose?f[h.XRANGELOOSE]:f[h.XRANGE];return ue.replace(L,(q,J,K,ie,k,V)=>{u("xRange",ue,q,J,K,ie,k,V);const se=R(K),oe=se||R(ie),me=oe||R(k),S=me;return J==="="&&S&&(J=""),V=X.includePrerelease?"-0":"",se?J===">"||J==="<"?q="<0.0.0-0":q="*":J&&S?(oe&&(ie=0),k=0,J===">"?(J=">=",oe?(K=+K+1,ie=0,k=0):(ie=+ie+1,k=0)):J==="<="&&(J="<",oe?K=+K+1:ie=+ie+1),J==="<"&&(V="-0"),q=`${J+K}.${ie}.${k}${V}`):oe?q=`>=${K}.0.0${V} <${+K+1}.0.0-0`:me&&(q=`>=${K}.${ie}.0${V} <${K}.${+ie+1}.0-0`),u("xRange return",q),q})},Ae=(ue,X)=>(u("replaceStars",ue,X),ue.trim().replace(f[h.STAR],"")),ye=(ue,X)=>(u("replaceGTE0",ue,X),ue.trim().replace(f[X.includePrerelease?h.GTE0PRE:h.GTE0],"")),ke=ue=>(X,L,q,J,K,ie,k,V,se,oe,me,S)=>(R(q)?L="":R(J)?L=`>=${q}.0.0${ue?"-0":""}`:R(K)?L=`>=${q}.${J}.0${ue?"-0":""}`:ie?L=`>=${L}`:L=`>=${L}${ue?"-0":""}`,R(se)?V="":R(oe)?V=`<${+se+1}.0.0-0`:R(me)?V=`<${se}.${+oe+1}.0-0`:S?V=`<=${se}.${oe}.${me}-${S}`:ue?V=`<${se}.${oe}.${+me+1}-0`:V=`<=${V}`,`${L} ${V}`.trim()),We=(ue,X,L)=>{for(let q=0;q<ue.length;q++)if(!ue[q].test(X))return!1;if(X.prerelease.length&&!L.includePrerelease){for(let q=0;q<ue.length;q++)if(u(ue[q].semver),ue[q].semver!==o.ANY&&ue[q].semver.prerelease.length>0){const J=ue[q].semver;if(J.major===X.major&&J.minor===X.minor&&J.patch===X.patch)return!0}return!1}return!0};return Fm}var Ym,Vx;function dd(){if(Vx)return Ym;Vx=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(m,y){if(y=n(y),m instanceof e){if(m.loose===!!y.loose)return m;m=m.value}m=m.trim().split(/\s+/).join(" "),u("comparator",m,y),this.options=y,this.loose=!!y.loose,this.parse(m),this.semver===t?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(m){const y=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],v=m.match(y);if(!v)throw new TypeError(`Invalid comparator: ${m}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new c(v[2],this.options.loose):this.semver=t}toString(){return this.value}test(m){if(u("Comparator.test",m,this.options.loose),this.semver===t||m===t)return!0;if(typeof m=="string")try{m=new c(m,this.options)}catch{return!1}return o(m,this.operator,this.semver,this.options)}intersects(m,y){if(!(m instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(m.value,y).test(this.value):m.operator===""?m.value===""?!0:new f(this.value,y).test(m.semver):(y=n(y),y.includePrerelease&&(this.value==="<0.0.0-0"||m.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||m.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&m.operator.startsWith(">")||this.operator.startsWith("<")&&m.operator.startsWith("<")||this.semver.version===m.semver.version&&this.operator.includes("=")&&m.operator.includes("=")||o(this.semver,"<",m.semver,y)&&this.operator.startsWith(">")&&m.operator.startsWith("<")||o(this.semver,">",m.semver,y)&&this.operator.startsWith("<")&&m.operator.startsWith(">")))}}Ym=e;const n=hy(),{safeRe:a,t:s}=Al(),o=FA(),u=ud(),c=ln(),f=ha();return Ym}var Zm,Hx;function fd(){if(Hx)return Zm;Hx=1;const t=ha();return Zm=(n,a,s)=>{try{a=new t(a,s)}catch{return!1}return a.test(n)},Zm}var Xm,Gx;function g8(){if(Gx)return Xm;Gx=1;const t=ha();return Xm=(n,a)=>new t(n,a).set.map(s=>s.map(o=>o.value).join(" ").trim().split(" ")),Xm}var Km,qx;function y8(){if(qx)return Km;qx=1;const t=ln(),e=ha();return Km=(a,s,o)=>{let u=null,c=null,f=null;try{f=new e(s,o)}catch{return null}return a.forEach(h=>{f.test(h)&&(!u||c.compare(h)===-1)&&(u=h,c=new t(u,o))}),u},Km}var Qm,Fx;function v8(){if(Fx)return Qm;Fx=1;const t=ln(),e=ha();return Qm=(a,s,o)=>{let u=null,c=null,f=null;try{f=new e(s,o)}catch{return null}return a.forEach(h=>{f.test(h)&&(!u||c.compare(h)===1)&&(u=h,c=new t(u,o))}),u},Qm}var Jm,Yx;function _8(){if(Yx)return Jm;Yx=1;const t=ln(),e=ha(),n=cd();return Jm=(s,o)=>{s=new e(s,o);let u=new t("0.0.0");if(s.test(u)||(u=new t("0.0.0-0"),s.test(u)))return u;u=null;for(let c=0;c<s.set.length;++c){const f=s.set[c];let h=null;f.forEach(m=>{const y=new t(m.semver.version);switch(m.operator){case">":y.prerelease.length===0?y.patch++:y.prerelease.push(0),y.raw=y.format();case"":case">=":(!h||n(y,h))&&(h=y);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${m.operator}`)}}),h&&(!u||n(u,h))&&(u=h)}return u&&s.test(u)?u:null},Jm}var Wm,Zx;function b8(){if(Zx)return Wm;Zx=1;const t=ha();return Wm=(n,a)=>{try{return new t(n,a).range||"*"}catch{return null}},Wm}var ep,Xx;function vy(){if(Xx)return ep;Xx=1;const t=ln(),e=dd(),{ANY:n}=e,a=ha(),s=fd(),o=cd(),u=py(),c=yy(),f=gy();return ep=(m,y,v,_)=>{m=new t(m,_),y=new a(y,_);let x,w,C,A,I;switch(v){case">":x=o,w=c,C=u,A=">",I=">=";break;case"<":x=u,w=f,C=o,A="<",I="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(m,y,_))return!1;for(let R=0;R<y.set.length;++R){const U=y.set[R];let P=null,Y=null;if(U.forEach(te=>{te.semver===n&&(te=new e(">=0.0.0")),P=P||te,Y=Y||te,x(te.semver,P.semver,_)?P=te:C(te.semver,Y.semver,_)&&(Y=te)}),P.operator===A||P.operator===I||(!Y.operator||Y.operator===A)&&w(m,Y.semver))return!1;if(Y.operator===I&&C(m,Y.semver))return!1}return!0},ep}var tp,Kx;function w8(){if(Kx)return tp;Kx=1;const t=vy();return tp=(n,a,s)=>t(n,a,">",s),tp}var np,Qx;function x8(){if(Qx)return np;Qx=1;const t=vy();return np=(n,a,s)=>t(n,a,"<",s),np}var ap,Jx;function E8(){if(Jx)return ap;Jx=1;const t=ha();return ap=(n,a,s)=>(n=new t(n,s),a=new t(a,s),n.intersects(a,s)),ap}var ip,Wx;function T8(){if(Wx)return ip;Wx=1;const t=fd(),e=fa();return ip=(n,a,s)=>{const o=[];let u=null,c=null;const f=n.sort((v,_)=>e(v,_,s));for(const v of f)t(v,a,s)?(c=v,u||(u=v)):(c&&o.push([u,c]),c=null,u=null);u&&o.push([u,null]);const h=[];for(const[v,_]of o)v===_?h.push(v):!_&&v===f[0]?h.push("*"):_?v===f[0]?h.push(`<=${_}`):h.push(`${v} - ${_}`):h.push(`>=${v}`);const m=h.join(" || "),y=typeof a.raw=="string"?a.raw:String(a);return m.length<y.length?m:a},ip}var sp,eE;function S8(){if(eE)return sp;eE=1;const t=ha(),e=dd(),{ANY:n}=e,a=fd(),s=fa(),o=(y,v,_={})=>{if(y===v)return!0;y=new t(y,_),v=new t(v,_);let x=!1;e:for(const w of y.set){for(const C of v.set){const A=f(w,C,_);if(x=x||A!==null,A)continue e}if(x)return!1}return!0},u=[new e(">=0.0.0-0")],c=[new e(">=0.0.0")],f=(y,v,_)=>{if(y===v)return!0;if(y.length===1&&y[0].semver===n){if(v.length===1&&v[0].semver===n)return!0;_.includePrerelease?y=u:y=c}if(v.length===1&&v[0].semver===n){if(_.includePrerelease)return!0;v=c}const x=new Set;let w,C;for(const O of y)O.operator===">"||O.operator===">="?w=h(w,O,_):O.operator==="<"||O.operator==="<="?C=m(C,O,_):x.add(O.semver);if(x.size>1)return null;let A;if(w&&C){if(A=s(w.semver,C.semver,_),A>0)return null;if(A===0&&(w.operator!==">="||C.operator!=="<="))return null}for(const O of x){if(w&&!a(O,String(w),_)||C&&!a(O,String(C),_))return null;for(const pe of v)if(!a(O,String(pe),_))return!1;return!0}let I,R,U,P,Y=C&&!_.includePrerelease&&C.semver.prerelease.length?C.semver:!1,te=w&&!_.includePrerelease&&w.semver.prerelease.length?w.semver:!1;Y&&Y.prerelease.length===1&&C.operator==="<"&&Y.prerelease[0]===0&&(Y=!1);for(const O of v){if(P=P||O.operator===">"||O.operator===">=",U=U||O.operator==="<"||O.operator==="<=",w){if(te&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===te.major&&O.semver.minor===te.minor&&O.semver.patch===te.patch&&(te=!1),O.operator===">"||O.operator===">="){if(I=h(w,O,_),I===O&&I!==w)return!1}else if(w.operator===">="&&!a(w.semver,String(O),_))return!1}if(C){if(Y&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===Y.major&&O.semver.minor===Y.minor&&O.semver.patch===Y.patch&&(Y=!1),O.operator==="<"||O.operator==="<="){if(R=m(C,O,_),R===O&&R!==C)return!1}else if(C.operator==="<="&&!a(C.semver,String(O),_))return!1}if(!O.operator&&(C||w)&&A!==0)return!1}return!(w&&U&&!C&&A!==0||C&&P&&!w&&A!==0||te||Y)},h=(y,v,_)=>{if(!y)return v;const x=s(y.semver,v.semver,_);return x>0?y:x<0||v.operator===">"&&y.operator===">="?v:y},m=(y,v,_)=>{if(!y)return v;const x=s(y.semver,v.semver,_);return x<0?y:x>0||v.operator==="<"&&y.operator==="<="?v:y};return sp=o,sp}var rp,tE;function A8(){if(tE)return rp;tE=1;const t=Al(),e=ld(),n=ln(),a=HA(),s=Br(),o=n8(),u=a8(),c=i8(),f=s8(),h=r8(),m=o8(),y=l8(),v=u8(),_=fa(),x=c8(),w=d8(),C=my(),A=f8(),I=h8(),R=cd(),U=py(),P=GA(),Y=qA(),te=gy(),O=yy(),pe=FA(),Ae=m8(),ye=dd(),ke=ha(),We=fd(),ue=g8(),X=y8(),L=v8(),q=_8(),J=b8(),K=vy(),ie=w8(),k=x8(),V=E8(),se=T8(),oe=S8();return rp={parse:s,valid:o,clean:u,inc:c,diff:f,major:h,minor:m,patch:y,prerelease:v,compare:_,rcompare:x,compareLoose:w,compareBuild:C,sort:A,rsort:I,gt:R,lt:U,eq:P,neq:Y,gte:te,lte:O,cmp:pe,coerce:Ae,Comparator:ye,Range:ke,satisfies:We,toComparators:ue,maxSatisfying:X,minSatisfying:L,minVersion:q,validRange:J,outside:K,gtr:ie,ltr:k,intersects:V,simplifyRange:se,subset:oe,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers},rp}A8();function xi(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),a=n||"latest";if(e.includes("/")){const[s,o]=e.split("/",2);if(!s||!o)throw new Error(`Invalid identifier format: ${t}`);return[s,o,a]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,a]}}class C8 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class N8 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function nE(t){return t!=null&&typeof t=="object"&&"name"in t&&(t==null?void 0:t.name)==="LangSmithNotFoundError"}async function Te(t,e,n){let a;if(t.ok){n&&(a=await t.text());return}if(t.status===403)try{const u=await t.json();(u==null?void 0:u.error)==="org_scoped_key_requires_workspace"&&(a="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const c=new Error(`${t.status} ${t.statusText}`);throw c.status=t==null?void 0:t.status,c}if(a===void 0)try{a=await t.text()}catch{a=""}const s=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${a}`;if(t.status===404)throw new N8(s);if(t.status===409)throw new C8(s);const o=new Error(s);throw o.status=t.status,o}const YA="ERR_CONFLICTING_ENDPOINTS";class O8 extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:YA}),this.name="ConflictingEndpointsError"}}function R8(t){return typeof t=="object"&&t!==null&&t.code===YA}var aE="[...]",I8={result:"[Circular]"},qc=[],Tr=[];const k8=new TextEncoder;function j8(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function uc(t){return k8.encode(t)}function ZA(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function M8(t){return function(e,n){return ZA(n)}}function On(t,e,n,a,s){var o;try{const u=JSON.stringify(t,M8(n),a);return uc(u)}catch(u){if(!((o=u.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),uc("[Unserializable]");an("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof s>"u"&&(s=j8()),rg(t,"",0,[],void 0,0,s);let c;try{Tr.length===0?c=JSON.stringify(t,n,a):c=JSON.stringify(t,L8(n),a)}catch{return uc("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;qc.length!==0;){const f=qc.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return uc(c)}}function op(t,e,n,a){var s=Object.getOwnPropertyDescriptor(a,n);s.get!==void 0?s.configurable?(Object.defineProperty(a,n,{value:t}),qc.push([a,n,e,s])):Tr.push([e,n,t]):(a[n]=t,qc.push([a,n,e]))}function rg(t,e,n,a,s,o,u){o+=1;var c;if(typeof t=="object"&&t!==null){for(c=0;c<a.length;c++)if(a[c]===t){op(I8,t,e,s);return}if(typeof u.depthLimit<"u"&&o>u.depthLimit){op(aE,t,e,s);return}if(typeof u.edgesLimit<"u"&&n+1>u.edgesLimit){op(aE,t,e,s);return}if(a.push(t),Array.isArray(t))for(c=0;c<t.length;c++)rg(t[c],c,c,a,t,o,u);else{t=ZA(t);var f=Object.keys(t);for(c=0;c<f.length;c++){var h=f[c];rg(t[h],h,c,a,t,o,u)}}a.pop()}}function L8(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Tr.length>0)for(var a=0;a<Tr.length;a++){var s=Tr[a];if(s[1]===e&&s[0]===n){n=s[2],Tr.splice(a,1);break}}return t.call(this,e,n)}}function iE(t,e,n){if(n)return t;const a=UA(),s=e??zA(),o=t.extra??{},u=o.metadata;return t.extra={...o,runtime:{...a,...o==null?void 0:o.runtime},metadata:{...s,...s.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??s.revision_id}:{},...u}},t}const D8=t=>{const e=(t==null?void 0:t.toString())??an("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},P8=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function $8(t){const e=[];for await(const n of t)e.push(n);return e}function cc(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const U8=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function sE(t){return typeof t=="number"?Number(t.toFixed(4)):t}const z8=24*1024*1024,XA=1024*1024*1024,B8=1e4,V8=100,rE="https://api.smith.langchain.com";class H8{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??XA}peek(){return this.items[0]}push(e){let n;const a=new Promise(o=>{n=o}),s=On(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+s>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${s} bytes.`),n(),a):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:a,size:s}),this.sizeBytes+=s,a)}pop({upToSizeBytes:e,upToSize:n}){var o;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const a=[];let s=0;for(;s+(((o=this.peek())==null?void 0:o.size)??0)<e&&this.items.length>0&&a.length<n;){const u=this.items.shift();u&&(a.push(u),s+=u.size,this.sizeBytes-=u.size)}if(a.length===0&&this.items.length>0){const u=this.items.shift();a.push(u),s+=u.size,this.sizeBytes-=u.size}return[a.map(u=>({action:u.action,item:u.payload,otelContext:u.otelContext,apiKey:u.apiKey,apiUrl:u.apiUrl,size:u.size})),()=>a.forEach(u=>u.itemPromiseResolve())]}}class pl{get _fetch(){return this.fetchImplementation||HD(this.debug)}constructor(e={}){var s;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Sa("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promptCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_multipartDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_runCompressionDisabled",{enumerable:!0,configurable:!0,writable:!0,value:an("DISABLE_RUN_COMPRESSION")==="true"}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Sa("LANGSMITH_DEBUG")==="true"});const n=pl.getDefaultClientConfig();if(this.tracingSampleRate=D8(e.tracingSamplingRate),this.apiUrl=cc(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=cc(e.apiKey??n.apiKey),this.webUrl=cc(e.webUrl??n.webUrl),(s=this.webUrl)!=null&&s.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=cc(e.workspaceId??an("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new lx({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;const a=e.maxIngestMemoryBytes??XA;this.batchIngestCaller=new lx({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:a,...e.callerOptions??{},onFailedResponseHook:U8,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.omitTracedRuntimeInfo=e.omitTracedRuntimeInfo??!1,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new H8(a),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,BA()&&(this.langSmithToOTELTranslator=new P6),this.cachedLSEnvVarsForMetadata=zA(),e.cache!==void 0&&e.disablePromptCache&&Sc("Both 'cache' and 'disablePromptCache' were provided. The 'cache' parameter is deprecated and will be removed in a future version. Using 'cache' parameter value."),e.cache!==void 0?(Sc("The 'cache' parameter is deprecated and will be removed in a future version. Use 'configureGlobalPromptCache()' to configure the global cache, or 'disablePromptCache: true' to disable caching for this client."),e.cache===!1?this._promptCache=void 0:e.cache===!0?this._promptCache=W1:this._promptCache=e.cache):e.disablePromptCache||(this._promptCache=W1)}static getDefaultClientConfig(){const e=an("API_KEY"),n=an("ENDPOINT")??rE,a=an("HIDE_INPUTS")==="true",s=an("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:a,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:P8(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${DA}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const a=(n==null?void 0:n.toString())??"",s=`${this.apiUrl}${e}?${a}`;return await this.caller.call(async()=>{const u=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,`fetch ${e}`),u})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,a){let s=Number(n.get("offset"))||0;const o=Number(n.get("limit"))||100;for(;;){n.set("offset",String(s)),n.set("limit",String(o));const u=`${this.apiUrl}${e}?${n}`,c=await this.caller.call(async()=>{const h=await this._fetch(u,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(h,`fetch ${e}`),h}),f=a?a(await c.json()):await c.json();if(f.length===0||(yield f,f.length<o))break;s+=f.length}}async*_getCursorPaginatedList(e,n=null,a="POST",s="runs"){const o=n?{...n}:{};for(;;){const u=JSON.stringify(o),f=await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}${e}`,{method:a,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(m,`fetch ${e}`),m})).json();if(!f||!f[s])break;yield f[s];const h=f.cursors;if(!h||!h.next)break;o.cursor=h.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const a=[];for(const s of e)this.filteredPostUuids.has(s.trace_id)?s.id===s.trace_id&&this.filteredPostUuids.delete(s.trace_id):a.push(s);return a}else{const a=[];for(const s of e){const o=s.trace_id??s.id;this.filteredPostUuids.has(o)||(s.id===o?this._shouldSample()?a.push(s):this.filteredPostUuids.add(o):a.push(s))}return a}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??z8}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit)??V8}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const a=[];for(;this.autoBatchQueue.items.length>0;){const[s,o]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!s.length){o();break}const u=s.reduce((h,m)=>{const y=m.apiUrl??this.apiUrl,v=m.apiKey??this.apiKey,x=m.apiKey===this.apiKey&&m.apiUrl===this.apiUrl?"default":`${y}|${v}`;return h[x]||(h[x]=[]),h[x].push(m),h},{}),c=[];for(const[h,m]of Object.entries(u)){const y=this._processBatch(m,{apiUrl:h==="default"?void 0:h.split("|")[0],apiKey:h==="default"?void 0:h.split("|")[1]});c.push(y)}const f=Promise.all(c).finally(o);a.push(f)}return Promise.all(a)}async _processBatch(e,n){var s,o;if(!e.length)return;const a=e.reduce((u,c)=>u+(c.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const u={runCreates:e.filter(h=>h.action==="create").map(h=>h.item),runUpdates:e.filter(h=>h.action==="update").map(h=>h.item)},c=await this._ensureServerInfo();if(!this._multipartDisabled&&(((s=c==null?void 0:c.batch_ingest_config)==null?void 0:s.use_multipart_endpoint)??!0)){const h=!this._runCompressionDisabled&&((o=c==null?void 0:c.instance_flags)==null?void 0:o.gzip_body_enabled);try{await this.multipartIngestRuns(u,{...n,useGzip:h,sizeBytes:a})}catch(m){if(nE(m))this._multipartDisabled=!0,await this.batchIngestRuns(u,{...n,sizeBytes:a});else throw m}}else await this.batchIngestRuns(u,{...n,sizeBytes:a})}}catch(u){console.error("Error exporting batch:",u)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,a=[];for(const s of e)s.item.id&&s.otelContext&&(n.set(s.item.id,s.otelContext),s.action==="create"?a.push({operation:"post",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}):a.push({operation:"patch",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}));this.langSmithToOTELTranslator.exportBatch(a,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=iE(e.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const a=await this._getBatchSizeLimitBytes(),s=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>a||this.autoBatchQueue.items.length>s)&&this.drainAutoBatchQueue({batchSizeLimitBytes:a,batchSizeLimit:s}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:a,batchSizeLimit:s})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(B8),...this.fetchOptions});return await Te(a,"get server info"),a})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=VA(),n=j6();if(this.langSmithToOTELTranslator!==void 0){const a=e.getActiveSpan();if(a)return e.setSpan(n.active(),a)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const a={...this.headers,"Content-Type":"application/json"},s=e.project_name;delete e.project_name;const o=await this.prepareRunCreateOrUpdateInputs({session_name:s,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){const f=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:o,otelContext:f,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const u=iE(o,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);(n==null?void 0:n.apiKey)!==void 0&&(a["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(a["x-tenant-id"]=n.workspaceId);const c=On(u,`Creating run with id: ${u.id}`);await this.caller.call(async()=>{const f=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Te(f,"create run",!0),f})}async batchIngestRuns({runCreates:e,runUpdates:n},a){if(e===void 0&&n===void 0)return;let s=await Promise.all((e==null?void 0:e.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]),o=await Promise.all((n==null?void 0:n.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]);if(s.length>0&&o.length>0){const f=s.reduce((m,y)=>(y.id&&(m[y.id]=y),m),{}),h=[];for(const m of o)m.id!==void 0&&f[m.id]?f[m.id]={...f[m.id],...m}:h.push(m);s=Object.values(f),o=h}const u={post:s,patch:o};if(!u.post.length&&!u.patch.length)return;const c={post:[],patch:[]};for(const f of["post","patch"]){const h=f,m=u[h].reverse();let y=m.pop();for(;y!==void 0;)c[h].push(y),y=m.pop()}if(c.post.length>0||c.patch.length>0){const f=c.post.map(h=>h.id).concat(c.patch.map(h=>h.id)).join(",");await this._postBatchIngestRuns(On(c,`Ingesting runs with ids: ${f}`),a)}}async _postBatchIngestRuns(e,n){const a={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(a["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const s=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await Te(s,"batch create run",!0),s})}async multipartIngestRuns({runCreates:e,runUpdates:n},a){if(e===void 0&&n===void 0)return;const s={};let o=[];for(const y of e??[]){const v=await this.prepareRunCreateOrUpdateInputs(y);v.id!==void 0&&v.attachments!==void 0&&(s[v.id]=v.attachments),delete v.attachments,o.push(v)}let u=[];for(const y of n??[])u.push(await this.prepareRunCreateOrUpdateInputs(y));if(o.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(u.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(o.length>0&&u.length>0){const y=o.reduce((_,x)=>(x.id&&(_[x.id]=x),_),{}),v=[];for(const _ of u)_.id!==void 0&&y[_.id]?y[_.id]={...y[_.id],..._}:v.push(_);o=Object.values(y),u=v}if(o.length===0&&u.length===0)return;const h=[],m=[];for(const[y,v]of[["post",o],["patch",u]])for(const _ of v){const{inputs:x,outputs:w,events:C,extra:A,error:I,serialized:R,attachments:U,...P}=_,Y={inputs:x,outputs:w,events:C,extra:A,error:I,serialized:R},te=On(P,`Serializing for multipart ingestion of run with id: ${P.id}`);m.push({name:`${y}.${P.id}`,payload:new Blob([te],{type:`application/json; length=${te.length}`})});for(const[O,pe]of Object.entries(Y)){if(pe===void 0)continue;const Ae=On(pe,`Serializing ${O} for multipart ingestion of run with id: ${P.id}`);m.push({name:`${y}.${P.id}.${O}`,payload:new Blob([Ae],{type:`application/json; length=${Ae.length}`})})}if(P.id!==void 0){const O=s[P.id];if(O){delete s[P.id];for(const[pe,Ae]of Object.entries(O)){let ye,ke;if(Array.isArray(Ae)?[ye,ke]=Ae:(ye=Ae.mimeType,ke=Ae.data),pe.includes(".")){console.warn(`Skipping attachment '${pe}' for run ${P.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}m.push({name:`attachment.${P.id}.${pe}`,payload:new Blob([ke],{type:`${ye}; length=${ke.byteLength}`})})}}}h.push(`trace=${P.trace_id},id=${P.id}`)}await this._sendMultipartRequest(m,h.join("; "),a)}async _createNodeFetchBody(e,n){const a=[];for(const u of e)a.push(new Blob([`--${n}\r
`])),a.push(new Blob([`Content-Disposition: form-data; name="${u.name}"\r
`,`Content-Type: ${u.payload.type}\r
\r
`])),a.push(u.payload),a.push(new Blob([`\r
`]));return a.push(new Blob([`--${n}--\r
`])),await new Blob(a).arrayBuffer()}async _createMultipartStream(e,n){const a=new TextEncoder;return new ReadableStream({async start(o){const u=async c=>{typeof c=="string"?o.enqueue(a.encode(c)):o.enqueue(c)};for(const c of e){await u(`--${n}\r
`),await u(`Content-Disposition: form-data; name="${c.name}"\r
`),await u(`Content-Type: ${c.payload.type}\r
\r
`);const h=c.payload.stream().getReader();try{let m;for(;!(m=await h.read()).done;)o.enqueue(m.value)}finally{h.releaseLock()}await u(`\r
`)}await u(`--${n}--\r
`),o.close()}})}async _sendMultipartRequest(e,n,a){const s="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=()=>this._createNodeFetchBody(e,s),u=()=>this._createMultipartStream(e,s),c=async f=>this.batchIngestCaller.callWithOptions({sizeBytes:a==null?void 0:a.sizeBytes},async()=>{const h=await f(),m={...this.headers,"Content-Type":`multipart/form-data; boundary=${s}`};(a==null?void 0:a.apiKey)!==void 0&&(m["x-api-key"]=a.apiKey);let y=h;a!=null&&a.useGzip&&typeof h=="object"&&"pipeThrough"in h&&(y=h.pipeThrough(new CompressionStream("gzip")),m["Content-Encoding"]="gzip");const v=await this._fetch(`${(a==null?void 0:a.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:m,body:y,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(v,"Failed to send multipart request",!0),v});try{let f,h=!1;VD()&&!this.multipartStreamingDisabled&&$A()!=="bun"?(h=!0,f=await c(u)):f=await c(o),(!this.multipartStreamingDisabled||h)&&f.status===422&&((a==null?void 0:a.apiUrl)??this.apiUrl)!==rE&&(console.warn(`Streaming multipart upload to ${(a==null?void 0:a.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,f=await c(o))}catch(f){if(nE(f))throw f;console.warn(`${f.message.trim()}

Context: ${n}`)}}async updateRun(e,n,a){Me(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const s={...n,id:e};if(!this._filterForSampling([s],!0).length)return;if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const c=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&s.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:s,otelContext:c,apiKey:a==null?void 0:a.apiKey,apiUrl:a==null?void 0:a.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:s,otelContext:c,apiKey:a==null?void 0:a.apiKey,apiUrl:a==null?void 0:a.apiUrl}).catch(console.error);return}const o={...this.headers,"Content-Type":"application/json"};(a==null?void 0:a.apiKey)!==void 0&&(o["x-api-key"]=a.apiKey),(a==null?void 0:a.workspaceId)!==void 0&&(o["x-tenant-id"]=a.workspaceId);const u=On(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const c=await this._fetch(`${(a==null?void 0:a.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:o,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(c,"update run",!0),c})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){Me(e);let a=await this._get(`/runs/${e}`);return n&&(a=await this._loadChildRuns(a)),a}async getRunUrl({runId:e,run:n,projectOpts:a}){if(n!==void 0){let s;n.session_id?s=n.session_id:a!=null&&a.projectName?s=(await this.readProject({projectName:a==null?void 0:a.projectName})).id:a!=null&&a.projectId?s=a==null?void 0:a.projectId:s=(await this.readProject({projectName:an("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${s}/r/${n.id}?poll=true`}else if(e!==void 0){const s=await this.readRun(e);if(!s.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var o;const n=await $8(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),a={},s={};n.sort((u,c)=>((u==null?void 0:u.dotted_order)??"").localeCompare((c==null?void 0:c.dotted_order)??""));for(const u of n){if(u.parent_run_id===null||u.parent_run_id===void 0)throw new Error(`Child run ${u.id} has no parent`);(o=u.dotted_order)!=null&&o.startsWith(e.dotted_order??"")&&u.id!==e.id&&(u.parent_run_id in a||(a[u.parent_run_id]=[]),a[u.parent_run_id].push(u),s[u.id]=u)}e.child_runs=a[e.id]||[];for(const u in a)u!==e.id&&(s[u].child_runs=a[u]);return e}async*listRuns(e){const{projectId:n,projectName:a,parentRunId:s,traceId:o,referenceExampleId:u,startTime:c,executionOrder:f,isRoot:h,runType:m,error:y,id:v,query:_,filter:x,traceFilter:w,treeFilter:C,limit:A,select:I,order:R}=e;let U=[];if(n&&(U=Array.isArray(n)?n:[n]),a){const O=Array.isArray(a)?a:[a],pe=await Promise.all(O.map(Ae=>this.readProject({projectName:Ae}).then(ye=>ye.id)));U.push(...pe)}const P=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],Y={session:U.length?U:null,run_type:m,reference_example:u,query:_,filter:x,trace_filter:w,tree_filter:C,execution_order:f,parent_run:s,start_time:c?c.toISOString():null,error:y,id:v,limit:A,trace:o,select:I||P,is_root:h,order:R};Y.select.includes("child_run_ids")&&Sc("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let te=0;for await(const O of this._getCursorPaginatedList("/runs/query",Y))if(A){if(te>=A)break;if(O.length+te>A){yield*O.slice(0,A-te);break}te+=O.length,yield*O}else yield*O}async*listGroupRuns(e){const{projectId:n,projectName:a,groupBy:s,filter:o,startTime:u,endTime:c,limit:f,offset:h}=e,y={session_id:n||(await this.readProject({projectName:a})).id,group_by:s,filter:o,start_time:u?u.toISOString():null,end_time:c?c.toISOString():null,limit:Number(f)||100};let v=Number(h)||0;const _="/runs/group",x=`${this.apiUrl}${_}`;for(;;){const w={...y,offset:v},C=Object.fromEntries(Object.entries(w).filter(([Y,te])=>te!==void 0)),A=JSON.stringify(C),R=await(await this.caller.call(async()=>{const Y=await this._fetch(x,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:A});return await Te(Y,`Failed to fetch ${_}`),Y})).json(),{groups:U,total:P}=R;if(U.length===0)break;for(const Y of U)yield Y;if(v+=U.length,v>=P)break}}async getRunStats({id:e,trace:n,parentRun:a,runType:s,projectNames:o,projectIds:u,referenceExampleIds:c,startTime:f,endTime:h,error:m,query:y,filter:v,traceFilter:_,treeFilter:x,isRoot:w,dataSourceType:C}){let A=u||[];o&&(A=[...u||[],...await Promise.all(o.map(te=>this.readProject({projectName:te}).then(O=>O.id)))]);const R=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:a,run_type:s,session:A,reference_example:c,start_time:f,end_time:h,error:m,query:y,filter:v,trace_filter:_,tree_filter:x,is_root:w,data_source_type:C}).filter(([te,O])=>O!==void 0)),U=JSON.stringify(R);return await(await this.caller.call(async()=>{const te=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:U});return await Te(te,"get run stats"),te})).json()}async shareRun(e,{shareId:n}={}){const a={run_id:e,share_token:n||hs()};Me(e);const s=JSON.stringify(a),u=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Te(c,"share run"),c})).json();if(u===null||!("share_token"in u))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${u.share_token}/r`}async unshareRun(e){Me(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(n,"unshare run",!0),n})}async readRunSharedLink(e){Me(e);const a=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"read run shared link"),s})).json();if(!(a===null||!("share_token"in a)))return`${this.getHostUrl()}/public/${a.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const a=new URLSearchParams({share_token:e});if(n!==void 0)for(const u of n)a.append("id",u);return Me(e),await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/public/${e}/runs${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,"list shared runs"),u})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),Me(e);const s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(o,"read dataset shared schema"),o})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const a={dataset_id:e};Me(e);const s=JSON.stringify(a),u=await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Te(c,"share dataset"),c})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async unshareDataset(e){Me(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(n,"unshare dataset",!0),n})}async readSharedDataset(e){return Me(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"read shared dataset"),s})).json()}async listSharedExamples(e,n){const a={};n!=null&&n.exampleIds&&(a.id=n.exampleIds);const s=new URLSearchParams;Object.entries(a).forEach(([c,f])=>{Array.isArray(f)?f.forEach(h=>s.append(c,h)):s.append(c,f)});const o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/public/${e}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(c,"list shared examples"),c}),u=await o.json();if(!o.ok)throw"detail"in u?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(u.detail)?u.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return u.map(c=>({...c,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:a=null,upsert:s=!1,projectExtra:o=null,referenceDatasetId:u=null}){const c=s?"?upsert=true":"",f=`${this.apiUrl}/sessions${c}`,h=o||{};a&&(h.metadata=a);const m={name:e,extra:h,description:n};u!==null&&(m.reference_dataset_id=u);const y=JSON.stringify(m);return await(await this.caller.call(async()=>{const x=await this._fetch(f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await Te(x,"create project"),x})).json()}async updateProject(e,{name:n=null,description:a=null,metadata:s=null,projectExtra:o=null,endTime:u=null}){const c=`${this.apiUrl}/sessions/${e}`;let f=o;s&&(f={...f||{},metadata:s});const h=JSON.stringify({name:n,extra:f,description:a,end_time:u?new Date(u).toISOString():null});return await(await this.caller.call(async()=>{const v=await this._fetch(c,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(v,"update project"),v})).json()}async hasProject({projectId:e,projectName:n}){let a="/sessions";const s=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),a+=`/${e}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${a}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,"has project"),u});try{const u=await o.json();return o.ok?Array.isArray(u)?u.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:a}){let s="/sessions";const o=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),s+=`/${e}`;else if(n!==void 0)o.append("name",n);else throw new Error("Must provide projectName or projectId");a!==void 0&&o.append("include_stats",a.toString());const u=await this._get(s,o);let c;if(Array.isArray(u)){if(u.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);c=u[0]}else c=u;return c}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const a=await this.readProject({projectId:e,projectName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${a.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const a=await this.readDataset({datasetId:e,datasetName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${a.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:a,referenceDatasetId:s,referenceDatasetName:o,includeStats:u,datasetVersion:c,referenceFree:f,metadata:h}={}){const m=new URLSearchParams;if(e!==void 0)for(const y of e)m.append("id",y);if(n!==void 0&&m.append("name",n),a!==void 0&&m.append("name_contains",a),s!==void 0)m.append("reference_dataset",s);else if(o!==void 0){const y=await this.readDataset({datasetName:o});m.append("reference_dataset",y.id)}u!==void 0&&m.append("include_stats",u.toString()),c!==void 0&&m.append("dataset_version",c),f!==void 0&&m.append("reference_free",f.toString()),h!==void 0&&m.append("metadata",JSON.stringify(h));for await(const y of this._getPaginated("/sessions",m))yield*y}async deleteProject({projectId:e,projectName:n}){let a;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?a=(await this.readProject({projectName:n})).id:a=e,Me(a),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/sessions/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,`delete session ${a} (${n})`,!0),s})}async uploadCsv({csvFile:e,fileName:n,inputKeys:a,outputKeys:s,description:o,dataType:u,name:c}){const f=`${this.apiUrl}/datasets/upload`,h=new FormData,m=new Blob([e],{type:"text/csv"});return h.append("file",m,n),a.forEach(_=>{h.append("input_keys",_)}),s.forEach(_=>{h.append("output_keys",_)}),o&&h.append("description",o),u&&h.append("data_type",u),c&&h.append("name",c),await(await this.caller.call(async()=>{const _=await this._fetch(f,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(_,"upload CSV"),_})).json()}async createDataset(e,{description:n,dataType:a,inputsSchema:s,outputsSchema:o,metadata:u}={}){const c={name:e,description:n,extra:u?{metadata:u}:void 0};a&&(c.data_type=a),s&&(c.inputs_schema_definition=s),o&&(c.outputs_schema_definition=o);const f=JSON.stringify(c);return await(await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(y,"create dataset"),y})).json()}async readDataset({datasetId:e,datasetName:n}){let a="/datasets";const s=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)Me(e),a+=`/${e}`;else if(n)s.append("name",n);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(a,s);let u;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);u=o[0]}else u=o;return u}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(a){if(a instanceof Error&&a.message.toLocaleLowerCase().includes("not found"))return!1;throw a}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:a,toVersion:s}){let o=e;if(o===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:n})).id);const u=new URLSearchParams({from_version:typeof a=="string"?a:a.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,u)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const a="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${a}/${e}/openai_ft`)).text()).trim().split(`
`).map(c=>JSON.parse(c))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:a,datasetName:s,datasetNameContains:o,metadata:u}={}){const c="/datasets",f=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(a!==void 0)for(const h of a)f.append("id",h);s!==void 0&&f.append("name",s),o!==void 0&&f.append("name_contains",o),u!==void 0&&f.append("metadata",JSON.stringify(u));for await(const h of this._getPaginated(c,f))yield*h}async updateDataset(e){const{datasetId:n,datasetName:a,...s}=e;if(!n&&!a)throw new Error("Must provide either datasetName or datasetId");const o=n??(await this.readDataset({datasetName:a})).id;Me(o);const u=JSON.stringify(s);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"update dataset"),f})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:a,asOf:s,tag:o}=e;if(!n&&!a)throw new Error("Must provide either datasetName or datasetId");const u=n??(await this.readDataset({datasetName:a})).id;Me(u);const c=JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:o});await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${u}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Te(f,"update dataset tags",!0),f})}async deleteDataset({datasetId:e,datasetName:n}){let a="/datasets",s=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(s=(await this.readDataset({datasetName:n})).id),s!==void 0)Me(s),a+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const o=await this._fetch(this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(o,`delete ${a}`,!0),o})}async indexDataset({datasetId:e,datasetName:n,tag:a}){let s=e;if(!s&&!n)throw new Error("Must provide either datasetName or datasetId");if(s&&n)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:n})).id),Me(s);const u=JSON.stringify({tag:a});await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"index dataset"),f})).json()}async similarExamples(e,n,a,{filter:s}={}){const o={limit:a,inputs:e};s!==void 0&&(o.filter=s),Me(n);const u=JSON.stringify(o);return(await(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:u});return await Te(h,"fetch similar examples"),h})).json()).examples}async createExample(e,n,a){var m;if(oE(e)&&(n!==void 0||a!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=n?a==null?void 0:a.datasetId:e.dataset_id;const o=n?a==null?void 0:a.datasetName:e.dataset_name;if(s===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:o})).id);const u=(n?a==null?void 0:a.createdAt:e.created_at)||new Date;let c;oE(e)?c=e:c={inputs:e,outputs:n,created_at:u==null?void 0:u.toISOString(),id:a==null?void 0:a.exampleId,metadata:a==null?void 0:a.metadata,split:a==null?void 0:a.split,source_run_id:a==null?void 0:a.sourceRunId,use_source_run_io:a==null?void 0:a.useSourceRunIO,use_source_run_attachments:a==null?void 0:a.useSourceRunAttachments,attachments:a==null?void 0:a.attachments};const f=await this._uploadExamplesMultipart(s,[c]);return await this.readExample(((m=f.example_ids)==null?void 0:m[0])??hs())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const I=e;let R=I[0].dataset_id;const U=I[0].dataset_name;if(R===void 0&&U===void 0)throw new Error("Must provide either datasetName or datasetId");if(R!==void 0&&U!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");R===void 0&&(R=(await this.readDataset({datasetName:U})).id);const P=await this._uploadExamplesMultipart(R,I);return await Promise.all(P.example_ids.map(te=>this.readExample(te)))}const{inputs:n,outputs:a,metadata:s,splits:o,sourceRunIds:u,useSourceRunIOs:c,useSourceRunAttachments:f,attachments:h,exampleIds:m,datasetId:y,datasetName:v}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let _=y;const x=v;if(_===void 0&&x===void 0)throw new Error("Must provide either datasetName or datasetId");if(_!==void 0&&x!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");_===void 0&&(_=(await this.readDataset({datasetName:x})).id);const w=n.map((I,R)=>({dataset_id:_,inputs:I,outputs:a==null?void 0:a[R],metadata:s==null?void 0:s[R],split:o==null?void 0:o[R],id:m==null?void 0:m[R],attachments:h==null?void 0:h[R],source_run_id:u==null?void 0:u[R],use_source_run_io:c==null?void 0:c[R],use_source_run_attachments:f==null?void 0:f[R]})),C=await this._uploadExamplesMultipart(_,w);return await Promise.all(C.example_ids.map(I=>this.readExample(I)))}async createLLMExample(e,n,a){return this.createExample({input:e},{output:n},a)}async createChatExample(e,n,a){const s=e.map(u=>ux(u)?cx(u):u),o=ux(n)?cx(n):n;return this.createExample({input:s},{output:o},a)}async readExample(e){Me(e);const n=`/examples/${e}`,a=await this._get(n),{attachment_urls:s,...o}=a,u=o;return s&&(u.attachments=Object.entries(s).reduce((c,[f,h])=>(c[f.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},c),{})),u}async*listExamples({datasetId:e,datasetName:n,exampleIds:a,asOf:s,splits:o,inlineS3Urls:u,metadata:c,limit:f,offset:h,filter:m,includeAttachments:y}={}){let v;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)v=e;else if(n!==void 0)v=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const _=new URLSearchParams({dataset:v}),x=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;x&&_.append("as_of",x);const w=u??!0;if(_.append("inline_s3_urls",w.toString()),a!==void 0)for(const A of a)_.append("id",A);if(o!==void 0)for(const A of o)_.append("splits",A);if(c!==void 0){const A=JSON.stringify(c);_.append("metadata",A)}f!==void 0&&_.append("limit",f.toString()),h!==void 0&&_.append("offset",h.toString()),m!==void 0&&_.append("filter",m),y===!0&&["attachment_urls","outputs","metadata"].forEach(A=>_.append("select",A));let C=0;for await(const A of this._getPaginated("/examples",_)){for(const I of A){const{attachment_urls:R,...U}=I,P=U;R&&(P.attachments=Object.entries(R).reduce((Y,[te,O])=>(Y[te.slice(11)]={presigned_url:O.presigned_url,mime_type:O.mime_type||void 0},Y),{})),yield P,C++}if(f!==void 0&&C>=f)break}}async deleteExample(e){Me(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,`delete ${n}`,!0),a})}async deleteExamples(e,n){if(e.forEach(a=>Me(a)),n!=null&&n.hardDelete){const a=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:e,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"hard delete examples",!0),s})}else{const a=new URLSearchParams;e.forEach(s=>a.append("example_ids",s)),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/examples?${a.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"delete examples",!0),s})}}async updateExample(e,n){let a;n?a=e:a=e.id,Me(a);let s;n?s={id:a,...n}:s=e;let o;return s.dataset_id!==void 0?o=s.dataset_id:o=(await this.readExample(a)).dataset_id,this._updateExamplesMultipart(o,[s])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:a,tag:s}){let o;if(e?o=e:o=(await this.readDataset({datasetName:n})).id,Me(o),a&&s||!a&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const u=new URLSearchParams;return a!==void 0&&u.append("as_of",typeof a=="string"?a:a.toISOString()),s!==void 0&&u.append("tag",s),await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets/${o}/version?${u.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(f,"read dataset version"),f})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:a}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,Me(s);const o=new URLSearchParams,u=a?typeof a=="string"?a:a==null?void 0:a.toISOString():void 0;return u&&o.append("as_of",u),await this._get(`/datasets/${s}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:a,exampleIds:s,remove:o=!1}){let u;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?u=(await this.readDataset({datasetName:n})).id:u=e,Me(u);const c={split_name:a,examples:s.map(h=>(Me(h),h)),remove:o},f=JSON.stringify(c);await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets/${u}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(h,"update dataset splits",!0),h})}async createFeedback(e,n,{score:a,value:s,correction:o,comment:u,sourceInfo:c,feedbackSourceType:f="api",sourceRunId:h,feedbackId:m,feedbackConfig:y,projectId:v,comparativeExperimentId:_,sessionId:x,startTime:w}){var U;if(!e&&!v)throw new Error("One of runId or projectId must be provided");if(e&&v)throw new Error("Only one of runId or projectId can be provided");const C={type:f??"api",metadata:c??{}};h!==void 0&&(C==null?void 0:C.metadata)!==void 0&&!C.metadata.__run&&(C.metadata.__run={run_id:h}),(C==null?void 0:C.metadata)!==void 0&&((U=C.metadata.__run)==null?void 0:U.run_id)!==void 0&&Me(C.metadata.__run.run_id);const A={id:m??hs(),run_id:e,key:n,score:sE(a),value:s,correction:o,comment:u,feedback_source:C,comparative_experiment_id:_,feedbackConfig:y,session_id:x??v,start_time:w},I=JSON.stringify(A),R=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const P=await this._fetch(R,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:I});return await Te(P,"create feedback",!0),P}),A}async updateFeedback(e,{score:n,value:a,correction:s,comment:o}){const u={};n!=null&&(u.score=sE(n)),a!=null&&(u.value=a),s!=null&&(u.correction=s),o!=null&&(u.comment=o),Me(e);const c=JSON.stringify(u);await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Te(f,"update feedback",!0),f})}async readFeedback(e){Me(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){Me(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,`delete ${n}`,!0),a})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:a}={}){const s=new URLSearchParams;if(e)for(const o of e)Me(o),s.append("run",o);if(n)for(const o of n)s.append("key",o);if(a)for(const o of a)s.append("source",o);for await(const o of this._getPaginated("/feedback",s))yield*o}async createPresignedFeedbackToken(e,n,{expiration:a,feedbackConfig:s}={}){const o={run_id:e,feedback_key:n,feedback_config:s};a?typeof a=="string"?o.expires_at=a:(a!=null&&a.hours||a!=null&&a.minutes||a!=null&&a.days)&&(o.expires_in=a):o.expires_in={hours:3};const u=JSON.stringify(o);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"create presigned feedback token"),f})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:a,createdAt:s,description:o,metadata:u,id:c}){var y;if(n.length===0)throw new Error("At least one experiment is required");if(a||(a=(await this.readProject({projectId:n[0]})).reference_dataset_id),!a==null)throw new Error("A reference dataset is required");const f={id:c,name:e,experiment_ids:n,reference_dataset_id:a,description:o,created_at:(y=s??new Date)==null?void 0:y.toISOString(),extra:{}};u&&(f.extra.metadata=u);const h=JSON.stringify(f);return(await this.caller.call(async()=>{const v=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(v,"create comparative experiment"),v})).json()}async*listPresignedFeedbackTokens(e){Me(e);const n=new URLSearchParams({run_id:e});for await(const a of this._getPaginated("/feedback/tokens",n))yield*a}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,a){const s=this._selectEvalResults(e),o=[];for(const u of s){let c=a||{};u.evaluatorInfo&&(c={...u.evaluatorInfo,...c});let f=null;u.targetRunId?f=u.targetRunId:n&&(f=n.id),o.push(await this.createFeedback(f,u.key,{score:u.score,value:u.value,comment:u.comment,correction:u.correction,sourceInfo:c,sourceRunId:u.sourceRunId,feedbackConfig:u.feedbackConfig,feedbackSourceType:"model",sessionId:n==null?void 0:n.session_id,startTime:n==null?void 0:n.start_time}))}return[s,o]}async logEvaluationFeedback(e,n,a){const[s]=await this._logEvaluationFeedback(e,n,a);return s}async createFeedbackConfig(e){const{feedbackKey:n,feedbackConfig:a,isLowerScoreBetter:s=!1}=e,o={feedback_key:n,feedback_config:a,is_lower_score_better:s};return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)});return await Te(c,"create feedback config"),c})).json()}async*listFeedbackConfigs(e={}){const{feedbackKeys:n,nameContains:a,limit:s}=e,o=new URLSearchParams;n&&n.forEach(c=>{o.append("key",c)}),a&&o.append("name_contains",a),o.append("limit",(s!==void 0?Math.min(s,100):100).toString());let u=0;for await(const c of this._getPaginated("/feedback-configs",o))if(yield*c,u+=c.length,s!==void 0&&u>=s)break}async updateFeedbackConfig(e,n={}){const{feedbackConfig:a,isLowerScoreBetter:s}=n,o={feedback_key:e};return a!==void 0&&(o.feedback_config=a),s!==void 0&&(o.is_lower_score_better=s),(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)});return await Te(c,"update feedback config"),c})).json()}async deleteFeedbackConfig(e){const n=new URLSearchParams({feedback_key:e});await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/feedback-configs?${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"delete feedback config",!0),a})}async*listAnnotationQueues(e={}){const{queueIds:n,name:a,nameContains:s,limit:o}=e,u=new URLSearchParams;n&&n.forEach((f,h)=>{Me(f,`queueIds[${h}]`),u.append("ids",f)}),a&&u.append("name",a),s&&u.append("name_contains",s),u.append("limit",(o!==void 0?Math.min(o,100):100).toString());let c=0;for await(const f of this._getPaginated("/annotation-queues",u))if(yield*f,c++,o!==void 0&&c>=o)break}async createAnnotationQueue(e){const{name:n,description:a,queueId:s,rubricInstructions:o,rubricItems:u}=e,c={name:n,description:a,id:s||hs(),rubric_instructions:o,rubric_items:u},f=JSON.stringify(Object.fromEntries(Object.entries(c).filter(([m,y])=>y!==void 0)));return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(m,"create annotation queue"),m})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"read annotation queue"),a})).json()}async updateAnnotationQueue(e,n){const{name:a,description:s,rubricInstructions:o,rubricItems:u}=n,c={};a!==void 0&&(c.name=a),s!==void 0&&(c.description=s),o!==void 0&&(c.rubric_instructions=o),u!==void 0&&(c.rubric_items=u);const f=JSON.stringify(c);await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(h,"update annotation queue",!0),h})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const a=JSON.stringify(n.map((s,o)=>Me(s,`runIds[${o}]`).toString()));await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Te(s,"add runs to annotation queue",!0),s})}async getRunFromAnnotationQueue(e,n){const a=`/annotation-queues/${Me(e,"queueId")}/run`;return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${a}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(o,"get run from annotation queue"),o})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/runs/${Me(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"delete run from annotation queue",!0),a})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(a,"get size from annotation queue"),a})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const a=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${a.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const a=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(s,"get latest commit hash"),s})).json();if(a.commits.length!==0)return a.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[a,s,o]=xi(e),u=JSON.stringify({like:n});return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/likes/${a}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,`${n?"like":"unlike"} prompt`),f})).json()}async _getPromptUrl(e){const[n,a,s]=xi(e);if(await this._currentTenantIsOwner(n)){const o=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${a}/${s.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${a}?organizationId=${o.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${n}/${a}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${a}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,a=>a.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const a of this._getPaginated("/repos",n,s=>s.repos))yield*a}async getPrompt(e){const[n,a,s]=xi(e),o=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/repos/${n}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(c==null?void 0:c.status)===404?null:(await Te(c,"get prompt"),c)}),u=await(o==null?void 0:o.json());return u!=null&&u.repo?u.repo:null}async createPrompt(e,n){const a=await this._getSettings();if(n!=null&&n.isPublic&&!a.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,o,u]=xi(e);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const c={repo_handle:o,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},f=JSON.stringify(c),h=await this.caller.call(async()=>{const y=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Te(y,"create prompt"),y}),{repo:m}=await h.json();return m}async createCommit(e,n,a){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[s,o,u]=xi(e),c=(a==null?void 0:a.parentCommitHash)==="latest"||!(a!=null&&a.parentCommitHash)?await this._getLatestCommitHash(`${s}/${o}`):a==null?void 0:a.parentCommitHash,f={manifest:JSON.parse(JSON.stringify(n)),parent_commit:c},h=JSON.stringify(f),y=await(await this.caller.call(async()=>{const v=await this._fetch(`${this.apiUrl}/commits/${s}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await Te(v,"create commit"),v})).json();return this._getPromptUrl(`${s}/${o}${y.commit_hash?`:${y.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var u;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const a=new FormData;for(const c of n){const f=c.id,h={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},m=On(h,`Serializing body for example with id: ${f}`),y=new Blob([m],{type:"application/json"});if(a.append(f,y),c.inputs){const v=On(c.inputs,`Serializing inputs for example with id: ${f}`),_=new Blob([v],{type:"application/json"});a.append(`${f}.inputs`,_)}if(c.outputs){const v=On(c.outputs,`Serializing outputs whle updating example with id: ${f}`),_=new Blob([v],{type:"application/json"});a.append(`${f}.outputs`,_)}if(c.attachments)for(const[v,_]of Object.entries(c.attachments)){let x,w;Array.isArray(_)?[x,w]=_:(x=_.mimeType,w=_.data);const C=new Blob([w],{type:`${x}; length=${w.byteLength}`});a.append(`${f}.attachment.${v}`,C)}if(c.attachments_operations){const v=On(c.attachments_operations,`Serializing attachments while updating example with id: ${f}`),_=new Blob([v],{type:"application/json"});a.append(`${f}.attachments_operations`,_)}}const s=e??((u=n[0])==null?void 0:u.dataset_id);return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${s}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Te(c,"update examples"),c})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const a=new FormData;for(const o of n){const u=(o.id??hs()).toString(),c={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},f=On(c,`Serializing body for uploaded example with id: ${u}`),h=new Blob([f],{type:"application/json"});if(a.append(u,h),o.inputs){const m=On(o.inputs,`Serializing inputs for uploaded example with id: ${u}`),y=new Blob([m],{type:"application/json"});a.append(`${u}.inputs`,y)}if(o.outputs){const m=On(o.outputs,`Serializing outputs for uploaded example with id: ${u}`),y=new Blob([m],{type:"application/json"});a.append(`${u}.outputs`,y)}if(o.attachments)for(const[m,y]of Object.entries(o.attachments)){let v,_;Array.isArray(y)?[v,_]=y:(v=y.mimeType,_=y.data);const x=new Blob([_],{type:`${v}; length=${_.byteLength}`});a.append(`${u}.attachment.${m}`,x)}}return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Te(o,"upload examples"),o})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[a,s]=xi(e);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("update a prompt",a);const o={};if((n==null?void 0:n.description)!==void 0&&(o.description=n.description),(n==null?void 0:n.readme)!==void 0&&(o.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(o.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(o.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(o.is_archived=n.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const u=JSON.stringify(o);return(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/repos/${a}/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await Te(f,"update prompt"),f})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,a,s]=xi(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/repos/${n}/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(u,"delete prompt"),u})).json()}_getPromptCacheKey(e,n){return`${e}${n?":with_model":""}`}async _fetchPromptFromApi(e,n){const[a,s,o]=xi(e),c=await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/commits/${a}/${s}/${o}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Te(f,"pull prompt commit"),f})).json();return{owner:a,repo:s,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async pullPromptCommit(e,n){const a=this._fetchPromptFromApi.bind(this,e,n);if(!(n!=null&&n.skipCache)&&this._promptCache){const s=this._getPromptCacheKey(e,n==null?void 0:n.includeModel),o=this._promptCache.get(s,a);if(o)return o;const u=await a();return this._promptCache.set(s,u,a),u}return this._fetchPromptFromApi(e,n)}async _pullPrompt(e,n){const a=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel,skipCache:n==null?void 0:n.skipCache});return JSON.stringify(a.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(s=>s!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:a=this.apiUrl,datasetName:s}=n,[o,u]=this.parseTokenOrUrl(e,a),c=new pl({apiUrl:o,apiKey:"placeholder"}),f=await c.readSharedDataset(u),h=s||f.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const m=await c.listSharedExamples(u),y=await this.createDataset(h,{description:f.description,dataType:f.data_type||"kv",inputsSchema:f.inputs_schema_definition??void 0,outputsSchema:f.outputs_schema_definition??void 0});try{await this.createExamples({inputs:m.map(v=>v.inputs),outputs:m.flatMap(v=>v.outputs?[v.outputs]:[]),datasetId:y.id})}catch(v){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),v}}parseTokenOrUrl(e,n,a=2,s="dataset"){try{return Me(e),[n,e]}catch{}try{const u=new URL(e).pathname.split("/").filter(c=>c!=="");if(u.length>=a){const c=u[u.length-a];return[n,c]}else throw new Error(`Invalid public ${s} URL: ${e}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${e}`)}}cleanup(){this._promptCache&&this._promptCache.stop()}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await new Promise(a=>setTimeout(a,1)),await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:a})=>a),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=M6())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function oE(t){return"dataset_id"in t||"dataset_name"in t}const G8=t=>!!["TRACING_V2","TRACING"].find(n=>an(n)==="true"),Di=Symbol.for("lc:context_variables"),lp=Symbol.for("langsmith:replica_trace_roots");function lE(t,e){if(Di in t)return t[Di][e]}function q8(t,e,n){const a=Di in t?t[Di]:{};a[e]=n,t[Di]=a}const F8="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function uE(t){const n=Object.keys(t).sort().map(a=>`${a}:${t[a]??""}`).join("|");return uD(n,F8)}function Y8(t){return t.replace(/[-:.]/g,"")}function KA(t,e=1){const n=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${n}Z`}function QA(t,e,n=1){const a=KA(t,n);return{dottedOrder:Y8(a)+e,microsecondPrecisionDatestring:a}}const Z8=new Set(["projectName","updates","reroot"]);function X8(t){const e={};for(const n of Object.keys(t))Z8.has(n)&&(e[n]=t[n]);return e}class Fc{constructor(e,n,a,s){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=a,this.replicas=s}static fromHeader(e){const n=e.split(",");let a={},s=[],o,u;for(const c of n){const[f,h]=c.split("="),m=decodeURIComponent(h);f==="langsmith-metadata"?a=JSON.parse(m):f==="langsmith-tags"?s=m.split(","):f==="langsmith-project"?o=m:f==="langsmith-replicas"&&(u=JSON.parse(m).map(v=>Array.isArray(v)?v:X8(v)))}return new Fc(a,s,o,u)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class yn{constructor(e){var c;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),K8(e)){Object.assign(this,{...e});return}const n=yn.getDefaultConfig(),{metadata:a,...s}=e,o=s.client??yn.getSharedClient(),u={...a,...(c=s==null?void 0:s.extra)==null?void 0:c.metadata};if(s.extra={...s.extra,metadata:u},"id"in s&&s.id==null&&delete s.id,Object.assign(this,{...n,...s,client:o}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=KA(this.start_time,this.execution_order)),this.id||(this.id=d6(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=eP(this.replicas),!this.dotted_order){const{dottedOrder:f}=QA(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+f:this.dotted_order=f}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){const e=Date.now();return{run_type:"chain",project_name:NA(),child_runs:[],api_url:Sa("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Sa("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return yn.sharedClient||(yn.sharedClient=new pl),yn.sharedClient}createChild(e){var m,y,v,_,x,w,C;const n=this.child_execution_order+1,a=(m=this.replicas)==null?void 0:m.map(A=>{const{reroot:I,...R}=A;return R}),s=e.replicas??a,o=new yn({...e,parent_run:this,project_name:this.project_name,replicas:s,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});Di in this&&(o[Di]=this[Di]);const u=Symbol.for("lc:child_config"),c=((y=e.extra)==null?void 0:y[u])??this.extra[u];if(J8(c)){const A={...c},I=Q8(A.callbacks)?(_=(v=A.callbacks).copy)==null?void 0:_.call(v):void 0;I&&(Object.assign(I,{_parentRunId:o.id}),(C=(w=(x=I.handlers)==null?void 0:x.find(JA))==null?void 0:w.updateFromRunTree)==null||C.call(w,o),A.callbacks=I),o.extra[u]=A}const f=new Set;let h=this;for(;h!=null&&!f.has(h.id);)f.add(h.id),h.child_execution_order=Math.max(h.child_execution_order,n),h=h.parent_run;return this.child_runs.push(o),o}async end(e,n,a=Date.now(),s){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??a,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(e,n,a=!0){var c,f;const s=e.extra??{};if(((c=s==null?void 0:s.runtime)==null?void 0:c.library)===void 0&&(s.runtime||(s.runtime={}),n))for(const[h,m]of Object.entries(n))s.runtime[h]||(s.runtime[h]=m);let o,u;return a?(u=((f=e.parent_run)==null?void 0:f.id)??e.parent_run_id,o=[]):(o=e.child_runs.map(h=>this._convertToCreate(h,n,a)),u=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:s,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:u,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,n){if(n.dotted_order){const a=n.dotted_order.split(".");let s=null;for(let o=0;o<a.length;o++)if(a[o].slice(-36)===e){s=o;break}if(s!==null){const o=a.slice(s+1);n.dotted_order=o.join("."),o.length>0?n.trace_id=o[0].slice(-36):n.trace_id=n.id}}n.parent_run_id===e&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(e,n){const a=lE(this,lp)??{};a[e]=n,q8(this,lp,a);for(const s of this.child_runs)s._setReplicaTraceRoot(e,n)}_remapForProject(e){const{projectName:n,runtimeEnv:a,excludeChildRuns:s=!0,reroot:o=!1,distributedParentId:u,apiUrl:c,apiKey:f,workspaceId:h}=e,m=this._convertToCreate(this,a,s);if(n===this.project_name)return{...m,session_name:n};if(o){if(u)this._sliceParentId(u,m);else if(m.parent_run_id=void 0,m.dotted_order){const I=m.dotted_order.split(".");I.length>0&&(m.dotted_order=I[I.length-1],m.trace_id=m.id)}const A=uE({projectName:n,apiUrl:c,apiKey:f,workspaceId:h});this._setReplicaTraceRoot(A,m.id)}let y;if(!o){const A=lE(this,lp)??{},I=uE({projectName:n,apiUrl:c,apiKey:f,workspaceId:h});if(y=A[I],y&&(m.trace_id=y,m.dotted_order)){const R=m.dotted_order.split(".");let U=null;for(let P=0;P<R.length;P++)if(R[P].slice(-36)===y){U=P;break}if(U!==null){const P=R.slice(U);m.dotted_order=P.join(".")}}}const v=m.id,_=ac(v,n);let x;m.trace_id?x=ac(m.trace_id,n):x=_;let w;m.parent_run_id&&(w=ac(m.parent_run_id,n));let C;return m.dotted_order&&(C=m.dotted_order.split(".").map(R=>{const U=R.slice(-36),P=ac(U,n);return R.slice(0,-36)+P}).join(".")),{...m,id:_,trace_id:x,parent_run_id:w,dotted_order:C,session_name:n}}async postRun(e=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{const n=UA();if(this.replicas&&this.replicas.length>0)for(const{projectName:a,apiKey:s,apiUrl:o,workspaceId:u,reroot:c}of this.replicas){const f=this._remapForProject({projectName:a??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:c,distributedParentId:this.distributedParentId,apiUrl:o,apiKey:s,workspaceId:u});await this.client.createRun(f,{apiKey:s,apiUrl:o,workspaceId:u})}else{const a=this._convertToCreate(this,n,e);await this.client.createRun(a)}if(!e){Sc("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const a of this.child_runs)await a.postRun(!1)}this.child_runs=[]}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:a,apiKey:s,apiUrl:o,workspaceId:u,updates:c,reroot:f}of this.replicas){const h=this._remapForProject({projectName:a??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:f,distributedParentId:this.distributedParentId,apiUrl:o,apiKey:s,workspaceId:u}),m={id:h.id,name:h.name,run_type:h.run_type,start_time:h.start_time,outputs:h.outputs,error:h.error,parent_run_id:h.parent_run_id,session_name:h.session_name,reference_example_id:h.reference_example_id,end_time:h.end_time,dotted_order:h.dotted_order,trace_id:h.trace_id,events:h.events,tags:h.tags,extra:h.extra,attachments:this.attachments,...c};e!=null&&e.excludeInputs||(m.inputs=h.inputs),await this.client.updateRun(h.id,m,{apiKey:s,apiUrl:o,workspaceId:u})}else try{const a={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(a.inputs=this.inputs),await this.client.updateRun(this.id,a)}catch(a){console.error(`Error in patchRun for run ${this.id}`,a)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var h,m,y,v;const a=e==null?void 0:e.callbacks;let s,o,u,c=G8();if(a){const _=((h=a==null?void 0:a.getParentRunId)==null?void 0:h.call(a))??"",x=(m=a==null?void 0:a.handlers)==null?void 0:m.find(w=>(w==null?void 0:w.name)=="langchain_tracer");s=(y=x==null?void 0:x.getRun)==null?void 0:y.call(x,_),o=x==null?void 0:x.projectName,u=x==null?void 0:x.client,c=c||!!x}return s?new yn({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:u,tracingEnabled:c,project_name:o,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(v=s==null?void 0:s.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new yn({...n,client:u,tracingEnabled:c,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var m;const a="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,s=a["langsmith-trace"];if(!s||typeof s!="string")return;const o=s.trim(),u=o.split(".").map(y=>{const[v,_]=y.split("Z");return{strTime:v,time:Date.parse(v+"Z"),uuid:_}}),c=u[0].uuid,f={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(m=u.at(-1))==null?void 0:m.uuid,trace_id:c,dotted_order:o};if(a.baggage&&typeof a.baggage=="string"){const y=Fc.fromHeader(a.baggage);f.metadata=y.metadata,f.tags=y.tags,f.project_name=y.project_name,f.replicas=y.replicas}const h=new yn(f);return h.distributedParentId=h.id,h}toHeaders(e){var a;const n={"langsmith-trace":this.dotted_order,baggage:new Fc((a=this.extra)==null?void 0:a.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[s,o]of Object.entries(n))e.set(s,o);return n}}Object.defineProperty(yn,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function K8(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function JA(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function cE(t){return Array.isArray(t)&&t.some(e=>JA(e))}function Q8(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function J8(t){const e=t==null?void 0:t.callbacks;return t!=null&&typeof e=="object"&&(cE(e==null?void 0:e.handlers)||cE(e))}function W8(){const t=Sa("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const a of e){if(typeof a!="object"||a===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof a}`);continue}if(typeof a.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof a.api_url}`);continue}if(typeof a.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof a.api_key}`);continue}n.push({apiUrl:a.api_url.replace(/\/$/,""),apiKey:a.api_key})}return n}else if(typeof e=="object"&&e!==null){tP(e);const n=[];for(const[a,s]of Object.entries(e)){const o=a.replace(/\/$/,"");if(typeof s=="string")n.push({apiUrl:o,apiKey:s});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${a}: expected string, got ${typeof s}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(R8(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function eP(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):W8()}function tP(t){if(Object.keys(t).length>0&&an("ENDPOINT"))throw new O8}const nP=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function og(t,e){if(t)return new yn({...t,start_time:t._serialized_start_time??t.start_time,parent_run:og(e),child_runs:t.child_runs.map(n=>og(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:JL()},tracingEnabled:!1})}function up(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Bo(t){return typeof t._addRunToRunMap=="function"}var Cl=class extends od{constructor(e){super(...arguments);M(this,"runMap",new Map);M(this,"runTreeMap",new Map);M(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?nP(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:a}=QA(new Date(e.start_time).getTime(),e.id,e.execution_order),s={...e},o=this.getRunById(s.parent_run_id);if(s.parent_run_id!==void 0?o?(this._addChildRun(o,s),o.child_execution_order=Math.max(o.child_execution_order,s.child_execution_order),s.trace_id=o.trace_id,o.dotted_order!==void 0&&(s.dotted_order=[o.dotted_order,n].join("."),s._serialized_start_time=a)):s.parent_run_id=void 0:(s.trace_id=s.id,s.dotted_order=n,s._serialized_start_time=a),this.usesRunTreeMap){const u=og(s,o);u!==void 0&&this.runTreeMap.set(s.id,u)}else this.runMap.set(s.id,s);return s}async _endTrace(e){var a;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((a=this.onRunUpdate)==null?void 0:a.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,a,s,o,u,c,f){const h=this._getExecutionOrder(s),m=Date.now(),y=c?{...o,metadata:c}:o,v={id:a,name:f??e.id[e.id.length-1],parent_run_id:s,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{prompts:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:y??{},tags:u||[]};return this._addRunToRunMap(v)}async handleLLMStart(e,n,a,s,o,u,c,f){var m,y;const h=this.getRunById(a)??this._createRunForLLMStart(e,n,a,s,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}_createRunForChatModelStart(e,n,a,s,o,u,c,f){const h=this._getExecutionOrder(s),m=Date.now(),y=c?{...o,metadata:c}:o,v={id:a,name:f??e.id[e.id.length-1],parent_run_id:s,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{messages:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:y??{},tags:u||[]};return this._addRunToRunMap(v)}async handleChatModelStart(e,n,a,s,o,u,c,f){var m,y;const h=this.getRunById(a)??this._createRunForChatModelStart(e,n,a,s,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}async handleLLMEnd(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.outputs=e,u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...o},await((c=this.onLLMEnd)==null?void 0:c.call(this,u)),await this._endTrace(u),u}async handleLLMError(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...o},await((c=this.onLLMError)==null?void 0:c.call(this,u)),await this._endTrace(u),u}_createRunForChainStart(e,n,a,s,o,u,c,f,h){const m=this._getExecutionOrder(s),y=Date.now(),v={id:a,name:f??e.id[e.id.length-1],parent_run_id:s,start_time:y,serialized:e,events:[{name:"start",time:new Date(y).toISOString()}],inputs:n,execution_order:m,child_execution_order:m,run_type:c??"chain",child_runs:[],extra:u?{...h,metadata:u}:{...h},tags:o||[]};return this._addRunToRunMap(v)}async handleChainStart(e,n,a,s,o,u,c,f){var m,y;const h=this.getRunById(a)??this._createRunForChainStart(e,n,a,s,o,u,c,f);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((y=this.onChainStart)==null?void 0:y.call(this,h)),h}async handleChainEnd(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.outputs=up(e,"output"),u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(u.inputs=up(o.inputs,"input")),await((c=this.onChainEnd)==null?void 0:c.call(this,u)),await this._endTrace(u),u}async handleChainError(e,n,a,s,o){var c;const u=this.getRunById(n);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(u.inputs=up(o.inputs,"input")),await((c=this.onChainError)==null?void 0:c.call(this,u)),await this._endTrace(u),u}_createRunForToolStart(e,n,a,s,o,u,c){const f=this._getExecutionOrder(s),h=Date.now(),m={id:a,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{input:n},execution_order:f,child_execution_order:f,run_type:"tool",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleToolStart(e,n,a,s,o,u,c){var h,m;const f=this.getRunById(a)??this._createRunForToolStart(e,n,a,s,o,u,c);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onToolStart)==null?void 0:m.call(this,f)),f}async handleToolEnd(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.outputs={output:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleToolError(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleAgentAction(e,n){var o;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="chain")return;const s=a;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,a))}async handleAgentEnd(e,n){var s;const a=this.getRunById(n);!a||(a==null?void 0:a.run_type)!=="chain"||(a.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,a)))}_createRunForRetrieverStart(e,n,a,s,o,u,c){const f=this._getExecutionOrder(s),h=Date.now(),m={id:a,name:c??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{query:n},execution_order:f,child_execution_order:f,run_type:"retriever",child_runs:[],extra:u?{metadata:u}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleRetrieverStart(e,n,a,s,o,u,c){var h,m;const f=this.getRunById(a)??this._createRunForRetrieverStart(e,n,a,s,o,u,c);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onRetrieverStart)==null?void 0:m.call(this,f)),f}async handleRetrieverEnd(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.outputs={documents:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleRetrieverError(e,n){var s;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleText(e,n){var s;const a=this.getRunById(n);!a||(a==null?void 0:a.run_type)!=="chain"||(a.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,a)))}async handleLLMNewToken(e,n,a,s,o,u){var f;const c=this.getRunById(a);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return c.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:u==null?void 0:u.chunk}}),await((f=this.onLLMNewToken)==null?void 0:f.call(this,c,e,{chunk:u==null?void 0:u.chunk})),c}};const cp=10,dE=(t=0)=>e=>`\x1B[${e+t}m`,fE=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,hE=(t=0)=>(e,n,a)=>`\x1B[${38+t};2;${e};${n};${a}m`,gt={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(gt.modifier);const aP=Object.keys(gt.color),iP=Object.keys(gt.bgColor);[...aP,...iP];function sP(){const t=new Map;for(const[e,n]of Object.entries(gt)){for(const[a,s]of Object.entries(n))gt[a]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[a]=gt[a],t.set(s[0],s[1]);Object.defineProperty(gt,e,{value:n,enumerable:!1})}return Object.defineProperty(gt,"codes",{value:t,enumerable:!1}),gt.color.close="\x1B[39m",gt.bgColor.close="\x1B[49m",gt.color.ansi=dE(),gt.color.ansi256=fE(),gt.color.ansi16m=hE(),gt.bgColor.ansi=dE(cp),gt.bgColor.ansi256=fE(cp),gt.bgColor.ansi16m=hE(cp),Object.defineProperties(gt,{rgbToAnsi256:{value(e,n,a){return e===n&&n===a?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(a/255*5)},enumerable:!1},hexToRgb:{value(e){const n=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!n)return[0,0,0];let[a]=n;a.length===3&&(a=[...a].map(o=>o+o).join(""));const s=Number.parseInt(a,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:e=>gt.rgbToAnsi256(...gt.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let n,a,s;if(e>=232)n=((e-232)*10+8)/255,a=n,s=n;else{e-=16;const c=e%36;n=Math.floor(e/36)/5,a=Math.floor(c/6)/5,s=c%6/5}const o=Math.max(n,a,s)*2;if(o===0)return 30;let u=30+(Math.round(s)<<2|Math.round(a)<<1|Math.round(n));return o===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(e,n,a)=>gt.ansi256ToAnsi(gt.rgbToAnsi256(e,n,a)),enumerable:!1},hexToAnsi:{value:e=>gt.ansi256ToAnsi(gt.hexToAnsi256(e)),enumerable:!1}}),gt}const WA=sP();function tn(t,e){return`${t.open}${e}${t.close}`}function Gn(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function mE(t){return typeof t=="string"?t.trim():t==null?t:Gn(t,t.toString())}function Ei(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:gn}=WA;var pE=class extends Cl{constructor(){super(...arguments);M(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let a=e;for(;a.parent_run_id;){const s=this.runMap.get(a.parent_run_id);if(s)n.push(s),a=s;else break}return n}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((a,s,o)=>{const u=`${a.execution_order}:${a.run_type}:${a.name}`;return s===o.length-1?tn(WA.bold,u):u}).join(" > ");return tn(gn.grey,n)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.green,"[chain/start]")} [${n}] Entering Chain run with input: ${Gn(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.cyan,"[chain/end]")} [${n}] [${Ei(e)}] Exiting Chain run with output: ${Gn(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.red,"[chain/error]")} [${n}] [${Ei(e)}] Chain run errored with error: ${Gn(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),a="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${tn(gn.green,"[llm/start]")} [${n}] Entering LLM run with input: ${Gn(a,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.cyan,"[llm/end]")} [${n}] [${Ei(e)}] Exiting LLM run with output: ${Gn(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.red,"[llm/error]")} [${n}] [${Ei(e)}] LLM run errored with error: ${Gn(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.green,"[tool/start]")} [${n}] Entering Tool run with input: "${mE(e.inputs.input)}"`)}onToolEnd(e){var a;const n=this.getBreadcrumbs(e);console.log(`${tn(gn.cyan,"[tool/end]")} [${n}] [${Ei(e)}] Exiting Tool run with output: "${mE((a=e.outputs)==null?void 0:a.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.red,"[tool/error]")} [${n}] [${Ei(e)}] Tool run errored with error: ${Gn(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${Gn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.cyan,"[retriever/end]")} [${n}] [${Ei(e)}] Exiting Retriever run with output: ${Gn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(gn.red,"[retriever/error]")} [${n}] [${Ei(e)}] Retriever run errored with error: ${Gn(e.error,"[error]")}`)}onAgentAction(e){const n=e,a=this.getBreadcrumbs(e);console.log(`${tn(gn.blue,"[agent/action]")} [${a}] Agent selected action: ${Gn(n.actions[n.actions.length-1],"[action]")}`)}};let dp;const rP=()=>(dp===void 0&&(dp=new pl(Li("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{})),dp);let oP=class{getStore(){}run(e,n){return n()}};const fp=Symbol.for("ls:tracing_async_local_storage"),lP=new oP;let uP=class{getInstance(){return globalThis[fp]??lP}initializeGlobalInstance(e){globalThis[fp]===void 0&&(globalThis[fp]=e)}};const cP=new uP;function dP(t=!1){const e=cP.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function _y(t){return typeof t=="function"&&"langsmith:traceable"in t}function fP(t){let e;for(const n of t)for(const a of n)Mr.isInstance(a.message)&&a.message.usage_metadata!==void 0&&(e=mA(e,a.message.usage_metadata));return e}var hp=class e2 extends Cl{constructor(n={}){super(n);M(this,"name","langchain_tracer");M(this,"projectName");M(this,"exampleId");M(this,"client");M(this,"replicas");M(this,"usesRunTreeMap",!0);const{exampleId:a,projectName:s,client:o,replicas:u}=n;this.projectName=s??NA(),this.replicas=u,this.exampleId=a,this.client=o??rP();const c=e2.getTraceableRunTree();c&&this.updateFromRunTree(c)}async persistRun(n){}async onRunCreate(n){var a,s;(a=n.extra)!=null&&a.lc_defers_inputs||await((s=this.getRunTreeWithTracingConfig(n.id))==null?void 0:s.postRun())}async onRunUpdate(n){var s;const a=this.getRunTreeWithTracingConfig(n.id);(s=n.extra)!=null&&s.lc_defers_inputs?await(a==null?void 0:a.postRun()):await(a==null?void 0:a.patchRun())}onLLMEnd(n){const a=n.outputs;if(a!=null&&a.generations){const s=fP(a.generations);if(s!==void 0){n.extra=n.extra??{};const o=n.extra.metadata??{};o.usage_metadata=s,n.extra.metadata=o}}}getRun(n){return this.runTreeMap.get(n)}updateFromRunTree(n){this.runTreeMap.set(n.id,n);let a=n;const s=new Set;for(;a.parent_run&&!(s.has(a.id)||(s.add(a.id),!a.parent_run));)a=a.parent_run;s.clear();const o=[a];for(;o.length>0;){const u=o.shift();!u||s.has(u.id)||(s.add(u.id),this.runTreeMap.set(u.id,u),u.child_runs&&o.push(...u.child_runs))}this.client=n.client??this.client,this.replicas=n.replicas??this.replicas,this.projectName=n.project_name??this.projectName,this.exampleId=n.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(n){const a=this.runTreeMap.get(n);if(a)return new yn({...a,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return dP(!0)}catch{return}}};let nl;function hP(){return new("default"in Fa?Fa.default:Fa)({autoStart:!0,concurrency:1})}function mP(){return typeof nl>"u"&&(nl=hP()),nl}async function Dt(t,e){if(e===!0){const n=ml();n!==void 0?await n.run(void 0,async()=>t()):await t()}else nl=mP(),nl.add(async()=>{const n=ml();n!==void 0?await n.run(void 0,async()=>t()):await t()})}const pP=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>Li(e)==="true");function t2(t){var n,a;const e=ml();if(e!==void 0)return(a=(n=e.getStore())==null?void 0:n[Tc])==null?void 0:a[t]}const gP=Symbol("lc:configure_hooks"),yP=()=>t2(gP)||[];var vP=class{setHandler(t){return this.setHandlers([t])}},hd=class{constructor(t,e,n,a,s,o,u,c){this.runId=t,this.handlers=e,this.inheritableHandlers=n,this.tags=a,this.inheritableTags=s,this.metadata=o,this.inheritableMetadata=u,this._parentRunId=c}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;try{await((n=e.handleText)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}async handleCustomEvent(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;try{await((u=o.handleCustomEvent)==null?void 0:u.call(o,t,e,this.runId,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}},_P=class extends hd{getChild(t){const e=new Ya(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw a}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${a}`),e.raiseError)throw t}},e.awaitHandlers)))}},gE=class extends hd{async handleLLMNewToken(t,e,n,a,s,o){await Promise.all(this.handlers.map(u=>Dt(async()=>{var c;if(!u.ignoreLLM)try{await((c=u.handleLLMNewToken)==null?void 0:c.call(u,t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMNewToken: ${f}`),u.raiseError)throw f}},u.awaitHandlers)))}async handleLLMError(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreLLM)try{await((u=o.handleLLMError)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleLLMEnd(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreLLM)try{await((u=o.handleLLMEnd)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}},bP=class extends hd{getChild(t){const e=new Ya(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreChain)try{await((u=o.handleChainError)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleChainEnd(t,e,n,a,s){await Promise.all(this.handlers.map(o=>Dt(async()=>{var u;if(!o.ignoreChain)try{await((u=o.handleChainEnd)==null?void 0:u.call(o,t,this.runId,this._parentRunId,this.tags,s))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentAction)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}},wP=class extends hd{getChild(t){const e=new Ya(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>Dt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(a){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${a}`),e.raiseError)throw a}},e.awaitHandlers)))}},Ya=class Fo extends vP{constructor(n,a){super();M(this,"handlers",[]);M(this,"inheritableHandlers",[]);M(this,"tags",[]);M(this,"inheritableTags",[]);M(this,"metadata",{});M(this,"inheritableMetadata",{});M(this,"name","callback_manager");M(this,"_parentRunId");this.handlers=(a==null?void 0:a.handlers)??this.handlers,this.inheritableHandlers=(a==null?void 0:a.inheritableHandlers)??this.inheritableHandlers,this.tags=(a==null?void 0:a.tags)??this.tags,this.inheritableTags=(a==null?void 0:a.inheritableTags)??this.inheritableTags,this.metadata=(a==null?void 0:a.metadata)??this.metadata,this.inheritableMetadata=(a==null?void 0:a.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=n}getParentRunId(){return this._parentRunId}async handleLLMStart(n,a,s=void 0,o=void 0,u=void 0,c=void 0,f=void 0,h=void 0){return Promise.all(a.map(async(m,y)=>{const v=y===0&&s?s:Ci();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return Bo(_)&&_._createRunForLLMStart(n,[m],v,this._parentRunId,u,this.tags,this.metadata,h),Dt(async()=>{var x;try{await((x=_.handleLLMStart)==null?void 0:x.call(_,n,[m],v,this._parentRunId,u,this.tags,this.metadata,h))}catch(w){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${w}`),_.raiseError)throw w}},_.awaitHandlers)})),new gE(v,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(n,a,s=void 0,o=void 0,u=void 0,c=void 0,f=void 0,h=void 0){return Promise.all(a.map(async(m,y)=>{const v=y===0&&s?s:Ci();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return Bo(_)&&_._createRunForChatModelStart(n,[m],v,this._parentRunId,u,this.tags,this.metadata,h),Dt(async()=>{var x,w;try{if(_.handleChatModelStart)await((x=_.handleChatModelStart)==null?void 0:x.call(_,n,[m],v,this._parentRunId,u,this.tags,this.metadata,h));else if(_.handleLLMStart){const C=TA(m);await((w=_.handleLLMStart)==null?void 0:w.call(_,n,[C],v,this._parentRunId,u,this.tags,this.metadata,h))}}catch(C){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${C}`),_.raiseError)throw C}},_.awaitHandlers)})),new gE(v,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(n,a,s=Ci(),o=void 0,u=void 0,c=void 0,f=void 0,h=void 0,m=void 0){return await Promise.all(this.handlers.map(y=>{if(!y.ignoreChain)return Bo(y)&&y._createRunForChainStart(n,a,s,this._parentRunId,this.tags,this.metadata,o,f,m),Dt(async()=>{var v;try{await((v=y.handleChainStart)==null?void 0:v.call(y,n,a,s,this._parentRunId,this.tags,this.metadata,o,f,m))}catch(_){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleChainStart: ${_}`),y.raiseError)throw _}},y.awaitHandlers)})),new bP(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(n,a,s=Ci(),o=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreAgent)return Bo(h)&&h._createRunForToolStart(n,a,s,this._parentRunId,this.tags,this.metadata,f),Dt(async()=>{var m;try{await((m=h.handleToolStart)==null?void 0:m.call(h,n,a,s,this._parentRunId,this.tags,this.metadata,f))}catch(y){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleToolStart: ${y}`),h.raiseError)throw y}},h.awaitHandlers)})),new wP(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(n,a,s=Ci(),o=void 0,u=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(h=>{if(!h.ignoreRetriever)return Bo(h)&&h._createRunForRetrieverStart(n,a,s,this._parentRunId,this.tags,this.metadata,f),Dt(async()=>{var m;try{await((m=h.handleRetrieverStart)==null?void 0:m.call(h,n,a,s,this._parentRunId,this.tags,this.metadata,f))}catch(y){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleRetrieverStart: ${y}`),h.raiseError)throw y}},h.awaitHandlers)})),new _P(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(n,a,s,o,u){await Promise.all(this.handlers.map(c=>Dt(async()=>{var f;if(!c.ignoreCustomEvent)try{await((f=c.handleCustomEvent)==null?void 0:f.call(c,n,a,s,this.tags,this.metadata))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}addHandler(n,a=!0){this.handlers.push(n),a&&this.inheritableHandlers.push(n)}removeHandler(n){this.handlers=this.handlers.filter(a=>a!==n),this.inheritableHandlers=this.inheritableHandlers.filter(a=>a!==n)}setHandlers(n,a=!0){this.handlers=[],this.inheritableHandlers=[];for(const s of n)this.addHandler(s,a)}addTags(n,a=!0){this.removeTags(n),this.tags.push(...n),a&&this.inheritableTags.push(...n)}removeTags(n){this.tags=this.tags.filter(a=>!n.includes(a)),this.inheritableTags=this.inheritableTags.filter(a=>!n.includes(a))}addMetadata(n,a=!0){this.metadata={...this.metadata,...n},a&&(this.inheritableMetadata={...this.inheritableMetadata,...n})}removeMetadata(n){for(const a of Object.keys(n))delete this.metadata[a],delete this.inheritableMetadata[a]}copy(n=[],a=!0){const s=new Fo(this._parentRunId);for(const o of this.handlers){const u=this.inheritableHandlers.includes(o);s.addHandler(o,u)}for(const o of this.tags){const u=this.inheritableTags.includes(o);s.addTags([o],u)}for(const o of Object.keys(this.metadata)){const u=Object.keys(this.inheritableMetadata).includes(o);s.addMetadata({[o]:this.metadata[o]},u)}for(const o of n)s.handlers.filter(u=>u.name==="console_callback_handler").some(u=>u.name===o.name)||s.addHandler(o,a);return s}static fromHandlers(n){class a extends od{constructor(){super();M(this,"name",Ci());Object.assign(this,n)}}const s=new this;return s.addHandler(new a),s}static configure(n,a,s,o,u,c,f){return this._configureSync(n,a,s,o,u,c,f)}static _configureSync(n,a,s,o,u,c,f){var _,x;let h;(n||a)&&(Array.isArray(n)||!n?(h=new Fo,h.setHandlers((n==null?void 0:n.map(Yc))??[],!0)):h=n,h=h.copy(Array.isArray(a)?a.map(Yc):a==null?void 0:a.handlers,!1));const m=Li("LANGCHAIN_VERBOSE")==="true"||(f==null?void 0:f.verbose),y=((_=hp.getTraceableRunTree())==null?void 0:_.tracingEnabled)??pP(),v=y||(Li("LANGCHAIN_TRACING")??!1);if(m||v){if(h||(h=new Fo),m&&!h.handlers.some(w=>w.name===pE.prototype.name)){const w=new pE;h.addHandler(w,!0)}if(v&&!h.handlers.some(w=>w.name==="langchain_tracer")&&y){const w=new hp;h.addHandler(w,!0)}if(y){const w=hp.getTraceableRunTree();w&&h._parentRunId===void 0&&(h._parentRunId=w.id,(x=h.handlers.find(C=>C.name==="langchain_tracer"))==null||x.updateFromRunTree(w))}}for(const{contextVar:w,inheritable:C=!0,handlerClass:A,envVar:I}of yP()){const R=I&&Li(I)==="true"&&A;let U;const P=w!==void 0?t2(w):void 0;P&&fD(P)?U=P:R&&(U=new A({})),U!==void 0&&(h||(h=new Fo),h.handlers.some(Y=>Y.name===U.name)||h.addHandler(U,C))}return(s||o)&&h&&(h.addTags(s??[]),h.addTags(o??[],!1)),(u||c)&&h&&(h.addMetadata(u??{}),h.addMetadata(c??{},!1)),h}};function Yc(t){return"name"in t?t:od.fromMethods(t)}var xP=class{getStore(){}run(t,e){return e()}enterWith(t){}};const EP=new xP,yE=Symbol.for("lc:child_config");var TP=class{getInstance(){return ml()??EP}getRunnableConfig(){var t,e;return(e=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:e[yE]}runWithConfig(t,e,n){var h;const a=Ya._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),s=this.getInstance(),o=s.getStore(),u=a==null?void 0:a.getParentRunId(),c=(h=a==null?void 0:a.handlers)==null?void 0:h.find(m=>(m==null?void 0:m.name)==="langchain_tracer");let f;return c&&u?f=c.getRunTreeWithTracingConfig(u):n||(f=new yn({name:"<runnable_lambda>",tracingEnabled:!1})),f&&(f.extra={...f.extra,[yE]:t}),o!==void 0&&o[Tc]!==void 0&&(f===void 0&&(f={}),f[Tc]=o[Tc]),s.run(f,e)}initializeGlobalInstance(t){ml()===void 0&&FL(t)}};const Vi=new TP,mp=25;async function ca(t){return Ya._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function vE(...t){const e={};for(const n of t.filter(a=>!!a))for(const a of Object.keys(n))if(a==="metadata")e[a]={...e[a],...n[a]};else if(a==="tags"){const s=e[a]??[];e[a]=[...new Set(s.concat(n[a]??[]))]}else if(a==="configurable")e[a]={...e[a],...n[a]};else if(a==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(a==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(a==="callbacks"){const s=e.callbacks,o=n.callbacks;if(Array.isArray(o))if(!s)e.callbacks=o;else if(Array.isArray(s))e.callbacks=s.concat(o);else{const u=s.copy();for(const c of o)u.addHandler(Yc(c),!0);e.callbacks=u}else if(o)if(!s)e.callbacks=o;else if(Array.isArray(s)){const u=o.copy();for(const c of s)u.addHandler(Yc(c),!0);e.callbacks=u}else e.callbacks=new Ya(o._parentRunId,{handlers:s.handlers.concat(o.handlers),inheritableHandlers:s.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(o.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(o.inheritableTags))),metadata:{...s.metadata,...o.metadata}})}else{const s=a;e[s]=n[s]??e[s]}return e}const SP=new Set(["string","number","boolean"]);function at(t){var a;const e=Vi.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:s,runName:o,...u}=e;n=Object.entries(u).reduce((c,[f,h])=>(h!==void 0&&(c[f]=h),c),n)}if(t&&(n=Object.entries(t).reduce((s,[o,u])=>(u!==void 0&&(s[o]=u),s),n)),n!=null&&n.configurable)for(const s of Object.keys(n.configurable))SP.has(typeof n.configurable[s])&&!((a=n.metadata)!=null&&a[s])&&(n.metadata||(n.metadata={}),n.metadata[s]=n.configurable[s]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const s=n.timeout,o=AbortSignal.timeout(s);n.metadata||(n.metadata={}),n.metadata.timeoutMs===void 0&&(n.metadata.timeoutMs=s),n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,o])):n.signal=o,delete n.timeout}return n}function sn(t={},{callbacks:e,maxConcurrency:n,recursionLimit:a,runName:s,configurable:o,runId:u}={}){const c=at(t);return e!==void 0&&(delete c.runName,c.callbacks=e),a!==void 0&&(c.recursionLimit=a),n!==void 0&&(c.maxConcurrency=n),s!==void 0&&(c.runName=s),o!==void 0&&(c.configurable={...c.configurable,...o}),u!==void 0&&delete c.runId,c}function Dr(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function Hi(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(a=>{if(!(e!=null&&e.aborted))throw a}),new Promise((a,s)=>{n=()=>{s(Zc(e))},e.addEventListener("abort",n,{once:!0}),e.aborted&&s(Zc(e))})]).finally(()=>e.removeEventListener("abort",n))}function Zc(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var Aa=class lg extends ReadableStream{constructor(){super(...arguments);M(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const n=await this.reader.read();return n.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:n.value}}catch(n){throw this.reader.releaseLock(),n}}async return(){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}return{done:!0,value:void 0}}async throw(n){if(this.ensureReader(),this.locked){const a=this.reader.cancel();this.reader.releaseLock(),await a}throw n}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(n){const a=n.getReader();return new lg({start(s){return o();function o(){return a.read().then(({done:u,value:c})=>{if(u){s.close();return}return s.enqueue(c),o()})}},cancel(){a.releaseLock()}})}static fromAsyncGenerator(n){return new lg({async pull(a){const{value:s,done:o}=await n.next();o&&a.close(),a.enqueue(s)},async cancel(a){await n.return(a)}})}};function n2(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(s){for(;;)if(s.length===0){const o=await t.next();for(const u of n)u.push(o)}else{if(s[0].done)return;yield s.shift().value}})}function md(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[a,s]of Object.entries(e))a in n&&!Array.isArray(n[a])?n[a]=md(n[a],s):n[a]=s;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var Vr=class{constructor(t){M(this,"generator");M(this,"setup");M(this,"config");M(this,"signal");M(this,"firstResult");M(this,"firstResultUsed",!1);var e;this.generator=t.generator,this.config=t.config,this.signal=t.signal??((e=this.config)==null?void 0:e.signal),this.setup=new Promise((n,a)=>{Vi.runWithConfig(Dr(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,a):this.firstResult.then(s=>n(void 0),a)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?Vi.runWithConfig(Dr(this.config),this.signal?async()=>Hi(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function AP(t,e,n,a,...s){const o=new Vr({generator:e,startSetup:n,signal:a}),u=await o.setup;return{output:t(o,u,...s),setup:u}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const CP=Object.prototype.hasOwnProperty;function ug(t,e){return CP.call(t,e)}function cg(t){if(Array.isArray(t)){const n=new Array(t.length);for(let a=0;a<n.length;a++)n[a]=""+a;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)ug(t,n)&&e.push(n);return e}function oa(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function dg(t){let e=0;const n=t.length;let a;for(;e<n;){if(a=t.charCodeAt(e),a>=48&&a<=57){e++;continue}return!1}return!0}function fr(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function NP(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function fg(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,a=t.length;n<a;n++)if(fg(t[n]))return!0}else if(typeof t=="object"){const n=cg(t),a=n.length;for(var e=0;e<a;e++)if(fg(t[n[e]]))return!0}}return!1}function _E(t,e){const n=[t];for(const a in e){const s=typeof e[a]=="object"?JSON.stringify(e[a],null,2):e[a];typeof s<"u"&&n.push(`${a}: ${s}`)}return n.join(`
`)}var OP=class extends Error{constructor(t,e,n,a,s){super(_E(t,{name:e,index:n,operation:a,tree:s})),this.name=e,this.index=n,this.operation=a,this.tree=s,Object.setPrototypeOf(this,new.target.prototype),this.message=_E(t,{name:e,index:n,operation:a,tree:s})}},RP=c3({JsonPatchError:()=>Et,_areEquals:()=>yl,applyOperation:()=>vs,applyPatch:()=>gl,applyReducer:()=>jP,deepClone:()=>IP,getValueByPointer:()=>Xc,validate:()=>a2,validator:()=>Kc});const Et=OP,IP=oa,Sr={add:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var a=t[e];return delete t[e],{newDocument:n,removed:a}},replace:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var a=t[e];return t[e]=this.value,{newDocument:n,removed:a}},move:function(t,e,n){let a=Xc(n,this.path);a&&(a=oa(a));const s=vs(n,{op:"remove",path:this.from}).removed;return vs(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:a}},copy:function(t,e,n){const a=Xc(n,this.from);return vs(n,{op:"add",path:this.path,value:oa(a)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:yl(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var kP={add:function(t,e,n){return dg(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var a=t[e];return t[e]=this.value,{newDocument:n,removed:a}},move:Sr.move,copy:Sr.copy,test:Sr.test,_get:Sr._get};function Xc(t,e){if(e=="")return t;var n={op:"_get",path:e};return vs(t,n),n.value}function vs(t,e,n=!1,a=!0,s=!0,o=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):Kc(e,0)),e.path===""){let u={newDocument:t};if(e.op==="add")return u.newDocument=e.value,u;if(e.op==="replace")return u.newDocument=e.value,u.removed=t,u;if(e.op==="move"||e.op==="copy")return u.newDocument=Xc(t,e.from),e.op==="move"&&(u.removed=t),u;if(e.op==="test"){if(u.test=yl(t,e.value),u.test===!1)throw new Et("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return u.newDocument=t,u}else{if(e.op==="remove")return u.removed=t,u.newDocument=null,u;if(e.op==="_get")return e.value=t,u;if(n)throw new Et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return u}}else{a||(t=oa(t));const u=(e.path||"").split("/");let c=t,f=1,h=u.length,m,y,v;for(typeof n=="function"?v=n:v=Kc;;){if(y=u[f],y&&y.indexOf("~")!=-1&&(y=NP(y)),s&&(y=="__proto__"||y=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&m===void 0&&(c[y]===void 0?m=u.slice(0,f).join("/"):f==h-1&&(m=e.path),m!==void 0&&v(e,0,t,m)),f++,Array.isArray(c)){if(y==="-")y=c.length;else{if(n&&!dg(y))throw new Et("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);dg(y)&&(y=~~y)}if(f>=h){if(n&&e.op==="add"&&y>c.length)throw new Et("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);const _=kP[e.op].call(e,c,y,t);if(_.test===!1)throw new Et("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return _}}else if(f>=h){const _=Sr[e.op].call(e,c,y,t);if(_.test===!1)throw new Et("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return _}if(c=c[y],n&&f<h&&(!c||typeof c!="object"))throw new Et("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}}function gl(t,e,n,a=!0,s=!0){if(n&&!Array.isArray(e))throw new Et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");a||(t=oa(t));const o=new Array(e.length);for(let u=0,c=e.length;u<c;u++)o[u]=vs(t,e[u],n,!0,s,u),t=o[u].newDocument;return o.newDocument=t,o}function jP(t,e,n){const a=vs(t,e);if(a.test===!1)throw new Et("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return a.newDocument}function Kc(t,e,n,a){if(typeof t!="object"||t===null||Array.isArray(t))throw new Et("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Sr[t.op]){if(typeof t.path!="string")throw new Et("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Et('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Et("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&fg(t.value))throw new Et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,o=a.split("/").length;if(s!==o+1&&s!==o)throw new Et("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==a)throw new Et("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var u=a2([{op:"_get",path:t.from,value:void 0}],n);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new Et("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function a2(t,e,n){try{if(!Array.isArray(t))throw new Et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)gl(oa(e),oa(t),n||!0);else{n=n||Kc;for(var a=0;a<t.length;a++)n(t[a],a,e,void 0)}}catch(s){if(s instanceof Et)return s;throw s}}function yl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),a=Array.isArray(e),s,o,u;if(n&&a){if(o=t.length,o!=e.length)return!1;for(s=o;s--!==0;)if(!yl(t[s],e[s]))return!1;return!0}if(n!=a)return!1;var c=Object.keys(t);if(o=c.length,o!==Object.keys(e).length)return!1;for(s=o;s--!==0;)if(!e.hasOwnProperty(c[s]))return!1;for(s=o;s--!==0;)if(u=c[s],!yl(t[u],e[u]))return!1;return!0}return t!==t&&e!==e}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2013-2021 Joachim Wester
* MIT license
*/function i2(t,e,n,a,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=cg(e),u=cg(t),c=!1,f=u.length-1;f>=0;f--){var h=u[f],m=t[h];if(ug(e,h)&&!(e[h]===void 0&&m!==void 0&&Array.isArray(e)===!1)){var y=e[h];typeof m=="object"&&m!=null&&typeof y=="object"&&y!=null&&Array.isArray(m)===Array.isArray(y)?i2(m,y,n,a+"/"+fr(h),s):m!==y&&(s&&n.push({op:"test",path:a+"/"+fr(h),value:oa(m)}),n.push({op:"replace",path:a+"/"+fr(h),value:oa(y)}))}else Array.isArray(t)===Array.isArray(e)?(s&&n.push({op:"test",path:a+"/"+fr(h),value:oa(m)}),n.push({op:"remove",path:a+"/"+fr(h)}),c=!0):(s&&n.push({op:"test",path:a,value:t}),n.push({op:"replace",path:a,value:e}))}if(!(!c&&o.length==u.length))for(var f=0;f<o.length;f++){var h=o[f];!ug(t,h)&&e[h]!==void 0&&n.push({op:"add",path:a+"/"+fr(h),value:oa(e[h])})}}}function MP(t,e,n=!1){var a=[];return i2(t,e,a,"",n),a}({...RP});var Ni=class{constructor(t){M(this,"ops");this.ops=t.ops??[]}concat(t){const e=this.ops.concat(t.ops),n=gl({},e);return new s2({ops:e,state:n[n.length-1].newDocument})}},s2=class hg extends Ni{constructor(n){super(n);M(this,"state");this.state=n.state}concat(n){const a=this.ops.concat(n.ops),s=gl(this.state,n.ops);return new hg({ops:a,state:s[s.length-1].newDocument})}static fromRunLogPatch(n){const a=gl({},n.ops);return new hg({ops:n.ops,state:a[a.length-1].newDocument})}};const LP=t=>t.name==="log_stream_tracer";async function bE(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function wE(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function DP(t){return t!==void 0&&t.message!==void 0}var xE=class extends Cl{constructor(e){super({_awaitHandler:!0,...e});M(this,"autoClose",!0);M(this,"includeNames");M(this,"includeTypes");M(this,"includeTags");M(this,"excludeNames");M(this,"excludeTypes");M(this,"excludeTags");M(this,"_schemaFormat","original");M(this,"rootId");M(this,"keyMapByRunId",{});M(this,"counterMapByRunName",{});M(this,"transformStream");M(this,"writer");M(this,"receiveStream");M(this,"name","log_stream_tracer");M(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Aa.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(a=a||n.find(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(a=a&&n.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),a}async*tapOutputIterable(e,n){for await(const a of n){if(e!==this.rootId){const s=this.keyMapByRunId[e];s&&await this.writer.write(new Ni({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:a}]}))}yield a}}async onRunCreate(e){var s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Ni({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const a={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(a.inputs=await bE(e,this._schemaFormat)),await this.writer.write(new Ni({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:a}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const a=[];this._schemaFormat==="streaming_events"&&a.push({op:"replace",path:`/logs/${n}/inputs`,value:await bE(e,this._schemaFormat)}),a.push({op:"add",path:`/logs/${n}/final_output`,value:await wE(e,this._schemaFormat)}),e.end_time!==void 0&&a.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const s=new Ni({ops:a});await this.writer.write(s)}finally{if(e.id===this.rootId){const n=new Ni({ops:[{op:"replace",path:"/final_output",value:await wE(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,a){const s=this.keyMapByRunId[e.id];if(s===void 0)return;const o=e.inputs.messages!==void 0;let u;o?DP(a==null?void 0:a.chunk)?u=a==null?void 0:a.chunk:u=new Sl({id:`run-${e.id}`,content:n}):u=n;const c=new Ni({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${s}/streamed_output/-`,value:u}]});await this.writer.write(c)}};const EE="__run";var Qc=class r2{constructor(e){M(this,"text");M(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new r2({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},mg=class o2 extends Qc{constructor(n){super(n);M(this,"message");this.message=n.message}concat(n){return new o2({text:this.text+n.text,generationInfo:{...this.generationInfo,...n.generationInfo},message:this.message.concat(n.message)})}};function dc({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const PP=t=>t.name==="event_stream_tracer";var $P=class extends Cl{constructor(e){super({_awaitHandler:!0,...e});M(this,"autoClose",!0);M(this,"includeNames");M(this,"includeTypes");M(this,"includeTags");M(this,"excludeNames");M(this,"excludeTypes");M(this,"excludeTags");M(this,"runInfoMap",new Map);M(this,"tappedPromises",new Map);M(this,"transformStream");M(this,"writer");M(this,"receiveStream");M(this,"readableStreamClosed",!1);M(this,"name","event_stream_tracer");M(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Aa.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(a=a||n.find(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(a=a&&n.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),a}async*tapOutputIterable(e,n){const a=await n.next();if(a.done)return;const s=this.runInfoMap.get(e);if(s===void 0){yield a.value;return}function o(c,f){return c==="llm"&&typeof f=="string"?new Qc({text:f}):f}let u=this.tappedPromises.get(e);if(u===void 0){let c;u=new Promise(f=>{c=f}),this.tappedPromises.set(e,u);try{const f={event:`on_${s.runType}_stream`,run_id:e,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...f,data:{chunk:o(s.runType,a.value)}},s),yield a.value;for await(const h of n)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...f,data:{chunk:o(s.runType,h)}},s),yield h}finally{c==null||c()}}else{yield a.value;for await(const c of n)yield c}}async send(e,n){this.readableStreamClosed||this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const a=this.tappedPromises.get(e.run_id);a!==void 0?a.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var u,c;const n=dc(e),a=e.inputs.messages!==void 0?"chat_model":"llm",s={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:n,runType:a,inputs:e.inputs};this.runInfoMap.set(e.id,s);const o=`on_${a}_start`;await this.send({event:o,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},s)}async onLLMNewToken(e,n,a){const s=this.runInfoMap.get(e.id);let o,u;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")u="on_chat_model_stream",(a==null?void 0:a.chunk)===void 0?o=new Sl({content:n,id:`run-${e.id}`}):o=a.chunk.message;else if(s.runType==="llm")u="on_llm_stream",(a==null?void 0:a.chunk)===void 0?o=new Qc({text:n}):o=a.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:u,data:{chunk:o},run_id:e.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(e){var u,c,f;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let a;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const s=(u=e.outputs)==null?void 0:u.generations;let o;if(n.runType==="chat_model"){for(const h of s??[]){if(o!==void 0)break;o=(c=h[0])==null?void 0:c.message}a="on_chat_model_end"}else if(n.runType==="llm")o={generations:s==null?void 0:s.map(h=>h.map(m=>({text:m.text,generationInfo:m.generationInfo}))),llmOutput:((f=e.outputs)==null?void 0:f.llmOutput)??{}},a="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:a,data:{output:o,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var u,c;const n=dc(e),a=e.run_type??"chain",s={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:n,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},s.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,s.inputs=e.inputs.input):(o.input=e.inputs,s.inputs=e.inputs),this.runInfoMap.set(e.id,s),await this.send({event:`on_${a}_start`,data:o,name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},s)}async onChainEnd(e){var u;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const a=`on_${e.run_type}_end`,s=e.inputs??n.inputs??{},o={output:((u=e.outputs)==null?void 0:u.output)??e.outputs,input:s};s.input&&Object.keys(s).length===1&&(o.input=s.input,n.inputs=s.input),await this.sendEndEvent({event:a,data:o,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var s,o;const n=dc(e),a={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,a),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},a)}async onToolEnd(e){var s;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const a=((s=e.outputs)==null?void 0:s.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:a,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onToolError(e){const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);await this.sendEndEvent({event:"on_tool_error",data:{input:n.inputs,error:e.error},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var s,o;const n=dc(e),a={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,a),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},a)}async onRetrieverEnd(e){var a;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((a=e.outputs)==null?void 0:a.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,a){const s=this.runInfoMap.get(a);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${a} not found in run map.`);await this.send({event:"on_custom_event",run_id:a,name:e,tags:s.tags,metadata:s.metadata,data:n},s)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const UP=Object.prototype.toString,zP=t=>UP.call(t)==="[object Error]",BP=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function VP(t){if(!(t&&zP(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:e,stack:n}=t;return e==="Load failed"?n===void 0||"__sentry_captured__"in t:e.startsWith("error sending request for url")?!0:BP.has(e)}function HP(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function fc(t,e,{min:n=0,allowInfinity:a=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${a?" or Infinity":""}.`);if(!a&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}var GP=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function qP(t,e){const n=Math.max(1,t+1),a=e.randomize?Math.random()+1:1;let s=Math.round(a*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function TE(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function FP({error:t,attemptNumber:e,retriesConsumed:n,startTime:a,options:s}){var _,x,w;const o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof GP)throw o.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,c=s.maxRetryTime??Number.POSITIVE_INFINITY,f=Object.freeze({error:o,attemptNumber:e,retriesLeft:u,retriesConsumed:n});if(await s.onFailedAttempt(f),TE(a,c)<=0)throw o;const h=await s.shouldConsumeRetry(f),m=TE(a,c);if(m<=0||u<=0)throw o;if(o instanceof TypeError&&!VP(o)){if(h)throw o;return(_=s.signal)==null||_.throwIfAborted(),!1}if(!await s.shouldRetry(f))throw o;if(!h)return(x=s.signal)==null||x.throwIfAborted(),!1;const y=qP(n,s),v=Math.min(y,m);return v>0&&await new Promise((C,A)=>{var U,P;const I=()=>{var Y;clearTimeout(R),(Y=s.signal)==null||Y.removeEventListener("abort",I),A(s.signal.reason)},R=setTimeout(()=>{var Y;(Y=s.signal)==null||Y.removeEventListener("abort",I),C()},v);s.unref&&((U=R.unref)==null||U.call(R)),(P=s.signal)==null||P.addEventListener("abort",I,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function pg(t,e={}){var o,u,c;if(e={...e},HP(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),fc("factor",e.factor,{min:0,allowInfinity:!1}),fc("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),fc("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),fc("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(o=e.signal)==null||o.throwIfAborted();let n=0,a=0;const s=performance.now();for(;!Number.isFinite(e.retries)||a<=e.retries;){n++;try{(u=e.signal)==null||u.throwIfAborted();const f=await t(n);return(c=e.signal)==null||c.throwIfAborted(),f}catch(f){await FP({error:f,attemptNumber:n,retriesConsumed:a,startTime:s,options:e})&&a++}}throw new Error("Retry attempts exhausted without throwing an error.")}const YP=[400,401,402,403,404,405,406,407,409],ZP=t=>{if(typeof t!="object"||t===null)return;if("message"in t&&typeof t.message=="string"&&(t.message.startsWith("Cancel")||t.message.startsWith("AbortError"))||"name"in t&&typeof t.name=="string"&&t.name==="AbortError"||"code"in t&&typeof t.code=="string"&&t.code==="ECONNABORTED")throw t;const e="response"in t&&typeof t.response=="object"&&t.response!==null&&"status"in t.response&&typeof t.response.status=="number"?t.response.status:void 0,n="status"in t&&typeof t.status=="number"?t.status:void 0,a=e??n;if(a&&YP.includes(+a))throw t;if(("error"in t&&typeof t.error=="object"&&t.error!==null&&"code"in t.error&&typeof t.error.code=="string"?t.error.code:void 0)==="insufficient_quota"){const s=new Error("message"in t&&typeof t.message=="string"?t.message:"Insufficient quota");throw s.name="InsufficientQuotaError",s}};var by=class{constructor(t){M(this,"maxConcurrency");M(this,"maxRetries");M(this,"onFailedAttempt");M(this,"queue");this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??ZP,this.queue=new("default"in Fa?Fa.default:Fa)({concurrency:this.maxConcurrency})}async call(t,...e){return this.queue.add(()=>pg(()=>t(...e).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>{var a;return(a=this.onFailedAttempt)==null?void 0:a.call(this,n)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...n){if(t.signal){let a;return Promise.race([this.call(e,...n),new Promise((s,o)=>{var u;a=()=>{o(Zc(t.signal))},(u=t.signal)==null||u.addEventListener("abort",a,{once:!0})})]).finally(()=>{t.signal&&a&&t.signal.removeEventListener("abort",a)})}return this.call(e,...n)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}},l2=class extends Cl{constructor({config:e,onStart:n,onEnd:a,onError:s}){super({_awaitHandler:!0});M(this,"name","RootListenersTracer");M(this,"rootId");M(this,"config");M(this,"argOnStart");M(this,"argOnEnd");M(this,"argOnError");this.config=e,this.argOnStart=n,this.argOnEnd=a,this.argOnError=s}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function wy(t){return t?t.lc_runnable:!1}var XP=class{constructor(t){M(this,"includeNames");M(this,"includeTypes");M(this,"includeTags");M(this,"excludeNames");M(this,"excludeTypes");M(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const a=t.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e)),this.includeTags!==void 0&&(n=n||a.some(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(n=n&&a.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),n}};const KP=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");function pp(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const QP=["*","_","`"];function JP(t){let e="";for(const[n,a]of Object.entries(t))e+=`	classDef ${n} ${a};
`;return e}function WP(t,e,n){const{firstNode:a,lastNode:s,nodeColors:o,withStyles:u=!0,curveStyle:c="linear",wrapLabelNWords:f=9}=n??{};let h=u?`%%{init: {'flowchart': {'curve': '${c}'}}}%%
graph TD;
`:`graph TD;
`;if(u){const x="default",w={[x]:"{0}({1})"};a!==void 0&&(w[a]="{0}([{1}]):::first"),s!==void 0&&(w[s]="{0}([{1}]):::last");for(const[C,A]of Object.entries(t)){const I=A.name.split(":").pop()??"";let R=QP.some(P=>I.startsWith(P)&&I.endsWith(P))?`<p>${I}</p>`:I;Object.keys(A.metadata??{}).length&&(R+=`<hr/><small><em>${Object.entries(A.metadata??{}).map(([P,Y])=>`${P} = ${Y}`).join(`
`)}</em></small>`);const U=(w[C]??w[x]).replace("{0}",pp(C)).replace("{1}",R);h+=`	${U}
`}}const m={};for(const x of e){const w=x.source.split(":"),C=x.target.split(":"),A=w.filter((I,R)=>I===C[R]).join(":");m[A]||(m[A]=[]),m[A].push(x)}const y=new Set;function v(x){return[...x].sort((w,C)=>w.split(":").length-C.split(":").length)}function _(x,w){const C=x.length===1&&x[0].source===x[0].target;if(w&&!C){const I=w.split(":").pop();if(y.has(w))throw new Error(`Found duplicate subgraph '${I}' at '${w} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(w),h+=`	subgraph ${I}
`}const A=v(Object.keys(m).filter(I=>I.startsWith(`${w}:`)&&I!==w&&I.split(":").length===w.split(":").length+1));for(const I of A)_(m[I],I);for(const I of x){const{source:R,target:U,data:P,conditional:Y}=I;let te="";if(P!==void 0){let O=P;const pe=O.split(" ");pe.length>f&&(O=Array.from({length:Math.ceil(pe.length/f)},(Ae,ye)=>pe.slice(ye*f,(ye+1)*f).join(" ")).join("&nbsp;<br>&nbsp;")),te=Y?` -. &nbsp;${O}&nbsp; .-> `:` -- &nbsp;${O}&nbsp; --> `}else te=Y?" -.-> ":" --> ";h+=`	${pp(R)}${te}${pp(U)};
`}w&&!C&&(h+=`	end
`)}_(m[""]??[],"");for(const x in m)!x.includes(":")&&x!==""&&_(m[x],x);return u&&(h+=JP(o??{})),h}async function e$(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const a=(e==null?void 0:e.imageType)??"png",s=KP(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const o=`https://mermaid.ink/img/${s}?bgColor=${n}&type=${a}`,u=await fetch(o);if(!u.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${u.status}`,`Status text: ${u.statusText}`].join(`
`));return await u.blob()}function t$(t,e){if(t!==void 0&&!el(t))return t;if(wy(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function n$(t){return wy(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...ay(t.data.schema),title:t.data.name}}}var u2=class c2{constructor(e){M(this,"nodes",{});M(this,"edges",[]);this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,a)=>{e[n.id]=el(n.id)?a:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...n$(n)})),edges:this.edges.map(n=>{const a={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(a.data=n.data),typeof n.conditional<"u"&&(a.conditional=n.conditional),a})}}addNode(e,n,a){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const s=n??hs(),o={id:s,data:e,name:t$(n,e),metadata:a};return this.nodes[s]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,a,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const o={source:e.id,target:n.id,data:a,conditional:s};return this.edges.push(o),o}firstNode(){return SE(this)}lastNode(){return AE(this)}extend(e,n=""){let a=n;Object.values(e.nodes).map(f=>f.id).every(el)&&(a="");const s=f=>a?`${a}:${f}`:f;Object.entries(e.nodes).forEach(([f,h])=>{this.nodes[s(f)]={...h,id:s(f)}});const o=e.edges.map(f=>({...f,source:s(f.source),target:s(f.target)}));this.edges=[...this.edges,...o];const u=e.firstNode(),c=e.lastNode();return[u?{id:s(u.id),data:u.data}:void 0,c?{id:s(c.id),data:c.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&SE(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&AE(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),n=new Map;Object.values(e).forEach(s=>{n.set(s,(n.get(s)||0)+1)});const a=s=>{const o=e[s];return el(s)&&n.get(o)===1?o:s};return new c2({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,o])=>[a(s),{...o,id:a(s)}])),edges:this.edges.map(s=>({...s,source:a(s.source),target:a(s.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:a,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},u=this.reid(),c=u.firstNode(),f=u.lastNode();return WP(u.nodes,u.edges,{firstNode:c==null?void 0:c.id,lastNode:f==null?void 0:f.id,withStyles:n,curveStyle:a,nodeColors:s,wrapLabelNWords:o})}async drawMermaidPng(e){return e$(this.drawMermaid(e),{backgroundColor:e==null?void 0:e.backgroundColor})}};function SE(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.source)).map(s=>s.target)),a=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&a.push(s);return a.length===1?a[0]:void 0}function AE(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.target)).map(s=>s.source)),a=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&a.push(s);return a.length===1?a[0]:void 0}function a$(t){const e=new TextEncoder,n=new ReadableStream({async start(a){for await(const s of t)a.enqueue(e.encode(`event: data
data: ${JSON.stringify(s)}

`));a.enqueue(e.encode(`event: end

`)),a.close()}});return Aa.fromReadableStream(n)}function CE(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const i$=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function gg(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*NE(t,e){for(;;){const{value:n,done:a}=Vi.runWithConfig(Dr(t),e.next.bind(e),!0);if(a)break;yield n}}async function*yg(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:a,done:s}=await Vi.runWithConfig(Dr(t),n.next.bind(e),!0);if(s)break;yield a}}function zt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var Xt=class extends fl{constructor(){super(...arguments);M(this,"lc_runnable",!0);M(this,"name")}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}withRetry(e){return new f2({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Jc({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new o$({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(at);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const a=Object.fromEntries(Object.entries(e).filter(([s])=>s!=="runId"));return Array.from({length:n},(s,o)=>at(o===0?e:a))}return Array.from({length:n},()=>at(e))}async batch(e,n,a){var c;const s=this._getOptionsList(n??{},e.length),o=new by({maxConcurrency:((c=s[0])==null?void 0:c.maxConcurrency)??(a==null?void 0:a.maxConcurrency),onFailedAttempt:f=>{throw f}}),u=e.map((f,h)=>o.call(async()=>{try{return await this.invoke(f,s[h])}catch(m){if(a!=null&&a.returnExceptions)return m;throw m}}));return Promise.all(u)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const a=at(n),s=new Vr({generator:this._streamIterator(e,a),config:a});return await s.setup,Aa.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=at(e):n=at({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const a={...e};return delete a.callbacks,delete a.tags,delete a.metadata,delete a.runName,delete a.configurable,delete a.recursionLimit,delete a.maxConcurrency,delete a.runId,delete a.timeout,delete a.signal,[n,a]}async _callWithConfig(e,n,a){var c;const s=at(a),o=await((c=await ca(s))==null?void 0:c.handleChainStart(this.toJSON(),zt(n,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let u;try{u=await Hi(e.call(this,n,s,o),a==null?void 0:a.signal)}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}return await(o==null?void 0:o.handleChainEnd(zt(u,"output"))),u}async _batchWithConfig(e,n,a,s){var h;const o=this._getOptionsList(a??{},n.length),u=await Promise.all(o.map(ca)),c=await Promise.all(u.map(async(m,y)=>{const v=await(m==null?void 0:m.handleChainStart(this.toJSON(),zt(n[y],"input"),o[y].runId,o[y].runType,void 0,void 0,o[y].runName??this.getName()));return delete o[y].runId,v}));let f;try{f=await Hi(e.call(this,n,o,c,s),(h=o==null?void 0:o[0])==null?void 0:h.signal)}catch(m){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(zt(f,"output")))),f}_concatOutputChunks(e,n){return md(e,n)}async*_transformStreamWithConfig(e,n,a){let s,o=!0,u,c=!0;const f=at(a),h=await ca(f),m=this;async function*y(){for await(const _ of e){if(o)if(s===void 0)s=_;else try{s=m._concatOutputChunks(s,_)}catch{s=void 0,o=!1}yield _}}let v;try{const _=await AP(n.bind(this),y(),async()=>h==null?void 0:h.handleChainStart(this.toJSON(),{input:""},f.runId,f.runType,void 0,void 0,f.runName??this.getName(),void 0,{lc_defers_inputs:!0}),a==null?void 0:a.signal,f);delete f.runId,v=_.setup;const x=v==null?void 0:v.handlers.find(PP);let w=_.output;x!==void 0&&v!==void 0&&(w=x.tapOutputIterable(v.runId,w));const C=v==null?void 0:v.handlers.find(LP);C!==void 0&&v!==void 0&&(w=C.tapOutputIterable(v.runId,w));for await(const A of w)if(yield A,c)if(u===void 0)u=A;else try{u=this._concatOutputChunks(u,A)}catch{u=void 0,c=!1}}catch(_){throw await(v==null?void 0:v.handleChainError(_,void 0,void 0,void 0,{inputs:zt(s,"input")})),_}await(v==null?void 0:v.handleChainEnd(u??{},void 0,void 0,void 0,{inputs:zt(s,"input")}))}getGraph(e){const n=new u2,a=n.addNode({name:`${this.getName()}Input`,schema:x1()}),s=n.addNode(this),o=n.addNode({name:`${this.getName()}Output`,schema:x1()});return n.addEdge(a,s),n.addEdge(s,o),n}pipe(e){return new pd({first:this,last:gs(e)})}pick(e){return this.pipe(new l$(e))}assign(e){return this.pipe(new g2(new gd({steps:e})))}async*transform(e,n){let a;for await(const s of e)a===void 0?a=s:a=this._concatOutputChunks(a,s);yield*this._streamIterator(a,at(n))}async*streamLog(e,n,a){const s=new xE({...a,autoClose:!1,_schemaFormat:"original"}),o=at(n);yield*this._streamLog(e,s,o)}async*_streamLog(e,n,a){const{callbacks:s}=a;if(s===void 0)a.callbacks=[n];else if(Array.isArray(s))a.callbacks=s.concat([n]);else{const f=s.copy();f.addHandler(n,!0),a.callbacks=f}const o=this.stream(e,a);async function u(){try{const f=await o;for await(const h of f){const m=new Ni({ops:[{op:"add",path:"/streamed_output/-",value:h}]});await n.writer.write(m)}}finally{await n.writer.close()}}const c=u();try{for await(const f of n)yield f}finally{await c}}streamEvents(e,n,a){let s;if(n.version==="v1")s=this._streamEventsV1(e,n,a);else if(n.version==="v2")s=this._streamEventsV2(e,n,a);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?a$(s):Aa.fromAsyncGenerator(s)}async*_streamEventsV2(e,n,a){var x;const s=new $P({...a,autoClose:!1}),o=at(n),u=o.runId??hs();o.runId=u;const c=o.callbacks;if(c===void 0)o.callbacks=[s];else if(Array.isArray(c))o.callbacks=c.concat(s);else{const w=c.copy();w.addHandler(s,!0),o.callbacks=w}const f=new AbortController,h=this;async function m(){let w,C=null;try{n!=null&&n.signal?"any"in AbortSignal?w=AbortSignal.any([f.signal,n.signal]):(w=n.signal,C=()=>{f.abort()},n.signal.addEventListener("abort",C,{once:!0})):w=f.signal;const A=await h.stream(e,{...o,signal:w}),I=s.tapOutputIterable(u,A);for await(const R of I)if(f.signal.aborted)break}finally{await s.finish(),w&&C&&w.removeEventListener("abort",C)}}const y=m();let v=!1,_;try{for await(const w of s){if(!v){w.data.input=e,v=!0,_=w.run_id,yield w;continue}w.run_id===_&&w.event.endsWith("_end")&&(x=w.data)!=null&&x.input&&delete w.data.input,yield w}}finally{f.abort(),await y}}async*_streamEventsV1(e,n,a){let s,o=!1;const u=at(n),c=u.tags??[],f=u.metadata??{},h=u.runName??this.getName(),m=new xE({...a,autoClose:!1,_schemaFormat:"streaming_events"}),y=new XP({...a}),v=this._streamLog(e,m,u);for await(const x of v){if(s?s=s.concat(x):s=s2.fromRunLogPatch(x),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const I={...s.state},R={run_id:I.id,event:`on_${I.type}_start`,name:h,tags:c,metadata:f,data:{input:e}};y.includeEvent(R,I.type)&&(yield R)}const w=x.ops.filter(I=>I.path.startsWith("/logs/")).map(I=>I.path.split("/")[2]),C=[...new Set(w)];for(const I of C){let R,U={};const P=s.state.logs[I];if(P.end_time===void 0?P.streamed_output.length>0?R="stream":R="start":R="end",R==="start")P.inputs!==void 0&&(U.input=P.inputs);else if(R==="end")P.inputs!==void 0&&(U.input=P.inputs),U.output=P.final_output;else if(R==="stream"){const Y=P.streamed_output.length;if(Y!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${Y} instead. Encountered in: "${P.name}"`);U={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${R}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:U}}const{state:A}=s;if(A.streamed_output.length>0){const I=A.streamed_output.length;if(I!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${I} instead. Encountered in: "${A.name}"`);const R={chunk:A.streamed_output[0]};A.streamed_output=[];const U={event:`on_${A.type}_stream`,run_id:A.id,tags:c,metadata:f,name:h,data:R};y.includeEvent(U,A.type)&&(yield U)}}const _=s==null?void 0:s.state;if(_!==void 0){const x={event:`on_${_.type}_end`,name:h,run_id:_.id,tags:c,metadata:f,data:{output:_.final_output}};y.includeEvent(x,_.type)&&(yield x)}}static isRunnable(e){return wy(e)}withListeners({onStart:e,onEnd:n,onError:a}){return new Jc({bound:this,config:{},configFactories:[s=>({callbacks:[new l2({config:s,onStart:e,onEnd:n,onError:a})]})]})}asTool(e){return u$(this,e)}},Jc=class d2 extends Xt{constructor(n){super(n);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"lc_serializable",!0);M(this,"bound");M(this,"config");M(this,"kwargs");M(this,"configFactories");this.bound=n.bound,this.kwargs=n.kwargs,this.config=n.config,this.configFactories=n.configFactories}static lc_name(){return"RunnableBinding"}getName(n){return this.bound.getName(n)}async _mergeConfig(...n){const a=vE(this.config,...n);return vE(a,...this.configFactories?await Promise.all(this.configFactories.map(async s=>await s(a))):[])}withConfig(n){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...n}})}withRetry(n){return new f2({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:n==null?void 0:n.stopAfterAttempt,...n})}async invoke(n,a){return this.bound.invoke(n,await this._mergeConfig(a,this.kwargs))}async batch(n,a,s){const o=Array.isArray(a)?await Promise.all(a.map(async u=>this._mergeConfig(at(u),this.kwargs))):await this._mergeConfig(at(a),this.kwargs);return this.bound.batch(n,o,s)}_concatOutputChunks(n,a){return this.bound._concatOutputChunks(n,a)}async*_streamIterator(n,a){yield*this.bound._streamIterator(n,await this._mergeConfig(at(a),this.kwargs))}async stream(n,a){return this.bound.stream(n,await this._mergeConfig(at(a),this.kwargs))}async*transform(n,a){yield*this.bound.transform(n,await this._mergeConfig(at(a),this.kwargs))}streamEvents(n,a,s){const o=this,u=async function*(){yield*o.bound.streamEvents(n,{...await o._mergeConfig(at(a),o.kwargs),version:a.version},s)};return Aa.fromAsyncGenerator(u())}static isRunnableBinding(n){return n.bound&&Xt.isRunnable(n.bound)}withListeners({onStart:n,onEnd:a,onError:s}){return new d2({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[o=>({callbacks:[new l2({config:o,onStart:n,onEnd:a,onError:s})]})]})}},f2=class extends Jc{constructor(e){super(e);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"maxAttemptNumber",3);M(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,n,a){const s=e>1?`retry:attempt:${e}`:void 0;return sn(n,{callbacks:a==null?void 0:a.getChild(s)})}async _invoke(e,n,a){return pg(s=>super.invoke(e,this._patchConfigForRetry(s,n,a)),{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,a,s){const o={};try{await pg(async u=>{const c=e.map((v,_)=>_).filter(v=>o[v.toString()]===void 0||o[v.toString()]instanceof Error),f=c.map(v=>e[v]),h=c.map(v=>this._patchConfigForRetry(u,n==null?void 0:n[v],a==null?void 0:a[v])),m=await super.batch(f,h,{...s,returnExceptions:!0});let y;for(let v=0;v<m.length;v+=1){const _=m[v],x=c[v];_ instanceof Error&&y===void 0&&(y=_,y.input=f[v]),o[x.toString()]=_}if(y)throw y;return m},{onFailedAttempt:({error:u})=>this.onFailedAttempt(u,u.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(u){if((s==null?void 0:s.returnExceptions)!==!0)throw u}return Object.keys(o).sort((u,c)=>parseInt(u,10)-parseInt(c,10)).map(u=>o[parseInt(u,10)])}async batch(e,n,a){return this._batchWithConfig(this._batch.bind(this),e,n,a)}},pd=class Yo extends Xt{constructor(n){super(n);M(this,"first");M(this,"middle",[]);M(this,"last");M(this,"omitSequenceTags",!1);M(this,"lc_serializable",!0);M(this,"lc_namespace",["langchain_core","runnables"]);this.first=n.first,this.middle=n.middle??this.middle,this.last=n.last,this.name=n.name,this.omitSequenceTags=n.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(n,a){var f,h;const s=at(a),o=await((f=await ca(s))==null?void 0:f.handleChainStart(this.toJSON(),zt(n,"input"),s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;let u=n,c;try{const m=[this.first,...this.middle];for(let y=0;y<m.length;y+=1)u=await Hi(m[y].invoke(u,sn(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)})),a==null?void 0:a.signal);if((h=a==null?void 0:a.signal)!=null&&h.aborted)throw Zc(a.signal);c=await this.last.invoke(u,sn(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(m){throw await(o==null?void 0:o.handleChainError(m)),m}return await(o==null?void 0:o.handleChainEnd(zt(c,"output"))),c}async batch(n,a,s){var h;const o=this._getOptionsList(a??{},n.length),u=await Promise.all(o.map(ca)),c=await Promise.all(u.map(async(m,y)=>{const v=await(m==null?void 0:m.handleChainStart(this.toJSON(),zt(n[y],"input"),o[y].runId,void 0,void 0,void 0,o[y].runName));return delete o[y].runId,v}));let f=n;try{for(let m=0;m<this.steps.length;m+=1)f=await Hi(this.steps[m].batch(f,c.map((y,v)=>{const _=y==null?void 0:y.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`);return sn(o[v],{callbacks:_})}),s),(h=o[0])==null?void 0:h.signal)}catch(m){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(zt(f,"output")))),f}_concatOutputChunks(n,a){return this.last._concatOutputChunks(n,a)}async*_streamIterator(n,a){var v;const s=await ca(a),{runId:o,...u}=a??{},c=await(s==null?void 0:s.handleChainStart(this.toJSON(),zt(n,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName)),f=[this.first,...this.middle,this.last];let h=!0,m;async function*y(){yield n}try{let _=f[0].transform(y(),sn(u,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let x=1;x<f.length;x+=1)_=await f[x].transform(_,sn(u,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${x+1}`)}));for await(const x of _)if((v=a==null?void 0:a.signal)==null||v.throwIfAborted(),yield x,h)if(m===void 0)m=x;else try{m=this._concatOutputChunks(m,x)}catch{m=void 0,h=!1}}catch(_){throw await(c==null?void 0:c.handleChainError(_)),_}await(c==null?void 0:c.handleChainEnd(zt(m,"output")))}getGraph(n){const a=new u2;let s=null;return this.steps.forEach((o,u)=>{const c=o.getGraph(n);u!==0&&c.trimFirstNode(),u!==this.steps.length-1&&c.trimLastNode(),a.extend(c);const f=c.firstNode();if(!f)throw new Error(`Runnable ${o} has no first node`);s&&a.addEdge(s,f),s=c.lastNode()}),a}pipe(n){return Yo.isRunnableSequence(n)?new Yo({first:this.first,middle:this.middle.concat([this.last,n.first,...n.middle]),last:n.last,name:this.name??n.name}):new Yo({first:this.first,middle:[...this.middle,this.last],last:gs(n),name:this.name})}static isRunnableSequence(n){return Array.isArray(n.middle)&&Xt.isRunnable(n)}static from([n,...a],s){let o={};return typeof s=="string"?o.name=s:s!==void 0&&(o=s),new Yo({...o,first:gs(n),middle:a.slice(0,-1).map(gs),last:gs(a[a.length-1])})}},gd=class h2 extends Xt{constructor(n){super(n);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"lc_serializable",!0);M(this,"steps");this.steps={};for(const[a,s]of Object.entries(n.steps))this.steps[a]=gs(s)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(n){return new h2({steps:n})}async invoke(n,a){var c;const s=at(a),o=await((c=await ca(s))==null?void 0:c.handleChainStart(this.toJSON(),{input:n},s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;const u={};try{const f=Object.entries(this.steps).map(async([h,m])=>{u[h]=await m.invoke(n,sn(s,{callbacks:o==null?void 0:o.getChild(`map:key:${h}`)}))});await Hi(Promise.all(f),a==null?void 0:a.signal)}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}return await(o==null?void 0:o.handleChainEnd(u)),u}async*_transform(n,a,s){const o={...this.steps},u=n2(n,Object.keys(o).length),c=new Map(Object.entries(o).map(([f,h],m)=>{const y=h.transform(u[m],sn(s,{callbacks:a==null?void 0:a.getChild(`map:key:${f}`)}));return[f,y.next().then(v=>({key:f,gen:y,result:v}))]}));for(;c.size;){const{key:f,result:h,gen:m}=await Hi(Promise.race(c.values()),s==null?void 0:s.signal);c.delete(f),h.done||(yield{[f]:h.value},c.set(f,m.next().then(y=>({key:f,gen:m,result:y}))))}}transform(n,a){return this._transformStreamWithConfig(n,this._transform.bind(this),a)}async stream(n,a){async function*s(){yield n}const o=at(a),u=new Vr({generator:this.transform(s(),o),config:o});return await u.setup,Aa.fromAsyncGenerator(u)}},s$=class m2 extends Xt{constructor(n){super(n);M(this,"lc_serializable",!1);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"func");if(!_y(n.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=n.func}async invoke(n,a){const[s]=this._getOptionsList(a??{},1),o=await ca(s);return Hi(this.func(sn(s,{callbacks:o}),n),s==null?void 0:s.signal)}async*_streamIterator(n,a){var u,c;const[s]=this._getOptionsList(a??{},1),o=await this.invoke(n,a);if(gg(o)){for await(const f of o)(u=s==null?void 0:s.signal)==null||u.throwIfAborted(),yield f;return}if(i$(o)){for(;;){(c=s==null?void 0:s.signal)==null||c.throwIfAborted();const f=o.next();if(f.done)break;yield f.value}return}yield o}static from(n){return new m2({func:n})}};function r$(t){if(_y(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var xy=class p2 extends Xt{constructor(n){if(_y(n.func))return s$.from(n.func);super(n);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"func");r$(n.func),this.func=n.func}static lc_name(){return"RunnableLambda"}static from(n){return new p2({func:n})}async _invoke(n,a,s){return new Promise((o,u)=>{const c=sn(a,{callbacks:s==null?void 0:s.getChild(),recursionLimit:((a==null?void 0:a.recursionLimit)??mp)-1});Vi.runWithConfig(Dr(c),async()=>{var f,h;try{let m=await this.func(n,{...c});if(m&&Xt.isRunnable(m)){if((a==null?void 0:a.recursionLimit)===0)throw new Error("Recursion limit reached.");m=await m.invoke(n,{...c,recursionLimit:(c.recursionLimit??mp)-1})}else if(gg(m)){let y;for await(const v of yg(c,m))if((f=a==null?void 0:a.signal)==null||f.throwIfAborted(),y===void 0)y=v;else try{y=this._concatOutputChunks(y,v)}catch{y=v}m=y}else if(CE(m)){let y;for(const v of NE(c,m))if((h=a==null?void 0:a.signal)==null||h.throwIfAborted(),y===void 0)y=v;else try{y=this._concatOutputChunks(y,v)}catch{y=v}m=y}o(m)}catch(m){u(m)}})})}async invoke(n,a){return this._callWithConfig(this._invoke.bind(this),n,a)}async*_transform(n,a,s){var f,h;let o;for await(const m of n)if(o===void 0)o=m;else try{o=this._concatOutputChunks(o,m)}catch{o=m}const u=sn(s,{callbacks:a==null?void 0:a.getChild(),recursionLimit:((s==null?void 0:s.recursionLimit)??mp)-1}),c=await new Promise((m,y)=>{Vi.runWithConfig(Dr(u),async()=>{try{m(await this.func(o,{...u,config:u}))}catch(v){y(v)}})});if(c&&Xt.isRunnable(c)){if((s==null?void 0:s.recursionLimit)===0)throw new Error("Recursion limit reached.");const m=await c.stream(o,u);for await(const y of m)yield y}else if(gg(c))for await(const m of yg(u,c))(f=s==null?void 0:s.signal)==null||f.throwIfAborted(),yield m;else if(CE(c))for(const m of NE(u,c))(h=s==null?void 0:s.signal)==null||h.throwIfAborted(),yield m;else yield c}transform(n,a){return this._transformStreamWithConfig(n,this._transform.bind(this),a)}async stream(n,a){async function*s(){yield n}const o=at(a),u=new Vr({generator:this.transform(s(),o),config:o});return await u.setup,Aa.fromAsyncGenerator(u)}},o$=class extends Xt{constructor(e){super(e);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"lc_serializable",!0);M(this,"runnable");M(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const a=at(n),s=await ca(a),{runId:o,...u}=a,c=await(s==null?void 0:s.handleChainStart(this.toJSON(),zt(e,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName)),f=sn(u,{callbacks:c==null?void 0:c.getChild()});return await Vi.runWithConfig(f,async()=>{var m;let h;for(const y of this.runnables()){(m=a==null?void 0:a.signal)==null||m.throwIfAborted();try{const v=await y.invoke(e,f);return await(c==null?void 0:c.handleChainEnd(zt(v,"output"))),v}catch(v){h===void 0&&(h=v)}}throw h===void 0?new Error("No error stored at end of fallback."):(await(c==null?void 0:c.handleChainError(h)),h)})}async*_streamIterator(e,n){var y;const a=at(n),s=await ca(a),{runId:o,...u}=a,c=await(s==null?void 0:s.handleChainStart(this.toJSON(),zt(e,"input"),o,void 0,void 0,void 0,u==null?void 0:u.runName));let f,h;for(const v of this.runnables()){(y=a==null?void 0:a.signal)==null||y.throwIfAborted();const _=sn(u,{callbacks:c==null?void 0:c.getChild()});try{h=yg(_,await v.stream(e,_));break}catch(x){f===void 0&&(f=x)}}if(h===void 0){const v=f??new Error("No error stored at end of fallback.");throw await(c==null?void 0:c.handleChainError(v)),v}let m;try{for await(const v of h){yield v;try{m=m===void 0?m:this._concatOutputChunks(m,v)}catch{m=void 0}}}catch(v){throw await(c==null?void 0:c.handleChainError(v)),v}await(c==null?void 0:c.handleChainEnd(zt(m,"output")))}async batch(e,n,a){var f;if(a!=null&&a.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(n??{},e.length),o=await Promise.all(s.map(h=>ca(h))),u=await Promise.all(o.map(async(h,m)=>{const y=await(h==null?void 0:h.handleChainStart(this.toJSON(),zt(e[m],"input"),s[m].runId,void 0,void 0,void 0,s[m].runName));return delete s[m].runId,y}));let c;for(const h of this.runnables()){(f=s[0].signal)==null||f.throwIfAborted();try{const m=await h.batch(e,u.map((y,v)=>sn(s[v],{callbacks:y==null?void 0:y.getChild()})),a);return await Promise.all(u.map((y,v)=>y==null?void 0:y.handleChainEnd(zt(m[v],"output")))),m}catch(m){c===void 0&&(c=m)}}throw c?(await Promise.all(u.map(h=>h==null?void 0:h.handleChainError(c))),c):new Error("No error stored at end of fallbacks.")}};function gs(t){if(typeof t=="function")return new xy({func:t});if(Xt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,a]of Object.entries(t))e[n]=gs(a);return new gd({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var g2=class extends Xt{constructor(e){e instanceof gd&&(e={mapper:e});super(e);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"lc_serializable",!0);M(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,n){const a=await this.mapper.invoke(e,n);return{...e,...a}}async*_transform(e,n,a){const s=this.mapper.getStepsKeys(),[o,u]=n2(e),c=this.mapper.transform(u,sn(a,{callbacks:n==null?void 0:n.getChild()})),f=c.next();for await(const h of o){if(typeof h!="object"||Array.isArray(h))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof h}`);const m=Object.fromEntries(Object.entries(h).filter(([y])=>!s.includes(y)));Object.keys(m).length>0&&(yield m)}yield(await f).value;for await(const h of c)yield h}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*a(){yield e}const s=at(n),o=new Vr({generator:this.transform(a(),s),config:s});return await o.setup,Aa.fromAsyncGenerator(o)}},l$=class extends Xt{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"lc_serializable",!0);M(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(a=>[a,e[a]]).filter(a=>a[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const a=await this._pick(n);a!==void 0&&(yield a)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*a(){yield e}const s=at(n),o=new Vr({generator:this.transform(a(),s),config:s});return await o.setup,Aa.fromAsyncGenerator(o)}},OE=class extends Jc{constructor(e){const n=pd.from([xy.from(async a=>{let s;if(bA(a))try{s=await gM(this.schema,a.args)}catch{throw new LL("Received tool input did not match expected schema",JSON.stringify(a.args))}else s=a;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}});M(this,"name");M(this,"description");M(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function u$(t,e){const n=e.name??t.getName(),a=e.description??ZS(e.schema);return yM(e.schema)?new OE({name:n,description:a,schema:e5({input:WM()}).transform(s=>s.input),bound:t}):new OE({name:n,description:a,schema:e.schema,bound:t})}function c$(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function d$(t){return t!==void 0&&Xt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function f$(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(Tl(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function y2(t){return f$(t)||d$(t)||c$(t)}/**
* [js-sha256]{@link https://github.com/emn178/js-sha256}
*
* @version 0.11.1
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2014-2025
* @license MIT
*/var _e="0123456789abcdef".split(""),h$=[-2147483648,8388608,32768,128],aa=[24,16,8,0],hc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ut=[];function da(t,e){e?(Ut[0]=Ut[16]=Ut[1]=Ut[2]=Ut[3]=Ut[4]=Ut[5]=Ut[6]=Ut[7]=Ut[8]=Ut[9]=Ut[10]=Ut[11]=Ut[12]=Ut[13]=Ut[14]=Ut[15]=0,this.blocks=Ut):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}da.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var a,s=0,o,u=t.length,c=this.blocks;s<u;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,this.block=c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(o=this.start;s<u&&o<64;++s)c[o>>>2]|=t[s]<<aa[o++&3];else for(o=this.start;s<u&&o<64;++s)a=t.charCodeAt(s),a<128?c[o>>>2]|=a<<aa[o++&3]:a<2048?(c[o>>>2]|=(192|a>>>6)<<aa[o++&3],c[o>>>2]|=(128|a&63)<<aa[o++&3]):a<55296||a>=57344?(c[o>>>2]|=(224|a>>>12)<<aa[o++&3],c[o>>>2]|=(128|a>>>6&63)<<aa[o++&3],c[o>>>2]|=(128|a&63)<<aa[o++&3]):(a=65536+((a&1023)<<10|t.charCodeAt(++s)&1023),c[o>>>2]|=(240|a>>>18)<<aa[o++&3],c[o>>>2]|=(128|a>>>12&63)<<aa[o++&3],c[o>>>2]|=(128|a>>>6&63)<<aa[o++&3],c[o>>>2]|=(128|a&63)<<aa[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};da.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=h$[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};da.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.h5,u=this.h6,c=this.h7,f=this.blocks,h,m,y,v,_,x,w,C,A,I,R;for(h=16;h<64;++h)_=f[h-15],m=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,_=f[h-2],y=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,f[h]=f[h-16]+m+f[h-7]+y<<0;for(R=e&n,h=0;h<64;h+=4)this.first?(this.is224?(C=300032,_=f[0]-1413257819,c=_-150054599<<0,a=_+24177077<<0):(C=704751109,_=f[0]-210244248,c=_-1521486534<<0,a=_+143694565<<0),this.first=!1):(m=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),C=t&e,v=C^t&n^R,w=s&o^~s&u,_=c+y+w+hc[h]+f[h],x=m+v,c=a+_<<0,a=_+x<<0),m=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),y=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),A=a&t,v=A^a&e^C,w=u&c^~u&s,_=o+y+w+hc[h+1]+f[h+1],x=m+v,u=n+_<<0,n=_+x<<0,m=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),y=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),I=n&a,v=I^n&t^A,w=o&u^~o&c,_=s+y+w+hc[h+2]+f[h+2],x=m+v,o=e+_<<0,e=_+x<<0,m=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),y=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),R=e&n,v=R^e&a^I,w=o&u^~o&c,_=s+y+w+hc[h+3]+f[h+3],x=m+v,s=t+_<<0,t=_+x<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+a<<0,this.h4=this.h4+s<<0,this.h5=this.h5+o<<0,this.h6=this.h6+u<<0,this.h7=this.h7+c<<0};da.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.h5,u=this.h6,c=this.h7,f=_e[t>>>28&15]+_e[t>>>24&15]+_e[t>>>20&15]+_e[t>>>16&15]+_e[t>>>12&15]+_e[t>>>8&15]+_e[t>>>4&15]+_e[t&15]+_e[e>>>28&15]+_e[e>>>24&15]+_e[e>>>20&15]+_e[e>>>16&15]+_e[e>>>12&15]+_e[e>>>8&15]+_e[e>>>4&15]+_e[e&15]+_e[n>>>28&15]+_e[n>>>24&15]+_e[n>>>20&15]+_e[n>>>16&15]+_e[n>>>12&15]+_e[n>>>8&15]+_e[n>>>4&15]+_e[n&15]+_e[a>>>28&15]+_e[a>>>24&15]+_e[a>>>20&15]+_e[a>>>16&15]+_e[a>>>12&15]+_e[a>>>8&15]+_e[a>>>4&15]+_e[a&15]+_e[s>>>28&15]+_e[s>>>24&15]+_e[s>>>20&15]+_e[s>>>16&15]+_e[s>>>12&15]+_e[s>>>8&15]+_e[s>>>4&15]+_e[s&15]+_e[o>>>28&15]+_e[o>>>24&15]+_e[o>>>20&15]+_e[o>>>16&15]+_e[o>>>12&15]+_e[o>>>8&15]+_e[o>>>4&15]+_e[o&15]+_e[u>>>28&15]+_e[u>>>24&15]+_e[u>>>20&15]+_e[u>>>16&15]+_e[u>>>12&15]+_e[u>>>8&15]+_e[u>>>4&15]+_e[u&15];return this.is224||(f+=_e[c>>>28&15]+_e[c>>>24&15]+_e[c>>>20&15]+_e[c>>>16&15]+_e[c>>>12&15]+_e[c>>>8&15]+_e[c>>>4&15]+_e[c&15]),f};da.prototype.toString=da.prototype.hex;da.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.h5,u=this.h6,c=this.h7,f=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255];return this.is224||f.push(c>>>24&255,c>>>16&255,c>>>8&255,c&255),f};da.prototype.array=da.prototype.digest;da.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};const m$=(...t)=>new da(!1,!0).update(t.join("")).hex(),p$=(...t)=>m$(t.join("_"));var g$=class{constructor(){M(this,"keyEncoder",p$)}makeDefaultKeyEncoder(t){this.keyEncoder=t}};const y$=new Map;var v$=class v2 extends g${constructor(n){super();M(this,"cache");this.cache=n??new Map}lookup(n,a){return Promise.resolve(this.cache.get(this.keyEncoder(n,a))??null)}async update(n,a,s){this.cache.set(this.keyEncoder(n,a),s)}static global(){return new v2(y$)}},_2=class extends fl{},_$=class extends _2{constructor(e){super({value:e});M(this,"lc_namespace",["langchain_core","prompt_values"]);M(this,"lc_serializable",!0);M(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new hl(this.value)]}},b$=class extends _2{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);M(this,"lc_namespace",["langchain_core","prompt_values"]);M(this,"lc_serializable",!0);M(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return TA(this.messages)}toChatMessages(){return this.messages}},Vo={},RE;function w$(){if(RE)return Vo;RE=1,Vo.byteLength=c,Vo.toByteArray=h,Vo.fromByteArray=v;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)t[s]=a[s],e[a.charCodeAt(s)]=s;e[45]=62,e[95]=63;function u(_){var x=_.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=_.indexOf("=");w===-1&&(w=x);var C=w===x?0:4-w%4;return[w,C]}function c(_){var x=u(_),w=x[0],C=x[1];return(w+C)*3/4-C}function f(_,x,w){return(x+w)*3/4-w}function h(_){var x,w=u(_),C=w[0],A=w[1],I=new n(f(_,C,A)),R=0,U=A>0?C-4:C,P;for(P=0;P<U;P+=4)x=e[_.charCodeAt(P)]<<18|e[_.charCodeAt(P+1)]<<12|e[_.charCodeAt(P+2)]<<6|e[_.charCodeAt(P+3)],I[R++]=x>>16&255,I[R++]=x>>8&255,I[R++]=x&255;return A===2&&(x=e[_.charCodeAt(P)]<<2|e[_.charCodeAt(P+1)]>>4,I[R++]=x&255),A===1&&(x=e[_.charCodeAt(P)]<<10|e[_.charCodeAt(P+1)]<<4|e[_.charCodeAt(P+2)]>>2,I[R++]=x>>8&255,I[R++]=x&255),I}function m(_){return t[_>>18&63]+t[_>>12&63]+t[_>>6&63]+t[_&63]}function y(_,x,w){for(var C,A=[],I=x;I<w;I+=3)C=(_[I]<<16&16711680)+(_[I+1]<<8&65280)+(_[I+2]&255),A.push(m(C));return A.join("")}function v(_){for(var x,w=_.length,C=w%3,A=[],I=16383,R=0,U=w-C;R<U;R+=I)A.push(y(_,R,R+I>U?U:R+I));return C===1?(x=_[w-1],A.push(t[x>>2]+t[x<<4&63]+"==")):C===2&&(x=(_[w-2]<<8)+_[w-1],A.push(t[x>>10]+t[x>>4&63]+t[x<<2&63]+"=")),A.join("")}return Vo}var x$=w$();const E$=_g(x$);var T$=Object.defineProperty,S$=(t,e,n)=>e in t?T$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A$=(t,e,n)=>(S$(t,e+"",n),n);function C$(t,e){let n=Array.from({length:t.length},(a,s)=>({start:s,end:s+1}));for(;n.length>1;){let a=null;for(let s=0;s<n.length-1;s++){const o=t.slice(n[s].start,n[s+1].end),u=e.get(o.join(","));u!=null&&(a==null||u<a[0])&&(a=[u,s])}if(a!=null){const s=a[1];n[s]={start:n[s].start,end:n[s+1].end},n.splice(s+1,1)}else break}return n}function N$(t,e){return t.length===1?[e.get(t.join(","))]:C$(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function O$(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var vg=class{constructor(t,e){M(this,"specialTokens");M(this,"inverseSpecialTokens");M(this,"patStr");M(this,"textEncoder",new TextEncoder);M(this,"textDecoder",new TextDecoder("utf-8"));M(this,"rankMap",new Map);M(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((a,s)=>{const[o,u,...c]=s.split(" "),f=Number.parseInt(u,10);return c.forEach((h,m)=>a[h]=f+m),a},{});for(const[a,s]of Object.entries(n)){const o=E$.toByteArray(a);this.rankMap.set(o.join(","),s),this.textMap.set(s,o)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((a,[s,o])=>(a[o]=this.textEncoder.encode(s),a),{})}encode(t,e=[],n="all"){const a=new RegExp(this.patStr,"ug"),s=vg.specialTokenRegex(Object.keys(this.specialTokens)),o=[],u=new Set(e==="all"?Object.keys(this.specialTokens):e),c=new Set(n==="all"?Object.keys(this.specialTokens).filter(h=>!u.has(h)):n);if(c.size>0){const h=vg.specialTokenRegex([...c]),m=t.match(h);if(m!=null)throw new Error(`The text contains a special token that is not allowed: ${m[0]}`)}let f=0;for(;;){let h=null,m=f;for(;s.lastIndex=m,h=s.exec(t),!(h==null||u.has(h[0]));)m=h.index+1;const y=(h==null?void 0:h.index)??t.length;for(const _ of t.substring(f,y).matchAll(a)){const x=this.textEncoder.encode(_[0]),w=this.rankMap.get(x.join(","));if(w!=null){o.push(w);continue}o.push(...N$(x,this.rankMap))}if(h==null)break;let v=this.specialTokens[h[0]];o.push(v),f=h.index+h[0].length}return o}decode(t){const e=[];let n=0;for(let o=0;o<t.length;++o){const u=t[o],c=this.textMap.get(u)??this.inverseSpecialTokens[u];c!=null&&(e.push(c),n+=c.length)}const a=new Uint8Array(n);let s=0;for(const o of e)a.set(o,s),s+=o.length;return this.textDecoder.decode(a)}},b2=vg;A$(b2,"specialTokenRegex",t=>new RegExp(t.map(e=>O$(e)).join("|"),"g"));function R$(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const mc={},I$=new by({});async function k$(t){return t in mc||(mc[t]=I$.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new b2(e)).catch(e=>{throw delete mc[t],e})),await mc[t]}async function j$(t){return k$(R$(t))}const M$=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function w2(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const L$=()=>!1;var D$=class extends Xt{constructor(e){super(e);M(this,"verbose");M(this,"callbacks");M(this,"tags");M(this,"metadata");this.verbose=e.verbose??L$(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},P$=class extends D${constructor({callbacks:e,callbackManager:n,...a}){const{cache:s,...o}=a;super({callbacks:e??n,...o});M(this,"caller");M(this,"cache");M(this,"_encoding");typeof s=="object"?this.cache=s:s?this.cache=v$.global():this.cache=void 0,this.caller=new by(a??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(s=>typeof s=="string"?s:s.type==="text"&&"text"in s?s.text:"").join("");let a=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await j$("modelName"in this?M$(this.modelName):"gpt2")}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}if(this._encoding)try{a=this._encoding.encode(n).length}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}return a}static _convertInputToPromptValue(e){return typeof e=="string"?new _$(e):Array.isArray(e)?new b$(e.map(Ec)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const a={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(a).filter(([s,o])=>o!==void 0).map(([s,o])=>`${s}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}};const Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));function $$(t,e=0){return(Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]).toLowerCase()}let gp;const U$=new Uint8Array(16);function z$(){if(!gp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gp=crypto.getRandomValues.bind(crypto)}return gp(U$)}const B$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),IE={randomUUID:B$};function x2(t,e,n){var s;if(IE.randomUUID&&!t)return IE.randomUUID();t=t||{};const a=t.random??((s=t.rng)==null?void 0:s.call(t))??z$();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,$$(a)}const Ey="__gemini_function_call_thought_signatures__",V$="ErYCCrMCAdHtim9kOoOkrPiCNVsmlpMIKd7ZMxgiFbVQOkgp7nlLcDMzVsZwIzvuT7nQROivoXA72ccC2lSDvR0Gh7dkWaGuj7ctv6t7ZceHnecx0QYa+ix8tYpRfjhyWozQ49lWiws6+YGjCt10KRTyWsZ2h6O7iHTYJwKIRwGUHRKy/qK/6kFxJm5ML00gLq4D8s5Z6DBpp2ZlR+uF4G8jJgeWQgyHWVdx2wGYElaceVAc66tZdPQRdOHpWtgYSI1YdaXgVI8KHY3/EfNc2YqqMIulvkDBAnuMhkAjV9xmBa54Tq+ih3Im4+r3DzqhGqYdsSkhS0kZMwte4Hjs65dZzCw9lANxIqYi1DJ639WNPYihp/DCJCos7o+/EeSPJaio5sgWDyUnMGkY1atsJZ+m7pj7DD5tvQ==",H$=t=>t();function G$(t){return xA.isInstance(t)?t.role:t.type}function q$(t){switch(t){case"supervisor":case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${t}`)}}function F$(t){if("mimeType"in t&&"data"in t)return{inlineData:{mimeType:t.mimeType,data:t.data}};if("mimeType"in t&&"fileUri"in t)return{fileData:{mimeType:t.mimeType,fileUri:t.fileUri}};throw new Error("Invalid media content")}function Y$(t,e){var n;return(n=e.map(a=>ly(a)?a.tool_calls??[]:[]).flat().find(a=>a.id===t.tool_call_id))==null?void 0:n.name}function Z$(t){return{providerName:"Google Gemini",fromStandardTextBlock(e){return{text:e.text}},fromStandardImageBlock(e){if(!t)throw new Error("This model does not support images");if(e.source_type==="url"){const n=Wo({dataUrl:e.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:e.mime_type??"",fileUri:e.url}}}if(e.source_type==="base64")return{inlineData:{mimeType:e.mime_type??"",data:e.data}};throw new Error(`Unsupported source type: ${e.source_type}`)},fromStandardAudioBlock(e){if(!t)throw new Error("This model does not support audio");if(e.source_type==="url"){const n=Wo({dataUrl:e.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:e.mime_type??"",fileUri:e.url}}}if(e.source_type==="base64")return{inlineData:{mimeType:e.mime_type??"",data:e.data}};throw new Error(`Unsupported source type: ${e.source_type}`)},fromStandardFileBlock(e){if(!t)throw new Error("This model does not support files");if(e.source_type==="text")return{text:e.text};if(e.source_type==="url"){const n=Wo({dataUrl:e.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:e.mime_type??"",fileUri:e.url}}}if(e.source_type==="base64")return{inlineData:{mimeType:e.mime_type??"",data:e.data}};throw new Error(`Unsupported source type: ${e.source_type}`)}}}function kE(t,e){var n;if(ws(t))return U5(t,Z$(e));if(t.type==="text")return{text:t.text};if(t.type==="executableCode")return{executableCode:t.executableCode};if(t.type==="codeExecutionResult")return{codeExecutionResult:t.codeExecutionResult};if(t.type==="image_url"){if(!e)throw new Error("This model does not support images");let a;if(typeof t.image_url=="string")a=t.image_url;else if(typeof t.image_url=="object"&&"url"in t.image_url)a=t.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[s,o]=a.split(",");if(!s.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[u,c]=s.replace(/^data:/,"").split(";");if(c!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:o,mimeType:u}}}else{if(t.type==="media")return F$(t);if(t.type==="tool_use")return{functionCall:{name:t.name,args:t.input}};if(t.type==="tool_call")return{functionCall:{name:t.name,args:t.args}};if((n=t.type)!=null&&n.includes("/")&&t.type.split("/").length===2&&"data"in t&&typeof t.data=="string")return{inlineData:{mimeType:t.type,data:t.data}};if("functionCall"in t)return;throw"type"in t?new Error(`Unknown content type ${t.type}`):new Error(`Unknown content ${JSON.stringify(t)}`)}}function X$(t,e,n,a){var c,f;if(xL(t)){const h=t.name??Y$(t,n);if(h===void 0)throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage "${t.id}" from your passed messages. Please populate a "name" field on that ToolMessage explicitly.`);const m=Array.isArray(t.content)?t.content.map(y=>kE(y,e)).filter(y=>y!==void 0):t.content;return t.status==="error"?[{functionResponse:{name:h,response:{error:{details:m}}}}]:[{functionResponse:{name:h,response:{result:m}}}]}let s=[];const o=[];typeof t.content=="string"&&t.content&&o.push({text:t.content}),Array.isArray(t.content)&&o.push(...t.content.map(h=>kE(h,e)).filter(h=>h!==void 0));const u=(c=t.additional_kwargs)==null?void 0:c[Ey];return ly(t)&&((f=t.tool_calls)!=null&&f.length)&&(s=t.tool_calls.map(h=>{const m=H$(()=>{if(h.id){const y=u==null?void 0:u[h.id];if(y)return y}return a!=null&&a.includes("gemini-3")?V$:""});return{functionCall:{name:h.name,args:h.args},...m?{thoughtSignature:m}:{}}})),[...o,...s]}function jE(t,e,n=!1,a){return t.reduce((s,o,u)=>{if(!rd(o))throw new Error("Unsupported message input");const c=G$(o);if(c==="system"&&u!==0)throw new Error("System message should be the first one");const f=q$(c),h=s.content[s.content.length];if(!s.mergeWithPreviousContent&&h&&h.role===f)throw new Error("Google Generative AI requires alternate messages between authors");const m=X$(o,e,t.slice(0,u),a);if(s.mergeWithPreviousContent){const _=s.content[s.content.length-1];if(!_)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return _.parts.push(...m),{mergeWithPreviousContent:!1,content:s.content}}let y=f;(y==="function"||y==="system"&&!n)&&(y="user");const v={role:y,parts:m};return{mergeWithPreviousContent:c==="system"&&!n,content:[...s.content,v]}},{content:[],mergeWithPreviousContent:!1}).content}function K$(t,e){var m,y,v,_,x;if(!t.candidates||t.candidates.length===0||!t.candidates[0])return{generations:[],llmOutput:{filters:t.promptFeedback}};const[n]=t.candidates,{content:a,...s}=n,o=(m=a.parts)==null?void 0:m.reduce((w,C)=>("functionCall"in C&&C.functionCall&&w.push({...C,id:"id"in C.functionCall&&typeof C.functionCall.id=="string"?C.functionCall.id:x2()}),w),[]);let u;const c=a==null?void 0:a.parts;Array.isArray(c)&&c.length===1&&"text"in c[0]&&c[0].text&&!c[0].thought?u=c[0].text:Array.isArray(c)&&c.length>0?u=c.map(w=>w.thought&&"text"in w&&w.text?{type:"thinking",thinking:w.text,...w.thoughtSignature?{signature:w.thoughtSignature}:{}}:"text"in w?{type:"text",text:w.text}:"inlineData"in w?{type:"inlineData",inlineData:w.inlineData}:"functionCall"in w?{type:"functionCall",functionCall:w.functionCall}:"functionResponse"in w?{type:"functionResponse",functionResponse:w.functionResponse}:"fileData"in w?{type:"fileData",fileData:w.fileData}:"executableCode"in w?{type:"executableCode",executableCode:w.executableCode}:"codeExecutionResult"in w?{type:"codeExecutionResult",codeExecutionResult:w.codeExecutionResult}:w):u=[];const f=o==null?void 0:o.reduce((w,C)=>("thoughtSignature"in C&&typeof C.thoughtSignature=="string"&&(w[C.id]=C.thoughtSignature),w),{});let h="";return typeof u=="string"?h=u:Array.isArray(u)&&u.length>0&&(h=((y=u.find(w=>"text"in w))==null?void 0:y.text)??h),{generations:[{text:h,message:new Mr({content:u??"",tool_calls:o==null?void 0:o.map(w=>({type:"tool_call",id:w.id,name:w.functionCall.name,args:w.functionCall.args})),additional_kwargs:{...s,[Ey]:f},usage_metadata:e==null?void 0:e.usageMetadata}),generationInfo:s}],llmOutput:{tokenUsage:{promptTokens:(v=e==null?void 0:e.usageMetadata)==null?void 0:v.input_tokens,completionTokens:(_=e==null?void 0:e.usageMetadata)==null?void 0:_.output_tokens,totalTokens:(x=e==null?void 0:e.usageMetadata)==null?void 0:x.total_tokens}}}}function Q$(t,e){var y,v;if(!t.candidates||t.candidates.length===0)return null;const[n]=t.candidates,{content:a,...s}=n,o=(y=a.parts)==null?void 0:y.reduce((_,x)=>("functionCall"in x&&x.functionCall&&_.push({...x,id:"id"in x.functionCall&&typeof x.functionCall.id=="string"?x.functionCall.id:x2()}),_),[]);let u;const c=a==null?void 0:a.parts;Array.isArray(c)&&c.every(_=>"text"in _&&!_.thought)?u=c.map(_=>_.text).join(""):Array.isArray(c)?u=c.map(_=>_.thought&&"text"in _&&_.text?{type:"thinking",thinking:_.text,..._.thoughtSignature?{signature:_.thoughtSignature}:{}}:"text"in _?{type:"text",text:_.text}:"inlineData"in _?{type:"inlineData",inlineData:_.inlineData}:"functionCall"in _?{type:"functionCall",functionCall:_.functionCall}:"functionResponse"in _?{type:"functionResponse",functionResponse:_.functionResponse}:"fileData"in _?{type:"fileData",fileData:_.fileData}:"executableCode"in _?{type:"executableCode",executableCode:_.executableCode}:"codeExecutionResult"in _?{type:"codeExecutionResult",codeExecutionResult:_.codeExecutionResult}:_):u=[];let f="";u&&typeof u=="string"?f=u:Array.isArray(u)&&(f=((v=u.find(_=>"text"in _))==null?void 0:v.text)??"");const h=[];o&&h.push(...o.map(_=>({type:"tool_call_chunk",id:_.id,name:_.functionCall.name,args:JSON.stringify(_.functionCall.args)})));const m=o==null?void 0:o.reduce((_,x)=>("thoughtSignature"in x&&typeof x.thoughtSignature=="string"&&(_[x.id]=x.thoughtSignature),_),{});return new mg({text:f,message:new Sl({content:u||"",name:a?a.role:void 0,tool_call_chunks:h,additional_kwargs:{[Ey]:m},response_metadata:{model_provider:"google-genai"},usage_metadata:e.usageMetadata}),generationInfo:s})}function J$(t){return t.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?t:[{functionDeclarations:t.map(e=>{if(y2(e)){const n=tg(e.schema);return n.type==="object"&&"properties"in n&&Object.keys(n.properties).length===0?{name:e.name,description:e.description}:(xr(n,e.name),{name:e.name,description:e.description,parameters:n})}if(w2(e)){const n=D5(e.function.parameters);return xr(n,e.function.name),{name:e.function.name,description:e.function.description??"A function available to call.",parameters:n}}return e})}]}function ME(t,e){const n={input_tokens:(t==null?void 0:t.promptTokenCount)??0,output_tokens:(t==null?void 0:t.candidatesTokenCount)??0,total_tokens:(t==null?void 0:t.totalTokenCount)??0};if(t!=null&&t.cachedContentTokenCount&&(n.input_token_details??(n.input_token_details={}),n.input_token_details.cache_read=t.cachedContentTokenCount),e==="gemini-3-pro-preview"){const a=Math.max(0,(t==null?void 0:t.promptTokenCount)??-2e5),s=Math.max(0,(t==null?void 0:t.cachedContentTokenCount)??-2e5);a&&(n.input_token_details={...n.input_token_details,over_200k:a}),s&&(n.input_token_details={...n.input_token_details,cache_read_over_200k:s})}return n}var Wc=class extends Xt{constructor(e){super(e);M(this,"lc_namespace",["langchain_core","runnables"]);M(this,"lc_serializable",!0);M(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,n){const a=at(n);return this.func&&await this.func(e,a),this._callWithConfig(s=>Promise.resolve(s),e,a)}async*transform(e,n){const a=at(n);let s,o=!0;for await(const u of this._transformStreamWithConfig(e,c=>c,a))if(yield u,o)if(s===void 0)s=u;else try{s=md(s,u)}catch{s=void 0,o=!1}this.func&&s!==void 0&&await this.func(s,a)}static assign(e){return new g2(new gd({steps:e}))}},E2=class extends Xt{parseResultWithPrompt(t,e,n){return this.parseResult(t,n)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(n,a)=>this.parseResult([{text:n}],a==null?void 0:a.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(n,a)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],a==null?void 0:a.callbacks),t,{...e,runType:"parser"})}},W$=class extends E2{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,n){return this.parse(t,n)}_type(){throw new Error("_type not implemented")}},eU=class extends Error{constructor(e,n,a,s=!1){super(e);M(this,"llmOutput");M(this,"observation");M(this,"sendToLLM");if(this.llmOutput=n,this.observation=a,this.sendToLLM=s,s&&(a===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");yA(this,"OUTPUT_PARSING_FAILURE")}},tU=class extends W${async*_transform(t){for await(const e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},nU=class extends tU{constructor(e){super(e);M(this,"diff",!1);this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,a;for await(const s of e){if(typeof s!="string"&&typeof s.content!="string")throw new Error("Cannot handle non-string output.");let o;if(gL(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");o=new mg({message:s,text:s.content})}else if(rd(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");o=new mg({message:GL(s),text:s.content})}else o=new Qc({text:s});a===void 0?a=o:a=a.concat(o);const u=await this.parsePartialResult([a]);u!=null&&!eg(u,n)&&(this.diff?yield this._diff(n,u):yield u,n=u)}}getFormatInstructions(){return""}},aU=class extends nU{constructor(){super(...arguments);M(this,"lc_namespace",["langchain_core","output_parsers"]);M(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?MP(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return U1(e[0].text)}async parse(e){return U1(e,JSON.parse)}getFormatInstructions(){return""}_baseMessageToString(e){return e.text}};const iU=function(){const t={};t.parser=function(S,T){return new n(S,T)},t.SAXParser=n,t.SAXStream=h,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;const e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(S,T){if(!(this instanceof n))return new n(S,T);var B=this;s(B),B.q=B.c="",B.bufferCheckPosition=t.MAX_BUFFER_LENGTH,B.opt=T||{},B.opt.lowercase=B.opt.lowercase||B.opt.lowercasetags,B.looseCase=B.opt.lowercase?"toLowerCase":"toUpperCase",B.tags=[],B.closed=B.closedRoot=B.sawRoot=!1,B.tag=B.error=null,B.strict=!!S,B.noscript=!!(S||B.opt.noscript),B.state=O.BEGIN,B.strictEntities=B.opt.strictEntities,B.ENTITIES=B.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),B.attribList=[],B.opt.xmlns&&(B.ns=Object.create(x)),B.trackPosition=B.opt.position!==!1,B.trackPosition&&(B.position=B.line=B.column=0),Ae(B,"onready")}Object.create||(Object.create=function(S){function T(){}return T.prototype=S,new T}),Object.keys||(Object.keys=function(S){var T=[];for(var B in S)S.hasOwnProperty(B)&&T.push(B);return T});function a(S){for(var T=Math.max(t.MAX_BUFFER_LENGTH,10),B=0,D=0,Ie=e.length;D<Ie;D++){var Qe=S[e[D]].length;if(Qe>T)switch(e[D]){case"textNode":ke(S);break;case"cdata":ye(S,"oncdata",S.cdata),S.cdata="";break;case"script":ye(S,"onscript",S.script),S.script="";break;default:ue(S,"Max buffer length exceeded: "+e[D])}B=Math.max(B,Qe)}S.bufferCheckPosition=t.MAX_BUFFER_LENGTH-B+S.position}function s(S){for(var T=0,B=e.length;T<B;T++)S[e[T]]=""}function o(S){ke(S),S.cdata!==""&&(ye(S,"oncdata",S.cdata),S.cdata=""),S.script!==""&&(ye(S,"onscript",S.script),S.script="")}n.prototype={end:function(){X(this)},write:me,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var u=ReadableStream;u||(u=function(){});var c=t.EVENTS.filter(function(S){return S!=="error"&&S!=="end"});function f(S,T){return new h(S,T)}function h(S,T){if(!(this instanceof h))return new h(S,T);u.apply(this),this._parser=new n(S,T),this.writable=!0,this.readable=!0;var B=this;this._parser.onend=function(){B.emit("end")},this._parser.onerror=function(D){B.emit("error",D),B._parser.error=null},this._decoder=null,c.forEach(function(D){Object.defineProperty(B,"on"+D,{get:function(){return B._parser["on"+D]},set:function(Ie){if(!Ie)return B.removeAllListeners(D),B._parser["on"+D]=Ie,Ie;B.on(D,Ie)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(u.prototype,{constructor:{value:h}}),h.prototype.write=function(S){return this._parser.write(S.toString()),this.emit("data",S),!0},h.prototype.end=function(S){return S&&S.length&&this.write(S),this._parser.end(),!0},h.prototype.on=function(S,T){var B=this;return!B._parser["on"+S]&&c.indexOf(S)!==-1&&(B._parser["on"+S]=function(){var D=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);D.splice(0,0,S),B.emit.apply(B,D)}),u.prototype.on.call(B,S,T)};var m="[CDATA[",y="DOCTYPE",v="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",x={xml:v,xmlns:_},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function R(S){return S===" "||S===`
`||S==="\r"||S==="	"}function U(S){return S==='"'||S==="'"}function P(S){return S===">"||R(S)}function Y(S,T){return S.test(T)}function te(S,T){return!Y(S,T)}var O=0;t.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(S){var T=t.ENTITIES[S],B=typeof T=="number"?String.fromCharCode(T):T;t.ENTITIES[S]=B});for(var pe in t.STATE)t.STATE[t.STATE[pe]]=pe;O=t.STATE;function Ae(S,T,B){S[T]&&S[T](B)}function ye(S,T,B){S.textNode&&ke(S),Ae(S,T,B)}function ke(S){S.textNode=We(S.opt,S.textNode),S.textNode&&Ae(S,"ontext",S.textNode),S.textNode=""}function We(S,T){return S.trim&&(T=T.trim()),S.normalize&&(T=T.replace(/\s+/g," ")),T}function ue(S,T){return ke(S),S.trackPosition&&(T+=`
Line: `+S.line+`
Column: `+S.column+`
Char: `+S.c),T=new Error(T),S.error=T,Ae(S,"onerror",T),S}function X(S){return S.sawRoot&&!S.closedRoot&&L(S,"Unclosed root tag"),S.state!==O.BEGIN&&S.state!==O.BEGIN_WHITESPACE&&S.state!==O.TEXT&&ue(S,"Unexpected end"),ke(S),S.c="",S.closed=!0,Ae(S,"onend"),n.call(S,S.strict,S.opt),S}function L(S,T){if(typeof S!="object"||!(S instanceof n))throw new Error("bad call to strictFail");S.strict&&ue(S,T)}function q(S){S.strict||(S.tagName=S.tagName[S.looseCase]());var T=S.tags[S.tags.length-1]||S,B=S.tag={name:S.tagName,attributes:{}};S.opt.xmlns&&(B.ns=T.ns),S.attribList.length=0,ye(S,"onopentagstart",B)}function J(S,T){var B=S.indexOf(":")<0?["",S]:S.split(":"),D=B[0],Ie=B[1];return T&&S==="xmlns"&&(D="xmlns",Ie=""),{prefix:D,local:Ie}}function K(S){if(S.strict||(S.attribName=S.attribName[S.looseCase]()),S.attribList.indexOf(S.attribName)!==-1||S.tag.attributes.hasOwnProperty(S.attribName)){S.attribName=S.attribValue="";return}if(S.opt.xmlns){var T=J(S.attribName,!0),B=T.prefix,D=T.local;if(B==="xmlns")if(D==="xml"&&S.attribValue!==v)L(S,"xml: prefix must be bound to "+v+`
Actual: `+S.attribValue);else if(D==="xmlns"&&S.attribValue!==_)L(S,"xmlns: prefix must be bound to "+_+`
Actual: `+S.attribValue);else{var Ie=S.tag,Qe=S.tags[S.tags.length-1]||S;Ie.ns===Qe.ns&&(Ie.ns=Object.create(Qe.ns)),Ie.ns[D]=S.attribValue}S.attribList.push([S.attribName,S.attribValue])}else S.tag.attributes[S.attribName]=S.attribValue,ye(S,"onattribute",{name:S.attribName,value:S.attribValue});S.attribName=S.attribValue=""}function ie(S,T){if(S.opt.xmlns){var B=S.tag,D=J(S.tagName);B.prefix=D.prefix,B.local=D.local,B.uri=B.ns[D.prefix]||"",B.prefix&&!B.uri&&(L(S,"Unbound namespace prefix: "+JSON.stringify(S.tagName)),B.uri=D.prefix);var Ie=S.tags[S.tags.length-1]||S;B.ns&&Ie.ns!==B.ns&&Object.keys(B.ns).forEach(function(As){ye(S,"onopennamespace",{prefix:As,uri:B.ns[As]})});for(var Qe=0,_t=S.attribList.length;Qe<_t;Qe++){var yt=S.attribList[Qe],Tt=yt[0],vn=yt[1],W=J(Tt,!0),le=W.prefix,Re=W.local,et=le===""?"":B.ns[le]||"",Ct={name:Tt,value:vn,prefix:le,local:Re,uri:et};le&&le!=="xmlns"&&!et&&(L(S,"Unbound namespace prefix: "+JSON.stringify(le)),Ct.uri=le),S.tag.attributes[Tt]=Ct,ye(S,"onattribute",Ct)}S.attribList.length=0}S.tag.isSelfClosing=!!T,S.sawRoot=!0,S.tags.push(S.tag),ye(S,"onopentag",S.tag),T||(!S.noscript&&S.tagName.toLowerCase()==="script"?S.state=O.SCRIPT:S.state=O.TEXT,S.tag=null,S.tagName=""),S.attribName=S.attribValue="",S.attribList.length=0}function k(S){if(!S.tagName){L(S,"Weird empty close tag."),S.textNode+="</>",S.state=O.TEXT;return}if(S.script){if(S.tagName!=="script"){S.script+="</"+S.tagName+">",S.tagName="",S.state=O.SCRIPT;return}ye(S,"onscript",S.script),S.script=""}var T=S.tags.length,B=S.tagName;S.strict||(B=B[S.looseCase]());for(var D=B;T--&&S.tags[T].name!==D;)L(S,"Unexpected close tag");if(T<0){L(S,"Unmatched closing tag: "+S.tagName),S.textNode+="</"+S.tagName+">",S.state=O.TEXT;return}S.tagName=B;for(var Ie=S.tags.length;Ie-- >T;){var Qe=S.tag=S.tags.pop();S.tagName=S.tag.name,ye(S,"onclosetag",S.tagName);var _t={};for(var yt in Qe.ns)_t[yt]=Qe.ns[yt];var Tt=S.tags[S.tags.length-1]||S;S.opt.xmlns&&Qe.ns!==Tt.ns&&Object.keys(Qe.ns).forEach(function(vn){var W=Qe.ns[vn];ye(S,"onclosenamespace",{prefix:vn,uri:W})})}T===0&&(S.closedRoot=!0),S.tagName=S.attribValue=S.attribName="",S.attribList.length=0,S.state=O.TEXT}function V(S){var T=S.entity,B=T.toLowerCase(),D,Ie="";return S.ENTITIES[T]?S.ENTITIES[T]:S.ENTITIES[B]?S.ENTITIES[B]:(T=B,T.charAt(0)==="#"&&(T.charAt(1)==="x"?(T=T.slice(2),D=parseInt(T,16),Ie=D.toString(16)):(T=T.slice(1),D=parseInt(T,10),Ie=D.toString(10))),T=T.replace(/^0+/,""),isNaN(D)||Ie.toLowerCase()!==T?(L(S,"Invalid character entity"),"&"+S.entity+";"):String.fromCodePoint(D))}function se(S,T){T==="<"?(S.state=O.OPEN_WAKA,S.startTagPosition=S.position):R(T)||(L(S,"Non-whitespace before first tag."),S.textNode=T,S.state=O.TEXT)}function oe(S,T){var B="";return T<S.length&&(B=S.charAt(T)),B}function me(S){var T=this;if(this.error)throw this.error;if(T.closed)return ue(T,"Cannot write after close. Assign an onready handler.");if(S===null)return X(T);typeof S=="object"&&(S=S.toString());for(var B=0,D="";D=oe(S,B++),T.c=D,!!D;)switch(T.trackPosition&&(T.position++,D===`
`?(T.line++,T.column=0):T.column++),T.state){case O.BEGIN:if(T.state=O.BEGIN_WHITESPACE,D==="\uFEFF")continue;se(T,D);continue;case O.BEGIN_WHITESPACE:se(T,D);continue;case O.TEXT:if(T.sawRoot&&!T.closedRoot){for(var Ie=B-1;D&&D!=="<"&&D!=="&";)D=oe(S,B++),D&&T.trackPosition&&(T.position++,D===`
`?(T.line++,T.column=0):T.column++);T.textNode+=S.substring(Ie,B-1)}D==="<"&&!(T.sawRoot&&T.closedRoot&&!T.strict)?(T.state=O.OPEN_WAKA,T.startTagPosition=T.position):(!R(D)&&(!T.sawRoot||T.closedRoot)&&L(T,"Text data outside of root node."),D==="&"?T.state=O.TEXT_ENTITY:T.textNode+=D);continue;case O.SCRIPT:D==="<"?T.state=O.SCRIPT_ENDING:T.script+=D;continue;case O.SCRIPT_ENDING:D==="/"?T.state=O.CLOSE_TAG:(T.script+="<"+D,T.state=O.SCRIPT);continue;case O.OPEN_WAKA:if(D==="!")T.state=O.SGML_DECL,T.sgmlDecl="";else if(!R(D))if(Y(w,D))T.state=O.OPEN_TAG,T.tagName=D;else if(D==="/")T.state=O.CLOSE_TAG,T.tagName="";else if(D==="?")T.state=O.PROC_INST,T.procInstName=T.procInstBody="";else{if(L(T,"Unencoded <"),T.startTagPosition+1<T.position){var Qe=T.position-T.startTagPosition;D=new Array(Qe).join(" ")+D}T.textNode+="<"+D,T.state=O.TEXT}continue;case O.SGML_DECL:(T.sgmlDecl+D).toUpperCase()===m?(ye(T,"onopencdata"),T.state=O.CDATA,T.sgmlDecl="",T.cdata=""):T.sgmlDecl+D==="--"?(T.state=O.COMMENT,T.comment="",T.sgmlDecl=""):(T.sgmlDecl+D).toUpperCase()===y?(T.state=O.DOCTYPE,(T.doctype||T.sawRoot)&&L(T,"Inappropriately located doctype declaration"),T.doctype="",T.sgmlDecl=""):D===">"?(ye(T,"onsgmldeclaration",T.sgmlDecl),T.sgmlDecl="",T.state=O.TEXT):(U(D)&&(T.state=O.SGML_DECL_QUOTED),T.sgmlDecl+=D);continue;case O.SGML_DECL_QUOTED:D===T.q&&(T.state=O.SGML_DECL,T.q=""),T.sgmlDecl+=D;continue;case O.DOCTYPE:D===">"?(T.state=O.TEXT,ye(T,"ondoctype",T.doctype),T.doctype=!0):(T.doctype+=D,D==="["?T.state=O.DOCTYPE_DTD:U(D)&&(T.state=O.DOCTYPE_QUOTED,T.q=D));continue;case O.DOCTYPE_QUOTED:T.doctype+=D,D===T.q&&(T.q="",T.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:T.doctype+=D,D==="]"?T.state=O.DOCTYPE:U(D)&&(T.state=O.DOCTYPE_DTD_QUOTED,T.q=D);continue;case O.DOCTYPE_DTD_QUOTED:T.doctype+=D,D===T.q&&(T.state=O.DOCTYPE_DTD,T.q="");continue;case O.COMMENT:D==="-"?T.state=O.COMMENT_ENDING:T.comment+=D;continue;case O.COMMENT_ENDING:D==="-"?(T.state=O.COMMENT_ENDED,T.comment=We(T.opt,T.comment),T.comment&&ye(T,"oncomment",T.comment),T.comment=""):(T.comment+="-"+D,T.state=O.COMMENT);continue;case O.COMMENT_ENDED:D!==">"?(L(T,"Malformed comment"),T.comment+="--"+D,T.state=O.COMMENT):T.state=O.TEXT;continue;case O.CDATA:D==="]"?T.state=O.CDATA_ENDING:T.cdata+=D;continue;case O.CDATA_ENDING:D==="]"?T.state=O.CDATA_ENDING_2:(T.cdata+="]"+D,T.state=O.CDATA);continue;case O.CDATA_ENDING_2:D===">"?(T.cdata&&ye(T,"oncdata",T.cdata),ye(T,"onclosecdata"),T.cdata="",T.state=O.TEXT):D==="]"?T.cdata+="]":(T.cdata+="]]"+D,T.state=O.CDATA);continue;case O.PROC_INST:D==="?"?T.state=O.PROC_INST_ENDING:R(D)?T.state=O.PROC_INST_BODY:T.procInstName+=D;continue;case O.PROC_INST_BODY:if(!T.procInstBody&&R(D))continue;D==="?"?T.state=O.PROC_INST_ENDING:T.procInstBody+=D;continue;case O.PROC_INST_ENDING:D===">"?(ye(T,"onprocessinginstruction",{name:T.procInstName,body:T.procInstBody}),T.procInstName=T.procInstBody="",T.state=O.TEXT):(T.procInstBody+="?"+D,T.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:Y(C,D)?T.tagName+=D:(q(T),D===">"?ie(T):D==="/"?T.state=O.OPEN_TAG_SLASH:(R(D)||L(T,"Invalid character in tag name"),T.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:D===">"?(ie(T,!0),k(T)):(L(T,"Forward-slash in opening tag not followed by >"),T.state=O.ATTRIB);continue;case O.ATTRIB:if(R(D))continue;D===">"?ie(T):D==="/"?T.state=O.OPEN_TAG_SLASH:Y(w,D)?(T.attribName=D,T.attribValue="",T.state=O.ATTRIB_NAME):L(T,"Invalid attribute name");continue;case O.ATTRIB_NAME:D==="="?T.state=O.ATTRIB_VALUE:D===">"?(L(T,"Attribute without value"),T.attribValue=T.attribName,K(T),ie(T)):R(D)?T.state=O.ATTRIB_NAME_SAW_WHITE:Y(C,D)?T.attribName+=D:L(T,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if(D==="=")T.state=O.ATTRIB_VALUE;else{if(R(D))continue;L(T,"Attribute without value"),T.tag.attributes[T.attribName]="",T.attribValue="",ye(T,"onattribute",{name:T.attribName,value:""}),T.attribName="",D===">"?ie(T):Y(w,D)?(T.attribName=D,T.state=O.ATTRIB_NAME):(L(T,"Invalid attribute name"),T.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(R(D))continue;U(D)?(T.q=D,T.state=O.ATTRIB_VALUE_QUOTED):(L(T,"Unquoted attribute value"),T.state=O.ATTRIB_VALUE_UNQUOTED,T.attribValue=D);continue;case O.ATTRIB_VALUE_QUOTED:if(D!==T.q){D==="&"?T.state=O.ATTRIB_VALUE_ENTITY_Q:T.attribValue+=D;continue}K(T),T.q="",T.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:R(D)?T.state=O.ATTRIB:D===">"?ie(T):D==="/"?T.state=O.OPEN_TAG_SLASH:Y(w,D)?(L(T,"No whitespace between attributes"),T.attribName=D,T.attribValue="",T.state=O.ATTRIB_NAME):L(T,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(!P(D)){D==="&"?T.state=O.ATTRIB_VALUE_ENTITY_U:T.attribValue+=D;continue}K(T),D===">"?ie(T):T.state=O.ATTRIB;continue;case O.CLOSE_TAG:if(T.tagName)D===">"?k(T):Y(C,D)?T.tagName+=D:T.script?(T.script+="</"+T.tagName,T.tagName="",T.state=O.SCRIPT):(R(D)||L(T,"Invalid tagname in closing tag"),T.state=O.CLOSE_TAG_SAW_WHITE);else{if(R(D))continue;te(w,D)?T.script?(T.script+="</"+D,T.state=O.SCRIPT):L(T,"Invalid tagname in closing tag."):T.tagName=D}continue;case O.CLOSE_TAG_SAW_WHITE:if(R(D))continue;D===">"?k(T):L(T,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var _t,yt;switch(T.state){case O.TEXT_ENTITY:_t=O.TEXT,yt="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:_t=O.ATTRIB_VALUE_QUOTED,yt="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:_t=O.ATTRIB_VALUE_UNQUOTED,yt="attribValue";break}if(D===";")if(T.opt.unparsedEntities){var Tt=V(T);T.entity="",T.state=_t,T.write(Tt)}else T[yt]+=V(T),T.entity="",T.state=_t;else Y(T.entity.length?I:A,D)?T.entity+=D:(L(T,"Invalid character in entity name"),T[yt]+="&"+T.entity+D,T.entity="",T.state=_t);continue;default:throw new Error(T,"Unknown state: "+T.state)}return T.position>=T.bufferCheckPosition&&a(T),T}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||(function(){var S=String.fromCharCode,T=Math.floor,B=function(){var D=16384,Ie=[],Qe,_t,yt=-1,Tt=arguments.length;if(!Tt)return"";for(var vn="";++yt<Tt;){var W=Number(arguments[yt]);if(!isFinite(W)||W<0||W>1114111||T(W)!==W)throw RangeError("Invalid code point: "+W);W<=65535?Ie.push(W):(W-=65536,Qe=(W>>10)+55296,_t=W%1024+56320,Ie.push(Qe,_t)),(yt+1===Tt||Ie.length>D)&&(vn+=S.apply(null,Ie),Ie.length=0)}return vn};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:B,configurable:!0,writable:!0}):String.fromCodePoint=B})(),t};iU();var LE=class extends E2{constructor(e){super(e);M(this,"lc_namespace",["langchain","google_genai","output_parsers"]);M(this,"returnId",!1);M(this,"keyName");M(this,"returnSingle",!1);M(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await pM(this.zodSchema,e);if(n.success)return n.data;throw new eU(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.issues)}`,JSON.stringify(e,null,2))}async parseResult(e){const n=e.flatMap(s=>{const{message:o}=s;return!("tool_calls"in o)||!Array.isArray(o.tool_calls)?[]:o.tool_calls});if(n[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[a]=n;return await this._validateResult(a.args)}},DE;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(DE||(DE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PE;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(PE||(PE={}));var $E;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})($E||($E={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=["user","model","function","system"];var zE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(zE||(zE={}));var BE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(BE||(BE={}));var VE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(VE||(VE={}));var HE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(HE||(HE={}));var al;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(al||(al={}));var GE;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(GE||(GE={}));var Ar;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Ar||(Ar={}));var qE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qE||(qE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class hr extends Qt{constructor(e,n){super(e),this.response=n}}class T2 extends Qt{constructor(e,n,a,s){super(e),this.status=n,this.statusText=a,this.errorDetails=s}}class Pi extends Qt{}class S2 extends Qt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="https://generativelanguage.googleapis.com",rU="v1beta",oU="0.24.1",lU="genai-js";var Ts;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ts||(Ts={}));class uU{constructor(e,n,a,s,o){this.model=e,this.task=n,this.apiKey=a,this.stream=s,this.requestOptions=o}toString(){var e,n;const a=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||rU;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||sU}/${a}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function cU(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${lU}/${oU}`),e.join(" ")}async function dU(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",cU(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let a=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(s){throw new Pi(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${s.message}`)}for(const[s,o]of a.entries()){if(s==="x-goog-api-key")throw new Pi(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Pi(`Header name ${s} can only be set using the apiClient field`);n.append(s,o)}}return n}async function fU(t,e,n,a,s,o){const u=new uU(t,e,n,a,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},gU(o)),{method:"POST",headers:await dU(u),body:s})}}async function Nl(t,e,n,a,s,o={},u=fetch){const{url:c,fetchOptions:f}=await fU(t,e,n,a,s,o);return hU(c,f,u)}async function hU(t,e,n=fetch){let a;try{a=await n(t,e)}catch(s){mU(s,t)}return a.ok||await pU(a,t),a}function mU(t,e){let n=t;throw n.name==="AbortError"?(n=new S2(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof T2||t instanceof Pi||(n=new Qt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function pU(t,e){let n="",a;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,a=s.error.details)}catch{}throw new T2(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,a)}function gU(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Cc(t.candidates[0]))throw new hr(`${Oi(t)}`,t);return yU(t)}else if(t.promptFeedback)throw new hr(`Text not available. ${Oi(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Cc(t.candidates[0]))throw new hr(`${Oi(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),FE(t)[0]}else if(t.promptFeedback)throw new hr(`Function call not available. ${Oi(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Cc(t.candidates[0]))throw new hr(`${Oi(t)}`,t);return FE(t)}else if(t.promptFeedback)throw new hr(`Function call not available. ${Oi(t)}`,t)},t}function yU(t){var e,n,a,s;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(s=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||s===void 0?void 0:s.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function FE(t){var e,n,a,s;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(s=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||s===void 0?void 0:s.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}const vU=[al.RECITATION,al.SAFETY,al.LANGUAGE];function Cc(t){return!!t.finishReason&&vU.includes(t.finishReason)}function Oi(t){var e,n,a;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((a=t.candidates)===null||a===void 0)&&a[0]){const o=t.candidates[0];Cc(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function vl(t){return this instanceof vl?(this.v=t,this):new vl(t)}function _U(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),s,o=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(v){a[v]&&(s[v]=function(_){return new Promise(function(x,w){o.push([v,_,x,w])>1||c(v,_)})})}function c(v,_){try{f(a[v](_))}catch(x){y(o[0][3],x)}}function f(v){v.value instanceof vl?Promise.resolve(v.value.v).then(h,m):y(o[0][2],v)}function h(v){c("next",v)}function m(v){c("throw",v)}function y(v,_){v(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function bU(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=EU(e),[a,s]=n.tee();return{stream:xU(a),response:wU(s)}}async function wU(t){const e=[],n=t.getReader();for(;;){const{done:a,value:s}=await n.read();if(a)return Ty(TU(e));e.push(s)}}function xU(t){return _U(this,arguments,function*(){const n=t.getReader();for(;;){const{value:a,done:s}=yield vl(n.read());if(s)break;yield yield vl(Ty(a))}})}function EU(t){const e=t.getReader();return new ReadableStream({start(a){let s="";return o();function o(){return e.read().then(({value:u,done:c})=>{if(c){if(s.trim()){a.error(new Qt("Failed to parse stream"));return}a.close();return}s+=u;let f=s.match(YE),h;for(;f;){try{h=JSON.parse(f[1])}catch{a.error(new Qt(`Error parsing JSON response: "${f[1]}"`));return}a.enqueue(h),s=s.substring(f[0].length),f=s.match(YE)}return o()}).catch(u=>{let c=u;throw c.stack=u.stack,c.name==="AbortError"?c=new S2("Request aborted when reading from the stream"):c=new Qt("Error reading from the stream"),c})}}})}function TU(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const a of t){if(a.candidates){let s=0;for(const o of a.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=o.citationMetadata,n.candidates[s].groundingMetadata=o.groundingMetadata,n.candidates[s].finishReason=o.finishReason,n.candidates[s].finishMessage=o.finishMessage,n.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[s].content||(n.candidates[s].content={role:o.content.role||"user",parts:[]});const u={};for(const c of o.content.parts)c.text&&(u.text=c.text),c.functionCall&&(u.functionCall=c.functionCall),c.executableCode&&(u.executableCode=c.executableCode),c.codeExecutionResult&&(u.codeExecutionResult=c.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[s].content.parts.push(u)}s++}a.usageMetadata&&(n.usageMetadata=a.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e,n,a){const s=await Nl(e,Ts.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),a);return bU(s)}async function C2(t,e,n,a){const o=await(await Nl(e,Ts.GENERATE_CONTENT,t,!1,JSON.stringify(n),a)).json();return{response:Ty(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function _l(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return SU(e)}function SU(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let a=!1,s=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),s=!0):(e.parts.push(o),a=!0);if(a&&s)throw new Qt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!s)throw new Qt("No content is provided for sending chat message.");return a?e:n}function AU(t,e){var n;let a={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new Pi("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=t.contents}else if(s)a=Object.assign(Object.assign({},a),t.generateContentRequest);else{const o=_l(t);a.contents=[o]}return{generateContentRequest:a}}function ZE(t){let e;return t.contents?e=t:e={contents:[_l(t)]},t.systemInstruction&&(e.systemInstruction=N2(t.systemInstruction)),e}function CU(t){return typeof t=="string"||Array.isArray(t)?{content:_l(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],NU={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function OU(t){let e=!1;for(const n of t){const{role:a,parts:s}=n;if(!e&&a!=="user")throw new Qt(`First content should be with role 'user', got ${a}`);if(!UE.includes(a))throw new Qt(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(UE)}`);if(!Array.isArray(s))throw new Qt("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Qt("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of s)for(const f of XE)f in c&&(o[f]+=1);const u=NU[a];for(const c of XE)if(!u.includes(c)&&o[c]>0)throw new Qt(`Content with role '${a}' can't contain '${c}' part`);e=!0}}function KE(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const a of n.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="SILENT_ERROR";class RU{constructor(e,n,a,s={}){this.model=n,this.params=a,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,a!=null&&a.history&&(OU(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var a,s,o,u,c,f;await this._sendPromise;const h=_l(e),m={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,h]},y=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>C2(this._apiKey,this.model,m,y)).then(_=>{var x;if(KE(_.response)){this._history.push(h);const w=Object.assign({parts:[],role:"model"},(x=_.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(w)}else{const w=Oi(_.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}v=_}).catch(_=>{throw this._sendPromise=Promise.resolve(),_}),await this._sendPromise,v}async sendMessageStream(e,n={}){var a,s,o,u,c,f;await this._sendPromise;const h=_l(e),m={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,h]},y=Object.assign(Object.assign({},this._requestOptions),n),v=A2(this._apiKey,this.model,m,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(_=>{throw new Error(QE)}).then(_=>_.response).then(_=>{if(KE(_)){this._history.push(h);const x=Object.assign({},_.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Oi(_);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(_=>{_.message!==QE&&console.error(_)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(t,e,n,a){return(await Nl(e,Ts.COUNT_TOKENS,t,!1,JSON.stringify(n),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e,n,a){return(await Nl(e,Ts.EMBED_CONTENT,t,!1,JSON.stringify(n),a)).json()}async function jU(t,e,n,a){const s=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await Nl(e,Ts.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,a={}){this.apiKey=e,this._requestOptions=a,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=N2(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var a;const s=ZE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return C2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},s),o)}async generateContentStream(e,n={}){var a;const s=ZE(e),o=Object.assign(Object.assign({},this._requestOptions),n);return A2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},s),o)}startChat(e){var n;return new RU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const a=AU(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return IU(this.apiKey,this.model,a,s)}async embedContent(e,n={}){const a=CU(e),s=Object.assign(Object.assign({},this._requestOptions),n);return kU(this.apiKey,this.model,a,s)}async batchEmbedContents(e,n={}){const a=Object.assign(Object.assign({},this._requestOptions),n);return jU(this.apiKey,this.model,e,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Qt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new JE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,a){if(!e.name)throw new Pi("Cached content must contain a `name` field.");if(!e.model)throw new Pi("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const u of s)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){const c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(c===f)continue}throw new Pi(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new JE(this.apiKey,o,a)}}function eT(t,e){const n=MU(t);return{tools:n,toolConfig:DU(n,e)}}function MU(t){let e=[];const n=[];return t.forEach(a=>{if(y2(a)){const[s]=J$([a]);s.functionDeclarations&&e.push(...s.functionDeclarations)}else if(w2(a)){const{functionDeclarations:s}=LU(a);if(s)e.push(...s);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else n.push(a)}),n.find(a=>"functionDeclarations"in a)?n.map(a=>{if((e==null?void 0:e.length)>0&&"functionDeclarations"in a){const s={functionDeclarations:[...a.functionDeclarations||[],...e]};return e=[],s}return a}):[...n,...e.length>0?[{functionDeclarations:e}]:[]]}function LU(t){return{functionDeclarations:[{name:t.function.name,description:t.function.description,parameters:bs(t.function.parameters)}]}}function DU(t,e){if(!t.length||!e)return;const{toolChoice:n,allowedFunctionNames:a}=e,s={any:Ar.ANY,auto:Ar.AUTO,none:Ar.NONE};if(n&&["any","auto","none"].includes(n))return{functionCallingConfig:{mode:s[n]??"MODE_UNSPECIFIED",allowedFunctionNames:a}};if(typeof n=="string"||a)return{functionCallingConfig:{mode:Ar.ANY,allowedFunctionNames:[...a??[],...n&&typeof n=="string"?[n]:[]]}}}const PU={"gemini-embedding-001":{maxInputTokens:2048,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-lite-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-06-05":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-04-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-05-06":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-05-20":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-3-flash-preview":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash-preview-native-audio":{maxInputTokens:131072,imageInputs:!1,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-flash-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-lite-preview-06-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-image":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-pro-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-image-preview":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-1.5-flash-8b":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-3-pro-preview":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.0-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-flash":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-flash-lite-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.0-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-pro":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1}},$U=t=>t();function yp(t){const e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}function vp(t){const e=[];for(const n of t){let a=n;if(Array.isArray(n.content))for(let s=0;s<n.content.length;s++){const o=n.content[s];(sA(o)||rA(o))&&a===n&&(a=new n.constructor({...a,content:[...n.content.slice(0,s),$5(o),...n.content.slice(s+1)]}))}e.push(a)}return e}var UU=class fs extends P${constructor(n){super(n);M(this,"lc_namespace",["langchain","chat_models",this._llmType()]);M(this,"disableStreaming",!1);M(this,"outputVersion");this.outputVersion=$U(()=>{const a=n.outputVersion??Li("LC_OUTPUT_VERSION");return a&&["v0","v1"].includes(a)?a:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(n){const[a,s]=super._separateRunnableConfigFromCallOptions(n);return s.signal=a.signal,[a,s]}async invoke(n,a){const s=fs._convertInputToPromptValue(n);return(await this.generatePrompt([s],a,a==null?void 0:a.callbacks)).generations[0][0].message}async*_streamResponseChunks(n,a,s){throw new Error("Not implemented.")}async*_streamIterator(n,a){var s,o,u;if(this._streamResponseChunks===fs.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(n,a);else{const c=fs._convertInputToPromptValue(n).toChatMessages(),[f,h]=this._separateRunnableConfigFromCallOptionsCompat(a),m={...f.metadata,...this.getLsParams(h)},y=await Ya.configure(f.callbacks,this.callbacks,f.tags,this.tags,m,this.metadata,{verbose:this.verbose}),v={options:h,invocation_params:this==null?void 0:this.invocationParams(h),batch_size:1},_=h.outputVersion??this.outputVersion,x=await(y==null?void 0:y.handleChatModelStart(this.toJSON(),[vp(c)],f.runId,void 0,v,void 0,void 0,f.runName));let w,C;try{for await(const A of this._streamResponseChunks(c,h,x==null?void 0:x[0])){if((s=h.signal)==null||s.throwIfAborted(),A.message.id==null){const I=(o=x==null?void 0:x.at(0))==null?void 0:o.runId;I!=null&&A.message._updateId(`run-${I}`)}A.message.response_metadata={...A.generationInfo,...A.message.response_metadata},_==="v1"?yield yp(A.message):yield A.message,w?w=w.concat(A):w=A,z1(A.message)&&A.message.usage_metadata!==void 0&&(C={tokenUsage:{promptTokens:A.message.usage_metadata.input_tokens,completionTokens:A.message.usage_metadata.output_tokens,totalTokens:A.message.usage_metadata.total_tokens}})}(u=h.signal)==null||u.throwIfAborted()}catch(A){throw await Promise.all((x??[]).map(I=>I==null?void 0:I.handleLLMError(A))),A}await Promise.all((x??[]).map(A=>A==null?void 0:A.handleLLMEnd({generations:[[w]],llmOutput:C})))}}getLsParams(n){const a=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:n.stop,ls_provider:a}}async _generateUncached(n,a,s,o){var v,_,x,w;const u=n.map(C=>C.map(Ec));let c;if(o!==void 0&&o.length===u.length)c=o;else{const C={...s.metadata,...this.getLsParams(a)},A=await Ya.configure(s.callbacks,this.callbacks,s.tags,this.tags,C,this.metadata,{verbose:this.verbose}),I={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1};c=await(A==null?void 0:A.handleChatModelStart(this.toJSON(),u.map(vp),s.runId,void 0,I,void 0,void 0,s.runName))}const f=a.outputVersion??this.outputVersion,h=[],m=[];if(c!=null&&c[0].handlers.find(dD)&&!this.disableStreaming&&u.length===1&&this._streamResponseChunks!==fs.prototype._streamResponseChunks)try{const C=await this._streamResponseChunks(u[0],a,c==null?void 0:c[0]);let A,I;for await(const R of C){if((v=a.signal)!=null&&v.aborted){const U=A==null?void 0:A.message;throw new $1("Model invocation was aborted.",U)}if(R.message.id==null){const U=(_=c==null?void 0:c.at(0))==null?void 0:_.runId;U!=null&&R.message._updateId(`run-${U}`)}A===void 0?A=R:A=md(A,R),z1(R.message)&&R.message.usage_metadata!==void 0&&(I={tokenUsage:{promptTokens:R.message.usage_metadata.input_tokens,completionTokens:R.message.usage_metadata.output_tokens,totalTokens:R.message.usage_metadata.total_tokens}})}if((x=a.signal)!=null&&x.aborted){const R=A==null?void 0:A.message;throw new $1("Model invocation was aborted.",R)}if(A===void 0)throw new Error("Received empty response from chat model call.");h.push([A]),await(c==null?void 0:c[0].handleLLMEnd({generations:h,llmOutput:I}))}catch(C){throw await(c==null?void 0:c[0].handleLLMError(C)),C}else{const C=await Promise.allSettled(u.map(async(A,I)=>{const R=await this._generate(A,{...a,promptIndex:I},c==null?void 0:c[I]);if(f==="v1")for(const U of R.generations)U.message=yp(U.message);return R}));await Promise.all(C.map(async(A,I)=>{var R,U,P;if(A.status==="fulfilled"){const Y=A.value;for(const te of Y.generations){if(te.message.id==null){const O=(R=c==null?void 0:c.at(0))==null?void 0:R.runId;O!=null&&te.message._updateId(`run-${O}`)}te.message.response_metadata={...te.generationInfo,...te.message.response_metadata}}return Y.generations.length===1&&(Y.generations[0].message.response_metadata={...Y.llmOutput,...Y.generations[0].message.response_metadata}),h[I]=Y.generations,m[I]=Y.llmOutput,(U=c==null?void 0:c[I])==null?void 0:U.handleLLMEnd({generations:[Y.generations],llmOutput:Y.llmOutput})}else return await((P=c==null?void 0:c[I])==null?void 0:P.handleLLMError(A.reason)),Promise.reject(A.reason)}))}const y={generations:h,llmOutput:m.length?(w=this._combineLLMOutput)==null?void 0:w.call(this,...m):void 0};return Object.defineProperty(y,EE,{value:c?{runIds:c==null?void 0:c.map(C=>C.runId)}:void 0,configurable:!0}),y}async _generateCached({messages:n,cache:a,llmStringKey:s,parsedOptions:o,handledOptions:u}){const c=n.map(A=>A.map(Ec)),f={...u.metadata,...this.getLsParams(o)},h=await Ya.configure(u.callbacks,this.callbacks,u.tags,this.tags,f,this.metadata,{verbose:this.verbose}),m={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},y=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),c.map(vp),u.runId,void 0,m,void 0,void 0,u.runName)),v=[],_=(await Promise.allSettled(c.map(async(A,I)=>{const R=fs._convertInputToPromptValue(A).toString(),U=await a.lookup(R,s);return U==null&&v.push(I),U}))).map((A,I)=>({result:A,runManager:y==null?void 0:y[I]})).filter(({result:A})=>A.status==="fulfilled"&&A.value!=null||A.status==="rejected"),x=o.outputVersion??this.outputVersion,w=[];await Promise.all(_.map(async({result:A,runManager:I},R)=>{if(A.status==="fulfilled"){const U=A.value;return w[R]=U.map(P=>("message"in P&&rd(P.message)&&ly(P.message)&&(P.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},x==="v1"&&(P.message=yp(P.message))),P.generationInfo={...P.generationInfo,tokenUsage:{}},P)),U.length&&await(I==null?void 0:I.handleLLMNewToken(U[0].text)),I==null?void 0:I.handleLLMEnd({generations:[U]},void 0,void 0,void 0,{cached:!0})}else return await(I==null?void 0:I.handleLLMError(A.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(A.reason)}));const C={generations:w,missingPromptIndices:v,startedRunManagers:y};return Object.defineProperty(C,EE,{value:y?{runIds:y==null?void 0:y.map(A=>A.runId)}:void 0,configurable:!0}),C}async generate(n,a,s){let o;Array.isArray(a)?o={stop:a}:o=a;const u=n.map(w=>w.map(Ec)),[c,f]=this._separateRunnableConfigFromCallOptionsCompat(o);if(c.callbacks=c.callbacks??s,!this.cache)return this._generateUncached(u,f,c);const{cache:h}=this,m=this._getSerializedCacheKeyParametersForCall(f),{generations:y,missingPromptIndices:v,startedRunManagers:_}=await this._generateCached({messages:u,cache:h,llmStringKey:m,parsedOptions:f,handledOptions:c});let x={};if(v.length>0){const w=await this._generateUncached(v.map(C=>u[C]),f,c,_!==void 0?v.map(C=>_==null?void 0:_[C]):void 0);await Promise.all(w.generations.map(async(C,A)=>{const I=v[A];y[I]=C;const R=fs._convertInputToPromptValue(u[I]).toString();return h.update(R,m,C)})),x=w.llmOutput??{}}return{generations:y,llmOutput:x}}invocationParams(n){return{}}_modelType(){return"base_chat_model"}async generatePrompt(n,a,s){const o=n.map(u=>u.toChatMessages());return this.generate(o,a,s)}withStructuredOutput(n,a){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(a!=null&&a.strict)throw new Error('"strict" mode is not supported for this model by default.');const s=n,o=a==null?void 0:a.name,u=ZS(s)??"A function available to call.",c=a==null?void 0:a.method,f=a==null?void 0:a.includeRaw;if(c==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let h=o??"extract",m;Tl(s)?m=[{type:"function",function:{name:h,description:u,parameters:ay(s)}}]:("name"in s&&(h=s.name),m=[{type:"function",function:{name:h,description:u,parameters:s}}]);const y=this.bindTools(m),v=xy.from(C=>{if(!Sl.isInstance(C))throw new Error("Input is not an AIMessageChunk.");if(!C.tool_calls||C.tool_calls.length===0)throw new Error("No tool calls found in the response.");const A=C.tool_calls.find(I=>I.name===h);if(!A)throw new Error(`No tool call found with name ${h}.`);return A.args});if(!f)return y.pipe(v).withConfig({runName:"StructuredOutput"});const _=Wc.assign({parsed:(C,A)=>v.invoke(C.raw,A)}),x=Wc.assign({parsed:()=>null}),w=_.withFallbacks({fallbacks:[x]});return pd.from([{raw:y},w]).withConfig({runName:"StructuredOutputRunnable"})}},zU=class extends UU{constructor(e){super(e);M(this,"lc_serializable",!0);M(this,"lc_namespace",["langchain","chat_models","google_genai"]);M(this,"model");M(this,"temperature");M(this,"maxOutputTokens");M(this,"topP");M(this,"topK");M(this,"stopSequences",[]);M(this,"safetySettings");M(this,"apiKey");M(this,"streaming",!1);M(this,"json");M(this,"streamUsage",!0);M(this,"convertSystemMessageToHumanContent");M(this,"thinkingConfig");M(this,"client");if(this.model=e.model.replace(/^models\//,""),this.maxOutputTokens=e.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=e.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=e.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=e.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=e.stopSequences??this.stopSequences,this.apiKey=e.apiKey??Li("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=e.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(n=>n.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=e.streaming??this.streaming,this.json=e.json,this.thinkingConfig=e.thinkingConfig??this.thinkingConfig,this.client=new WE(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...this.json?{responseMimeType:"application/json"}:{},...this.thinkingConfig?{thinkingConfig:this.thinkingConfig}:{}}},{apiVersion:e.apiVersion,baseUrl:e.baseUrl,customHeaders:e.customHeaders}),this.streamUsage=e.streamUsage??this.streamUsage}static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")||this.model.startsWith("gemma-3-")&&!this.model.startsWith("gemma-3-1b")||this.model.startsWith("gemini-3")}useCachedContent(e,n,a){this.apiKey&&(this.client=new WE(this.apiKey).getGenerativeModelFromCachedContent(e,n,a))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.model==="gemini-1.0-pro-001"||this.model.startsWith("gemini-pro-vision")||this.model.startsWith("gemini-1.0-pro-vision")?!1:this.model!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,n){var a;return this.withConfig({tools:(a=eT(e))==null?void 0:a.tools,...n})}invocationParams(e){var a;const n=(a=e==null?void 0:e.tools)!=null&&a.length?eT(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return e!=null&&e.responseSchema?(this.client.generationConfig.responseSchema=e.responseSchema,this.client.generationConfig.responseMimeType="application/json"):(this.client.generationConfig.responseSchema=void 0,this.client.generationConfig.responseMimeType=this.json?"application/json":void 0),{...n!=null&&n.tools?{tools:n.tools}:{},...n!=null&&n.toolConfig?{toolConfig:n.toolConfig}:{}}}async _generate(e,n,a){var m,y,v,_;(m=n.signal)==null||m.throwIfAborted();const s=jE(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let o=s;if(s[0].role==="system"){const[x]=s;this.client.systemInstruction=x,o=s.slice(1)}const u=this.invocationParams(n);if(this.streaming){const x={},w=this._streamResponseChunks(e,n,a),C=[];for await(const A of w){const I=((y=A.generationInfo)==null?void 0:y.completion)??0;C[I]===void 0?C[I]=A:C[I]=C[I].concat(A)}return{generations:C.filter(A=>A!==void 0),llmOutput:{estimatedTokenUsage:x}}}const c=await this.completionWithRetry({...u,contents:o});let f;"usageMetadata"in c.response&&(f=ME(c.response.usageMetadata,this.model));const h=K$(c.response,{usageMetadata:f});return((v=h.generations)==null?void 0:v.length)>0&&await(a==null?void 0:a.handleLLMNewToken(((_=h.generations[0])==null?void 0:_.text)??"")),h}async*_streamResponseChunks(e,n,a){var v;const s=jE(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let o=s;if(s[0].role==="system"){const[_]=s;this.client.systemInstruction=_,o=s.slice(1)}const u={...this.invocationParams(n),contents:o},c=await this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{const{stream:_}=await this.client.generateContentStream(u,{signal:n==null?void 0:n.signal});return _});let f,h=0,m=0,y=0;for await(const _ of c){if((v=n.signal)!=null&&v.aborted)return;if("usageMetadata"in _&&_.usageMetadata!==void 0&&this.streamUsage!==!1&&n.streamUsage!==!1){f=ME(_.usageMetadata,this.model);const w=_.usageMetadata.promptTokenCount??0;f.input_tokens=Math.max(0,w-h),h=w;const C=_.usageMetadata.candidatesTokenCount??0;f.output_tokens=Math.max(0,C-m),m=C;const A=_.usageMetadata.totalTokenCount??0;f.total_tokens=Math.max(0,A-y),y=A}const x=Q$(_,{usageMetadata:f});x&&(yield x,await(a==null?void 0:a.handleLLMNewToken(x.text??"")))}}async completionWithRetry(e,n){return this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{var a;try{return await this.client.generateContent(e,{signal:n==null?void 0:n.signal})}catch(s){throw(a=s.message)!=null&&a.includes("400 Bad Request")&&(s.status=400),s}})}get profile(){return PU[this.model]??{}}withStructuredOutput(e,n){const a=e,s=n==null?void 0:n.name,o=n==null?void 0:n.method,u=n==null?void 0:n.includeRaw;if(o==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "jsonSchema" or "functionCalling" as a method.');let c,f;if(o==="functionCalling"){let v=s??"extract",_;if(Tl(a)){const x=tg(a);_=[{functionDeclarations:[{name:v,description:x.description??"A function available to call.",parameters:x}]}],f=new LE({returnSingle:!0,keyName:v,zodSchema:a})}else{let x;typeof a.name=="string"&&typeof a.parameters=="object"&&a.parameters!=null?(x=a,x.parameters=bs(a.parameters),v=a.name):x={name:v,description:a.description??"",parameters:bs(a)},_=[{functionDeclarations:[x]}],f=new LE({returnSingle:!0,keyName:v})}c=this.bindTools(_).withConfig({allowedFunctionNames:[v]})}else{const v=tg(a);c=this.withConfig({responseSchema:v}),f=new aU}if(!u)return c.pipe(f).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const h=Wc.assign({parsed:(v,_)=>f.invoke(v.raw,_)}),m=Wc.assign({parsed:()=>null}),y=h.withFallbacks({fallbacks:[m]});return pd.from([{raw:c},y]).withConfig({runName:"StructuredOutputRunnable"})}};const BU=()=>{const t="AIzaSyB_iOynqhuYf6SP7041cO_SfGBywBQbN50";return new zU({model:"gemini-pro",apiKey:t,temperature:.7,maxOutputTokens:150})};class VU{constructor(e,n){this.model=BU(),this.conversationHistory=[],this.state={concept:e,formula:n,studentAnswers:[],questionsAsked:0},this.conversationHistory.push(new ag(`You are a friendly, patient teacher helping an 8-12 year old child DEEPLY understand: ${e}.

The formula is: ${n}

Your role:
- Check if they understand WHY the formula works, not just WHAT it is
- Ask questions that reveal their thinking process
- If they just repeat the formula, ask them to explain it differently
- If they give a shallow answer, dig deeper with "Why?" or "How?"
- After 3 answers that show TRUE understanding, congratulate them
- Keep responses SHORT (1-2 sentences max)
- Use simple but precise language
- Be enthusiastic and supportive!

Question progression (ask in this order):
1. "Can you explain the formula in your own words?" (tests basic recall)
2. "WHY does this formula work? What's the logic behind it?" (tests understanding)
3. "If I change [a number], what happens and WHY?" (tests application)

Red flags (means they DON'T understand yet):
- Just repeating the formula word-for-word
- Saying "I don't know" or very short answers
- Can't explain WHY, only WHAT
- Can't apply it to a different example

Green flags (means they DO understand):
- Explains in their own words
- Can say WHY it works
- Can predict what happens if numbers change
- Uses examples to explain`))}async askQuestion(){if(!this.model)return["Can you explain the formula to me in your own words?","Great! Now tell me WHY this formula works. What's the logic?","Perfect! If I change one of the numbers, what happens and why?"][Math.min(this.state.questionsAsked,2)];try{let e="";this.state.questionsAsked===0?e="Ask the student to explain the formula in their own words. Keep it simple and friendly!":this.state.questionsAsked===1?e="Now ask them WHY the formula works. What's the logic behind it? Push them to think deeper!":e="Ask them to apply it: What happens if we change a number? Make them predict and explain!",this.conversationHistory.push(new hl(e));const a=(await this.model.invoke(this.conversationHistory)).content.toString();return this.conversationHistory.push(new Mr(a)),this.state.questionsAsked++,a}catch(e){return console.error("AI Teacher error:",e),"Can you tell me more about what you learned?"}}async evaluateAnswer(e){if(this.state.studentAnswers.push(e),!this.model){const n=e.length>30,s=(e.toLowerCase().includes("multiply")||e.toLowerCase().includes("")||e.toLowerCase().includes("add")||e.toLowerCase().includes("subtract")||e.toLowerCase().includes("because")||e.toLowerCase().includes("why"))&&n;return{isGood:s,feedback:s?"Great explanation! I can see you really understand!":"Can you explain it a bit more? Tell me WHY it works, not just WHAT it is.",shouldContinue:this.state.studentAnswers.length<3}}try{this.conversationHistory.push(new hl(`Student answered: "${e}"
        
Evaluate if this shows DEEP understanding (not just memorization). Then:
- If they show TRUE understanding (explains WHY, uses own words, gives examples): Give brief praise (1 sentence)
- If they just repeated the formula or gave shallow answer: Ask them to explain WHY or HOW (1 sentence)
- If they say "I don't know": Give a hint and ask again (1 sentence)

Keep it SHORT and encouraging!`));const a=(await this.model.invoke(this.conversationHistory)).content.toString();this.conversationHistory.push(new Mr(a));const s=(a.toLowerCase().includes("great")||a.toLowerCase().includes("good")||a.toLowerCase().includes("excellent")||a.toLowerCase().includes("perfect")||a.toLowerCase().includes("correct")||a.toLowerCase().includes("understand"))&&!a.toLowerCase().includes("but")&&!a.toLowerCase().includes("however"),o=this.state.studentAnswers.length<3&&s;return{isGood:s,feedback:a,shouldContinue:o}}catch(n){return console.error("AI evaluation error:",n),{isGood:!0,feedback:"Good effort! Let's continue.",shouldContinue:this.state.studentAnswers.length<3}}}getProgress(){return{current:this.state.studentAnswers.filter((e,n)=>n<this.state.questionsAsked).length,total:3}}isComplete(){return this.state.studentAnswers.length>=3}}const tT={exam:{title:"The Student's Exam Rush",characters:{teacher:{name:"Professor Owl",emoji:"",position:"left",voice:{pitch:1,rate:.95}},student:{name:"Student Sam",emoji:"",position:"right",voice:{pitch:1.05,rate:1}}},dialogue:[{character:"student",text:"Oh no! My exam is in 3 hours and I need 6 pages of notes!",emotion:"confused"},{character:"teacher",text:"Don't panic, Sam! Let's think about this step by step.",emotion:"thinking"},{character:"student",text:"But how do I know if I have enough time?",emotion:"confused"},{character:"teacher",text:"Well, how many pages can you collect per hour?",emotion:"thinking"},{character:"student",text:"I can collect 2 pages every hour!",emotion:"happy"},{character:"teacher",text:"Perfect! This is called 'Repeated Addition'. We're grouping pages by hour.",emotion:"excited",quiz:{question:"What is 2 pages  3 hours?",answer:"6",hint:"Multiply pages per hour by number of hours"}},{character:"student",text:"So... 2 pages times 3 hours?",emotion:"thinking"},{character:"teacher",text:"Exactly! 2  3 = 6 pages. You'll have exactly what you need!",emotion:"excited"},{character:"student",text:"Wow! Math saved my exam! Thanks Professor!",emotion:"excited"},{character:"teacher",text:"Remember: Pages per Hour  Hours = Total Pages. That's the formula!",emotion:"happy"}],hindi:{title:"    ",dialogue:[{text:" !   3      6   !"},{text:" , !       "},{text:"          ?"},{text:",         ?"},{text:"   2     !"},{text:"!  '- '           "},{text:"... 2   3 ?"},{text:" ! 2  3 = 6        !"},{text:"!      !  !"},{text:" :      =     !"}]}},snail:{title:"The Snail's Great Escape",characters:{teacher:{name:"Wise Turtle",emoji:"",position:"left",voice:{pitch:.95,rate:.9}},student:{name:"Snail Sam",emoji:"",position:"right",voice:{pitch:1.05,rate:1}}},dialogue:[{character:"student",text:"Help! I'm stuck in a 10-meter deep hole!",emotion:"confused"},{character:"teacher",text:"Stay calm, Sam. Tell me, how far can you climb each day?",emotion:"thinking"},{character:"student",text:"I can climb up 3 meters during the day!",emotion:"happy"},{character:"teacher",text:"That's good! But what happens at night?",emotion:"thinking"},{character:"student",text:"Oh no... I slide back down 2 meters while I sleep.",emotion:"confused"},{character:"teacher",text:"Interesting! So your 'Net Progress' each day is 3 minus 2, which equals 1 meter.",emotion:"excited",quiz:{question:"What is 3 - 2?",answer:"1",hint:"Subtract the slide distance from climb distance"}},{character:"student",text:"So I only make 1 meter of real progress per day?",emotion:"thinking"},{character:"teacher",text:"Exactly! But here's the trick: on the last day, you reach the top and don't slide back!",emotion:"excited"},{character:"student",text:"Ohhh! So I need to think about when I'll reach the top during the day!",emotion:"excited"},{character:"teacher",text:"Right! After 7 days you're at 7 meters. On day 8, you climb 3 more and escape!",emotion:"happy"}],hindi:{title:"   ",dialogue:[{text:"!  10       !"},{text:" ,  ,       ?"},{text:"   3    !"},{text:" !      ?"},{text:" ...    2     "},{text:"!   ' '   3  2,  1  "},{text:"     1      ?"},{text:"!    :  ,         !"},{text:"!            !"},{text:"! 7     7    8 ,  3       !"}]}},icecream:{title:"The Melting Ice Cream Mystery",characters:{teacher:{name:"Chef Bear",emoji:"",position:"left",voice:{pitch:1,rate:.95}},student:{name:"Little Fox",emoji:"",position:"right",voice:{pitch:1.1,rate:1}}},dialogue:[{character:"student",text:"Chef! My ice cream is melting in the sun!",emotion:"confused"},{character:"teacher",text:"Oh dear! How much ice cream do you have?",emotion:"thinking"},{character:"student",text:"I started with 5 grams!",emotion:"happy"},{character:"teacher",text:"And how fast is it melting?",emotion:"thinking"},{character:"student",text:"About 1 gram per minute...",emotion:"confused"},{character:"teacher",text:"This is 'Repeated Subtraction'! Every minute, we take away 1 gram.",emotion:"excited"},{character:"student",text:"So after 2 minutes, I'll have... 5 minus 2?",emotion:"thinking"},{character:"teacher",text:"Close! It's 5 minus (1  2). That's 5 - 2 = 3 grams left!",emotion:"excited",quiz:{question:"What is 5 - 2?",answer:"3",hint:"Start amount minus melted amount"}},{character:"student",text:"I better eat it fast before it all melts!",emotion:"excited"},{character:"teacher",text:"Good idea! The formula is: Start - (Melt Rate  Minutes) = Leftover",emotion:"happy"}],hindi:{title:"   ",dialogue:[{text:"!       !"},{text:"!     ?"},{text:" 5     !"},{text:"       ?"},{text:" 1   ..."},{text:" '- ' !  ,  1    "},{text:" 2   ,  ... 5  2?"},{text:"-!  5  (1  2)   5 - 2 = 3  !"},{text:"             !"},{text:" !  :  - (    ) =  "}]}}};function HU({problemId:t,soundEnabled:e}){var T;const[n,a]=ae.useState(0),[s,o]=ae.useState(!1),[u,c]=ae.useState(!1),[f,h]=ae.useState("english"),[m,y]=ae.useState(!1),[v,_]=ae.useState(""),[x,w]=ae.useState(null),[C,A]=ae.useState(!1),[I,R]=ae.useState(""),[U,P]=ae.useState(""),[Y,te]=ae.useState(!1),[O,pe]=ae.useState(""),[Ae,ye]=ae.useState(0),ke=ae.useRef(null),We=ae.useRef(null),ue=ae.useRef(null),X=tT[t]||tT.exam,L=B=>{var D;return f==="hindi"&&X.hindi&&((D=X.hindi.dialogue[B])==null?void 0:D.text)||X.dialogue[B].text},q=()=>f==="hindi"&&X.hindi?X.hindi.title:X.title,J=(B,D)=>{if(!e||!window.speechSynthesis)return;window.speechSynthesis.cancel();const Ie=new SpeechSynthesisUtterance(B),Qe=X.characters[D];return Ie.pitch=Qe.voice.pitch,Ie.rate=Qe.voice.rate,Ie.volume=.8,We.current=Ie,window.speechSynthesis.speak(Ie),new Promise(_t=>{Ie.onend=()=>_t(),Ie.onerror=()=>_t()})},K=async()=>{if(n>=X.dialogue.length){o(!1),ie();return}const B=X.dialogue[n],D=L(n);c(!0),e&&await J(D,B.character),B.quiz?ke.current=setTimeout(()=>{c(!1),y(!0),o(!1)},e?800:2e3):ke.current=setTimeout(()=>{c(!1),setTimeout(()=>{a(Ie=>Ie+1)},300)},e?800:2800)},ie=()=>{A(!0),ye(0);const B={exam:{concept:"Repeated Addition (Multiplication)",formula:"Pages per Hour  Hours = Total Pages"},snail:{concept:"Net Progress (Subtraction)",formula:"Climb - Slide = Net Progress per Day"},icecream:{concept:"Repeated Subtraction",formula:"Start - (Melt Rate  Minutes) = Leftover"}},D=B[t]||B.exam;ue.current=new VU(D.concept,D.formula),k()},k=async()=>{if(ue.current)try{const B=await ue.current.askQuestion();R(B),e&&await J(B,"teacher")}catch(B){console.error("Error asking question:",B),R("Can you explain what you learned?")}},V=async()=>{if(!(!U.trim()||!ue.current)){te(!0);try{const B=await ue.current.evaluateAnswer(U);pe(B.feedback),e&&await J(B.feedback,"teacher"),B.isGood&&ye(D=>D+1),ue.current.isComplete()&&B.isGood?setTimeout(()=>{A(!1)},3e3):B.shouldContinue&&B.isGood?setTimeout(()=>{pe(""),P(""),k()},2500):setTimeout(()=>{pe(""),P("")},2500)}catch(B){console.error("Error evaluating answer:",B),pe("Good effort! Let's continue."),setTimeout(()=>{pe(""),P("")},2e3)}te(!1)}},se=()=>{const B=X.dialogue[n].quiz;if(!B)return;const D=v.trim().toLowerCase()===B.answer.toLowerCase();w(D?"correct":"incorrect"),D&&setTimeout(()=>{y(!1),w(null),_(""),a(Ie=>Ie+1),o(!0)},1500)};ae.useEffect(()=>(s&&K(),()=>{ke.current&&clearTimeout(ke.current)}),[s,n]);const oe=()=>{var B;s?(o(!1),(B=window.speechSynthesis)==null||B.cancel(),ke.current&&clearTimeout(ke.current)):(n>=X.dialogue.length&&a(0),o(!0))},me=()=>{var B;o(!1),a(0),c(!1),y(!1),_(""),w(null),(B=window.speechSynthesis)==null||B.cancel(),ke.current&&clearTimeout(ke.current)};ae.useEffect(()=>{me()},[f]);const S=X.dialogue[n];return S&&X.characters[S.character],E.jsxs("div",{className:"w-full h-full flex flex-col bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-6 relative overflow-hidden",children:[E.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[E.jsx("div",{className:"absolute top-10 left-10 text-6xl",children:""}),E.jsx("div",{className:"absolute top-20 right-20 text-6xl",children:""}),E.jsx("div",{className:"absolute bottom-10 left-20 text-6xl",children:""}),E.jsx("div",{className:"absolute bottom-20 right-10 text-6xl",children:""})]}),E.jsxs(he.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-4 relative z-10 shrink-0",children:[E.jsxs("div",{className:"flex items-center justify-center gap-4 mb-3",children:[E.jsx("button",{onClick:()=>h("english"),className:`px-5 py-2 rounded-full font-black text-sm transition-all ${f==="english"?"bg-purple-600 text-white shadow-lg scale-110":"bg-white text-purple-600 hover:bg-purple-50"}`,children:"English"}),E.jsx("button",{onClick:()=>h("hindi"),className:`px-5 py-2 rounded-full font-black text-sm transition-all ${f==="hindi"?"bg-purple-600 text-white shadow-lg scale-110":"bg-white text-purple-600 hover:bg-purple-50"}`,children:""})]}),E.jsx("h2",{className:"text-2xl md:text-3xl font-black text-purple-900 mb-1",children:q()}),E.jsx("p",{className:"text-xs text-purple-600 font-bold",children:f==="hindi"?"   ":"A Learning Story"})]}),E.jsx("div",{className:"flex-1 flex items-center justify-center relative min-h-[400px] py-8 overflow-visible",children:E.jsxs("div",{className:"w-full max-w-5xl h-full flex items-end justify-between px-4 md:px-12 relative pt-32 gap-8",children:[E.jsxs(he.div,{animate:{scale:(S==null?void 0:S.character)==="teacher"?1.1:1,y:(S==null?void 0:S.character)==="teacher"?-10:0},className:"flex flex-col items-center relative h-full justify-end pb-4",children:[E.jsx(Rn,{children:(S==null?void 0:S.character)==="teacher"&&u&&E.jsxs(he.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.3},className:"absolute bottom-full mb-6 bg-white rounded-3xl px-6 py-4 shadow-2xl border-4 border-blue-200 max-w-sm z-50",children:[E.jsx("p",{className:"text-sm font-bold text-gray-800 leading-relaxed whitespace-normal break-words hyphens-auto",children:L(n)}),E.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white border-r-4 border-b-4 border-blue-200 rotate-45"}),S.emotion&&E.jsxs(he.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},className:"absolute -top-2 -right-2 text-2xl",children:[S.emotion==="happy"&&"",S.emotion==="thinking"&&"",S.emotion==="excited"&&"",S.emotion==="confused"&&""]})]},n)}),E.jsx(he.div,{animate:{rotate:(S==null?void 0:S.character)==="teacher"?[-2,2,-2]:0},transition:{duration:.5,repeat:(S==null?void 0:S.character)==="teacher"?1/0:0},className:"text-7xl md:text-9xl drop-shadow-xl",children:X.characters.teacher.emoji}),E.jsx("div",{className:"mt-3 bg-blue-100 px-3 py-1 rounded-full border-2 border-blue-200",children:E.jsx("p",{className:"text-[10px] md:text-xs font-black text-blue-900",children:X.characters.teacher.name})})]}),E.jsxs(he.div,{animate:{scale:(S==null?void 0:S.character)==="student"?1.1:1,y:(S==null?void 0:S.character)==="student"?-10:0},className:"flex flex-col items-center relative h-full justify-end pb-4",children:[E.jsx(Rn,{children:(S==null?void 0:S.character)==="student"&&u&&E.jsxs(he.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.3},className:"absolute bottom-full mb-6 bg-white rounded-3xl px-6 py-4 shadow-2xl border-4 border-purple-200 max-w-sm z-50",children:[E.jsx("p",{className:"text-sm font-bold text-gray-800 leading-relaxed whitespace-normal break-words hyphens-auto",children:L(n)}),E.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white border-r-4 border-b-4 border-purple-200 rotate-45"}),S.emotion&&E.jsxs(he.div,{animate:{rotate:[0,-10,10,0]},transition:{duration:.5,repeat:1/0},className:"absolute -top-2 -right-2 text-2xl",children:[S.emotion==="happy"&&"",S.emotion==="thinking"&&"",S.emotion==="excited"&&"",S.emotion==="confused"&&""]})]},n)}),E.jsx(he.div,{animate:{rotate:(S==null?void 0:S.character)==="student"?[2,-2,2]:0},transition:{duration:.5,repeat:(S==null?void 0:S.character)==="student"?1/0:0},className:"text-7xl md:text-9xl drop-shadow-xl",children:X.characters.student.emoji}),E.jsx("div",{className:"mt-3 bg-purple-100 px-3 py-1 rounded-full border-2 border-purple-200",children:E.jsx("p",{className:"text-[10px] md:text-xs font-black text-purple-900",children:X.characters.student.name})})]})]})}),E.jsxs("div",{className:"mb-4 relative z-10 shrink-0",children:[E.jsx("div",{className:"flex justify-center gap-2",children:X.dialogue.map((B,D)=>E.jsx(he.div,{animate:{scale:D===n?1.2:1,backgroundColor:D<n?"#10b981":D===n?"#8b5cf6":"#e5e7eb"},className:"w-3 h-3 rounded-full"},D))}),E.jsx("p",{className:"text-center mt-2 text-xs font-bold text-gray-600",children:f==="hindi"?` ${Math.min(n+1,X.dialogue.length)} / ${X.dialogue.length}`:`Line ${Math.min(n+1,X.dialogue.length)} of ${X.dialogue.length}`})]}),E.jsxs("div",{className:"flex items-center justify-center gap-3 md:gap-4 relative z-10 shrink-0",children:[E.jsxs(he.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:oe,className:`flex items-center gap-2 md:gap-3 px-6 md:px-8 py-3 md:py-4 rounded-full font-black text-sm md:text-base text-white shadow-xl border-b-4 ${s?"bg-red-500 border-red-700":"bg-green-500 border-green-700"}`,children:[s?E.jsx(Hj,{className:"w-5 h-5 md:w-6 md:h-6"}):E.jsx(GS,{className:"w-5 h-5 md:w-6 md:h-6"}),s?f==="hindi"?"":"Pause":n>=X.dialogue.length?f==="hindi"?"  ":"Replay":f==="hindi"?"":"Play"]}),E.jsx(he.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:me,className:"p-3 md:p-4 rounded-full bg-white border-4 border-gray-200 text-gray-600 shadow-lg",children:E.jsx(qS,{className:"w-5 h-5 md:w-6 md:h-6"})})]}),E.jsx(Rn,{children:m&&((T=X.dialogue[n])==null?void 0:T.quiz)&&E.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4",children:E.jsxs(he.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},exit:{scale:.8,y:20},className:"bg-white rounded-3xl p-8 shadow-2xl border-8 border-purple-400 max-w-md w-full",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("div",{className:"text-5xl mb-4",children:""}),E.jsx("h3",{className:"text-2xl font-black text-purple-900 mb-2",children:f==="hindi"?" !":"Quiz Time!"}),E.jsx("p",{className:"text-lg font-bold text-gray-700",children:X.dialogue[n].quiz.question})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("input",{type:"text",value:v,onChange:B=>_(B.target.value),onKeyPress:B=>B.key==="Enter"&&se(),placeholder:f==="hindi"?"    ...":"Type your answer here...",className:"w-full px-6 py-4 rounded-2xl border-4 border-purple-200 text-lg font-bold text-center focus:outline-none focus:border-purple-500 transition-colors",autoFocus:!0}),X.dialogue[n].quiz.hint&&E.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl border-2 border-blue-200",children:E.jsxs("p",{className:"text-sm font-bold text-blue-800",children:[" ",f==="hindi"?": ":"Hint: ",X.dialogue[n].quiz.hint]})}),E.jsx("button",{onClick:se,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-black text-lg shadow-lg hover:from-purple-600 hover:to-purple-700 transition-all border-b-4 border-purple-700",children:f==="hindi"?" ":"Submit"})]}),x&&E.jsx(he.div,{initial:{scale:0},animate:{scale:1},className:`mt-6 p-4 rounded-2xl text-center font-black text-lg ${x==="correct"?"bg-green-100 text-green-800 border-4 border-green-300":"bg-red-100 text-red-800 border-4 border-red-300"}`,children:x==="correct"?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"text-4xl mb-2",children:""}),f==="hindi"?" !":"Correct!"]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"text-4xl mb-2",children:""}),f==="hindi"?"   !":"Try again!"]})})]})})}),E.jsx(Rn,{children:C&&E.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4",children:E.jsxs(he.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},exit:{scale:.8,y:20},className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-8 shadow-2xl border-8 border-purple-400 max-w-2xl w-full",children:[E.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[E.jsx("div",{className:"text-6xl",children:X.characters.teacher.emoji}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"bg-white rounded-3xl px-6 py-4 shadow-lg border-4 border-blue-200",children:E.jsx("p",{className:"text-lg font-bold text-gray-800 leading-relaxed",children:I})}),E.jsx("p",{className:"text-xs font-black text-blue-600 mt-2 ml-2",children:X.characters.teacher.name})]})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:"text-6xl",children:X.characters.student.emoji}),E.jsxs("div",{className:"flex-1",children:[E.jsx("textarea",{value:U,onChange:B=>P(B.target.value),placeholder:f==="hindi"?"   ...":"Type your answer here...",className:"w-full px-6 py-4 rounded-2xl border-4 border-purple-200 text-base font-bold resize-none focus:outline-none focus:border-purple-500 transition-colors",rows:3,disabled:Y}),E.jsx("p",{className:"text-xs font-black text-purple-600 mt-2 ml-2",children:X.characters.student.name})]})]}),O&&E.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-2xl border-4 ${O.includes("Great")||O.includes("Perfect")||O.includes("Wonderful")?"bg-green-50 border-green-300 text-green-800":"bg-yellow-50 border-yellow-300 text-yellow-800"}`,children:E.jsx("p",{className:"font-bold text-center",children:O})}),E.jsx("button",{onClick:V,disabled:Y||!U.trim(),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-black text-lg shadow-lg hover:from-purple-600 hover:to-purple-700 transition-all border-b-4 border-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Y?" Checking...":f==="hindi"?" ":"Answer!"}),E.jsx("button",{onClick:()=>A(!1),className:"w-full py-3 bg-gray-100 text-gray-600 rounded-2xl font-bold text-sm hover:bg-gray-200 transition-all border-2 border-gray-200",children:f==="hindi"?"    ":" I'll Answer Later"}),E.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2].map(B=>E.jsx("div",{className:`w-3 h-3 rounded-full ${B<Ae?"bg-green-500":"bg-gray-300"}`},B))}),E.jsx("p",{className:"text-xs text-center text-gray-600 font-bold",children:f==="hindi"?` ${Ae+1} / 3`:`Question ${Ae+1} of 3`})]})]})})}),E.jsx(Rn,{children:n>=X.dialogue.length&&!s&&!C&&Ae>=3&&E.jsx(he.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50",children:E.jsxs("div",{className:"bg-white rounded-3xl p-12 shadow-2xl border-8 border-yellow-400 text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-2",children:f==="hindi"?"  !":"Story Complete!"}),E.jsx("p",{className:"text-gray-600 font-bold mb-6",children:f==="hindi"?"   !":"You've learned the concept!"}),E.jsx("button",{onClick:me,className:"px-6 py-3 bg-purple-600 text-white rounded-full font-black hover:bg-purple-700 transition-colors",children:f==="hindi"?"  ":"Watch Again"})]})})})]})}const Ho=[{id:"exam",level:1,title:"Rush to Exam",emoji:"",description:"Can the Student collect enough pages for the exam?",link:"https://www.codechef.com/problems/RUSHTOEXAM",concept:"Repeated Addition (Grouping)",given:["Time we have (Hours)","Pages per Hour"],find:"Total pages collected vs Goal",rule:"Every hour, we add the same number of pages.",formula:"Pages per Hour  Hours = Total Pages",theme:{bg:"bg-[#F3E5F5]",text:"text-purple-900",border:"border-purple-100",accent:"bg-purple-600"},inputs:[{key:"n",label:"How many hours?",default:"3",color:"blue",unit:"h"},{key:"m",label:"Goal (Pages needed)?",default:"6",color:"purple",unit:"p"},{key:"a",label:"Pages per hour?",default:"2",color:"green",unit:"p/h"}]},{id:"icecream",level:2,title:"IceCream Cones",emoji:"",description:"How much ice cream is left after melting?",link:"https://www.codechef.com/problems/ICECREAMCONES",concept:"Repeated Subtraction",given:["Starting amount","Melt rate per minute"],find:"How much is left after some time",rule:"Every minute, we take away some ice cream.",formula:"Start - (Melt Rate  Minutes) = Leftover",theme:{bg:"bg-[#FFF3E0]",text:"text-orange-900",border:"border-orange-100",accent:"bg-orange-600"},inputs:[{key:"x",label:"Starting grams?",default:"5",color:"blue",unit:"g"},{key:"y",label:"Melt rate?",default:"1",color:"red",unit:"g/m"},{key:"n",label:"Minutes passed?",default:"2",color:"orange",unit:"m"}]},{id:"snail",level:3,title:"Sub A Add B",emoji:"",description:"Help the snail climb out of the deep hole!",link:"https://www.codechef.com/problems/SUBAADDB",concept:"Net Progress (Step-by-Step)",given:["Depth of hole","Climb up distance","Slide down distance"],find:"Number of days to reach the top",rule:"Each day: Go up, then slide down. Check if we reached the top!",formula:"Total = (Up - Down) per day (until the last day)",theme:{bg:"bg-[#E0F7FA]",text:"text-blue-900",border:"border-blue-100",accent:"bg-blue-600"},inputs:[{key:"n",label:"Hole depth?",default:"10",color:"blue",unit:"m"},{key:"a",label:"Climb up?",default:"3",color:"green",unit:"m"},{key:"b",label:"Slide down?",default:"2",color:"red",unit:"m"}]},{id:"mindist",level:4,title:"Minimum Distinct",emoji:"",description:"Make all items in the tray unique!",link:"https://www.codechef.com/problems/MINDIST",concept:"Frequency & Swapping",given:["List of items"],find:"Minimum unique items after swaps",rule:"If we have duplicates, try to swap them with something else.",formula:"Unique Count = Total - Duplicates",theme:{bg:"bg-[#E8F5E9]",text:"text-green-900",border:"border-green-100",accent:"bg-green-600"},inputs:[{key:"arr",label:"Items (comma separated)",default:"1,2,2,3,1",color:"green",unit:"items"}]},{id:"maxmin",level:5,title:"Max Minus Min",emoji:"",description:"Find the biggest height difference!",link:"https://www.codechef.com/problems/MAXMIN",concept:"Range (Max - Min)",given:["List of heights"],find:"The gap between the tallest and shortest",rule:"Find the biggest number and the smallest number, then subtract.",formula:"Max - Min = Range",theme:{bg:"bg-[#FFEBEE]",text:"text-red-900",border:"border-red-100",accent:"bg-red-600"},inputs:[{key:"arr",label:"Heights (comma separated)",default:"10,2,5,15,8",color:"red",unit:"m"}]},{id:"goodsub",level:6,title:"Good Subarrays",emoji:"",description:"Count subarrays where sum equals length!",link:"https://www.codechef.com/problems/GOODSUB",concept:"Prefix Sums & Counting",given:["Array of digits"],find:"Subarrays where Sum == Length",rule:"Check every possible slice of the array.",formula:"Count(Subarray) where Sum(Subarray) == Length(Subarray)",theme:{bg:"bg-[#E1F5FE]",text:"text-sky-900",border:"border-sky-100",accent:"bg-sky-600"},inputs:[{key:"arr",label:"Train weights (comma separated)",default:"1,0,2",color:"sky",unit:"cars"}]},{id:"graph",level:7,title:"Array Graph",emoji:"",description:"Connect the dots with shared factors!",link:"https://www.codechef.com/problems/ARRAYGRAPH",concept:"Connectivity & GCD",given:["Array of node values"],find:"Are all nodes connected?",rule:"Nodes are connected if they share a common factor.",formula:"Connectivity = Path exists between all pairs",theme:{bg:"bg-[#F5F5F5]",text:"text-zinc-900",border:"border-zinc-200",accent:"bg-zinc-800"},inputs:[{key:"arr",label:"Node values (comma separated)",default:"2,3,4,6",color:"zinc",unit:"nodes"}]},{id:"atleast",level:8,title:"At least One",emoji:"",description:"Find the hidden target in the array!",link:"https://www.codechef.com/problems/ATLEASTONE",concept:"Linear Search",given:["Array of values","Target value"],find:"Is the target in the array?",rule:"Look at every item until you find the target.",formula:"Result = Target in Array",theme:{bg:"bg-[#FFFDE7]",text:"text-yellow-900",border:"border-yellow-100",accent:"bg-yellow-600"},inputs:[{key:"arr",label:"Search area (comma separated)",default:"5,10,15,20",color:"yellow",unit:"targets"},{key:"k",label:"Target value?",default:"15",color:"orange",unit:"val"}]}],ia=t=>{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const n=new e,a=n.createOscillator(),s=n.createGain();a.connect(s),s.connect(n.destination);const o=n.currentTime;t==="climb"?(a.type="sine",a.frequency.setValueAtTime(200,o),a.frequency.exponentialRampToValueAtTime(800,o+.2),s.gain.setValueAtTime(.3,o),s.gain.exponentialRampToValueAtTime(.01,o+.2),a.start(o),a.stop(o+.2)):t==="slide"?(a.type="triangle",a.frequency.setValueAtTime(600,o),a.frequency.exponentialRampToValueAtTime(100,o+.4),s.gain.setValueAtTime(.2,o),s.gain.exponentialRampToValueAtTime(.01,o+.4),a.start(o),a.stop(o+.4)):t==="win"?[440,554.37,659.25,880].forEach((c,f)=>{const h=n.createOscillator(),m=n.createGain();h.connect(m),m.connect(n.destination),h.type="square",h.frequency.setValueAtTime(c,o+f*.1),m.gain.setValueAtTime(.1,o+f*.1),m.gain.exponentialRampToValueAtTime(.01,o+f*.1+.3),h.start(o+f*.1),h.stop(o+f*.1+.3)}):t==="click"&&(a.type="sine",a.frequency.setValueAtTime(400,o),s.gain.setValueAtTime(.1,o),s.gain.exponentialRampToValueAtTime(.01,o+.05),a.start(o),a.stop(o+.05))};function GU(){const[t,e]=ae.useState("exam"),[n,a]=ae.useState(()=>{const W=localStorage.getItem("unlockedLevel");return W?parseInt(W):1}),[s,o]=ae.useState({n:"10",a:"3",b:"2",m:"6",x:"5",y:"1",arr:"1,2,2,3,1",k:"15"}),[u,c]=ae.useState(!1),[f,h]=ae.useState(0),[m,y]=ae.useState(0),[v,_]=ae.useState("idle"),[x,w]=ae.useState(""),[C,A]=ae.useState(""),[I,R]=ae.useState(!1),[U,P]=ae.useState(!0),[Y,te]=ae.useState(!1),[O,pe]=ae.useState(!1),[Ae,ye]=ae.useState(!1),[ke,We]=ae.useState(!1),[ue,X]=ae.useState(""),L=ij(),q=()=>{te(!Y),Y||(pe(!0),setTimeout(()=>pe(!1),2e3))},J=ae.useRef(null),K=ae.useMemo(()=>Ho.find(W=>W.id===t)||Ho[0],[t]),ie=ae.useMemo(()=>{if(t==="snail"){const W=Number(s.n),le=Number(s.a),Re=Number(s.b);return isNaN(W)||isNaN(le)||isNaN(Re)?null:le<=0?{error:"The snail needs to climb at least a little bit!"}:W<=0?{operations:0}:W<le?{operations:1}:le<=Re?{error:"Oh no! The snail is sliding back too much. It will never get out!"}:{operations:Math.floor((W-le)/(le-Re))+1}}else if(t==="exam"){const W=Number(s.n),le=Number(s.m),Re=Number(s.a);return isNaN(W)||isNaN(le)||isNaN(Re)?null:{success:Re*W>=le}}else if(t==="icecream"){const W=Number(s.x),le=Number(s.y),Re=Number(s.n);return isNaN(W)||isNaN(le)||isNaN(Re)?null:{left:Math.max(0,W-le*Re)}}else if(t==="mindist"){const W=s.arr.split(",").map(Number).filter(Re=>!isNaN(Re)),le=new Set(W).size;return{ops:W.length-le}}else if(t==="maxmin"){const W=s.arr.split(",").map(Number).filter(le=>!isNaN(le));return W.length===0?{diff:0}:{diff:Math.max(...W)-Math.min(...W)}}else if(t==="goodsub"){const W=s.arr.split(",").map(Number).filter(Re=>!isNaN(Re));let le=0;for(let Re=0;Re<W.length;Re++){let et=0;for(let Ct=Re;Ct<W.length;Ct++)et+=W[Ct],et===Ct-Re+1&&le++}return{count:le}}else if(t==="graph"){const W=s.arr.split(",").map(Number).filter(et=>!isNaN(et)),le=(et,Ct)=>Ct===0?et:le(Ct,et%Ct);let Re=0;for(let et=0;et<W.length;et++)for(let Ct=et+1;Ct<W.length;Ct++)le(W[et],W[Ct])>1&&Re++;return{edges:Re}}else if(t==="atleast"){const W=s.arr.split(",").map(Number).filter(Re=>!isNaN(Re)),le=Number(s.k);return{found:W.includes(le)}}return null},[t,s]),k=()=>{c(!1),J.current&&clearTimeout(J.current)},V=()=>{U&&ia("click"),k(),y(0),_("idle"),ye(!1),We(!1),X(""),w("Ready to learn? Press Start!"),A("We will solve this step-by-step to understand the logic."),t==="snail"?(h(Number(s.n)),L.set({y:"100%",rotate:0,scale:1})):t==="exam"?(h(0),L.set({scale:1,y:0})):t==="icecream"?(h(Number(s.x)),L.set({scale:1,opacity:1})):(h(0),L.set({scale:1,opacity:1,x:0,y:0}))},se=async W=>{ke&&(We(!1),U&&ia("click"),t==="snail"?Ie():t==="exam"?Qe():t==="icecream"&&_t())};let oe=0,me=0,S=0,T=0,B=0,D=0;const Ie=async()=>{const W=Number(s.n),le=Number(s.a),Re=Number(s.b);if(me++,y(me),U&&ia("climb"),w(`Day ${me}: You helped the snail climb ${le}m!`),A(`Great job! The snail climbed ${le}m up.`),oe=Math.max(0,oe-le),h(oe),await L.start({y:`${oe/W*100}%`,rotate:-15,scale:1.2}),oe<=0){w(` YOU WON! Snail escaped in ${me} days!`),A("Amazing! You helped the snail reach the top!"),_("finished"),c(!1),ye(!1),U&&ia("win"),yt(),await L.start({scale:[1.2,2,1.5],rotate:[0,20,-20,0]});return}await new Promise(et=>setTimeout(et,1e3)),U&&ia("slide"),w(`Oh no! Snail slides back ${Re}m at night...`),A(`The snail needs to rest. It slides back ${Re}m.`),oe=oe+Re,h(oe),await L.start({y:`${oe/W*100}%`,rotate:15,scale:.9}),await new Promise(et=>setTimeout(et,1e3)),w(`Day ${me} complete! Net progress: ${le-Re}m`),A('Click "Help Climb!" to continue the next day!'),X("Click to help the snail climb again!"),We(!0)},Qe=async()=>{const W=Number(s.n),le=Number(s.m),Re=Number(s.a);if(T++,y(T),w(`Hour ${T}: You collected ${Re} pages!`),A("Great! You're working hard to collect pages."),S+=Re,h(S),U&&ia("climb"),await L.start({x:(T-1)*20,scale:[1,1.2,1],transition:{duration:.5}}),w(`Total in bag: ${S} pages`),A(`You have ${S} pages. Need ${le} pages total.`),S>=le){w(" YOU WIN! You have enough pages for the exam!"),A(`Success! ${S} pages is enough!`),_("finished"),c(!1),ye(!1),U&&ia("win"),yt();return}if(T>=W){w(` Time's up! Only ${S} pages. Need ${le}.`),A("Not enough time. Try adjusting the numbers!"),_("finished"),c(!1),ye(!1);return}await new Promise(et=>setTimeout(et,1e3)),X("Click to collect more pages!"),We(!0)},_t=async()=>{const W=Number(s.x),le=Number(s.y),Re=Number(s.n);if(D++,y(D),w(`Minute ${D}: ${le}g melted...`),A("The sun is hot! Ice cream is melting."),B=Math.max(0,B-le),h(B),U&&ia("slide"),await L.start({scale:B/W,opacity:.5+B/W*.5}),w(`Remaining: ${B.toFixed(0)}g`),A(`You have ${B}g left.`),B<=0){w(" All melted! 0g left."),A("The ice cream is gone! Try eating it faster next time!"),_("finished"),c(!1),ye(!1),U&&ia("win"),yt();return}if(D>=Re){w(` You saved ${B}g of ice cream!`),A("Good job! You still have some ice cream left!"),_("finished"),c(!1),ye(!1),U&&ia("win"),yt();return}await new Promise(et=>setTimeout(et,1e3)),X("Click to see the next minute!"),We(!0)},yt=()=>{const W=K.level+1;W>n&&W<=Ho.length&&(a(W),localStorage.setItem("unlockedLevel",W.toString()))},Tt=async()=>{if(U&&ia("click"),Ae){V();return}if(ye(!0),c(!0),_("active"),t==="snail"){const W=Number(s.n),le=Number(s.a),Re=Number(s.b);if(isNaN(W)||isNaN(le)||isNaN(Re)||le<=Re)return;oe=W,me=0,w(`Help the snail escape from a ${W}m deep hole!`),A(`The snail can climb ${le}m up but slides ${Re}m down each night.`),X('Click "Help Climb!" to start!'),We(!0)}else if(t==="exam"){const W=Number(s.n),le=Number(s.m),Re=Number(s.a);if(isNaN(W)||isNaN(le)||isNaN(Re))return;S=0,T=0,w(`Collect ${le} pages in ${W} hours for the exam!`),A(`You can collect ${Re} pages per hour. Let's start!`),X('Click "Collect Pages!" to begin!'),We(!0)}else if(t==="icecream"){const W=Number(s.x),le=Number(s.y),Re=Number(s.n);if(isNaN(W)||isNaN(le)||isNaN(Re))return;B=W,D=0,w(`You have ${W}g of ice cream! It melts ${le}g per minute.`),A(`Watch your ice cream for ${Re} minutes. Will it survive?`),X('Click "Next Minute!" to start!'),We(!0)}};ae.useEffect(()=>{V()},[t,s]);const vn=(W,le)=>{o(Re=>({...Re,[W]:le}))};return E.jsxs("div",{className:`min-h-screen ${K.theme.bg} ${K.theme.text} font-sans selection:bg-yellow-200 overflow-hidden relative transition-colors duration-700`,children:[E.jsx(Rn,{children:O&&E.jsx(he.div,{initial:{opacity:0,scale:.5,y:-50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,y:-50},transition:{type:"spring",stiffness:300,damping:20},className:"fixed top-24 left-1/2 -translate-x-1/2 z-[100] bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full shadow-2xl border-4 border-white",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(he.div,{animate:{rotate:[0,360]},transition:{duration:.5},children:""}),E.jsx("span",{className:"font-black text-lg",children:"Story Mode Activated!"}),E.jsx(he.div,{animate:{scale:[1,1.3,1]},transition:{duration:.5,repeat:2},children:""})]})})}),E.jsxs(Rn,{mode:"wait",children:[t==="snail"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-white/40 animate-bounce duration-[3000ms]",children:E.jsx(Wh,{className:"w-20 h-20"})}),E.jsx("div",{className:"absolute top-20 right-20 text-yellow-400 animate-pulse",children:E.jsx(e1,{className:"w-24 h-24"})}),E.jsx("div",{className:"absolute bottom-10 right-10 text-white/40 animate-bounce duration-[4000ms]",children:E.jsx(Wh,{className:"w-16 h-16"})})]},"snail-bg"),t==="exam"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-purple-300/40 animate-pulse duration-[2000ms]",children:E.jsx(dr,{className:"w-12 h-12 fill-current"})}),E.jsx("div",{className:"absolute top-20 right-20 text-yellow-200 animate-pulse",children:E.jsx(Bj,{className:"w-24 h-24 fill-current"})}),E.jsx("div",{className:"absolute bottom-20 left-1/4 text-purple-300/20 animate-bounce duration-[5000ms]",children:E.jsx(dr,{className:"w-8 h-8 fill-current"})})]},"exam-bg"),t==="icecream"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-orange-300/40 animate-bounce duration-[3000ms]",children:E.jsx(e1,{className:"w-20 h-20"})}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 text-blue-400/20",children:E.jsx(l3,{className:"w-full h-32"})}),E.jsx("div",{className:"absolute top-40 right-10 text-orange-200/40 animate-pulse",children:E.jsx(Uo,{className:"w-16 h-16"})})]},"icecream-bg"),t==="mindist"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 left-10 text-green-300/20 animate-pulse",children:E.jsx(jj,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-20 right-10 text-green-300/20 animate-bounce",children:E.jsx(dr,{className:"w-16 h-16"})})]},"mindist-bg"),t==="maxmin"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-20 right-20 text-red-300/20 animate-pulse",children:E.jsx(dj,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-10 left-10 text-red-300/20 animate-bounce",children:E.jsx(Qw,{className:"w-16 h-16"})})]},"maxmin-bg"),t==="goodsub"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-10 right-10 text-sky-300/20 animate-pulse",children:E.jsx(Ku,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-20 left-20 text-sky-300/20 animate-bounce",children:E.jsx(Wh,{className:"w-24 h-24"})})]},"goodsub-bg"),t==="graph"&&E.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:E.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-zinc-300/10",children:E.jsx(Ww,{className:"w-[40rem] h-[40rem]"})})},"graph-bg"),t==="atleast"&&E.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[E.jsx("div",{className:"absolute top-20 left-1/4 text-yellow-300/20 animate-pulse",children:E.jsx(Jw,{className:"w-32 h-32"})}),E.jsx("div",{className:"absolute bottom-20 right-1/4 text-yellow-300/20 animate-bounce",children:E.jsx(dr,{className:"w-24 h-24"})})]},"atleast-bg")]}),E.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10 relative z-10",children:[E.jsx(he.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.5},className:"fixed bottom-8 right-8 z-[60]",children:E.jsxs(he.button,{onClick:q,whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},animate:{y:[0,-10,0],boxShadow:Y?["0 20px 40px rgba(168, 85, 247, 0.5)","0 25px 50px rgba(236, 72, 153, 0.6)","0 20px 40px rgba(168, 85, 247, 0.5)"]:["0 15px 30px rgba(147, 51, 234, 0.3)","0 20px 40px rgba(147, 51, 234, 0.4)","0 15px 30px rgba(147, 51, 234, 0.3)"]},transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},boxShadow:{duration:2,repeat:1/0}},className:`relative px-6 py-5 rounded-full border-4 shadow-2xl transition-all duration-300 flex items-center gap-3 ${Y?"bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 border-purple-300":"bg-gradient-to-r from-purple-600 to-pink-600 border-purple-400"}`,children:[E.jsx(he.div,{animate:{rotate:[0,-15,15,-15,0],scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatDelay:1},children:E.jsx(Uj,{className:"w-10 h-10 text-white drop-shadow-lg",strokeWidth:2.5})}),E.jsxs("div",{className:"hidden md:block text-left",children:[E.jsx("div",{className:"text-lg font-black text-white drop-shadow-md",children:Y?"Story ON":"Story Mode"}),E.jsx("div",{className:"text-xs font-bold text-white/90",children:Y?"Tap to exit":"Tap to start!"})]}),!Y&&E.jsx(he.div,{animate:{scale:[1,1.3,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0},className:"absolute -top-2 -right-2 text-3xl drop-shadow-lg",children:""}),Y&&E.jsx(he.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"absolute -top-2 -right-2 w-8 h-8 bg-green-400 rounded-full border-4 border-white shadow-lg flex items-center justify-center",children:E.jsx("span",{className:"text-lg font-black text-white",children:""})}),E.jsx(he.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full border-4 ${Y?"border-purple-300":"border-pink-400"}`})]})}),E.jsxs("header",{className:"mb-10 text-center relative",children:[E.jsx(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"absolute top-0 right-0",children:E.jsx(he.button,{onClick:()=>P(!U),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-4 rounded-2xl bg-white border-4 border-purple-100 shadow-lg hover:border-purple-300 hover:shadow-xl transition-all duration-300",children:U?E.jsx(i3,{className:"w-6 h-6 text-purple-600"}):E.jsx(r3,{className:"w-6 h-6 text-zinc-400"})})}),E.jsxs(he.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center gap-3 px-6 py-2 rounded-full bg-yellow-400 border-4 border-yellow-500 shadow-lg mb-6",children:[E.jsx(Sj,{className:"w-6 h-6 text-yellow-900"}),E.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-yellow-900",children:"CodeChef Learning Games!"})]}),E.jsxs("h1",{className:`text-5xl md:text-7xl font-black tracking-tight ${K.theme.text} mb-4 drop-shadow-sm`,children:[K.title," ",K.emoji]}),E.jsx("p",{className:`text-xl ${K.theme.text} opacity-70 font-bold max-w-2xl mx-auto`,children:K.description})]}),E.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:Ho.map(W=>{const le=W.level>n;return E.jsxs(he.button,{whileHover:le?{}:{scale:1.05},whileTap:le?{}:{scale:.95},onClick:()=>{le||(e(W.id),V())},className:`px-6 py-4 rounded-[2rem] border-4 font-black uppercase tracking-widest transition-all shadow-lg flex items-center gap-3 ${le?"bg-zinc-200 text-zinc-400 border-zinc-300 cursor-not-allowed grayscale":t===W.id?`${W.theme.accent} text-white border-white/20`:"bg-white text-zinc-600 border-zinc-100 hover:border-zinc-300"}`,children:[E.jsx("span",{className:"text-2xl",children:le?E.jsx(Pj,{className:"w-6 h-6"}):W.emoji}),E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsxs("span",{className:"text-[10px] opacity-50",children:["Level ",W.level]}),E.jsx("span",{children:W.title})]})]},W.id)})}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch",children:[E.jsx("div",{className:"lg:col-span-8 flex flex-col gap-6",children:E.jsx(Rn,{mode:"wait",children:Y?E.jsx(he.section,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.4,type:"spring",stiffness:200,damping:20},className:`bg-white rounded-[3rem] p-8 shadow-2xl border-8 ${K.theme.border} relative overflow-hidden flex-1 min-h-[650px]`,children:E.jsx(HU,{problemId:t,soundEnabled:U})},"story-mode"):E.jsxs(he.section,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.4,type:"spring",stiffness:200,damping:20},className:`bg-white rounded-[3rem] p-8 shadow-2xl border-8 ${K.theme.border} relative overflow-hidden flex-1 flex flex-col gap-10 min-h-[650px]`,children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border-2 border-blue-100",children:[E.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-blue-400 mb-2 flex items-center gap-2",children:[E.jsx(vj,{className:"w-4 h-4"})," What is GIVEN?"]}),E.jsx("ul",{className:"space-y-1",children:K.given.map((W,le)=>E.jsxs("li",{className:"text-sm font-bold text-blue-900 flex items-center gap-2",children:[E.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"})," ",W]},le))})]}),E.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl border-2 border-purple-100",children:[E.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-purple-400 mb-2 flex items-center gap-2",children:[E.jsx(Jw,{className:"w-4 h-4"})," What to FIND?"]}),E.jsx("p",{className:"text-sm font-bold text-purple-900",children:K.find})]})]}),E.jsxs("div",{className:"flex flex-col md:flex-row gap-10 flex-1",children:[E.jsxs("div",{className:"relative w-full md:w-64 h-64 md:h-full bg-stone-100 rounded-[2rem] border-x-[16px] border-stone-200 overflow-hidden shrink-0 shadow-inner flex flex-col items-center transition-colors duration-500",children:[t==="snail"&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#5D4037 2px, transparent 0)",backgroundSize:"30px 30px"}}),E.jsx("div",{className:"absolute top-0 left-0 right-0 h-10 bg-gradient-to-b from-green-500 to-transparent z-20 flex items-center justify-center",children:E.jsx(Uo,{className:"w-6 h-6 text-white/50 animate-pulse"})}),E.jsx(he.div,{animate:L,initial:{y:"100%"},className:"absolute left-1/2 -translate-x-1/2 w-20 h-20 flex items-center justify-center z-30",style:{bottom:0},children:E.jsxs("div",{className:"relative",children:[E.jsx(Rn,{mode:"wait",children:v==="active"&&E.jsxs(he.div,{initial:{opacity:0,y:10,scale:.8},animate:{opacity:1,y:-60,scale:1},exit:{opacity:0,scale:.8},className:"absolute left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-2xl shadow-xl border-2 border-blue-100 whitespace-nowrap z-50",children:[E.jsxs("span",{className:"text-xs font-black text-blue-600",children:["Day ",m,": Up ",s.a,"m, Down ",s.b,"m!"]}),E.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white border-b-2 border-r-2 border-blue-100 rotate-45"})]})}),E.jsx(he.span,{className:"text-7xl drop-shadow-2xl block",animate:v==="idle"?{y:[0,-8,0],rotate:[0,3,-3,0]}:{},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:""})]})}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-stone-300 z-20 flex items-center justify-center",children:E.jsx("p",{className:"text-[10px] font-black text-stone-600 uppercase tracking-tight px-2 text-center",children:x})})]}),t==="exam"&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"20px 20px"}}),E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-between py-6 px-4 relative z-10",children:[E.jsx("div",{className:"w-full flex justify-center gap-1",children:[...Array(Number(s.n))].map((W,le)=>E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-[10px] font-black ${le<m?"bg-purple-500 border-purple-600 text-white":"bg-white border-zinc-200 text-zinc-300"}`,children:le+1}),E.jsx("div",{className:"w-0.5 h-2 bg-zinc-200"})]},le))}),E.jsxs("div",{className:"relative flex flex-col items-center",children:[E.jsxs(he.div,{animate:L,className:"text-7xl drop-shadow-xl relative",children:["",E.jsxs(he.div,{animate:{scale:1+f*.05},className:"absolute -right-4 bottom-0 w-12 h-12 bg-amber-700 rounded-b-2xl rounded-t-lg border-2 border-amber-900 flex flex-wrap gap-0.5 p-1 items-end justify-center overflow-hidden shadow-lg",children:[[...Array(Math.min(15,f))].map((W,le)=>E.jsx("div",{className:"w-2 h-3 bg-white border border-zinc-300 rounded-sm"},le)),f>15&&E.jsxs("span",{className:"text-[8px] text-white font-black",children:["+",f-15]})]})]}),E.jsx("span",{className:"mt-4 text-[10px] font-black text-purple-900/40 uppercase tracking-widest",children:"Collecting Pages..."})]}),E.jsxs("div",{className:"w-full space-y-4",children:[E.jsxs("div",{className:"bg-white/90 p-4 rounded-[2rem] border-4 border-purple-100 shadow-xl relative",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase",children:["In the Bag: ",f]}),E.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase",children:["Need: ",s.m]})]}),E.jsxs("div",{className:"h-6 w-full bg-zinc-100 rounded-full overflow-hidden border-2 border-zinc-200 relative",children:[E.jsx(he.div,{animate:{width:`${Math.min(100,f/Number(s.m)*100)}%`},className:`h-full transition-colors duration-500 ${f>=Number(s.m)?"bg-green-500":"bg-purple-500"}`}),E.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-red-500 left-[100%] -translate-x-full shadow-sm"})]}),E.jsx("div",{className:"mt-4 text-center",children:E.jsx("p",{className:"text-xs font-black text-purple-600 uppercase leading-tight",children:x})})]}),E.jsxs("div",{className:"flex justify-center gap-2",children:[[...Array(Number(s.n))].map((W,le)=>E.jsx("div",{className:`px-2 py-1 rounded-md text-[10px] font-black ${le<m?"bg-purple-100 text-purple-600":"bg-zinc-50 text-zinc-300"}`,children:le<m?`+${s.a}`:"?"},le)),E.jsxs("span",{className:"text-[10px] font-black text-zinc-400",children:["= ",f]})]})]})]})]}),t==="icecream"&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-50 to-orange-100 opacity-50"}),E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-between py-6 px-4 relative z-10",children:[E.jsxs("div",{className:"flex flex-col items-center gap-1",children:[E.jsx("span",{className:"text-[10px] font-black text-orange-900/40 uppercase tracking-widest",children:"Ice Cream Pot"}),E.jsxs("div",{className:"flex gap-1 flex-wrap justify-center max-w-[140px] bg-white/40 p-2 rounded-xl border-2 border-orange-100",children:[[...Array(Math.max(0,Math.floor(f)))].map((W,le)=>E.jsx(he.div,{layout:!0,className:"w-4 h-4 bg-orange-200 rounded-full border border-orange-300 shadow-sm"},le)),f<=0&&E.jsx("span",{className:"text-[10px] font-black text-red-400",children:"EMPTY!"})]})]}),E.jsxs(he.div,{animate:L,className:"relative",children:[E.jsx("span",{className:"text-9xl drop-shadow-xl",children:""}),E.jsx(Rn,{children:v==="active"&&E.jsx(he.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,y:[0,50]},exit:{opacity:0},transition:{duration:.8,repeat:1/0},className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-blue-400 text-4xl",children:""})})]}),E.jsxs("div",{className:"w-full space-y-4",children:[E.jsxs("div",{className:"h-8 w-full bg-zinc-100 rounded-xl overflow-hidden border-2 border-zinc-200 relative",children:[E.jsx(he.div,{animate:{width:`${f/Number(s.x)*100}%`},className:"h-full bg-orange-500 shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)]"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsxs("span",{className:"text-[10px] font-black text-white mix-blend-difference uppercase tracking-widest",children:["Left: ",f.toFixed(0),"g / ",s.x,"g"]})})]}),E.jsx("div",{className:"bg-white/80 p-3 rounded-2xl border-2 border-orange-100 text-center shadow-sm",children:E.jsx("p",{className:"text-xs font-black text-orange-600 uppercase tracking-tight",children:x})})]})]})]}),t==="mindist"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-4",children:[E.jsx(he.div,{animate:L,className:"text-8xl",children:""}),E.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:s.arr.split(",").map((W,le)=>E.jsx(he.div,{animate:v==="active"?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},className:"w-8 h-8 bg-green-200 rounded-lg flex items-center justify-center font-black text-green-800 border-2 border-green-400",children:W},le))})]}),t==="maxmin"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-4",children:[E.jsx(he.div,{animate:L,className:"text-8xl",children:""}),E.jsx("div",{className:"w-full h-32 flex items-end justify-center gap-1",children:s.arr.split(",").map((W,le)=>E.jsx(he.div,{initial:{height:0},animate:{height:`${Number(W)/Math.max(...s.arr.split(",").map(Number),1)*100}%`},className:"flex-1 bg-red-400 rounded-t-lg border-x-2 border-red-600"},le))})]}),t==="goodsub"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-4",children:[E.jsx(he.div,{animate:L,className:"text-8xl",children:""}),E.jsx("div",{className:"flex gap-2",children:s.arr.split(",").map((W,le)=>E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-10 h-8 bg-sky-400 rounded-lg border-2 border-sky-600 flex items-center justify-center font-black text-white text-xs",children:W}),E.jsx("div",{className:"w-1 h-2 bg-zinc-400"})]},le))})]}),t==="graph"&&E.jsx("div",{className:"h-full w-full flex flex-col items-center justify-center p-4",children:E.jsxs(he.div,{animate:L,className:"relative w-full h-full flex items-center justify-center",children:[E.jsx(Ww,{className:"w-32 h-32 text-zinc-300"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsx("div",{className:"grid grid-cols-2 gap-8",children:s.arr.split(",").map((W,le)=>E.jsx("div",{className:"w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center text-white font-black text-xs",children:W},le))})})]})}),t==="atleast"&&E.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center p-4 gap-8",children:[E.jsxs(he.div,{animate:L,className:"text-8xl relative",children:["",E.jsx(he.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 border-4 border-yellow-400 rounded-full"})]}),E.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:s.arr.split(",").map((W,le)=>E.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-black border-2 ${W===s.k?"bg-yellow-400 border-yellow-600 text-yellow-900":"bg-zinc-100 border-zinc-200 text-zinc-400"}`,children:W},le))})]})]}),E.jsxs("div",{className:"flex-1 flex flex-col justify-between py-4",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-amber-50 p-6 rounded-[2rem] border-4 border-amber-100 shadow-sm relative",children:[E.jsx("div",{className:"absolute -left-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-amber-50 border-l-4 border-b-4 border-amber-100 rotate-45 hidden md:block"}),E.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-amber-500 mb-2 flex items-center gap-2",children:[E.jsx(Ku,{className:"w-4 h-4"})," Thinking Box"]}),E.jsxs("p",{className:"text-sm font-bold text-amber-900 leading-relaxed italic",children:['"',C||"Ready to start the thinking process?",'"']}),E.jsx("div",{className:"mt-4 pt-4 border-t border-amber-100",children:E.jsxs("span",{className:"text-[10px] font-black uppercase text-amber-400",children:["Concept: ",K.concept]})})]}),v==="finished"&&E.jsxs(he.div,{initial:{scale:0,rotate:-20,y:-20},animate:{scale:1,rotate:0,y:0},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-8 py-6 rounded-3xl font-black text-xl shadow-2xl border-4 border-yellow-500 text-center mb-6",children:[E.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[E.jsx(Uo,{className:"w-8 h-8"}),E.jsx("span",{children:"Concept Mastered!"}),E.jsx(Uo,{className:"w-8 h-8"})]}),E.jsx("div",{className:"text-sm font-bold opacity-90",children:t==="exam"?ie!=null&&ie.success?" Ready for the exam!":" Keep practicing!":" You got it!"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs(he.div,{whileHover:{scale:1.05,y:-5},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl p-6 shadow-xl relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -mr-8 -mt-8"}),E.jsxs("div",{className:"relative z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsx(e3,{className:"w-8 h-8 text-white/80"}),u&&E.jsx(he.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-green-400 rounded-full"})]}),E.jsx("div",{className:"text-5xl font-black text-white mb-1",children:m}),E.jsx("div",{className:"text-xs font-bold text-white/70 uppercase tracking-wider",children:t==="snail"?"Days":t==="exam"?"Hours":t==="icecream"?"Minutes":"Steps"})]})]}),E.jsxs(he.div,{whileHover:{scale:1.05,y:-5},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-3xl p-6 shadow-xl relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -mr-8 -mt-8"}),E.jsxs("div",{className:"relative z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t==="snail"?E.jsx(Qw,{className:"w-8 h-8 text-white/80"}):t==="exam"?E.jsx(mj,{className:"w-8 h-8 text-white/80"}):t==="icecream"?E.jsx(Ij,{className:"w-8 h-8 text-white/80"}):E.jsx(Ku,{className:"w-8 h-8 text-white/80"}),v==="finished"&&E.jsx(he.div,{initial:{scale:0},animate:{scale:1,rotate:360},className:"text-2xl",children:""})]}),E.jsx("div",{className:"text-5xl font-black text-white mb-1",children:t==="snail"?Math.max(0,Number(s.n)-f).toFixed(0):t==="mindist"||t==="maxmin"||t==="goodsub"||t==="graph"||t==="atleast"?"?":f.toFixed(0)}),E.jsx("div",{className:"text-xs font-bold text-white/70 uppercase tracking-wider",children:t==="snail"?"Height":t==="exam"?"Pages":t==="icecream"?"Grams":"Value"})]})]})]}),E.jsx("div",{className:`p-6 rounded-[2rem] border-4 transition-all duration-500 ${v==="active"?"bg-green-100 border-green-200":v==="finished"?"bg-yellow-100 border-yellow-200":"bg-zinc-50 border-zinc-100"}`,children:E.jsx("p",{className:`text-lg font-black ${K.theme.text} text-center`,children:v==="idle"?" Ready to Play?":v==="active"?" Watch it happen!":" Level Complete!"})})]}),E.jsxs("div",{className:"flex flex-col gap-4 mt-8",children:[E.jsx(Rn,{children:ke&&E.jsxs(he.button,{initial:{scale:0,y:20},animate:{scale:1,y:0},exit:{scale:0,y:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>se(),className:"w-full flex items-center justify-center gap-3 py-8 rounded-[2rem] text-2xl font-black uppercase tracking-widest bg-gradient-to-r from-yellow-400 to-orange-400 text-white shadow-2xl border-b-8 border-orange-600 hover:from-yellow-500 hover:to-orange-500 animate-pulse",children:[E.jsx(Ku,{className:"w-8 h-8"}),t==="snail"?" Help Climb!":t==="exam"?" Collect Pages!":t==="icecream"?" Next Minute!":"Continue!"]})}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs(he.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Tt,disabled:!!ie&&"error"in ie,className:`flex-1 flex items-center justify-center gap-3 py-6 rounded-[2rem] text-xl font-black uppercase tracking-widest transition-all shadow-xl border-b-8 ${Ae?"bg-red-500 text-white border-red-700 hover:bg-red-400":"bg-green-500 text-white border-green-700 hover:bg-green-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[Ae?E.jsx(qS,{className:"w-6 h-6"}):E.jsx(GS,{className:"w-6 h-6"}),Ae?" Restart":" Start Game!"]}),Ae&&E.jsx(he.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:V,className:"p-6 rounded-[2rem] bg-white border-4 border-zinc-100 text-zinc-300 hover:text-zinc-500 hover:border-zinc-300 transition-all shadow-lg",children:E.jsx(bj,{className:"w-8 h-8"})})]})]})]})]})]},"game-mode")})}),E.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[E.jsx(Rn,{mode:"wait",children:ie&&E.jsxs(he.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},className:"bg-gradient-to-br from-yellow-400 via-orange-400 to-yellow-500 rounded-[3rem] p-10 border-8 border-yellow-500 shadow-2xl relative overflow-hidden flex-1 flex flex-col justify-center text-center",children:[E.jsxs(he.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-0 opacity-10",children:[E.jsx(Uo,{className:"absolute top-10 right-10 w-24 h-24"}),E.jsx(dr,{className:"absolute bottom-10 left-10 w-32 h-32"}),E.jsx(n3,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-40 h-40"})]}),"error"in ie?E.jsxs("div",{className:"text-yellow-900 relative z-10",children:[E.jsx(he.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:E.jsx(gj,{className:"w-20 h-20 mx-auto mb-6"})}),E.jsx("h3",{className:"text-3xl font-black mb-4",children:"Oops!"}),E.jsx("p",{className:"font-bold leading-relaxed text-lg",children:ie.error})]}):E.jsxs("div",{className:"relative z-10 space-y-6",children:[E.jsxs(he.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5},children:[E.jsx("div",{className:"text-7xl mb-4",children:t==="exam"&&ie.success?"":t==="exam"&&!ie.success?"":t==="snail"?"":t==="icecream"?"":""}),E.jsx("div",{className:"text-6xl font-black leading-none text-white drop-shadow-2xl mb-2",children:t==="snail"?ie.operations:t==="exam"?ie.success?"READY!":"TRY AGAIN":t==="icecream"?`${ie.left}g`:t==="mindist"?ie.ops:t==="maxmin"?ie.diff:t==="goodsub"?ie.count:t==="graph"?ie.edges:ie.found?"FOUND!":"KEEP LOOKING"}),E.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] text-white/80",children:t==="snail"?"Days to Escape":t==="exam"?"Exam Status":t==="icecream"?"Remaining":t==="mindist"?"Swaps Needed":t==="maxmin"?"Range":t==="goodsub"?"Good Subarrays":t==="graph"?"Connections":"Search Result"})]}),v==="finished"&&E.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-center gap-2",children:[...Array(5)].map((W,le)=>E.jsx(he.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.5+le*.1,type:"spring"},children:E.jsx(dr,{className:"w-10 h-10 text-white fill-white drop-shadow-lg"})},le))}),E.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"bg-white/20 backdrop-blur-sm rounded-3xl p-6 border-4 border-white/30",children:E.jsx("div",{className:"text-base font-bold text-white leading-relaxed",children:t==="snail"?`Climbs ${s.a}m, slides ${s.b}m = ${Number(s.a)-Number(s.b)}m progress per day!`:t==="exam"?ie.success?`${s.a}  ${s.n} = ${Number(s.a)*Number(s.n)} pages. You're ready! `:`${s.a}  ${s.n} = ${Number(s.a)*Number(s.n)} pages. Need ${s.m}!`:t==="icecream"?`Started with ${s.x}g, melted ${s.y}g  ${s.n} minutes!`:"Great job! "})}),v==="finished"&&K.level<Ho.length&&E.jsxs(he.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:1.2},className:"bg-green-500 text-white px-6 py-4 rounded-2xl font-black text-lg shadow-xl border-4 border-green-600",children:[E.jsx(Lj,{className:"w-6 h-6 inline-block mr-2"}),"Next Level Unlocked!"]})]})]},JSON.stringify(ie)+t)}),E.jsxs(he.div,{whileHover:{scale:1.02},className:`bg-white rounded-[2rem] p-6 border-4 ${K.theme.border} shadow-lg`,children:[E.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[E.jsx(Cj,{className:`w-6 h-6 ${K.theme.text.replace("text-","text-")}`}),E.jsx("h3",{className:`font-black ${K.theme.text} uppercase tracking-widest`,children:"Learn This Problem"})]}),E.jsx("p",{className:`text-xs ${K.theme.text} opacity-60 font-bold mb-4`,children:"This game is based on a real CodeChef challenge. Want to see the problem statement?"}),E.jsxs("a",{href:K.link,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center gap-2 w-full py-3 ${K.theme.accent} text-white rounded-xl font-black text-xs uppercase tracking-widest hover:opacity-80 transition-all shadow-md border-b-4 border-black/20`,children:["CodeChef Challenge ",E.jsx(Ej,{className:"w-3 h-3"})]})]}),E.jsxs(he.button,{whileHover:{scale:1.02},onClick:()=>R(!I),className:`bg-white rounded-[2rem] p-6 border-4 ${K.theme.border} shadow-lg flex items-center justify-between group`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Zj,{className:`w-6 h-6 ${K.theme.text.replace("text-","text-")} opacity-40 group-hover:rotate-90 transition-transform duration-500`}),E.jsx("span",{className:`font-black ${K.theme.text} uppercase tracking-widest`,children:"Change the Game"})]}),E.jsx("div",{className:`w-4 h-4 rounded-full ${I?"bg-green-400":"bg-zinc-100"}`})]}),E.jsx(Rn,{children:I&&E.jsx(he.section,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:`bg-white rounded-[3rem] p-8 border-4 ${K.theme.border} shadow-xl space-y-6 overflow-hidden`,children:E.jsx("div",{className:"space-y-4",children:K.inputs.map(W=>E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:`text-xs font-black uppercase tracking-widest text-${W.color}-400 ml-2`,children:W.label}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:W.key==="arr"?"text":"number",value:s[W.key]||W.default,onChange:le=>vn(W.key,le.target.value),className:`w-full px-6 py-4 bg-${W.color}-50 border-4 border-${W.color}-100 rounded-2xl focus:outline-none focus:border-${W.color}-400 transition-all font-black text-2xl text-${W.color}-900`}),E.jsx("span",{className:`absolute right-4 top-1/2 -translate-y-1/2 font-black text-${W.color}-300`,children:W.unit})]})]},W.key))})})})]})]}),E.jsxs("footer",{className:`mt-16 pt-12 border-t ${K.theme.border} flex flex-col items-center gap-10`,children:[E.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 w-full justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4 px-6 py-3 rounded-full bg-white/50 border-4 border-white shadow-sm",children:[E.jsx(Oj,{className:"w-5 h-5 text-red-400 fill-red-400"}),E.jsx("span",{className:`text-sm font-black ${K.theme.text} opacity-50 uppercase tracking-widest`,children:"Made for Fun!"})]}),E.jsxs("div",{className:"flex flex-col items-center md:items-end gap-4",children:[E.jsxs("div",{className:"flex flex-col items-center md:items-end gap-1",children:[E.jsx("span",{className:`text-[10px] font-black ${K.theme.text} opacity-40 uppercase tracking-[0.2em]`,children:"A Project by"}),E.jsx("span",{className:`text-xs font-black ${K.theme.text} opacity-70 uppercase tracking-widest`,children:"AI Learning Labs @ Navgurukul"})]}),E.jsxs("div",{className:"flex flex-col items-center md:items-end gap-1",children:[E.jsx("span",{className:`text-[10px] font-black ${K.theme.text} opacity-40 uppercase tracking-[0.2em]`,children:"In Partnership with"}),E.jsx("span",{className:`text-xs font-black ${K.theme.text} opacity-70 uppercase tracking-widest`,children:"Anish Jadav Memorial Foundation"})]})]})]}),E.jsx("p",{className:`text-[10px] font-black ${K.theme.text} opacity-20 uppercase tracking-[0.4em] pb-10`,children:" 2026 Navgurukul"})]})]})]})}lO.createRoot(document.getElementById("root")).render(E.jsx(ae.StrictMode,{children:E.jsx(GU,{})}));
